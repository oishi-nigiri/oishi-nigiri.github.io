(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $l(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const qe={},Gn=[],as=()=>{},xh=()=>!1,Oo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ol=t=>t.startsWith("onUpdate:"),vt=Object.assign,Fl=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},tg=Object.prototype.hasOwnProperty,$e=(t,e)=>tg.call(t,e),ve=Array.isArray,Hn=t=>pi(t)==="[object Map]",ur=t=>pi(t)==="[object Set]",Fc=t=>pi(t)==="[object Date]",Te=t=>typeof t=="function",lt=t=>typeof t=="string",_s=t=>typeof t=="symbol",ze=t=>t!==null&&typeof t=="object",Nh=t=>(ze(t)||Te(t))&&Te(t.then)&&Te(t.catch),Mh=Object.prototype.toString,pi=t=>Mh.call(t),sg=t=>pi(t).slice(8,-1),$h=t=>pi(t)==="[object Object]",Ll=t=>lt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fr=$l(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fo=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},ng=/-\w/g,is=Fo(t=>t.replace(ng,e=>e.slice(1).toUpperCase())),rg=/\B([A-Z])/g,Sn=Fo(t=>t.replace(rg,"-$1").toLowerCase()),Lo=Fo(t=>t.charAt(0).toUpperCase()+t.slice(1)),Pa=Fo(t=>t?`on${Lo(t)}`:""),Xs=(t,e)=>!Object.is(t,e),eo=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Oh=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Uo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Lc;const Bo=()=>Lc||(Lc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ul(t){if(ve(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=lt(n)?lg(n):Ul(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(lt(t)||ze(t))return t}const ig=/;(?![^(]*\))/g,og=/:([^]+)/,ag=/\/\*[^]*?\*\//g;function lg(t){const e={};return t.replace(ag,"").split(ig).forEach(s=>{if(s){const n=s.split(og);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function je(t){let e="";if(lt(t))e=t;else if(ve(t))for(let s=0;s<t.length;s++){const n=je(t[s]);n&&(e+=n+" ")}else if(ze(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const ug="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",cg=$l(ug);function Fh(t){return!!t||t===""}function dg(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=mi(t[n],e[n]);return s}function mi(t,e){if(t===e)return!0;let s=Fc(t),n=Fc(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=_s(t),n=_s(e),s||n)return t===e;if(s=ve(t),n=ve(e),s||n)return s&&n?dg(t,e):!1;if(s=ze(t),n=ze(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const a in t){const u=t.hasOwnProperty(a),c=e.hasOwnProperty(a);if(u&&!c||!u&&c||!mi(t[a],e[a]))return!1}}return String(t)===String(e)}function Bl(t,e){return t.findIndex(s=>mi(s,e))}const Lh=t=>!!(t&&t.__v_isRef===!0),j=t=>lt(t)?t:t==null?"":ve(t)||ze(t)&&(t.toString===Mh||!Te(t.toString))?Lh(t)?j(t.value):JSON.stringify(t,Uh,2):String(t),Uh=(t,e)=>Lh(e)?Uh(t,e.value):Hn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[ka(n,i)+" =>"]=r,s),{})}:ur(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>ka(s))}:_s(e)?ka(e):ze(e)&&!ve(e)&&!$h(e)?String(e):e,ka=(t,e="")=>{var s;return _s(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class hg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zt,!e&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=zt;try{return zt=this,e()}finally{zt=s}}}on(){++this._on===1&&(this.prevScope=zt,zt=this)}off(){this._on>0&&--this._on===0&&(zt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function fg(){return zt}let Qe;const Va=new WeakSet;class Bh{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Va.has(this)&&(Va.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||qh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Uc(this),Gh(this);const e=Qe,s=ls;Qe=this,ls=!0;try{return this.fn()}finally{Hh(this),Qe=e,ls=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Gl(e);this.deps=this.depsTail=void 0,Uc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Va.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Xa(this)&&this.run()}get dirty(){return Xa(this)}}let jh=0,Lr,Ur;function qh(t,e=!1){if(t.flags|=8,e){t.next=Ur,Ur=t;return}t.next=Lr,Lr=t}function jl(){jh++}function ql(){if(--jh>0)return;if(Ur){let e=Ur;for(Ur=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Lr;){let e=Lr;for(Lr=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Gh(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Hh(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),Gl(n),pg(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function Xa(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(zh(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function zh(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Jr)||(t.globalVersion=Jr,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Xa(t))))return;t.flags|=2;const e=t.dep,s=Qe,n=ls;Qe=t,ls=!0;try{Gh(t);const r=t.fn(t._value);(e.version===0||Xs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Qe=s,ls=n,Hh(t),t.flags&=-3}}function Gl(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)Gl(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function pg(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let ls=!0;const Kh=[];function Ds(){Kh.push(ls),ls=!1}function xs(){const t=Kh.pop();ls=t===void 0?!0:t}function Uc(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Qe;Qe=void 0;try{e()}finally{Qe=s}}}let Jr=0;class mg{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Hl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Qe||!ls||Qe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Qe)s=this.activeLink=new mg(Qe,this),Qe.deps?(s.prevDep=Qe.depsTail,Qe.depsTail.nextDep=s,Qe.depsTail=s):Qe.deps=Qe.depsTail=s,Wh(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Qe.depsTail,s.nextDep=void 0,Qe.depsTail.nextDep=s,Qe.depsTail=s,Qe.deps===s&&(Qe.deps=n)}return s}trigger(e){this.version++,Jr++,this.notify(e)}notify(e){jl();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{ql()}}}function Wh(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Wh(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const Za=new WeakMap,bn=Symbol(""),el=Symbol(""),Xr=Symbol("");function Dt(t,e,s){if(ls&&Qe){let n=Za.get(t);n||Za.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new Hl),r.map=n,r.key=s),r.track()}}function Ss(t,e,s,n,r,i){const a=Za.get(t);if(!a){Jr++;return}const u=c=>{c&&c.trigger()};if(jl(),e==="clear")a.forEach(u);else{const c=ve(t),d=c&&Ll(s);if(c&&s==="length"){const f=Number(n);a.forEach((m,v)=>{(v==="length"||v===Xr||!_s(v)&&v>=f)&&u(m)})}else switch((s!==void 0||a.has(void 0))&&u(a.get(s)),d&&u(a.get(Xr)),e){case"add":c?d&&u(a.get("length")):(u(a.get(bn)),Hn(t)&&u(a.get(el)));break;case"delete":c||(u(a.get(bn)),Hn(t)&&u(a.get(el)));break;case"set":Hn(t)&&u(a.get(bn));break}}ql()}function On(t){const e=Me(t);return e===t?e:(Dt(e,"iterate",Xr),ns(t)?e:e.map(us))}function jo(t){return Dt(t=Me(t),"iterate",Xr),t}function zs(t,e){return Ns(t)?Tn(t)?Yn(us(e)):Yn(e):us(e)}const gg={__proto__:null,[Symbol.iterator](){return Da(this,Symbol.iterator,t=>zs(this,t))},concat(...t){return On(this).concat(...t.map(e=>ve(e)?On(e):e))},entries(){return Da(this,"entries",t=>(t[1]=zs(this,t[1]),t))},every(t,e){return Is(this,"every",t,e,void 0,arguments)},filter(t,e){return Is(this,"filter",t,e,s=>s.map(n=>zs(this,n)),arguments)},find(t,e){return Is(this,"find",t,e,s=>zs(this,s),arguments)},findIndex(t,e){return Is(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Is(this,"findLast",t,e,s=>zs(this,s),arguments)},findLastIndex(t,e){return Is(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Is(this,"forEach",t,e,void 0,arguments)},includes(...t){return xa(this,"includes",t)},indexOf(...t){return xa(this,"indexOf",t)},join(t){return On(this).join(t)},lastIndexOf(...t){return xa(this,"lastIndexOf",t)},map(t,e){return Is(this,"map",t,e,void 0,arguments)},pop(){return Rr(this,"pop")},push(...t){return Rr(this,"push",t)},reduce(t,...e){return Bc(this,"reduce",t,e)},reduceRight(t,...e){return Bc(this,"reduceRight",t,e)},shift(){return Rr(this,"shift")},some(t,e){return Is(this,"some",t,e,void 0,arguments)},splice(...t){return Rr(this,"splice",t)},toReversed(){return On(this).toReversed()},toSorted(t){return On(this).toSorted(t)},toSpliced(...t){return On(this).toSpliced(...t)},unshift(...t){return Rr(this,"unshift",t)},values(){return Da(this,"values",t=>zs(this,t))}};function Da(t,e,s){const n=jo(t),r=n[e]();return n!==t&&!ns(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=s(i.value)),i}),r}const vg=Array.prototype;function Is(t,e,s,n,r,i){const a=jo(t),u=a!==t&&!ns(t),c=a[e];if(c!==vg[e]){const m=c.apply(t,i);return u?us(m):m}let d=s;a!==t&&(u?d=function(m,v){return s.call(this,zs(t,m),v,t)}:s.length>2&&(d=function(m,v){return s.call(this,m,v,t)}));const f=c.call(a,d,n);return u&&r?r(f):f}function Bc(t,e,s,n){const r=jo(t);let i=s;return r!==t&&(ns(t)?s.length>3&&(i=function(a,u,c){return s.call(this,a,u,c,t)}):i=function(a,u,c){return s.call(this,a,zs(t,u),c,t)}),r[e](i,...n)}function xa(t,e,s){const n=Me(t);Dt(n,"iterate",Xr);const r=n[e](...s);return(r===-1||r===!1)&&Wl(s[0])?(s[0]=Me(s[0]),n[e](...s)):r}function Rr(t,e,s=[]){Ds(),jl();const n=Me(t)[e].apply(t,s);return ql(),xs(),n}const _g=$l("__proto__,__v_isRef,__isVue"),Qh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_s));function yg(t){_s(t)||(t=String(t));const e=Me(this);return Dt(e,"has",t),e.hasOwnProperty(t)}class Yh{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?Pg:ef:i?Zh:Xh).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=ve(e);if(!r){let c;if(a&&(c=gg[s]))return c;if(s==="hasOwnProperty")return yg}const u=Reflect.get(e,s,$t(e)?e:n);if((_s(s)?Qh.has(s):_g(s))||(r||Dt(e,"get",s),i))return u;if($t(u)){const c=a&&Ll(s)?u:u.value;return r&&ze(c)?sl(c):c}return ze(u)?r?sl(u):qo(u):u}}class Jh extends Yh{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];const a=ve(e)&&Ll(s);if(!this._isShallow){const d=Ns(i);if(!ns(n)&&!Ns(n)&&(i=Me(i),n=Me(n)),!a&&$t(i)&&!$t(n))return d||(i.value=n),!0}const u=a?Number(s)<e.length:$e(e,s),c=Reflect.set(e,s,n,$t(e)?e:r);return e===Me(r)&&(u?Xs(n,i)&&Ss(e,"set",s,n):Ss(e,"add",s,n)),c}deleteProperty(e,s){const n=$e(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&Ss(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!_s(s)||!Qh.has(s))&&Dt(e,"has",s),n}ownKeys(e){return Dt(e,"iterate",ve(e)?"length":bn),Reflect.ownKeys(e)}}class Eg extends Yh{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const bg=new Jh,Tg=new Eg,Ag=new Jh(!0);const tl=t=>t,ji=t=>Reflect.getPrototypeOf(t);function Ig(t,e,s){return function(...n){const r=this.__v_raw,i=Me(r),a=Hn(i),u=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,d=r[t](...n),f=s?tl:e?Yn:us;return!e&&Dt(i,"iterate",c?el:bn),{next(){const{value:m,done:v}=d.next();return v?{value:m,done:v}:{value:u?[f(m[0]),f(m[1])]:f(m),done:v}},[Symbol.iterator](){return this}}}}function qi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function wg(t,e){const s={get(r){const i=this.__v_raw,a=Me(i),u=Me(r);t||(Xs(r,u)&&Dt(a,"get",r),Dt(a,"get",u));const{has:c}=ji(a),d=e?tl:t?Yn:us;if(c.call(a,r))return d(i.get(r));if(c.call(a,u))return d(i.get(u));i!==a&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Dt(Me(r),"iterate",bn),r.size},has(r){const i=this.__v_raw,a=Me(i),u=Me(r);return t||(Xs(r,u)&&Dt(a,"has",r),Dt(a,"has",u)),r===u?i.has(r):i.has(r)||i.has(u)},forEach(r,i){const a=this,u=a.__v_raw,c=Me(u),d=e?tl:t?Yn:us;return!t&&Dt(c,"iterate",bn),u.forEach((f,m)=>r.call(i,d(f),d(m),a))}};return vt(s,t?{add:qi("add"),set:qi("set"),delete:qi("delete"),clear:qi("clear")}:{add(r){!e&&!ns(r)&&!Ns(r)&&(r=Me(r));const i=Me(this);return ji(i).has.call(i,r)||(i.add(r),Ss(i,"add",r,r)),this},set(r,i){!e&&!ns(i)&&!Ns(i)&&(i=Me(i));const a=Me(this),{has:u,get:c}=ji(a);let d=u.call(a,r);d||(r=Me(r),d=u.call(a,r));const f=c.call(a,r);return a.set(r,i),d?Xs(i,f)&&Ss(a,"set",r,i):Ss(a,"add",r,i),this},delete(r){const i=Me(this),{has:a,get:u}=ji(i);let c=a.call(i,r);c||(r=Me(r),c=a.call(i,r)),u&&u.call(i,r);const d=i.delete(r);return c&&Ss(i,"delete",r,void 0),d},clear(){const r=Me(this),i=r.size!==0,a=r.clear();return i&&Ss(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Ig(r,t,e)}),s}function zl(t,e){const s=wg(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get($e(s,r)&&r in n?s:n,r,i)}const Cg={get:zl(!1,!1)},Sg={get:zl(!1,!0)},Rg={get:zl(!0,!1)};const Xh=new WeakMap,Zh=new WeakMap,ef=new WeakMap,Pg=new WeakMap;function kg(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Vg(t){return t.__v_skip||!Object.isExtensible(t)?0:kg(sg(t))}function qo(t){return Ns(t)?t:Kl(t,!1,bg,Cg,Xh)}function tf(t){return Kl(t,!1,Ag,Sg,Zh)}function sl(t){return Kl(t,!0,Tg,Rg,ef)}function Kl(t,e,s,n,r){if(!ze(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Vg(t);if(i===0)return t;const a=r.get(t);if(a)return a;const u=new Proxy(t,i===2?n:s);return r.set(t,u),u}function Tn(t){return Ns(t)?Tn(t.__v_raw):!!(t&&t.__v_isReactive)}function Ns(t){return!!(t&&t.__v_isReadonly)}function ns(t){return!!(t&&t.__v_isShallow)}function Wl(t){return t?!!t.__v_raw:!1}function Me(t){const e=t&&t.__v_raw;return e?Me(e):t}function Dg(t){return!$e(t,"__v_skip")&&Object.isExtensible(t)&&Oh(t,"__v_skip",!0),t}const us=t=>ze(t)?qo(t):t,Yn=t=>ze(t)?sl(t):t;function $t(t){return t?t.__v_isRef===!0:!1}function re(t){return sf(t,!1)}function xg(t){return sf(t,!0)}function sf(t,e){return $t(t)?t:new Ng(t,e)}class Ng{constructor(e,s){this.dep=new Hl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:Me(e),this._value=s?e:us(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||ns(e)||Ns(e);e=n?e:Me(e),Xs(e,s)&&(this._rawValue=e,this._value=n?e:us(e),this.dep.trigger())}}function pt(t){return $t(t)?t.value:t}const Mg={get:(t,e,s)=>e==="__v_raw"?t:pt(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return $t(r)&&!$t(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function nf(t){return Tn(t)?t:new Proxy(t,Mg)}class $g{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Hl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Jr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Qe!==this)return qh(this,!0),!0}get value(){const e=this.dep.track();return zh(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Og(t,e,s=!1){let n,r;return Te(t)?n=t:(n=t.get,r=t.set),new $g(n,r,s)}const Gi={},ho=new WeakMap;let vn;function Fg(t,e=!1,s=vn){if(s){let n=ho.get(s);n||ho.set(s,n=[]),n.push(t)}}function Lg(t,e,s=qe){const{immediate:n,deep:r,once:i,scheduler:a,augmentJob:u,call:c}=s,d=z=>r?z:ns(z)||r===!1||r===0?Rs(z,1):Rs(z);let f,m,v,E,S=!1,k=!1;if($t(t)?(m=()=>t.value,S=ns(t)):Tn(t)?(m=()=>d(t),S=!0):ve(t)?(k=!0,S=t.some(z=>Tn(z)||ns(z)),m=()=>t.map(z=>{if($t(z))return z.value;if(Tn(z))return d(z);if(Te(z))return c?c(z,2):z()})):Te(t)?e?m=c?()=>c(t,2):t:m=()=>{if(v){Ds();try{v()}finally{xs()}}const z=vn;vn=f;try{return c?c(t,3,[E]):t(E)}finally{vn=z}}:m=as,e&&r){const z=m,ee=r===!0?1/0:r;m=()=>Rs(z(),ee)}const M=fg(),L=()=>{f.stop(),M&&M.active&&Fl(M.effects,f)};if(i&&e){const z=e;e=(...ee)=>{z(...ee),L()}}let x=k?new Array(t.length).fill(Gi):Gi;const $=z=>{if(!(!(f.flags&1)||!f.dirty&&!z))if(e){const ee=f.run();if(r||S||(k?ee.some((N,g)=>Xs(N,x[g])):Xs(ee,x))){v&&v();const N=vn;vn=f;try{const g=[ee,x===Gi?void 0:k&&x[0]===Gi?[]:x,E];x=ee,c?c(e,3,g):e(...g)}finally{vn=N}}}else f.run()};return u&&u($),f=new Bh(m),f.scheduler=a?()=>a($,!1):$,E=z=>Fg(z,!1,f),v=f.onStop=()=>{const z=ho.get(f);if(z){if(c)c(z,4);else for(const ee of z)ee();ho.delete(f)}},e?n?$(!0):x=f.run():a?a($.bind(null,!0),!0):f.run(),L.pause=f.pause.bind(f),L.resume=f.resume.bind(f),L.stop=L,L}function Rs(t,e=1/0,s){if(e<=0||!ze(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,$t(t))Rs(t.value,e,s);else if(ve(t))for(let n=0;n<t.length;n++)Rs(t[n],e,s);else if(ur(t)||Hn(t))t.forEach(n=>{Rs(n,e,s)});else if($h(t)){for(const n in t)Rs(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Rs(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gi(t,e,s,n){try{return n?t(...n):t()}catch(r){Go(r,e,s)}}function ys(t,e,s,n){if(Te(t)){const r=gi(t,e,s,n);return r&&Nh(r)&&r.catch(i=>{Go(i,e,s)}),r}if(ve(t)){const r=[];for(let i=0;i<t.length;i++)r.push(ys(t[i],e,s,n));return r}}function Go(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||qe;if(e){let u=e.parent;const c=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;u;){const f=u.ec;if(f){for(let m=0;m<f.length;m++)if(f[m](t,c,d)===!1)return}u=u.parent}if(i){Ds(),gi(i,null,10,[t,c,d]),xs();return}}Ug(t,s,r,n,a)}function Ug(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const jt=[];let ps=-1;const zn=[];let Ks=null,Ln=0;const rf=Promise.resolve();let fo=null;function Ql(t){const e=fo||rf;return t?e.then(this?t.bind(this):t):e}function Bg(t){let e=ps+1,s=jt.length;for(;e<s;){const n=e+s>>>1,r=jt[n],i=Zr(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function Yl(t){if(!(t.flags&1)){const e=Zr(t),s=jt[jt.length-1];!s||!(t.flags&2)&&e>=Zr(s)?jt.push(t):jt.splice(Bg(e),0,t),t.flags|=1,of()}}function of(){fo||(fo=rf.then(lf))}function jg(t){ve(t)?zn.push(...t):Ks&&t.id===-1?Ks.splice(Ln+1,0,t):t.flags&1||(zn.push(t),t.flags|=1),of()}function jc(t,e,s=ps+1){for(;s<jt.length;s++){const n=jt[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;jt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function af(t){if(zn.length){const e=[...new Set(zn)].sort((s,n)=>Zr(s)-Zr(n));if(zn.length=0,Ks){Ks.push(...e);return}for(Ks=e,Ln=0;Ln<Ks.length;Ln++){const s=Ks[Ln];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ks=null,Ln=0}}const Zr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function lf(t){const e=as;try{for(ps=0;ps<jt.length;ps++){const s=jt[ps];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),gi(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;ps<jt.length;ps++){const s=jt[ps];s&&(s.flags&=-2)}ps=-1,jt.length=0,af(),fo=null,(jt.length||zn.length)&&lf()}}let Jt=null,uf=null;function po(t){const e=Jt;return Jt=t,uf=t&&t.type.__scopeId||null,e}function qg(t,e=Jt,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&vo(-1);const i=po(e);let a;try{a=t(...r)}finally{po(i),n._d&&vo(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Ie(t,e){if(Jt===null)return t;const s=Wo(Jt),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,a,u,c=qe]=e[r];i&&(Te(i)&&(i={mounted:i,updated:i}),i.deep&&Rs(a),n.push({dir:i,instance:s,value:a,oldValue:void 0,arg:u,modifiers:c}))}return t}function pn(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let a=0;a<r.length;a++){const u=r[a];i&&(u.oldValue=i[a].value);let c=u.dir[n];c&&(Ds(),ys(c,s,8,[t.el,u,t,e]),xs())}}function to(t,e){if(Nt){let s=Nt.provides;const n=Nt.parent&&Nt.parent.provides;n===s&&(s=Nt.provides=Object.create(n)),s[t]=e}}function Ps(t,e,s=!1){const n=Gv();if(n||Kn){let r=Kn?Kn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&Te(e)?e.call(n&&n.proxy):e}}const Gg=Symbol.for("v-scx"),Hg=()=>Ps(Gg);function es(t,e,s){return cf(t,e,s)}function cf(t,e,s=qe){const{immediate:n,deep:r,flush:i,once:a}=s,u=vt({},s),c=e&&n||!e&&i!=="post";let d;if(ti){if(i==="sync"){const E=Hg();d=E.__watcherHandles||(E.__watcherHandles=[])}else if(!c){const E=()=>{};return E.stop=as,E.resume=as,E.pause=as,E}}const f=Nt;u.call=(E,S,k)=>ys(E,f,S,k);let m=!1;i==="post"?u.scheduler=E=>{Ut(E,f&&f.suspense)}:i!=="sync"&&(m=!0,u.scheduler=(E,S)=>{S?E():Yl(E)}),u.augmentJob=E=>{e&&(E.flags|=4),m&&(E.flags|=2,f&&(E.id=f.uid,E.i=f))};const v=Lg(t,e,u);return ti&&(d?d.push(v):c&&v()),v}function zg(t,e,s){const n=this.proxy,r=lt(t)?t.includes(".")?df(n,t):()=>n[t]:t.bind(n,n);let i;Te(e)?i=e:(i=e.handler,s=e);const a=vi(this),u=cf(r,i.bind(n),s);return a(),u}function df(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const hf=Symbol("_vte"),Kg=t=>t.__isTeleport,Br=t=>t&&(t.disabled||t.disabled===""),qc=t=>t&&(t.defer||t.defer===""),Gc=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Hc=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,nl=(t,e)=>{const s=t&&t.to;return lt(s)?e?e(s):null:s},ff={name:"Teleport",__isTeleport:!0,process(t,e,s,n,r,i,a,u,c,d){const{mc:f,pc:m,pbc:v,o:{insert:E,querySelector:S,createText:k,createComment:M}}=d,L=Br(e.props);let{shapeFlag:x,children:$,dynamicChildren:z}=e;if(t==null){const ee=e.el=k(""),N=e.anchor=k("");E(ee,s,n),E(N,s,n);const g=(A,w)=>{x&16&&f($,A,w,r,i,a,u,c)},y=()=>{const A=e.target=nl(e.props,S),w=pf(A,e,k,E);A&&(a!=="svg"&&Gc(A)?a="svg":a!=="mathml"&&Hc(A)&&(a="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(A),L||(g(A,w),so(e,!1)))};L&&(g(s,N),so(e,!0)),qc(e.props)?(e.el.__isMounted=!1,Ut(()=>{y(),delete e.el.__isMounted},i)):y()}else{if(qc(e.props)&&t.el.__isMounted===!1){Ut(()=>{ff.process(t,e,s,n,r,i,a,u,c,d)},i);return}e.el=t.el,e.targetStart=t.targetStart;const ee=e.anchor=t.anchor,N=e.target=t.target,g=e.targetAnchor=t.targetAnchor,y=Br(t.props),A=y?s:N,w=y?ee:g;if(a==="svg"||Gc(N)?a="svg":(a==="mathml"||Hc(N))&&(a="mathml"),z?(v(t.dynamicChildren,z,A,r,i,a,u),su(t,e,!0)):c||m(t,e,A,w,r,i,a,u,!1),L)y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Hi(e,s,ee,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const b=e.target=nl(e.props,S);b&&Hi(e,b,null,d,0)}else y&&Hi(e,N,g,d,1);so(e,L)}},remove(t,e,s,{um:n,o:{remove:r}},i){const{shapeFlag:a,children:u,anchor:c,targetStart:d,targetAnchor:f,target:m,props:v}=t;if(m&&(r(d),r(f)),i&&r(c),a&16){const E=i||!Br(v);for(let S=0;S<u.length;S++){const k=u[S];n(k,e,s,E,!!k.dynamicChildren)}}},move:Hi,hydrate:Wg};function Hi(t,e,s,{o:{insert:n},m:r},i=2){i===0&&n(t.targetAnchor,e,s);const{el:a,anchor:u,shapeFlag:c,children:d,props:f}=t,m=i===2;if(m&&n(a,e,s),(!m||Br(f))&&c&16)for(let v=0;v<d.length;v++)r(d[v],e,s,2);m&&n(u,e,s)}function Wg(t,e,s,n,r,i,{o:{nextSibling:a,parentNode:u,querySelector:c,insert:d,createText:f}},m){function v(k,M,L,x){M.anchor=m(a(k),M,u(k),s,n,r,i),M.targetStart=L,M.targetAnchor=x}const E=e.target=nl(e.props,c),S=Br(e.props);if(E){const k=E._lpa||E.firstChild;if(e.shapeFlag&16)if(S)v(t,e,k,k&&a(k));else{e.anchor=a(t);let M=k;for(;M;){if(M&&M.nodeType===8){if(M.data==="teleport start anchor")e.targetStart=M;else if(M.data==="teleport anchor"){e.targetAnchor=M,E._lpa=e.targetAnchor&&a(e.targetAnchor);break}}M=a(M)}e.targetAnchor||pf(E,e,f,d),m(k&&a(k),e,E,s,n,r,i)}so(e,S)}else S&&e.shapeFlag&16&&v(t,e,t,a(t));return e.anchor&&a(e.anchor)}const Ls=ff;function so(t,e){const s=t.ctx;if(s&&s.ut){let n,r;for(e?(n=t.el,r=t.anchor):(n=t.targetStart,r=t.targetAnchor);n&&n!==r;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function pf(t,e,s,n){const r=e.targetStart=s(""),i=e.targetAnchor=s("");return r[hf]=i,t&&(n(r,t),n(i,t)),i}const Qg=Symbol("_leaveCb");function Jl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Jl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function mf(t,e){return Te(t)?(()=>vt({name:t.name},e,{setup:t}))():t}function gf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const mo=new WeakMap;function jr(t,e,s,n,r=!1){if(ve(t)){t.forEach((S,k)=>jr(S,e&&(ve(e)?e[k]:e),s,n,r));return}if(qr(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&jr(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?Wo(n.component):n.el,a=r?null:i,{i:u,r:c}=t,d=e&&e.r,f=u.refs===qe?u.refs={}:u.refs,m=u.setupState,v=Me(m),E=m===qe?xh:S=>$e(v,S);if(d!=null&&d!==c){if(zc(e),lt(d))f[d]=null,E(d)&&(m[d]=null);else if($t(d)){d.value=null;const S=e;S.k&&(f[S.k]=null)}}if(Te(c))gi(c,u,12,[a,f]);else{const S=lt(c),k=$t(c);if(S||k){const M=()=>{if(t.f){const L=S?E(c)?m[c]:f[c]:c.value;if(r)ve(L)&&Fl(L,i);else if(ve(L))L.includes(i)||L.push(i);else if(S)f[c]=[i],E(c)&&(m[c]=f[c]);else{const x=[i];c.value=x,t.k&&(f[t.k]=x)}}else S?(f[c]=a,E(c)&&(m[c]=a)):k&&(c.value=a,t.k&&(f[t.k]=a))};if(a){const L=()=>{M(),mo.delete(t)};L.id=-1,mo.set(t,L),Ut(L,s)}else zc(t),M()}}}function zc(t){const e=mo.get(t);e&&(e.flags|=8,mo.delete(t))}Bo().requestIdleCallback;Bo().cancelIdleCallback;const qr=t=>!!t.type.__asyncLoader,vf=t=>t.type.__isKeepAlive;function Yg(t,e){_f(t,"a",e)}function Jg(t,e){_f(t,"da",e)}function _f(t,e,s=Nt){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ho(e,n,s),s){let r=s.parent;for(;r&&r.parent;)vf(r.parent.vnode)&&Xg(n,e,s,r),r=r.parent}}function Xg(t,e,s,n){const r=Ho(e,t,n,!0);Xl(()=>{Fl(n[e],r)},s)}function Ho(t,e,s=Nt,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...a)=>{Ds();const u=vi(s),c=ys(e,s,t,a);return u(),xs(),c});return n?r.unshift(i):r.push(i),i}}const Us=t=>(e,s=Nt)=>{(!ti||t==="sp")&&Ho(t,(...n)=>e(...n),s)},Zg=Us("bm"),Ct=Us("m"),ev=Us("bu"),tv=Us("u"),sv=Us("bum"),Xl=Us("um"),nv=Us("sp"),rv=Us("rtg"),iv=Us("rtc");function ov(t,e=Nt){Ho("ec",t,e)}const yf="components";function av(t,e){return uv(yf,t,!0,e)||t}const lv=Symbol.for("v-ndc");function uv(t,e,s=!0,n=!1){const r=Jt||Nt;if(r){const i=r.type;if(t===yf){const u=Qv(i,!1);if(u&&(u===e||u===is(e)||u===Lo(is(e))))return i}const a=Kc(r[t]||i[t],e)||Kc(r.appContext[t],e);return!a&&n?i:a}}function Kc(t,e){return t&&(t[e]||t[is(e)]||t[Lo(is(e))])}function Ye(t,e,s,n){let r;const i=s&&s[n],a=ve(t);if(a||lt(t)){const u=a&&Tn(t);let c=!1,d=!1;u&&(c=!ns(t),d=Ns(t),t=jo(t)),r=new Array(t.length);for(let f=0,m=t.length;f<m;f++)r[f]=e(c?d?Yn(us(t[f])):us(t[f]):t[f],f,void 0,i&&i[f])}else if(typeof t=="number"){r=new Array(t);for(let u=0;u<t;u++)r[u]=e(u+1,u,void 0,i&&i[u])}else if(ze(t))if(t[Symbol.iterator])r=Array.from(t,(u,c)=>e(u,c,void 0,i&&i[c]));else{const u=Object.keys(t);r=new Array(u.length);for(let c=0,d=u.length;c<d;c++){const f=u[c];r[c]=e(t[f],f,c,i&&i[c])}}else r=[];return s&&(s[n]=r),r}const rl=t=>t?$f(t)?Wo(t):rl(t.parent):null,Gr=vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>rl(t.parent),$root:t=>rl(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Zl(t),$forceUpdate:t=>t.f||(t.f=()=>{Yl(t.update)}),$nextTick:t=>t.n||(t.n=Ql.bind(t.proxy)),$watch:t=>zg.bind(t)}),Na=(t,e)=>t!==qe&&!t.__isScriptSetup&&$e(t,e),cv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:a,type:u,appContext:c}=t;if(e[0]!=="$"){const v=a[e];if(v!==void 0)switch(v){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(Na(n,e))return a[e]=1,n[e];if(r!==qe&&$e(r,e))return a[e]=2,r[e];if($e(i,e))return a[e]=3,i[e];if(s!==qe&&$e(s,e))return a[e]=4,s[e];il&&(a[e]=0)}}const d=Gr[e];let f,m;if(d)return e==="$attrs"&&Dt(t.attrs,"get",""),d(t);if((f=u.__cssModules)&&(f=f[e]))return f;if(s!==qe&&$e(s,e))return a[e]=4,s[e];if(m=c.config.globalProperties,$e(m,e))return m[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return Na(r,e)?(r[e]=s,!0):n!==qe&&$e(n,e)?(n[e]=s,!0):$e(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,props:i,type:a}},u){let c;return!!(s[u]||t!==qe&&u[0]!=="$"&&$e(t,u)||Na(e,u)||$e(i,u)||$e(n,u)||$e(Gr,u)||$e(r.config.globalProperties,u)||(c=a.__cssModules)&&c[u])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:$e(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Wc(t){return ve(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let il=!0;function dv(t){const e=Zl(t),s=t.proxy,n=t.ctx;il=!1,e.beforeCreate&&Qc(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:a,watch:u,provide:c,inject:d,created:f,beforeMount:m,mounted:v,beforeUpdate:E,updated:S,activated:k,deactivated:M,beforeDestroy:L,beforeUnmount:x,destroyed:$,unmounted:z,render:ee,renderTracked:N,renderTriggered:g,errorCaptured:y,serverPrefetch:A,expose:w,inheritAttrs:b,components:P,directives:C,filters:Ce}=e;if(d&&hv(d,n,null),a)for(const ae in a){const ge=a[ae];Te(ge)&&(n[ae]=ge.bind(s))}if(r){const ae=r.call(s,s);ze(ae)&&(t.data=qo(ae))}if(il=!0,i)for(const ae in i){const ge=i[ae],mt=Te(ge)?ge.bind(s,s):Te(ge.get)?ge.get.bind(s,s):as,Gt=!Te(ge)&&Te(ge.set)?ge.set.bind(s):as,Ht=ue({get:mt,set:Gt});Object.defineProperty(n,ae,{enumerable:!0,configurable:!0,get:()=>Ht.value,set:Ue=>Ht.value=Ue})}if(u)for(const ae in u)Ef(u[ae],n,s,ae);if(c){const ae=Te(c)?c.call(s):c;Reflect.ownKeys(ae).forEach(ge=>{to(ge,ae[ge])})}f&&Qc(f,t,"c");function Ke(ae,ge){ve(ge)?ge.forEach(mt=>ae(mt.bind(s))):ge&&ae(ge.bind(s))}if(Ke(Zg,m),Ke(Ct,v),Ke(ev,E),Ke(tv,S),Ke(Yg,k),Ke(Jg,M),Ke(ov,y),Ke(iv,N),Ke(rv,g),Ke(sv,x),Ke(Xl,z),Ke(nv,A),ve(w))if(w.length){const ae=t.exposed||(t.exposed={});w.forEach(ge=>{Object.defineProperty(ae,ge,{get:()=>s[ge],set:mt=>s[ge]=mt,enumerable:!0})})}else t.exposed||(t.exposed={});ee&&t.render===as&&(t.render=ee),b!=null&&(t.inheritAttrs=b),P&&(t.components=P),C&&(t.directives=C),A&&gf(t)}function hv(t,e,s=as){ve(t)&&(t=ol(t));for(const n in t){const r=t[n];let i;ze(r)?"default"in r?i=Ps(r.from||n,r.default,!0):i=Ps(r.from||n):i=Ps(r),$t(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function Qc(t,e,s){ys(ve(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function Ef(t,e,s,n){let r=n.includes(".")?df(s,n):()=>s[n];if(lt(t)){const i=e[t];Te(i)&&es(r,i)}else if(Te(t))es(r,t.bind(s));else if(ze(t))if(ve(t))t.forEach(i=>Ef(i,e,s,n));else{const i=Te(t.handler)?t.handler.bind(s):e[t.handler];Te(i)&&es(r,i,t)}}function Zl(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,u=i.get(e);let c;return u?c=u:!r.length&&!s&&!n?c=e:(c={},r.length&&r.forEach(d=>go(c,d,a,!0)),go(c,e,a)),ze(e)&&i.set(e,c),c}function go(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&go(t,i,s,!0),r&&r.forEach(a=>go(t,a,s,!0));for(const a in e)if(!(n&&a==="expose")){const u=fv[a]||s&&s[a];t[a]=u?u(t[a],e[a]):e[a]}return t}const fv={data:Yc,props:Jc,emits:Jc,methods:xr,computed:xr,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:xr,directives:xr,watch:mv,provide:Yc,inject:pv};function Yc(t,e){return e?t?function(){return vt(Te(t)?t.call(this,this):t,Te(e)?e.call(this,this):e)}:e:t}function pv(t,e){return xr(ol(t),ol(e))}function ol(t){if(ve(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function xr(t,e){return t?vt(Object.create(null),t,e):e}function Jc(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:vt(Object.create(null),Wc(t),Wc(e??{})):e}function mv(t,e){if(!t)return e;if(!e)return t;const s=vt(Object.create(null),t);for(const n in e)s[n]=Lt(t[n],e[n]);return s}function bf(){return{app:null,config:{isNativeTag:xh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gv=0;function vv(t,e){return function(n,r=null){Te(n)||(n=vt({},n)),r!=null&&!ze(r)&&(r=null);const i=bf(),a=new WeakSet,u=[];let c=!1;const d=i.app={_uid:gv++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Jv,get config(){return i.config},set config(f){},use(f,...m){return a.has(f)||(f&&Te(f.install)?(a.add(f),f.install(d,...m)):Te(f)&&(a.add(f),f(d,...m))),d},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),d},component(f,m){return m?(i.components[f]=m,d):i.components[f]},directive(f,m){return m?(i.directives[f]=m,d):i.directives[f]},mount(f,m,v){if(!c){const E=d._ceVNode||Xe(n,r);return E.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),m&&e?e(E,f):t(E,f,v),c=!0,d._container=f,f.__vue_app__=d,Wo(E.component)}},onUnmount(f){u.push(f)},unmount(){c&&(ys(u,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(f,m){return i.provides[f]=m,d},runWithContext(f){const m=Kn;Kn=d;try{return f()}finally{Kn=m}}};return d}}let Kn=null;const _v=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${is(e)}Modifiers`]||t[`${Sn(e)}Modifiers`];function yv(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||qe;let r=s;const i=e.startsWith("update:"),a=i&&_v(n,e.slice(7));a&&(a.trim&&(r=s.map(f=>lt(f)?f.trim():f)),a.number&&(r=s.map(Uo)));let u,c=n[u=Pa(e)]||n[u=Pa(is(e))];!c&&i&&(c=n[u=Pa(Sn(e))]),c&&ys(c,t,6,r);const d=n[u+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,ys(d,t,6,r)}}const Ev=new WeakMap;function Tf(t,e,s=!1){const n=s?Ev:e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let a={},u=!1;if(!Te(t)){const c=d=>{const f=Tf(d,e,!0);f&&(u=!0,vt(a,f))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!u?(ze(t)&&n.set(t,null),null):(ve(i)?i.forEach(c=>a[c]=null):vt(a,i),ze(t)&&n.set(t,a),a)}function zo(t,e){return!t||!Oo(e)?!1:(e=e.slice(2).replace(/Once$/,""),$e(t,e[0].toLowerCase()+e.slice(1))||$e(t,Sn(e))||$e(t,e))}function Ma(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:a,attrs:u,emit:c,render:d,renderCache:f,props:m,data:v,setupState:E,ctx:S,inheritAttrs:k}=t,M=po(t);let L,x;try{if(s.shapeFlag&4){const z=r||n,ee=z;L=ms(d.call(ee,z,f,m,E,v,S)),x=u}else{const z=e;L=ms(z.length>1?z(m,{attrs:u,slots:a,emit:c}):z(m,null)),x=e.props?u:bv(u)}}catch(z){Hr.length=0,Go(z,t,1),L=Xe(sn)}let $=L;if(x&&k!==!1){const z=Object.keys(x),{shapeFlag:ee}=$;z.length&&ee&7&&(i&&z.some(Ol)&&(x=Tv(x,i)),$=Jn($,x,!1,!0))}return s.dirs&&($=Jn($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(s.dirs):s.dirs),s.transition&&Jl($,s.transition),L=$,po(M),L}const bv=t=>{let e;for(const s in t)(s==="class"||s==="style"||Oo(s))&&((e||(e={}))[s]=t[s]);return e},Tv=(t,e)=>{const s={};for(const n in t)(!Ol(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function Av(t,e,s){const{props:n,children:r,component:i}=t,{props:a,children:u,patchFlag:c}=e,d=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?Xc(n,a,d):!!a;if(c&8){const f=e.dynamicProps;for(let m=0;m<f.length;m++){const v=f[m];if(a[v]!==n[v]&&!zo(d,v))return!0}}}else return(r||u)&&(!u||!u.$stable)?!0:n===a?!1:n?a?Xc(n,a,d):!0:!!a;return!1}function Xc(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!zo(s,i))return!0}return!1}function Iv({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const Af={},If=()=>Object.create(Af),wf=t=>Object.getPrototypeOf(t)===Af;function wv(t,e,s,n=!1){const r={},i=If();t.propsDefaults=Object.create(null),Cf(t,e,r,i);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);s?t.props=n?r:tf(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Cv(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:a}}=t,u=Me(r),[c]=t.propsOptions;let d=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=t.vnode.dynamicProps;for(let m=0;m<f.length;m++){let v=f[m];if(zo(t.emitsOptions,v))continue;const E=e[v];if(c)if($e(i,v))E!==i[v]&&(i[v]=E,d=!0);else{const S=is(v);r[S]=al(c,u,S,E,t,!1)}else E!==i[v]&&(i[v]=E,d=!0)}}}else{Cf(t,e,r,i)&&(d=!0);let f;for(const m in u)(!e||!$e(e,m)&&((f=Sn(m))===m||!$e(e,f)))&&(c?s&&(s[m]!==void 0||s[f]!==void 0)&&(r[m]=al(c,u,m,void 0,t,!0)):delete r[m]);if(i!==u)for(const m in i)(!e||!$e(e,m))&&(delete i[m],d=!0)}d&&Ss(t.attrs,"set","")}function Cf(t,e,s,n){const[r,i]=t.propsOptions;let a=!1,u;if(e)for(let c in e){if(Fr(c))continue;const d=e[c];let f;r&&$e(r,f=is(c))?!i||!i.includes(f)?s[f]=d:(u||(u={}))[f]=d:zo(t.emitsOptions,c)||(!(c in n)||d!==n[c])&&(n[c]=d,a=!0)}if(i){const c=Me(s),d=u||qe;for(let f=0;f<i.length;f++){const m=i[f];s[m]=al(r,c,m,d[m],t,!$e(d,m))}}return a}function al(t,e,s,n,r,i){const a=t[s];if(a!=null){const u=$e(a,"default");if(u&&n===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&Te(c)){const{propsDefaults:d}=r;if(s in d)n=d[s];else{const f=vi(r);n=d[s]=c.call(null,e),f()}}else n=c;r.ce&&r.ce._setProp(s,n)}a[0]&&(i&&!u?n=!1:a[1]&&(n===""||n===Sn(s))&&(n=!0))}return n}const Sv=new WeakMap;function Sf(t,e,s=!1){const n=s?Sv:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,a={},u=[];let c=!1;if(!Te(t)){const f=m=>{c=!0;const[v,E]=Sf(m,e,!0);vt(a,v),E&&u.push(...E)};!s&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!c)return ze(t)&&n.set(t,Gn),Gn;if(ve(i))for(let f=0;f<i.length;f++){const m=is(i[f]);Zc(m)&&(a[m]=qe)}else if(i)for(const f in i){const m=is(f);if(Zc(m)){const v=i[f],E=a[m]=ve(v)||Te(v)?{type:v}:vt({},v),S=E.type;let k=!1,M=!0;if(ve(S))for(let L=0;L<S.length;++L){const x=S[L],$=Te(x)&&x.name;if($==="Boolean"){k=!0;break}else $==="String"&&(M=!1)}else k=Te(S)&&S.name==="Boolean";E[0]=k,E[1]=M,(k||$e(E,"default"))&&u.push(m)}}const d=[a,u];return ze(t)&&n.set(t,d),d}function Zc(t){return t[0]!=="$"&&!Fr(t)}const eu=t=>t==="_"||t==="_ctx"||t==="$stable",tu=t=>ve(t)?t.map(ms):[ms(t)],Rv=(t,e,s)=>{if(e._n)return e;const n=qg((...r)=>tu(e(...r)),s);return n._c=!1,n},Rf=(t,e,s)=>{const n=t._ctx;for(const r in t){if(eu(r))continue;const i=t[r];if(Te(i))e[r]=Rv(r,i,n);else if(i!=null){const a=tu(i);e[r]=()=>a}}},Pf=(t,e)=>{const s=tu(e);t.slots.default=()=>s},kf=(t,e,s)=>{for(const n in e)(s||!eu(n))&&(t[n]=e[n])},Pv=(t,e,s)=>{const n=t.slots=If();if(t.vnode.shapeFlag&32){const r=e._;r?(kf(n,e,s),s&&Oh(n,"_",r,!0)):Rf(e,n)}else e&&Pf(t,e)},kv=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,a=qe;if(n.shapeFlag&32){const u=e._;u?s&&u===1?i=!1:kf(r,e,s):(i=!e.$stable,Rf(e,r)),a=e}else e&&(Pf(t,e),a={default:1});if(i)for(const u in r)!eu(u)&&a[u]==null&&delete r[u]},Ut=Mv;function Vv(t){return Dv(t)}function Dv(t,e){const s=Bo();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:u,createComment:c,setText:d,setElementText:f,parentNode:m,nextSibling:v,setScopeId:E=as,insertStaticContent:S}=t,k=(I,R,U,Y=null,D=null,T=null,G=void 0,W=null,J=!!R.dynamicChildren)=>{if(I===R)return;I&&!Pr(I,R)&&(Y=K(I),Ue(I,D,T,!0),I=null),R.patchFlag===-2&&(J=!1,R.dynamicChildren=null);const{type:H,ref:te,shapeFlag:B}=R;switch(H){case Ko:M(I,R,U,Y);break;case sn:L(I,R,U,Y);break;case no:I==null&&x(R,U,Y,G);break;case we:P(I,R,U,Y,D,T,G,W,J);break;default:B&1?ee(I,R,U,Y,D,T,G,W,J):B&6?C(I,R,U,Y,D,T,G,W,J):(B&64||B&128)&&H.process(I,R,U,Y,D,T,G,W,J,ce)}te!=null&&D?jr(te,I&&I.ref,T,R||I,!R):te==null&&I&&I.ref!=null&&jr(I.ref,null,T,I,!0)},M=(I,R,U,Y)=>{if(I==null)n(R.el=u(R.children),U,Y);else{const D=R.el=I.el;R.children!==I.children&&d(D,R.children)}},L=(I,R,U,Y)=>{I==null?n(R.el=c(R.children||""),U,Y):R.el=I.el},x=(I,R,U,Y)=>{[I.el,I.anchor]=S(I.children,R,U,Y,I.el,I.anchor)},$=({el:I,anchor:R},U,Y)=>{let D;for(;I&&I!==R;)D=v(I),n(I,U,Y),I=D;n(R,U,Y)},z=({el:I,anchor:R})=>{let U;for(;I&&I!==R;)U=v(I),r(I),I=U;r(R)},ee=(I,R,U,Y,D,T,G,W,J)=>{if(R.type==="svg"?G="svg":R.type==="math"&&(G="mathml"),I==null)N(R,U,Y,D,T,G,W,J);else{const H=I.el&&I.el._isVueCE?I.el:null;try{H&&H._beginPatch(),A(I,R,D,T,G,W,J)}finally{H&&H._endPatch()}}},N=(I,R,U,Y,D,T,G,W)=>{let J,H;const{props:te,shapeFlag:B,transition:Z,dirs:fe}=I;if(J=I.el=a(I.type,T,te&&te.is,te),B&8?f(J,I.children):B&16&&y(I.children,J,null,Y,D,$a(I,T),G,W),fe&&pn(I,null,Y,"created"),g(J,I,I.scopeId,G,Y),te){for(const Ae in te)Ae!=="value"&&!Fr(Ae)&&i(J,Ae,null,te[Ae],T,Y);"value"in te&&i(J,"value",null,te.value,T),(H=te.onVnodeBeforeMount)&&hs(H,Y,I)}fe&&pn(I,null,Y,"beforeMount");const me=xv(D,Z);me&&Z.beforeEnter(J),n(J,R,U),((H=te&&te.onVnodeMounted)||me||fe)&&Ut(()=>{H&&hs(H,Y,I),me&&Z.enter(J),fe&&pn(I,null,Y,"mounted")},D)},g=(I,R,U,Y,D)=>{if(U&&E(I,U),Y)for(let T=0;T<Y.length;T++)E(I,Y[T]);if(D){let T=D.subTree;if(R===T||xf(T.type)&&(T.ssContent===R||T.ssFallback===R)){const G=D.vnode;g(I,G,G.scopeId,G.slotScopeIds,D.parent)}}},y=(I,R,U,Y,D,T,G,W,J=0)=>{for(let H=J;H<I.length;H++){const te=I[H]=W?Ws(I[H]):ms(I[H]);k(null,te,R,U,Y,D,T,G,W)}},A=(I,R,U,Y,D,T,G)=>{const W=R.el=I.el;let{patchFlag:J,dynamicChildren:H,dirs:te}=R;J|=I.patchFlag&16;const B=I.props||qe,Z=R.props||qe;let fe;if(U&&mn(U,!1),(fe=Z.onVnodeBeforeUpdate)&&hs(fe,U,R,I),te&&pn(R,I,U,"beforeUpdate"),U&&mn(U,!0),(B.innerHTML&&Z.innerHTML==null||B.textContent&&Z.textContent==null)&&f(W,""),H?w(I.dynamicChildren,H,W,U,Y,$a(R,D),T):G||ge(I,R,W,null,U,Y,$a(R,D),T,!1),J>0){if(J&16)b(W,B,Z,U,D);else if(J&2&&B.class!==Z.class&&i(W,"class",null,Z.class,D),J&4&&i(W,"style",B.style,Z.style,D),J&8){const me=R.dynamicProps;for(let Ae=0;Ae<me.length;Ae++){const Re=me[Ae],yt=B[Re],dt=Z[Re];(dt!==yt||Re==="value")&&i(W,Re,yt,dt,D,U)}}J&1&&I.children!==R.children&&f(W,R.children)}else!G&&H==null&&b(W,B,Z,U,D);((fe=Z.onVnodeUpdated)||te)&&Ut(()=>{fe&&hs(fe,U,R,I),te&&pn(R,I,U,"updated")},Y)},w=(I,R,U,Y,D,T,G)=>{for(let W=0;W<R.length;W++){const J=I[W],H=R[W],te=J.el&&(J.type===we||!Pr(J,H)||J.shapeFlag&198)?m(J.el):U;k(J,H,te,null,Y,D,T,G,!0)}},b=(I,R,U,Y,D)=>{if(R!==U){if(R!==qe)for(const T in R)!Fr(T)&&!(T in U)&&i(I,T,R[T],null,D,Y);for(const T in U){if(Fr(T))continue;const G=U[T],W=R[T];G!==W&&T!=="value"&&i(I,T,W,G,D,Y)}"value"in U&&i(I,"value",R.value,U.value,D)}},P=(I,R,U,Y,D,T,G,W,J)=>{const H=R.el=I?I.el:u(""),te=R.anchor=I?I.anchor:u("");let{patchFlag:B,dynamicChildren:Z,slotScopeIds:fe}=R;fe&&(W=W?W.concat(fe):fe),I==null?(n(H,U,Y),n(te,U,Y),y(R.children||[],U,te,D,T,G,W,J)):B>0&&B&64&&Z&&I.dynamicChildren&&I.dynamicChildren.length===Z.length?(w(I.dynamicChildren,Z,U,D,T,G,W),(R.key!=null||D&&R===D.subTree)&&su(I,R,!0)):ge(I,R,U,te,D,T,G,W,J)},C=(I,R,U,Y,D,T,G,W,J)=>{R.slotScopeIds=W,I==null?R.shapeFlag&512?D.ctx.activate(R,U,Y,G,J):Ce(R,U,Y,D,T,G,J):ot(I,R,J)},Ce=(I,R,U,Y,D,T,G)=>{const W=I.component=qv(I,Y,D);if(vf(I)&&(W.ctx.renderer=ce),Hv(W,!1,G),W.asyncDep){if(D&&D.registerDep(W,Ke,G),!I.el){const J=W.subTree=Xe(sn);L(null,J,R,U),I.placeholder=J.el}}else Ke(W,I,R,U,D,T,G)},ot=(I,R,U)=>{const Y=R.component=I.component;if(Av(I,R,U))if(Y.asyncDep&&!Y.asyncResolved){ae(Y,R,U);return}else Y.next=R,Y.update();else R.el=I.el,Y.vnode=R},Ke=(I,R,U,Y,D,T,G)=>{const W=()=>{if(I.isMounted){let{next:B,bu:Z,u:fe,parent:me,vnode:Ae}=I;{const ht=Vf(I);if(ht){B&&(B.el=Ae.el,ae(I,B,G)),ht.asyncDep.then(()=>{I.isUnmounted||W()});return}}let Re=B,yt;mn(I,!1),B?(B.el=Ae.el,ae(I,B,G)):B=Ae,Z&&eo(Z),(yt=B.props&&B.props.onVnodeBeforeUpdate)&&hs(yt,me,B,Ae),mn(I,!0);const dt=Ma(I),Qt=I.subTree;I.subTree=dt,k(Qt,dt,m(Qt.el),K(Qt),I,D,T),B.el=dt.el,Re===null&&Iv(I,dt.el),fe&&Ut(fe,D),(yt=B.props&&B.props.onVnodeUpdated)&&Ut(()=>hs(yt,me,B,Ae),D)}else{let B;const{el:Z,props:fe}=R,{bm:me,m:Ae,parent:Re,root:yt,type:dt}=I,Qt=qr(R);if(mn(I,!1),me&&eo(me),!Qt&&(B=fe&&fe.onVnodeBeforeMount)&&hs(B,Re,R),mn(I,!0),Z&&Ve){const ht=()=>{I.subTree=Ma(I),Ve(Z,I.subTree,I,D,null)};Qt&&dt.__asyncHydrate?dt.__asyncHydrate(Z,I,ht):ht()}else{yt.ce&&yt.ce._def.shadowRoot!==!1&&yt.ce._injectChildStyle(dt);const ht=I.subTree=Ma(I);k(null,ht,U,Y,I,D,T),R.el=ht.el}if(Ae&&Ut(Ae,D),!Qt&&(B=fe&&fe.onVnodeMounted)){const ht=R;Ut(()=>hs(B,Re,ht),D)}(R.shapeFlag&256||Re&&qr(Re.vnode)&&Re.vnode.shapeFlag&256)&&I.a&&Ut(I.a,D),I.isMounted=!0,R=U=Y=null}};I.scope.on();const J=I.effect=new Bh(W);I.scope.off();const H=I.update=J.run.bind(J),te=I.job=J.runIfDirty.bind(J);te.i=I,te.id=I.uid,J.scheduler=()=>Yl(te),mn(I,!0),H()},ae=(I,R,U)=>{R.component=I;const Y=I.vnode.props;I.vnode=R,I.next=null,Cv(I,R.props,Y,U),kv(I,R.children,U),Ds(),jc(I),xs()},ge=(I,R,U,Y,D,T,G,W,J=!1)=>{const H=I&&I.children,te=I?I.shapeFlag:0,B=R.children,{patchFlag:Z,shapeFlag:fe}=R;if(Z>0){if(Z&128){Gt(H,B,U,Y,D,T,G,W,J);return}else if(Z&256){mt(H,B,U,Y,D,T,G,W,J);return}}fe&8?(te&16&&St(H,D,T),B!==H&&f(U,B)):te&16?fe&16?Gt(H,B,U,Y,D,T,G,W,J):St(H,D,T,!0):(te&8&&f(U,""),fe&16&&y(B,U,Y,D,T,G,W,J))},mt=(I,R,U,Y,D,T,G,W,J)=>{I=I||Gn,R=R||Gn;const H=I.length,te=R.length,B=Math.min(H,te);let Z;for(Z=0;Z<B;Z++){const fe=R[Z]=J?Ws(R[Z]):ms(R[Z]);k(I[Z],fe,U,null,D,T,G,W,J)}H>te?St(I,D,T,!0,!1,B):y(R,U,Y,D,T,G,W,J,B)},Gt=(I,R,U,Y,D,T,G,W,J)=>{let H=0;const te=R.length;let B=I.length-1,Z=te-1;for(;H<=B&&H<=Z;){const fe=I[H],me=R[H]=J?Ws(R[H]):ms(R[H]);if(Pr(fe,me))k(fe,me,U,null,D,T,G,W,J);else break;H++}for(;H<=B&&H<=Z;){const fe=I[B],me=R[Z]=J?Ws(R[Z]):ms(R[Z]);if(Pr(fe,me))k(fe,me,U,null,D,T,G,W,J);else break;B--,Z--}if(H>B){if(H<=Z){const fe=Z+1,me=fe<te?R[fe].el:Y;for(;H<=Z;)k(null,R[H]=J?Ws(R[H]):ms(R[H]),U,me,D,T,G,W,J),H++}}else if(H>Z)for(;H<=B;)Ue(I[H],D,T,!0),H++;else{const fe=H,me=H,Ae=new Map;for(H=me;H<=Z;H++){const Et=R[H]=J?Ws(R[H]):ms(R[H]);Et.key!=null&&Ae.set(Et.key,H)}let Re,yt=0;const dt=Z-me+1;let Qt=!1,ht=0;const Bs=new Array(dt);for(H=0;H<dt;H++)Bs[H]=0;for(H=fe;H<=B;H++){const Et=I[H];if(yt>=dt){Ue(Et,D,T,!0);continue}let ss;if(Et.key!=null)ss=Ae.get(Et.key);else for(Re=me;Re<=Z;Re++)if(Bs[Re-me]===0&&Pr(Et,R[Re])){ss=Re;break}ss===void 0?Ue(Et,D,T,!0):(Bs[ss-me]=H+1,ss>=ht?ht=ss:Qt=!0,k(Et,R[ss],U,null,D,T,G,W,J),yt++)}const mr=Qt?Nv(Bs):Gn;for(Re=mr.length-1,H=dt-1;H>=0;H--){const Et=me+H,ss=R[Et],Ci=R[Et+1],Dn=Et+1<te?Ci.el||Df(Ci):Y;Bs[H]===0?k(null,ss,U,Dn,D,T,G,W,J):Qt&&(Re<0||H!==mr[Re]?Ht(ss,U,Dn,2):Re--)}}},Ht=(I,R,U,Y,D=null)=>{const{el:T,type:G,transition:W,children:J,shapeFlag:H}=I;if(H&6){Ht(I.component.subTree,R,U,Y);return}if(H&128){I.suspense.move(R,U,Y);return}if(H&64){G.move(I,R,U,ce);return}if(G===we){n(T,R,U);for(let B=0;B<J.length;B++)Ht(J[B],R,U,Y);n(I.anchor,R,U);return}if(G===no){$(I,R,U);return}if(Y!==2&&H&1&&W)if(Y===0)W.beforeEnter(T),n(T,R,U),Ut(()=>W.enter(T),D);else{const{leave:B,delayLeave:Z,afterLeave:fe}=W,me=()=>{I.ctx.isUnmounted?r(T):n(T,R,U)},Ae=()=>{T._isLeaving&&T[Qg](!0),B(T,()=>{me(),fe&&fe()})};Z?Z(T,me,Ae):Ae()}else n(T,R,U)},Ue=(I,R,U,Y=!1,D=!1)=>{const{type:T,props:G,ref:W,children:J,dynamicChildren:H,shapeFlag:te,patchFlag:B,dirs:Z,cacheIndex:fe}=I;if(B===-2&&(D=!1),W!=null&&(Ds(),jr(W,null,U,I,!0),xs()),fe!=null&&(R.renderCache[fe]=void 0),te&256){R.ctx.deactivate(I);return}const me=te&1&&Z,Ae=!qr(I);let Re;if(Ae&&(Re=G&&G.onVnodeBeforeUnmount)&&hs(Re,R,I),te&6)_t(I.component,U,Y);else{if(te&128){I.suspense.unmount(U,Y);return}me&&pn(I,null,R,"beforeUnmount"),te&64?I.type.remove(I,R,U,ce,Y):H&&!H.hasOnce&&(T!==we||B>0&&B&64)?St(H,R,U,!1,!0):(T===we&&B&384||!D&&te&16)&&St(J,R,U),Y&&We(I)}(Ae&&(Re=G&&G.onVnodeUnmounted)||me)&&Ut(()=>{Re&&hs(Re,R,I),me&&pn(I,null,R,"unmounted")},U)},We=I=>{const{type:R,el:U,anchor:Y,transition:D}=I;if(R===we){ts(U,Y);return}if(R===no){z(I);return}const T=()=>{r(U),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(I.shapeFlag&1&&D&&!D.persisted){const{leave:G,delayLeave:W}=D,J=()=>G(U,T);W?W(I.el,T,J):J()}else T()},ts=(I,R)=>{let U;for(;I!==R;)U=v(I),r(I),I=U;r(R)},_t=(I,R,U)=>{const{bum:Y,scope:D,job:T,subTree:G,um:W,m:J,a:H}=I;ed(J),ed(H),Y&&eo(Y),D.stop(),T&&(T.flags|=8,Ue(G,I,R,U)),W&&Ut(W,R),Ut(()=>{I.isUnmounted=!0},R)},St=(I,R,U,Y=!1,D=!1,T=0)=>{for(let G=T;G<I.length;G++)Ue(I[G],R,U,Y,D)},K=I=>{if(I.shapeFlag&6)return K(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const R=v(I.anchor||I.el),U=R&&R[hf];return U?v(U):R};let oe=!1;const ie=(I,R,U)=>{let Y;I==null?R._vnode&&(Ue(R._vnode,null,null,!0),Y=R._vnode.component):k(R._vnode||null,I,R,null,null,null,U),R._vnode=I,oe||(oe=!0,jc(Y),af(),oe=!1)},ce={p:k,um:Ue,m:Ht,r:We,mt:Ce,mc:y,pc:ge,pbc:w,n:K,o:t};let ye,Ve;return e&&([ye,Ve]=e(ce)),{render:ie,hydrate:ye,createApp:vv(ie,ye)}}function $a({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function mn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function xv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function su(t,e,s=!1){const n=t.children,r=e.children;if(ve(n)&&ve(r))for(let i=0;i<n.length;i++){const a=n[i];let u=r[i];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=r[i]=Ws(r[i]),u.el=a.el),!s&&u.patchFlag!==-2&&su(a,u)),u.type===Ko&&(u.patchFlag!==-1?u.el=a.el:u.__elIndex=i+(t.type===we?1:0)),u.type===sn&&!u.el&&(u.el=a.el)}}function Nv(t){const e=t.slice(),s=[0];let n,r,i,a,u;const c=t.length;for(n=0;n<c;n++){const d=t[n];if(d!==0){if(r=s[s.length-1],t[r]<d){e[n]=r,s.push(n);continue}for(i=0,a=s.length-1;i<a;)u=i+a>>1,t[s[u]]<d?i=u+1:a=u;d<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,a=s[i-1];i-- >0;)s[i]=a,a=e[a];return s}function Vf(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Vf(e)}function ed(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function Df(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?Df(e.subTree):null}const xf=t=>t.__isSuspense;function Mv(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):jg(t)}const we=Symbol.for("v-fgt"),Ko=Symbol.for("v-txt"),sn=Symbol.for("v-cmt"),no=Symbol.for("v-stc"),Hr=[];let Xt=null;function V(t=!1){Hr.push(Xt=t?null:[])}function $v(){Hr.pop(),Xt=Hr[Hr.length-1]||null}let ei=1;function vo(t,e=!1){ei+=t,t<0&&Xt&&e&&(Xt.hasOnce=!0)}function Nf(t){return t.dynamicChildren=ei>0?Xt||Gn:null,$v(),ei>0&&Xt&&Xt.push(t),t}function F(t,e,s,n,r,i){return Nf(o(t,e,s,n,r,i,!0))}function Le(t,e,s,n,r){return Nf(Xe(t,e,s,n,r,!0))}function _o(t){return t?t.__v_isVNode===!0:!1}function Pr(t,e){return t.type===e.type&&t.key===e.key}const Mf=({key:t})=>t??null,ro=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?lt(t)||$t(t)||Te(t)?{i:Jt,r:t,k:e,f:!!s}:t:null);function o(t,e=null,s=null,n=0,r=null,i=t===we?0:1,a=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Mf(e),ref:e&&ro(e),scopeId:uf,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Jt};return u?(nu(c,s),i&128&&t.normalize(c)):s&&(c.shapeFlag|=lt(s)?8:16),ei>0&&!a&&Xt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Xt.push(c),c}const Xe=Ov;function Ov(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===lv)&&(t=sn),_o(t)){const u=Jn(t,e,!0);return s&&nu(u,s),ei>0&&!i&&Xt&&(u.shapeFlag&6?Xt[Xt.indexOf(t)]=u:Xt.push(u)),u.patchFlag=-2,u}if(Yv(t)&&(t=t.__vccOpts),e){e=Fv(e);let{class:u,style:c}=e;u&&!lt(u)&&(e.class=je(u)),ze(c)&&(Wl(c)&&!ve(c)&&(c=vt({},c)),e.style=Ul(c))}const a=lt(t)?1:xf(t)?128:Kg(t)?64:ze(t)?4:Te(t)?2:0;return o(t,e,s,n,r,a,i,!0)}function Fv(t){return t?Wl(t)||wf(t)?vt({},t):t:null}function Jn(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:u,transition:c}=t,d=e?Uv(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&Mf(d),ref:e&&e.ref?s&&i?ve(i)?i.concat(ro(e)):[i,ro(e)]:ro(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==we?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Jn(t.ssContent),ssFallback:t.ssFallback&&Jn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&n&&Jl(f,c.clone(f)),f}function ne(t=" ",e=0){return Xe(Ko,null,t,e)}function Lv(t,e){const s=Xe(no,null,t);return s.staticCount=e,s}function he(t="",e=!1){return e?(V(),Le(sn,null,t)):Xe(sn,null,t)}function ms(t){return t==null||typeof t=="boolean"?Xe(sn):ve(t)?Xe(we,null,t.slice()):_o(t)?Ws(t):Xe(Ko,null,String(t))}function Ws(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Jn(t)}function nu(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ve(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),nu(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!wf(e)?e._ctx=Jt:r===3&&Jt&&(Jt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Te(e)?(e={default:e,_ctx:Jt},s=32):(e=String(e),n&64?(s=16,e=[ne(e)]):s=8);t.children=e,t.shapeFlag|=s}function Uv(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=je([e.class,n.class]));else if(r==="style")e.style=Ul([e.style,n.style]);else if(Oo(r)){const i=e[r],a=n[r];a&&i!==a&&!(ve(i)&&i.includes(a))&&(e[r]=i?[].concat(i,a):a)}else r!==""&&(e[r]=n[r])}return e}function hs(t,e,s,n=null){ys(t,e,7,[s,n])}const Bv=bf();let jv=0;function qv(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||Bv,i={uid:jv++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new hg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Sf(n,r),emitsOptions:Tf(n,r),emit:null,emitted:null,propsDefaults:qe,inheritAttrs:n.inheritAttrs,ctx:qe,data:qe,props:qe,attrs:qe,slots:qe,refs:qe,setupState:qe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=yv.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const Gv=()=>Nt||Jt;let yo,ll;{const t=Bo(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};yo=e("__VUE_INSTANCE_SETTERS__",s=>Nt=s),ll=e("__VUE_SSR_SETTERS__",s=>ti=s)}const vi=t=>{const e=Nt;return yo(t),t.scope.on(),()=>{t.scope.off(),yo(e)}},td=()=>{Nt&&Nt.scope.off(),yo(null)};function $f(t){return t.vnode.shapeFlag&4}let ti=!1;function Hv(t,e=!1,s=!1){e&&ll(e);const{props:n,children:r}=t.vnode,i=$f(t);wv(t,n,i,e),Pv(t,r,s||e);const a=i?zv(t,e):void 0;return e&&ll(!1),a}function zv(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,cv);const{setup:n}=s;if(n){Ds();const r=t.setupContext=n.length>1?Wv(t):null,i=vi(t),a=gi(n,t,0,[t.props,r]),u=Nh(a);if(xs(),i(),(u||t.sp)&&!qr(t)&&gf(t),u){if(a.then(td,td),e)return a.then(c=>{sd(t,c,e)}).catch(c=>{Go(c,t,0)});t.asyncDep=a}else sd(t,a,e)}else Of(t,e)}function sd(t,e,s){Te(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ze(e)&&(t.setupState=nf(e)),Of(t,s)}let nd;function Of(t,e,s){const n=t.type;if(!t.render){if(!e&&nd&&!n.render){const r=n.template||Zl(t).template;if(r){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:u,compilerOptions:c}=n,d=vt(vt({isCustomElement:i,delimiters:u},a),c);n.render=nd(r,d)}}t.render=n.render||as}{const r=vi(t);Ds();try{dv(t)}finally{xs(),r()}}}const Kv={get(t,e){return Dt(t,"get",""),t[e]}};function Wv(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Kv),slots:t.slots,emit:t.emit,expose:e}}function Wo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(nf(Dg(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Gr)return Gr[s](t)},has(e,s){return s in e||s in Gr}})):t.proxy}function Qv(t,e=!0){return Te(t)?t.displayName||t.name:t.name||e&&t.__name}function Yv(t){return Te(t)&&"__vccOpts"in t}const ue=(t,e)=>Og(t,e,ti);function Ff(t,e,s){try{vo(-1);const n=arguments.length;return n===2?ze(e)&&!ve(e)?_o(e)?Xe(t,null,[e]):Xe(t,e):Xe(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&_o(s)&&(s=[s]),Xe(t,e,s))}finally{vo(1)}}const Jv="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ul;const rd=typeof window<"u"&&window.trustedTypes;if(rd)try{ul=rd.createPolicy("vue",{createHTML:t=>t})}catch{}const Lf=ul?t=>ul.createHTML(t):t=>t,Xv="http://www.w3.org/2000/svg",Zv="http://www.w3.org/1998/Math/MathML",Cs=typeof document<"u"?document:null,id=Cs&&Cs.createElement("template"),e_={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?Cs.createElementNS(Xv,t):e==="mathml"?Cs.createElementNS(Zv,t):s?Cs.createElement(t,{is:s}):Cs.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Cs.createTextNode(t),createComment:t=>Cs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Cs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const a=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{id.innerHTML=Lf(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const u=id.content;if(n==="svg"||n==="mathml"){const c=u.firstChild;for(;c.firstChild;)u.appendChild(c.firstChild);u.removeChild(c)}e.insertBefore(u,s)}return[a?a.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},t_=Symbol("_vtc");function s_(t,e,s){const n=t[t_];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const od=Symbol("_vod"),n_=Symbol("_vsh"),r_=Symbol(""),i_=/(?:^|;)\s*display\s*:/;function o_(t,e,s){const n=t.style,r=lt(s);let i=!1;if(s&&!r){if(e)if(lt(e))for(const a of e.split(";")){const u=a.slice(0,a.indexOf(":")).trim();s[u]==null&&io(n,u,"")}else for(const a in e)s[a]==null&&io(n,a,"");for(const a in s)a==="display"&&(i=!0),io(n,a,s[a])}else if(r){if(e!==s){const a=n[r_];a&&(s+=";"+a),n.cssText=s,i=i_.test(s)}}else e&&t.removeAttribute("style");od in t&&(t[od]=i?n.display:"",t[n_]&&(n.display="none"))}const ad=/\s*!important$/;function io(t,e,s){if(ve(s))s.forEach(n=>io(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=a_(t,e);ad.test(s)?t.setProperty(Sn(n),s.replace(ad,""),"important"):t[n]=s}}const ld=["Webkit","Moz","ms"],Oa={};function a_(t,e){const s=Oa[e];if(s)return s;let n=is(e);if(n!=="filter"&&n in t)return Oa[e]=n;n=Lo(n);for(let r=0;r<ld.length;r++){const i=ld[r]+n;if(i in t)return Oa[e]=i}return e}const ud="http://www.w3.org/1999/xlink";function cd(t,e,s,n,r,i=cg(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(ud,e.slice(6,e.length)):t.setAttributeNS(ud,e,s):s==null||i&&!Fh(s)?t.removeAttribute(e):t.setAttribute(e,i?"":_s(s)?String(s):s)}function dd(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Lf(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const u=i==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(u!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let a=!1;if(s===""||s==null){const u=typeof t[e];u==="boolean"?s=Fh(s):s==null&&u==="string"?(s="",a=!0):u==="number"&&(s=0,a=!0)}try{t[e]=s}catch{}a&&t.removeAttribute(r||e)}function Ys(t,e,s,n){t.addEventListener(e,s,n)}function l_(t,e,s,n){t.removeEventListener(e,s,n)}const hd=Symbol("_vei");function u_(t,e,s,n,r=null){const i=t[hd]||(t[hd]={}),a=i[e];if(n&&a)a.value=n;else{const[u,c]=c_(e);if(n){const d=i[e]=f_(n,r);Ys(t,u,d,c)}else a&&(l_(t,u,a,c),i[e]=void 0)}}const fd=/(?:Once|Passive|Capture)$/;function c_(t){let e;if(fd.test(t)){e={};let n;for(;n=t.match(fd);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Sn(t.slice(2)),e]}let Fa=0;const d_=Promise.resolve(),h_=()=>Fa||(d_.then(()=>Fa=0),Fa=Date.now());function f_(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ys(p_(n,s.value),e,5,[n])};return s.value=t,s.attached=h_(),s}function p_(t,e){if(ve(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const pd=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,m_=(t,e,s,n,r,i)=>{const a=r==="svg";e==="class"?s_(t,n,a):e==="style"?o_(t,s,n):Oo(e)?Ol(e)||u_(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):g_(t,e,n,a))?(dd(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&cd(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!lt(n))?dd(t,is(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),cd(t,e,n,a))};function g_(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&pd(e)&&Te(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return pd(e)&&lt(s)?!1:e in t}const Xn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?s=>eo(e,s):e};function v_(t){t.target.composing=!0}function md(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ks=Symbol("_assign");function gd(t,e,s){return e&&(t=t.trim()),s&&(t=Uo(t)),t}const et={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[ks]=Xn(r);const i=n||r.props&&r.props.type==="number";Ys(t,e?"change":"input",a=>{a.target.composing||t[ks](gd(t.value,s,i))}),(s||i)&&Ys(t,"change",()=>{t.value=gd(t.value,s,i)}),e||(Ys(t,"compositionstart",v_),Ys(t,"compositionend",md),Ys(t,"change",md))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},a){if(t[ks]=Xn(a),t.composing)return;const u=(i||t.type==="number")&&!/^0\d/.test(t.value)?Uo(t.value):t.value,c=e??"";u!==c&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===c)||(t.value=c))}},fs={deep:!0,created(t,e,s){t[ks]=Xn(s),Ys(t,"change",()=>{const n=t._modelValue,r=si(t),i=t.checked,a=t[ks];if(ve(n)){const u=Bl(n,r),c=u!==-1;if(i&&!c)a(n.concat(r));else if(!i&&c){const d=[...n];d.splice(u,1),a(d)}}else if(ur(n)){const u=new Set(n);i?u.add(r):u.delete(r),a(u)}else a(Uf(t,i))})},mounted:vd,beforeUpdate(t,e,s){t[ks]=Xn(s),vd(t,e,s)}};function vd(t,{value:e,oldValue:s},n){t._modelValue=e;let r;if(ve(e))r=Bl(e,n.props.value)>-1;else if(ur(e))r=e.has(n.props.value);else{if(e===s)return;r=mi(e,Uf(t,!0))}t.checked!==r&&(t.checked=r)}const Zn={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const r=ur(e);Ys(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>s?Uo(si(a)):si(a));t[ks](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Ql(()=>{t._assigning=!1})}),t[ks]=Xn(n)},mounted(t,{value:e}){_d(t,e)},beforeUpdate(t,e,s){t[ks]=Xn(s)},updated(t,{value:e}){t._assigning||_d(t,e)}};function _d(t,e){const s=t.multiple,n=ve(e);if(!(s&&!n&&!ur(e))){for(let r=0,i=t.options.length;r<i;r++){const a=t.options[r],u=si(a);if(s)if(n){const c=typeof u;c==="string"||c==="number"?a.selected=e.some(d=>String(d)===String(u)):a.selected=Bl(e,u)>-1}else a.selected=e.has(u);else if(mi(si(a),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function si(t){return"_value"in t?t._value:t.value}function Uf(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const __=["ctrl","shift","alt","meta"],y_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>__.some(s=>t[`${s}Key`]&&!e.includes(s))},He=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(r,...i)=>{for(let a=0;a<e.length;a++){const u=y_[e[a]];if(u&&u(r,e))return}return t(r,...i)})},E_=vt({patchProp:m_},e_);let yd;function b_(){return yd||(yd=Vv(E_))}const T_=(...t)=>{const e=b_().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=I_(n);if(!r)return;const i=e._component;!Te(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=s(r,!1,A_(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function A_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function I_(t){return lt(t)?document.querySelector(t):t}const w_={id:"app"},C_={__name:"App",setup(t){return Ct(()=>{console.log("Oishi Nigiri App loaded")}),(e,s)=>{const n=av("router-view");return V(),F("div",w_,[Xe(n)])}}};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Un=typeof document<"u";function Bf(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function S_(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Bf(t.default)}const Ne=Object.assign;function La(t,e){const s={};for(const n in e){const r=e[n];s[n]=cs(r)?r.map(t):t(r)}return s}const zr=()=>{},cs=Array.isArray;function Ed(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}const jf=/#/g,R_=/&/g,P_=/\//g,k_=/=/g,V_=/\?/g,qf=/\+/g,D_=/%5B/g,x_=/%5D/g,Gf=/%5E/g,N_=/%60/g,Hf=/%7B/g,M_=/%7C/g,zf=/%7D/g,$_=/%20/g;function ru(t){return t==null?"":encodeURI(""+t).replace(M_,"|").replace(D_,"[").replace(x_,"]")}function O_(t){return ru(t).replace(Hf,"{").replace(zf,"}").replace(Gf,"^")}function cl(t){return ru(t).replace(qf,"%2B").replace($_,"+").replace(jf,"%23").replace(R_,"%26").replace(N_,"`").replace(Hf,"{").replace(zf,"}").replace(Gf,"^")}function F_(t){return cl(t).replace(k_,"%3D")}function L_(t){return ru(t).replace(jf,"%23").replace(V_,"%3F")}function U_(t){return L_(t).replace(P_,"%2F")}function ni(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const B_=/\/$/,j_=t=>t.replace(B_,"");function Ua(t,e,s="/"){let n,r={},i="",a="";const u=e.indexOf("#");let c=e.indexOf("?");return c=u>=0&&c>u?-1:c,c>=0&&(n=e.slice(0,c),i=e.slice(c,u>0?u:e.length),r=t(i.slice(1))),u>=0&&(n=n||e.slice(0,u),a=e.slice(u,e.length)),n=z_(n??e,s),{fullPath:n+i+a,path:n,query:r,hash:ni(a)}}function q_(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function bd(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function G_(t,e,s){const n=e.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&er(e.matched[n],s.matched[r])&&Kf(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function er(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Kf(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var s in t)if(!H_(t[s],e[s]))return!1;return!0}function H_(t,e){return cs(t)?Td(t,e):cs(e)?Td(e,t):(t==null?void 0:t.valueOf())===(e==null?void 0:e.valueOf())}function Td(t,e){return cs(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function z_(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=s.length-1,a,u;for(a=0;a<n.length;a++)if(u=n[a],u!==".")if(u==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Hs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let dl=function(t){return t.pop="pop",t.push="push",t}({}),Ba=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function K_(t){if(!t)if(Un){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),j_(t)}const W_=/^[^#]+#/;function Q_(t,e){return t.replace(W_,"#")+e}function Y_(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const Qo=()=>({left:window.scrollX,top:window.scrollY});function J_(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;e=Y_(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Ad(t,e){return(history.state?history.state.position-e:-1)+t}const hl=new Map;function X_(t,e){hl.set(t,e)}function Z_(t){const e=hl.get(t);return hl.delete(t),e}function ey(t){return typeof t=="string"||t&&typeof t=="object"}function Wf(t){return typeof t=="string"||typeof t=="symbol"}let rt=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const Qf=Symbol("");rt.MATCHER_NOT_FOUND+"",rt.NAVIGATION_GUARD_REDIRECT+"",rt.NAVIGATION_ABORTED+"",rt.NAVIGATION_CANCELLED+"",rt.NAVIGATION_DUPLICATED+"";function tr(t,e){return Ne(new Error,{type:t,[Qf]:!0},e)}function ws(t,e){return t instanceof Error&&Qf in t&&(e==null||!!(t.type&e))}const ty=["params","query","hash"];function sy(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of ty)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function ny(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(qf," "),i=r.indexOf("="),a=ni(i<0?r:r.slice(0,i)),u=i<0?null:ni(r.slice(i+1));if(a in e){let c=e[a];cs(c)||(c=e[a]=[c]),c.push(u)}else e[a]=u}return e}function Id(t){let e="";for(let s in t){const n=t[s];if(s=F_(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(cs(n)?n.map(r=>r&&cl(r)):[n&&cl(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+s,r!=null&&(e+="="+r))})}return e}function ry(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=cs(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const iy=Symbol(""),wd=Symbol(""),iu=Symbol(""),Yf=Symbol(""),fl=Symbol("");function kr(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Qs(t,e,s,n,r,i=a=>a()){const a=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((u,c)=>{const d=v=>{v===!1?c(tr(rt.NAVIGATION_ABORTED,{from:s,to:e})):v instanceof Error?c(v):ey(v)?c(tr(rt.NAVIGATION_GUARD_REDIRECT,{from:e,to:v})):(a&&n.enterCallbacks[r]===a&&typeof v=="function"&&a.push(v),u())},f=i(()=>t.call(n&&n.instances[r],e,s,d));let m=Promise.resolve(f);t.length<3&&(m=m.then(d)),m.catch(v=>c(v))})}function ja(t,e,s,n,r=i=>i()){const i=[];for(const a of t)for(const u in a.components){let c=a.components[u];if(!(e!=="beforeRouteEnter"&&!a.instances[u]))if(Bf(c)){const d=(c.__vccOpts||c)[e];d&&i.push(Qs(d,s,n,a,u,r))}else{let d=c();i.push(()=>d.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${u}" at "${a.path}"`);const m=S_(f)?f.default:f;a.mods[u]=f,a.components[u]=m;const v=(m.__vccOpts||m)[e];return v&&Qs(v,s,n,a,u,r)()}))}}return i}function oy(t,e){const s=[],n=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const u=e.matched[a];u&&(t.matched.find(d=>er(d,u))?n.push(u):s.push(u));const c=t.matched[a];c&&(e.matched.find(d=>er(d,c))||r.push(c))}return[s,n,r]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ay=()=>location.protocol+"//"+location.host;function Jf(t,e){const{pathname:s,search:n,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,u=r.slice(a);return u[0]!=="/"&&(u="/"+u),bd(u,"")}return bd(s,t)+n+r}function ly(t,e,s,n){let r=[],i=[],a=null;const u=({state:v})=>{const E=Jf(t,location),S=s.value,k=e.value;let M=0;if(v){if(s.value=E,e.value=v,a&&a===S){a=null;return}M=k?v.position-k.position:0}else n(E);r.forEach(L=>{L(s.value,S,{delta:M,type:dl.pop,direction:M?M>0?Ba.forward:Ba.back:Ba.unknown})})};function c(){a=s.value}function d(v){r.push(v);const E=()=>{const S=r.indexOf(v);S>-1&&r.splice(S,1)};return i.push(E),E}function f(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(Ne({},v.state,{scroll:Qo()}),"")}}function m(){for(const v of i)v();i=[],window.removeEventListener("popstate",u),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",u),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:d,destroy:m}}function Cd(t,e,s,n=!1,r=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:r?Qo():null}}function uy(t){const{history:e,location:s}=window,n={value:Jf(t,s)},r={value:e.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,d,f){const m=t.indexOf("#"),v=m>-1?(s.host&&document.querySelector("base")?t:t.slice(m))+c:ay()+t+c;try{e[f?"replaceState":"pushState"](d,"",v),r.value=d}catch(E){console.error(E),s[f?"replace":"assign"](v)}}function a(c,d){i(c,Ne({},e.state,Cd(r.value.back,c,r.value.forward,!0),d,{position:r.value.position}),!0),n.value=c}function u(c,d){const f=Ne({},r.value,e.state,{forward:c,scroll:Qo()});i(f.current,f,!0),i(c,Ne({},Cd(n.value,c,null),{position:f.position+1},d),!1),n.value=c}return{location:n,state:r,push:u,replace:a}}function cy(t){t=K_(t);const e=uy(t),s=ly(t,e.state,e.location,e.replace);function n(i,a=!0){a||s.pauseListeners(),history.go(i)}const r=Ne({location:"",base:t,go:n,createHref:Q_.bind(null,t)},e,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function dy(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),cy(t)}let yn=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var ft=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(ft||{});const hy={type:yn.Static,value:""},fy=/[a-zA-Z0-9_]/;function py(t){if(!t)return[[]];if(t==="/")return[[hy]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(E){throw new Error(`ERR (${s})/"${d}": ${E}`)}let s=ft.Static,n=s;const r=[];let i;function a(){i&&r.push(i),i=[]}let u=0,c,d="",f="";function m(){d&&(s===ft.Static?i.push({type:yn.Static,value:d}):s===ft.Param||s===ft.ParamRegExp||s===ft.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),i.push({type:yn.Param,value:d,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),d="")}function v(){d+=c}for(;u<t.length;){if(c=t[u++],c==="\\"&&s!==ft.ParamRegExp){n=s,s=ft.EscapeNext;continue}switch(s){case ft.Static:c==="/"?(d&&m(),a()):c===":"?(m(),s=ft.Param):v();break;case ft.EscapeNext:v(),s=n;break;case ft.Param:c==="("?s=ft.ParamRegExp:fy.test(c)?v():(m(),s=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&u--);break;case ft.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:s=ft.ParamRegExpEnd:f+=c;break;case ft.ParamRegExpEnd:m(),s=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&u--,f="";break;default:e("Unknown state");break}}return s===ft.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),m(),a(),r}const Sd="[^/]+?",my={sensitive:!1,strict:!1,start:!0,end:!0};var Bt=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Bt||{});const gy=/[.+*?^${}()[\]/\\]/g;function vy(t,e){const s=Ne({},my,e),n=[];let r=s.start?"^":"";const i=[];for(const d of t){const f=d.length?[]:[Bt.Root];s.strict&&!d.length&&(r+="/");for(let m=0;m<d.length;m++){const v=d[m];let E=Bt.Segment+(s.sensitive?Bt.BonusCaseSensitive:0);if(v.type===yn.Static)m||(r+="/"),r+=v.value.replace(gy,"\\$&"),E+=Bt.Static;else if(v.type===yn.Param){const{value:S,repeatable:k,optional:M,regexp:L}=v;i.push({name:S,repeatable:k,optional:M});const x=L||Sd;if(x!==Sd){E+=Bt.BonusCustomRegExp;try{`${x}`}catch(z){throw new Error(`Invalid custom RegExp for param "${S}" (${x}): `+z.message)}}let $=k?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;m||($=M&&d.length<2?`(?:/${$})`:"/"+$),M&&($+="?"),r+=$,E+=Bt.Dynamic,M&&(E+=Bt.BonusOptional),k&&(E+=Bt.BonusRepeatable),x===".*"&&(E+=Bt.BonusWildcard)}f.push(E)}n.push(f)}if(s.strict&&s.end){const d=n.length-1;n[d][n[d].length-1]+=Bt.BonusStrict}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const a=new RegExp(r,s.sensitive?"":"i");function u(d){const f=d.match(a),m={};if(!f)return null;for(let v=1;v<f.length;v++){const E=f[v]||"",S=i[v-1];m[S.name]=E&&S.repeatable?E.split("/"):E}return m}function c(d){let f="",m=!1;for(const v of t){(!m||!f.endsWith("/"))&&(f+="/"),m=!1;for(const E of v)if(E.type===yn.Static)f+=E.value;else if(E.type===yn.Param){const{value:S,repeatable:k,optional:M}=E,L=S in d?d[S]:"";if(cs(L)&&!k)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const x=cs(L)?L.join("/"):L;if(!x)if(M)v.length<2&&(f.endsWith("/")?f=f.slice(0,-1):m=!0);else throw new Error(`Missing required param "${S}"`);f+=x}}return f||"/"}return{re:a,score:n,keys:i,parse:u,stringify:c}}function _y(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===Bt.Static+Bt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Bt.Static+Bt.Segment?1:-1:0}function Xf(t,e){let s=0;const n=t.score,r=e.score;for(;s<n.length&&s<r.length;){const i=_y(n[s],r[s]);if(i)return i;s++}if(Math.abs(r.length-n.length)===1){if(Rd(n))return 1;if(Rd(r))return-1}return r.length-n.length}function Rd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const yy={strict:!1,end:!0,sensitive:!1};function Ey(t,e,s){const n=vy(py(t.path),s),r=Ne(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function by(t,e){const s=[],n=new Map;e=Ed(yy,e);function r(m){return n.get(m)}function i(m,v,E){const S=!E,k=kd(m);k.aliasOf=E&&E.record;const M=Ed(e,m),L=[k];if("alias"in m){const z=typeof m.alias=="string"?[m.alias]:m.alias;for(const ee of z)L.push(kd(Ne({},k,{components:E?E.record.components:k.components,path:ee,aliasOf:E?E.record:k})))}let x,$;for(const z of L){const{path:ee}=z;if(v&&ee[0]!=="/"){const N=v.record.path,g=N[N.length-1]==="/"?"":"/";z.path=v.record.path+(ee&&g+ee)}if(x=Ey(z,v,M),E?E.alias.push(x):($=$||x,$!==x&&$.alias.push(x),S&&m.name&&!Vd(x)&&a(m.name)),Zf(x)&&c(x),k.children){const N=k.children;for(let g=0;g<N.length;g++)i(N[g],x,E&&E.children[g])}E=E||x}return $?()=>{a($)}:zr}function a(m){if(Wf(m)){const v=n.get(m);v&&(n.delete(m),s.splice(s.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=s.indexOf(m);v>-1&&(s.splice(v,1),m.record.name&&n.delete(m.record.name),m.children.forEach(a),m.alias.forEach(a))}}function u(){return s}function c(m){const v=Iy(m,s);s.splice(v,0,m),m.record.name&&!Vd(m)&&n.set(m.record.name,m)}function d(m,v){let E,S={},k,M;if("name"in m&&m.name){if(E=n.get(m.name),!E)throw tr(rt.MATCHER_NOT_FOUND,{location:m});M=E.record.name,S=Ne(Pd(v.params,E.keys.filter($=>!$.optional).concat(E.parent?E.parent.keys.filter($=>$.optional):[]).map($=>$.name)),m.params&&Pd(m.params,E.keys.map($=>$.name))),k=E.stringify(S)}else if(m.path!=null)k=m.path,E=s.find($=>$.re.test(k)),E&&(S=E.parse(k),M=E.record.name);else{if(E=v.name?n.get(v.name):s.find($=>$.re.test(v.path)),!E)throw tr(rt.MATCHER_NOT_FOUND,{location:m,currentLocation:v});M=E.record.name,S=Ne({},v.params,m.params),k=E.stringify(S)}const L=[];let x=E;for(;x;)L.unshift(x.record),x=x.parent;return{name:M,path:k,params:S,matched:L,meta:Ay(L)}}t.forEach(m=>i(m));function f(){s.length=0,n.clear()}return{addRoute:i,resolve:d,removeRoute:a,clearRoutes:f,getRoutes:u,getRecordMatcher:r}}function Pd(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function kd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ty(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ty(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function Vd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Ay(t){return t.reduce((e,s)=>Ne(e,s.meta),{})}function Iy(t,e){let s=0,n=e.length;for(;s!==n;){const i=s+n>>1;Xf(t,e[i])<0?n=i:s=i+1}const r=wy(t);return r&&(n=e.lastIndexOf(r,n-1)),n}function wy(t){let e=t;for(;e=e.parent;)if(Zf(e)&&Xf(t,e)===0)return e}function Zf({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Dd(t){const e=Ps(iu),s=Ps(Yf),n=ue(()=>{const c=pt(t.to);return e.resolve(c)}),r=ue(()=>{const{matched:c}=n.value,{length:d}=c,f=c[d-1],m=s.matched;if(!f||!m.length)return-1;const v=m.findIndex(er.bind(null,f));if(v>-1)return v;const E=xd(c[d-2]);return d>1&&xd(f)===E&&m[m.length-1].path!==E?m.findIndex(er.bind(null,c[d-2])):v}),i=ue(()=>r.value>-1&&ky(s.params,n.value.params)),a=ue(()=>r.value>-1&&r.value===s.matched.length-1&&Kf(s.params,n.value.params));function u(c={}){if(Py(c)){const d=e[pt(t.replace)?"replace":"push"](pt(t.to)).catch(zr);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:n,href:ue(()=>n.value.href),isActive:i,isExactActive:a,navigate:u}}function Cy(t){return t.length===1?t[0]:t}const Sy=mf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Dd,setup(t,{slots:e}){const s=qo(Dd(t)),{options:n}=Ps(iu),r=ue(()=>({[Nd(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Nd(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&Cy(e.default(s));return t.custom?i:Ff("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},i)}}}),Ry=Sy;function Py(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ky(t,e){for(const s in e){const n=e[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!cs(r)||r.length!==n.length||n.some((i,a)=>i.valueOf()!==r[a].valueOf()))return!1}return!0}function xd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Nd=(t,e,s)=>t??e??s,Vy=mf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=Ps(fl),r=ue(()=>t.route||n.value),i=Ps(wd,0),a=ue(()=>{let d=pt(i);const{matched:f}=r.value;let m;for(;(m=f[d])&&!m.components;)d++;return d}),u=ue(()=>r.value.matched[a.value]);to(wd,ue(()=>a.value+1)),to(iy,u),to(fl,r);const c=re();return es(()=>[c.value,u.value,t.name],([d,f,m],[v,E,S])=>{f&&(f.instances[m]=d,E&&E!==f&&d&&d===v&&(f.leaveGuards.size||(f.leaveGuards=E.leaveGuards),f.updateGuards.size||(f.updateGuards=E.updateGuards))),d&&f&&(!E||!er(f,E)||!v)&&(f.enterCallbacks[m]||[]).forEach(k=>k(d))},{flush:"post"}),()=>{const d=r.value,f=t.name,m=u.value,v=m&&m.components[f];if(!v)return Md(s.default,{Component:v,route:d});const E=m.props[f],S=E?E===!0?d.params:typeof E=="function"?E(d):E:null,M=Ff(v,Ne({},S,e,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(m.instances[f]=null)},ref:c}));return Md(s.default,{Component:M,route:d})||M}}});function Md(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Dy=Vy;function xy(t){const e=by(t.routes,t),s=t.parseQuery||ny,n=t.stringifyQuery||Id,r=t.history,i=kr(),a=kr(),u=kr(),c=xg(Hs);let d=Hs;Un&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=La.bind(null,K=>""+K),m=La.bind(null,U_),v=La.bind(null,ni);function E(K,oe){let ie,ce;return Wf(K)?(ie=e.getRecordMatcher(K),ce=oe):ce=K,e.addRoute(ce,ie)}function S(K){const oe=e.getRecordMatcher(K);oe&&e.removeRoute(oe)}function k(){return e.getRoutes().map(K=>K.record)}function M(K){return!!e.getRecordMatcher(K)}function L(K,oe){if(oe=Ne({},oe||c.value),typeof K=="string"){const R=Ua(s,K,oe.path),U=e.resolve({path:R.path},oe),Y=r.createHref(R.fullPath);return Ne(R,U,{params:v(U.params),hash:ni(R.hash),redirectedFrom:void 0,href:Y})}let ie;if(K.path!=null)ie=Ne({},K,{path:Ua(s,K.path,oe.path).path});else{const R=Ne({},K.params);for(const U in R)R[U]==null&&delete R[U];ie=Ne({},K,{params:m(R)}),oe.params=m(oe.params)}const ce=e.resolve(ie,oe),ye=K.hash||"";ce.params=f(v(ce.params));const Ve=q_(n,Ne({},K,{hash:O_(ye),path:ce.path})),I=r.createHref(Ve);return Ne({fullPath:Ve,hash:ye,query:n===Id?ry(K.query):K.query||{}},ce,{redirectedFrom:void 0,href:I})}function x(K){return typeof K=="string"?Ua(s,K,c.value.path):Ne({},K)}function $(K,oe){if(d!==K)return tr(rt.NAVIGATION_CANCELLED,{from:oe,to:K})}function z(K){return g(K)}function ee(K){return z(Ne(x(K),{replace:!0}))}function N(K,oe){const ie=K.matched[K.matched.length-1];if(ie&&ie.redirect){const{redirect:ce}=ie;let ye=typeof ce=="function"?ce(K,oe):ce;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=x(ye):{path:ye},ye.params={}),Ne({query:K.query,hash:K.hash,params:ye.path!=null?{}:K.params},ye)}}function g(K,oe){const ie=d=L(K),ce=c.value,ye=K.state,Ve=K.force,I=K.replace===!0,R=N(ie,ce);if(R)return g(Ne(x(R),{state:typeof R=="object"?Ne({},ye,R.state):ye,force:Ve,replace:I}),oe||ie);const U=ie;U.redirectedFrom=oe;let Y;return!Ve&&G_(n,ce,ie)&&(Y=tr(rt.NAVIGATION_DUPLICATED,{to:U,from:ce}),Ht(ce,ce,!0,!1)),(Y?Promise.resolve(Y):w(U,ce)).catch(D=>ws(D)?ws(D,rt.NAVIGATION_GUARD_REDIRECT)?D:Gt(D):ge(D,U,ce)).then(D=>{if(D){if(ws(D,rt.NAVIGATION_GUARD_REDIRECT))return g(Ne({replace:I},x(D.to),{state:typeof D.to=="object"?Ne({},ye,D.to.state):ye,force:Ve}),oe||U)}else D=P(U,ce,!0,I,ye);return b(U,ce,D),D})}function y(K,oe){const ie=$(K,oe);return ie?Promise.reject(ie):Promise.resolve()}function A(K){const oe=ts.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(K):K()}function w(K,oe){let ie;const[ce,ye,Ve]=oy(K,oe);ie=ja(ce.reverse(),"beforeRouteLeave",K,oe);for(const R of ce)R.leaveGuards.forEach(U=>{ie.push(Qs(U,K,oe))});const I=y.bind(null,K,oe);return ie.push(I),St(ie).then(()=>{ie=[];for(const R of i.list())ie.push(Qs(R,K,oe));return ie.push(I),St(ie)}).then(()=>{ie=ja(ye,"beforeRouteUpdate",K,oe);for(const R of ye)R.updateGuards.forEach(U=>{ie.push(Qs(U,K,oe))});return ie.push(I),St(ie)}).then(()=>{ie=[];for(const R of Ve)if(R.beforeEnter)if(cs(R.beforeEnter))for(const U of R.beforeEnter)ie.push(Qs(U,K,oe));else ie.push(Qs(R.beforeEnter,K,oe));return ie.push(I),St(ie)}).then(()=>(K.matched.forEach(R=>R.enterCallbacks={}),ie=ja(Ve,"beforeRouteEnter",K,oe,A),ie.push(I),St(ie))).then(()=>{ie=[];for(const R of a.list())ie.push(Qs(R,K,oe));return ie.push(I),St(ie)}).catch(R=>ws(R,rt.NAVIGATION_CANCELLED)?R:Promise.reject(R))}function b(K,oe,ie){u.list().forEach(ce=>A(()=>ce(K,oe,ie)))}function P(K,oe,ie,ce,ye){const Ve=$(K,oe);if(Ve)return Ve;const I=oe===Hs,R=Un?history.state:{};ie&&(ce||I?r.replace(K.fullPath,Ne({scroll:I&&R&&R.scroll},ye)):r.push(K.fullPath,ye)),c.value=K,Ht(K,oe,ie,I),Gt()}let C;function Ce(){C||(C=r.listen((K,oe,ie)=>{if(!_t.listening)return;const ce=L(K),ye=N(ce,_t.currentRoute.value);if(ye){g(Ne(ye,{replace:!0,force:!0}),ce).catch(zr);return}d=ce;const Ve=c.value;Un&&X_(Ad(Ve.fullPath,ie.delta),Qo()),w(ce,Ve).catch(I=>ws(I,rt.NAVIGATION_ABORTED|rt.NAVIGATION_CANCELLED)?I:ws(I,rt.NAVIGATION_GUARD_REDIRECT)?(g(Ne(x(I.to),{force:!0}),ce).then(R=>{ws(R,rt.NAVIGATION_ABORTED|rt.NAVIGATION_DUPLICATED)&&!ie.delta&&ie.type===dl.pop&&r.go(-1,!1)}).catch(zr),Promise.reject()):(ie.delta&&r.go(-ie.delta,!1),ge(I,ce,Ve))).then(I=>{I=I||P(ce,Ve,!1),I&&(ie.delta&&!ws(I,rt.NAVIGATION_CANCELLED)?r.go(-ie.delta,!1):ie.type===dl.pop&&ws(I,rt.NAVIGATION_ABORTED|rt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),b(ce,Ve,I)}).catch(zr)}))}let ot=kr(),Ke=kr(),ae;function ge(K,oe,ie){Gt(K);const ce=Ke.list();return ce.length?ce.forEach(ye=>ye(K,oe,ie)):console.error(K),Promise.reject(K)}function mt(){return ae&&c.value!==Hs?Promise.resolve():new Promise((K,oe)=>{ot.add([K,oe])})}function Gt(K){return ae||(ae=!K,Ce(),ot.list().forEach(([oe,ie])=>K?ie(K):oe()),ot.reset()),K}function Ht(K,oe,ie,ce){const{scrollBehavior:ye}=t;if(!Un||!ye)return Promise.resolve();const Ve=!ie&&Z_(Ad(K.fullPath,0))||(ce||!ie)&&history.state&&history.state.scroll||null;return Ql().then(()=>ye(K,oe,Ve)).then(I=>I&&J_(I)).catch(I=>ge(I,K,oe))}const Ue=K=>r.go(K);let We;const ts=new Set,_t={currentRoute:c,listening:!0,addRoute:E,removeRoute:S,clearRoutes:e.clearRoutes,hasRoute:M,getRoutes:k,resolve:L,options:t,push:z,replace:ee,go:Ue,back:()=>Ue(-1),forward:()=>Ue(1),beforeEach:i.add,beforeResolve:a.add,afterEach:u.add,onError:Ke.add,isReady:mt,install(K){K.component("RouterLink",Ry),K.component("RouterView",Dy),K.config.globalProperties.$router=_t,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>pt(c)}),Un&&!We&&c.value===Hs&&(We=!0,z(r.location).catch(ce=>{}));const oe={};for(const ce in Hs)Object.defineProperty(oe,ce,{get:()=>c.value[ce],enumerable:!0});K.provide(iu,_t),K.provide(Yf,tf(oe)),K.provide(fl,c);const ie=K.unmount;ts.add(K),K.unmount=function(){ts.delete(K),ts.size<1&&(d=Hs,C&&C(),C=null,c.value=Hs,We=!1,ae=!1),ie()}}};function St(K){return K.reduce((oe,ie)=>oe.then(()=>A(ie)),Promise.resolve())}return _t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e[s++]=r:r<2048?(e[s++]=r>>6|192,e[s++]=r&63|128):(r&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023),e[s++]=r>>18|240,e[s++]=r>>12&63|128,e[s++]=r>>6&63|128,e[s++]=r&63|128):(e[s++]=r>>12|224,e[s++]=r>>6&63|128,e[s++]=r&63|128)}return e},Ny=function(t){const e=[];let s=0,n=0;for(;s<t.length;){const r=t[s++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[s++];e[n++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[s++],a=t[s++],u=t[s++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[s++],a=t[s++];e[n++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},tp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=i>>2,m=(i&3)<<4|u>>4;let v=(u&15)<<2|d>>6,E=d&63;c||(E=64,a||(v=64)),n.push(s[f],s[m],s[v],s[E])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ep(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ny(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<t.length;){const i=s[t.charAt(r++)],u=r<t.length?s[t.charAt(r)]:0;++r;const d=r<t.length?s[t.charAt(r)]:64;++r;const m=r<t.length?s[t.charAt(r)]:64;if(++r,i==null||u==null||d==null||m==null)throw new My;const v=i<<2|u>>4;if(n.push(v),d!==64){const E=u<<4&240|d>>2;if(n.push(E),m!==64){const S=d<<6&192|m;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class My extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $y=function(t){const e=ep(t);return tp.encodeByteArray(e,!0)},Eo=function(t){return $y(t).replace(/\./g,"")},Oy=function(t){try{return tp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=()=>Fy().__FIREBASE_DEFAULTS__,Uy=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},By=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Oy(t[1]);return e&&JSON.parse(e)},ou=()=>{try{return Ly()||Uy()||By()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jy=t=>{var e,s;return(s=(e=ou())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},qy=t=>{const e=jy(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),n]:[e.substring(0,s),n]},sp=()=>{var t;return(t=ou())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Eo(JSON.stringify(s)),Eo(JSON.stringify(a)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ky(){var t;const e=(t=ou())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wy(){return!Ky()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qy(){try{return typeof indexedDB=="object"}catch{return!1}}function Yy(){return new Promise((t,e)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),s||self.indexedDB.deleteDatabase(n),t(!0)},r.onupgradeneeded=()=>{s=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="FirebaseError";class cr extends Error{constructor(e,s,n){super(s),this.code=e,this.customData=n,this.name=Jy,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,np.prototype.create)}}class np{constructor(e,s,n){this.service=e,this.serviceName=s,this.errors=n}create(e,...s){const n=s[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Xy(i,n):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new cr(r,u,n)}}function Xy(t,e){return t.replace(Zy,(s,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const Zy=/\{\$([^}]+)}/g;function pl(t,e){if(t===e)return!0;const s=Object.keys(t),n=Object.keys(e);for(const r of s){if(!n.includes(r))return!1;const i=t[r],a=e[r];if($d(i)&&$d(a)){if(!pl(i,a))return!1}else if(i!==a)return!1}for(const r of n)if(!s.includes(r))return!1;return!0}function $d(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){return t&&t._delegate?t._delegate:t}class ri{constructor(e,s,n){this.name=e,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const n=new Gy;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:s});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s1(e))try{this.getOrInitializeService({instanceIdentifier:_n})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(s);try{const i=this.getOrInitializeService({instanceIdentifier:r});n.resolve(i)}catch{}}}}clearInstance(e=_n){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_n){return this.instances.has(e)}getOptions(e=_n){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[i,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&a.resolve(r)}return r}onInit(e,s){var n;const r=this.normalizeInstanceIdentifier(s),i=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const n=this.onInitCallbacks.get(s);if(n)for(const r of n)try{r(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:t1(e),options:s}),this.instances.set(e,n),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=_n){return this.component?this.component.multipleInstances?e:_n:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t1(t){return t===_n?void 0:t}function s1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new e1(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const r1={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},i1=ke.INFO,o1={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},a1=(t,e,...s)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),r=o1[e];if(r)console[r](`[${n}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class rp{constructor(e){this.name=e,this._logLevel=i1,this._logHandler=a1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const l1=(t,e)=>e.some(s=>t instanceof s);let Od,Fd;function u1(){return Od||(Od=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c1(){return Fd||(Fd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ip=new WeakMap,ml=new WeakMap,op=new WeakMap,qa=new WeakMap,au=new WeakMap;function d1(t){const e=new Promise((s,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{s(Zs(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(s=>{s instanceof IDBCursor&&ip.set(s,t)}).catch(()=>{}),au.set(e,t),e}function h1(t){if(ml.has(t))return;const e=new Promise((s,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{s(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});ml.set(t,e)}let gl={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return ml.get(t);if(e==="objectStoreNames")return t.objectStoreNames||op.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Zs(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f1(t){gl=t(gl)}function p1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(Ga(this),e,...s);return op.set(n,e.sort?e.sort():[e]),Zs(n)}:c1().includes(t)?function(...e){return t.apply(Ga(this),e),Zs(ip.get(this))}:function(...e){return Zs(t.apply(Ga(this),e))}}function m1(t){return typeof t=="function"?p1(t):(t instanceof IDBTransaction&&h1(t),l1(t,u1())?new Proxy(t,gl):t)}function Zs(t){if(t instanceof IDBRequest)return d1(t);if(qa.has(t))return qa.get(t);const e=m1(t);return e!==t&&(qa.set(t,e),au.set(e,t)),e}const Ga=t=>au.get(t);function g1(t,e,{blocked:s,upgrade:n,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),u=Zs(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Zs(a.result),c.oldVersion,c.newVersion,Zs(a.transaction),c)}),s&&a.addEventListener("blocked",c=>s(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const v1=["get","getKey","getAll","getAllKeys","count"],_1=["put","add","delete","clear"],Ha=new Map;function Ld(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Ha.get(e))return Ha.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,r=_1.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(r||v1.includes(s)))return;const i=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[s](...u),r&&c.done]))[0]};return Ha.set(e,i),i}f1(t=>({...t,get:(e,s,n)=>Ld(e,s)||t.get(e,s,n),has:(e,s)=>!!Ld(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(E1(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function E1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vl="@firebase/app",Ud="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new rp("@firebase/app"),b1="@firebase/app-compat",T1="@firebase/analytics-compat",A1="@firebase/analytics",I1="@firebase/app-check-compat",w1="@firebase/app-check",C1="@firebase/auth",S1="@firebase/auth-compat",R1="@firebase/database",P1="@firebase/data-connect",k1="@firebase/database-compat",V1="@firebase/functions",D1="@firebase/functions-compat",x1="@firebase/installations",N1="@firebase/installations-compat",M1="@firebase/messaging",$1="@firebase/messaging-compat",O1="@firebase/performance",F1="@firebase/performance-compat",L1="@firebase/remote-config",U1="@firebase/remote-config-compat",B1="@firebase/storage",j1="@firebase/storage-compat",q1="@firebase/firestore",G1="@firebase/vertexai-preview",H1="@firebase/firestore-compat",z1="firebase",K1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l="[DEFAULT]",W1={[vl]:"fire-core",[b1]:"fire-core-compat",[A1]:"fire-analytics",[T1]:"fire-analytics-compat",[w1]:"fire-app-check",[I1]:"fire-app-check-compat",[C1]:"fire-auth",[S1]:"fire-auth-compat",[R1]:"fire-rtdb",[P1]:"fire-data-connect",[k1]:"fire-rtdb-compat",[V1]:"fire-fn",[D1]:"fire-fn-compat",[x1]:"fire-iid",[N1]:"fire-iid-compat",[M1]:"fire-fcm",[$1]:"fire-fcm-compat",[O1]:"fire-perf",[F1]:"fire-perf-compat",[L1]:"fire-rc",[U1]:"fire-rc-compat",[B1]:"fire-gcs",[j1]:"fire-gcs-compat",[q1]:"fire-fst",[H1]:"fire-fst-compat",[G1]:"fire-vertex","fire-js":"fire-js",[z1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Map,Q1=new Map,yl=new Map;function Bd(t,e){try{t.container.addComponent(e)}catch(s){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function To(t){const e=t.name;if(yl.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;yl.set(e,t);for(const s of bo.values())Bd(s,t);for(const s of Q1.values())Bd(s,t);return!0}function Y1(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},en=new np("app","Firebase",J1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,s,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=K1;function ap(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:_l,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw en.create("bad-app-name",{appName:String(r)});if(s||(s=sp()),!s)throw en.create("no-options");const i=bo.get(r);if(i){if(pl(s,i.options)&&pl(n,i.config))return i;throw en.create("duplicate-app",{appName:r})}const a=new n1(r);for(const c of yl.values())a.addComponent(c);const u=new X1(s,n,a);return bo.set(r,u),u}function e0(t=_l){const e=bo.get(t);if(!e&&t===_l&&sp())return ap();if(!e)throw en.create("no-app",{appName:t});return e}function Wn(t,e,s){var n;let r=(n=W1[t])!==null&&n!==void 0?n:t;s&&(r+=`-${s}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(u.join(" "));return}To(new ri(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="firebase-heartbeat-database",s0=1,ii="firebase-heartbeat-store";let za=null;function lp(){return za||(za=g1(t0,s0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ii)}catch(s){console.warn(s)}}}}).catch(t=>{throw en.create("idb-open",{originalErrorMessage:t.message})})),za}async function n0(t){try{const s=(await lp()).transaction(ii),n=await s.objectStore(ii).get(up(t));return await s.done,n}catch(e){if(e instanceof cr)Ms.warn(e.message);else{const s=en.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(s.message)}}}async function jd(t,e){try{const n=(await lp()).transaction(ii,"readwrite");await n.objectStore(ii).put(e,up(t)),await n.done}catch(s){if(s instanceof cr)Ms.warn(s.message);else{const n=en.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Ms.warn(n.message)}}}function up(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=1024,i0=30*24*60*60*1e3;class o0{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new l0(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,s;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=qd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=i0}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ms.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=qd(),{heartbeatsToSend:n,unsentEntries:r}=a0(this._heartbeatsCache.heartbeats),i=Eo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(s){return Ms.warn(s),""}}}function qd(){return new Date().toISOString().substring(0,10)}function a0(t,e=r0){const s=[];let n=t.slice();for(const r of t){const i=s.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),Gd(s)>e){i.dates.pop();break}}else if(s.push({agent:r.agent,dates:[r.date]}),Gd(s)>e){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class l0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qy()?Yy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await n0(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const r=await this.read();return jd(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const r=await this.read();return jd(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Gd(t){return Eo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){To(new ri("platform-logger",e=>new y1(e),"PRIVATE")),To(new ri("heartbeat",e=>new o0(e),"PRIVATE")),Wn(vl,Ud,t),Wn(vl,Ud,"esm2017"),Wn("fire-js","")}u0("");var c0="firebase",d0="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(c0,d0,"app");var Hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var An,cp;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,y){function A(){}A.prototype=y.prototype,g.D=y.prototype,g.prototype=new A,g.prototype.constructor=g,g.C=function(w,b,P){for(var C=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)C[Ce-2]=arguments[Ce];return y.prototype[b].apply(w,C)}}function s(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,s),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(g,y,A){A||(A=0);var w=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)w[b]=y.charCodeAt(A++)|y.charCodeAt(A++)<<8|y.charCodeAt(A++)<<16|y.charCodeAt(A++)<<24;else for(b=0;16>b;++b)w[b]=y[A++]|y[A++]<<8|y[A++]<<16|y[A++]<<24;y=g.g[0],A=g.g[1],b=g.g[2];var P=g.g[3],C=y+(P^A&(b^P))+w[0]+3614090360&4294967295;y=A+(C<<7&4294967295|C>>>25),C=P+(b^y&(A^b))+w[1]+3905402710&4294967295,P=y+(C<<12&4294967295|C>>>20),C=b+(A^P&(y^A))+w[2]+606105819&4294967295,b=P+(C<<17&4294967295|C>>>15),C=A+(y^b&(P^y))+w[3]+3250441966&4294967295,A=b+(C<<22&4294967295|C>>>10),C=y+(P^A&(b^P))+w[4]+4118548399&4294967295,y=A+(C<<7&4294967295|C>>>25),C=P+(b^y&(A^b))+w[5]+1200080426&4294967295,P=y+(C<<12&4294967295|C>>>20),C=b+(A^P&(y^A))+w[6]+2821735955&4294967295,b=P+(C<<17&4294967295|C>>>15),C=A+(y^b&(P^y))+w[7]+4249261313&4294967295,A=b+(C<<22&4294967295|C>>>10),C=y+(P^A&(b^P))+w[8]+1770035416&4294967295,y=A+(C<<7&4294967295|C>>>25),C=P+(b^y&(A^b))+w[9]+2336552879&4294967295,P=y+(C<<12&4294967295|C>>>20),C=b+(A^P&(y^A))+w[10]+4294925233&4294967295,b=P+(C<<17&4294967295|C>>>15),C=A+(y^b&(P^y))+w[11]+2304563134&4294967295,A=b+(C<<22&4294967295|C>>>10),C=y+(P^A&(b^P))+w[12]+1804603682&4294967295,y=A+(C<<7&4294967295|C>>>25),C=P+(b^y&(A^b))+w[13]+4254626195&4294967295,P=y+(C<<12&4294967295|C>>>20),C=b+(A^P&(y^A))+w[14]+2792965006&4294967295,b=P+(C<<17&4294967295|C>>>15),C=A+(y^b&(P^y))+w[15]+1236535329&4294967295,A=b+(C<<22&4294967295|C>>>10),C=y+(b^P&(A^b))+w[1]+4129170786&4294967295,y=A+(C<<5&4294967295|C>>>27),C=P+(A^b&(y^A))+w[6]+3225465664&4294967295,P=y+(C<<9&4294967295|C>>>23),C=b+(y^A&(P^y))+w[11]+643717713&4294967295,b=P+(C<<14&4294967295|C>>>18),C=A+(P^y&(b^P))+w[0]+3921069994&4294967295,A=b+(C<<20&4294967295|C>>>12),C=y+(b^P&(A^b))+w[5]+3593408605&4294967295,y=A+(C<<5&4294967295|C>>>27),C=P+(A^b&(y^A))+w[10]+38016083&4294967295,P=y+(C<<9&4294967295|C>>>23),C=b+(y^A&(P^y))+w[15]+3634488961&4294967295,b=P+(C<<14&4294967295|C>>>18),C=A+(P^y&(b^P))+w[4]+3889429448&4294967295,A=b+(C<<20&4294967295|C>>>12),C=y+(b^P&(A^b))+w[9]+568446438&4294967295,y=A+(C<<5&4294967295|C>>>27),C=P+(A^b&(y^A))+w[14]+3275163606&4294967295,P=y+(C<<9&4294967295|C>>>23),C=b+(y^A&(P^y))+w[3]+4107603335&4294967295,b=P+(C<<14&4294967295|C>>>18),C=A+(P^y&(b^P))+w[8]+1163531501&4294967295,A=b+(C<<20&4294967295|C>>>12),C=y+(b^P&(A^b))+w[13]+2850285829&4294967295,y=A+(C<<5&4294967295|C>>>27),C=P+(A^b&(y^A))+w[2]+4243563512&4294967295,P=y+(C<<9&4294967295|C>>>23),C=b+(y^A&(P^y))+w[7]+1735328473&4294967295,b=P+(C<<14&4294967295|C>>>18),C=A+(P^y&(b^P))+w[12]+2368359562&4294967295,A=b+(C<<20&4294967295|C>>>12),C=y+(A^b^P)+w[5]+4294588738&4294967295,y=A+(C<<4&4294967295|C>>>28),C=P+(y^A^b)+w[8]+2272392833&4294967295,P=y+(C<<11&4294967295|C>>>21),C=b+(P^y^A)+w[11]+1839030562&4294967295,b=P+(C<<16&4294967295|C>>>16),C=A+(b^P^y)+w[14]+4259657740&4294967295,A=b+(C<<23&4294967295|C>>>9),C=y+(A^b^P)+w[1]+2763975236&4294967295,y=A+(C<<4&4294967295|C>>>28),C=P+(y^A^b)+w[4]+1272893353&4294967295,P=y+(C<<11&4294967295|C>>>21),C=b+(P^y^A)+w[7]+4139469664&4294967295,b=P+(C<<16&4294967295|C>>>16),C=A+(b^P^y)+w[10]+3200236656&4294967295,A=b+(C<<23&4294967295|C>>>9),C=y+(A^b^P)+w[13]+681279174&4294967295,y=A+(C<<4&4294967295|C>>>28),C=P+(y^A^b)+w[0]+3936430074&4294967295,P=y+(C<<11&4294967295|C>>>21),C=b+(P^y^A)+w[3]+3572445317&4294967295,b=P+(C<<16&4294967295|C>>>16),C=A+(b^P^y)+w[6]+76029189&4294967295,A=b+(C<<23&4294967295|C>>>9),C=y+(A^b^P)+w[9]+3654602809&4294967295,y=A+(C<<4&4294967295|C>>>28),C=P+(y^A^b)+w[12]+3873151461&4294967295,P=y+(C<<11&4294967295|C>>>21),C=b+(P^y^A)+w[15]+530742520&4294967295,b=P+(C<<16&4294967295|C>>>16),C=A+(b^P^y)+w[2]+3299628645&4294967295,A=b+(C<<23&4294967295|C>>>9),C=y+(b^(A|~P))+w[0]+4096336452&4294967295,y=A+(C<<6&4294967295|C>>>26),C=P+(A^(y|~b))+w[7]+1126891415&4294967295,P=y+(C<<10&4294967295|C>>>22),C=b+(y^(P|~A))+w[14]+2878612391&4294967295,b=P+(C<<15&4294967295|C>>>17),C=A+(P^(b|~y))+w[5]+4237533241&4294967295,A=b+(C<<21&4294967295|C>>>11),C=y+(b^(A|~P))+w[12]+1700485571&4294967295,y=A+(C<<6&4294967295|C>>>26),C=P+(A^(y|~b))+w[3]+2399980690&4294967295,P=y+(C<<10&4294967295|C>>>22),C=b+(y^(P|~A))+w[10]+4293915773&4294967295,b=P+(C<<15&4294967295|C>>>17),C=A+(P^(b|~y))+w[1]+2240044497&4294967295,A=b+(C<<21&4294967295|C>>>11),C=y+(b^(A|~P))+w[8]+1873313359&4294967295,y=A+(C<<6&4294967295|C>>>26),C=P+(A^(y|~b))+w[15]+4264355552&4294967295,P=y+(C<<10&4294967295|C>>>22),C=b+(y^(P|~A))+w[6]+2734768916&4294967295,b=P+(C<<15&4294967295|C>>>17),C=A+(P^(b|~y))+w[13]+1309151649&4294967295,A=b+(C<<21&4294967295|C>>>11),C=y+(b^(A|~P))+w[4]+4149444226&4294967295,y=A+(C<<6&4294967295|C>>>26),C=P+(A^(y|~b))+w[11]+3174756917&4294967295,P=y+(C<<10&4294967295|C>>>22),C=b+(y^(P|~A))+w[2]+718787259&4294967295,b=P+(C<<15&4294967295|C>>>17),C=A+(P^(b|~y))+w[9]+3951481745&4294967295,g.g[0]=g.g[0]+y&4294967295,g.g[1]=g.g[1]+(b+(C<<21&4294967295|C>>>11))&4294967295,g.g[2]=g.g[2]+b&4294967295,g.g[3]=g.g[3]+P&4294967295}n.prototype.u=function(g,y){y===void 0&&(y=g.length);for(var A=y-this.blockSize,w=this.B,b=this.h,P=0;P<y;){if(b==0)for(;P<=A;)r(this,g,P),P+=this.blockSize;if(typeof g=="string"){for(;P<y;)if(w[b++]=g.charCodeAt(P++),b==this.blockSize){r(this,w),b=0;break}}else for(;P<y;)if(w[b++]=g[P++],b==this.blockSize){r(this,w),b=0;break}}this.h=b,this.o+=y},n.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var y=1;y<g.length-8;++y)g[y]=0;var A=8*this.o;for(y=g.length-8;y<g.length;++y)g[y]=A&255,A/=256;for(this.u(g),g=Array(16),y=A=0;4>y;++y)for(var w=0;32>w;w+=8)g[A++]=this.g[y]>>>w&255;return g};function i(g,y){var A=u;return Object.prototype.hasOwnProperty.call(A,g)?A[g]:A[g]=y(g)}function a(g,y){this.h=y;for(var A=[],w=!0,b=g.length-1;0<=b;b--){var P=g[b]|0;w&&P==y||(A[b]=P,w=!1)}this.g=A}var u={};function c(g){return-128<=g&&128>g?i(g,function(y){return new a([y|0],0>y?-1:0)}):new a([g|0],0>g?-1:0)}function d(g){if(isNaN(g)||!isFinite(g))return m;if(0>g)return M(d(-g));for(var y=[],A=1,w=0;g>=A;w++)y[w]=g/A|0,A*=4294967296;return new a(y,0)}function f(g,y){if(g.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(g.charAt(0)=="-")return M(f(g.substring(1),y));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(y,8)),w=m,b=0;b<g.length;b+=8){var P=Math.min(8,g.length-b),C=parseInt(g.substring(b,b+P),y);8>P?(P=d(Math.pow(y,P)),w=w.j(P).add(d(C))):(w=w.j(A),w=w.add(d(C)))}return w}var m=c(0),v=c(1),E=c(16777216);t=a.prototype,t.m=function(){if(k(this))return-M(this).m();for(var g=0,y=1,A=0;A<this.g.length;A++){var w=this.i(A);g+=(0<=w?w:4294967296+w)*y,y*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(S(this))return"0";if(k(this))return"-"+M(this).toString(g);for(var y=d(Math.pow(g,6)),A=this,w="";;){var b=z(A,y).g;A=L(A,b.j(y));var P=((0<A.g.length?A.g[0]:A.h)>>>0).toString(g);if(A=b,S(A))return P+w;for(;6>P.length;)P="0"+P;w=P+w}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function S(g){if(g.h!=0)return!1;for(var y=0;y<g.g.length;y++)if(g.g[y]!=0)return!1;return!0}function k(g){return g.h==-1}t.l=function(g){return g=L(this,g),k(g)?-1:S(g)?0:1};function M(g){for(var y=g.g.length,A=[],w=0;w<y;w++)A[w]=~g.g[w];return new a(A,~g.h).add(v)}t.abs=function(){return k(this)?M(this):this},t.add=function(g){for(var y=Math.max(this.g.length,g.g.length),A=[],w=0,b=0;b<=y;b++){var P=w+(this.i(b)&65535)+(g.i(b)&65535),C=(P>>>16)+(this.i(b)>>>16)+(g.i(b)>>>16);w=C>>>16,P&=65535,C&=65535,A[b]=C<<16|P}return new a(A,A[A.length-1]&-2147483648?-1:0)};function L(g,y){return g.add(M(y))}t.j=function(g){if(S(this)||S(g))return m;if(k(this))return k(g)?M(this).j(M(g)):M(M(this).j(g));if(k(g))return M(this.j(M(g)));if(0>this.l(E)&&0>g.l(E))return d(this.m()*g.m());for(var y=this.g.length+g.g.length,A=[],w=0;w<2*y;w++)A[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<g.g.length;b++){var P=this.i(w)>>>16,C=this.i(w)&65535,Ce=g.i(b)>>>16,ot=g.i(b)&65535;A[2*w+2*b]+=C*ot,x(A,2*w+2*b),A[2*w+2*b+1]+=P*ot,x(A,2*w+2*b+1),A[2*w+2*b+1]+=C*Ce,x(A,2*w+2*b+1),A[2*w+2*b+2]+=P*Ce,x(A,2*w+2*b+2)}for(w=0;w<y;w++)A[w]=A[2*w+1]<<16|A[2*w];for(w=y;w<2*y;w++)A[w]=0;return new a(A,0)};function x(g,y){for(;(g[y]&65535)!=g[y];)g[y+1]+=g[y]>>>16,g[y]&=65535,y++}function $(g,y){this.g=g,this.h=y}function z(g,y){if(S(y))throw Error("division by zero");if(S(g))return new $(m,m);if(k(g))return y=z(M(g),y),new $(M(y.g),M(y.h));if(k(y))return y=z(g,M(y)),new $(M(y.g),y.h);if(30<g.g.length){if(k(g)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var A=v,w=y;0>=w.l(g);)A=ee(A),w=ee(w);var b=N(A,1),P=N(w,1);for(w=N(w,2),A=N(A,2);!S(w);){var C=P.add(w);0>=C.l(g)&&(b=b.add(A),P=C),w=N(w,1),A=N(A,1)}return y=L(g,b.j(y)),new $(b,y)}for(b=m;0<=g.l(y);){for(A=Math.max(1,Math.floor(g.m()/y.m())),w=Math.ceil(Math.log(A)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),P=d(A),C=P.j(y);k(C)||0<C.l(g);)A-=w,P=d(A),C=P.j(y);S(P)&&(P=v),b=b.add(P),g=L(g,C)}return new $(b,g)}t.A=function(g){return z(this,g).h},t.and=function(g){for(var y=Math.max(this.g.length,g.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)&g.i(w);return new a(A,this.h&g.h)},t.or=function(g){for(var y=Math.max(this.g.length,g.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)|g.i(w);return new a(A,this.h|g.h)},t.xor=function(g){for(var y=Math.max(this.g.length,g.g.length),A=[],w=0;w<y;w++)A[w]=this.i(w)^g.i(w);return new a(A,this.h^g.h)};function ee(g){for(var y=g.g.length+1,A=[],w=0;w<y;w++)A[w]=g.i(w)<<1|g.i(w-1)>>>31;return new a(A,g.h)}function N(g,y){var A=y>>5;y%=32;for(var w=g.g.length-A,b=[],P=0;P<w;P++)b[P]=0<y?g.i(P+A)>>>y|g.i(P+A+1)<<32-y:g.i(P+A);return new a(b,g.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,cp=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,An=a}).apply(typeof Hd<"u"?Hd:typeof self<"u"?self:typeof window<"u"?window:{});var zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dp,Nr,hp,oo,El,fp,pp,mp;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function s(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof zi=="object"&&zi];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=s(this);function r(l,h){if(h)e:{var p=n;l=l.split(".");for(var _=0;_<l.length-1;_++){var O=l[_];if(!(O in p))break e;p=p[O]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,_=!1,O={next:function(){if(!_&&p<l.length){var q=p++;return{value:h(q,l[q]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}r("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function v(l,h,p){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function E(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,O,q){for(var se=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)se[Be-2]=arguments[Be];return h.prototype[O].apply(_,se)}}function k(l){const h=l.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function M(l,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(c(_)){const O=l.length||0,q=_.length||0;l.length=O+q;for(let se=0;se<q;se++)l[O+se]=_[se]}else l.push(_)}}class L{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(l){return/^[\s\xa0]*$/.test(l)}function $(){var l=u.navigator;return l&&(l=l.userAgent)?l:""}function z(l){return z[" "](l),l}z[" "]=function(){};var ee=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function N(l,h,p){for(const _ in l)h.call(p,l[_],_,l)}function g(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,h){let p,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(p in _)l[p]=_[p];for(let q=0;q<A.length;q++)p=A[q],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function b(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){u.setTimeout(()=>{throw l},0)}function C(){var l=mt;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Ce{constructor(){this.h=this.g=null}add(h,p){const _=ot.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var ot=new L(()=>new Ke,l=>l.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ge=!1,mt=new Ce,Gt=()=>{const l=u.Promise.resolve(void 0);ae=()=>{l.then(Ht)}};var Ht=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(p){P(p)}var h=ot;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}ge=!1};function Ue(){this.s=this.s,this.C=this.C}Ue.prototype.s=!1,Ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var ts=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};u.addEventListener("test",p,h),u.removeEventListener("test",p,h)}catch{}return l}();function _t(l,h){if(We.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(ee){e:{try{z(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:St[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&_t.aa.h.call(this)}}S(_t,We);var St={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ie(l,h,p,_,O){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=O,this.key=++oe,this.da=this.fa=!1}function ce(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ye(l){this.src=l,this.g={},this.h=0}ye.prototype.add=function(l,h,p,_,O){var q=l.toString();l=this.g[q],l||(l=this.g[q]=[],this.h++);var se=I(l,h,_,O);return-1<se?(h=l[se],p||(h.fa=!1)):(h=new ie(h,this.src,q,!!_,O),h.fa=p,l.push(h)),h};function Ve(l,h){var p=h.type;if(p in l.g){var _=l.g[p],O=Array.prototype.indexOf.call(_,h,void 0),q;(q=0<=O)&&Array.prototype.splice.call(_,O,1),q&&(ce(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function I(l,h,p,_){for(var O=0;O<l.length;++O){var q=l[O];if(!q.da&&q.listener==h&&q.capture==!!p&&q.ha==_)return O}return-1}var R="closure_lm_"+(1e6*Math.random()|0),U={};function Y(l,h,p,_,O){if(_&&_.once)return G(l,h,p,_,O);if(Array.isArray(h)){for(var q=0;q<h.length;q++)Y(l,h[q],p,_,O);return null}return p=fe(p),l&&l[K]?l.K(h,p,d(_)?!!_.capture:!!_,O):D(l,h,p,!1,_,O)}function D(l,h,p,_,O,q){if(!h)throw Error("Invalid event type");var se=d(O)?!!O.capture:!!O,Be=B(l);if(Be||(l[R]=Be=new ye(l)),p=Be.add(h,p,_,se,q),p.proxy)return p;if(_=T(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)ts||(O=se),O===void 0&&(O=!1),l.addEventListener(h.toString(),_,O);else if(l.attachEvent)l.attachEvent(H(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function T(){function l(p){return h.call(l.src,l.listener,p)}const h=te;return l}function G(l,h,p,_,O){if(Array.isArray(h)){for(var q=0;q<h.length;q++)G(l,h[q],p,_,O);return null}return p=fe(p),l&&l[K]?l.L(h,p,d(_)?!!_.capture:!!_,O):D(l,h,p,!0,_,O)}function W(l,h,p,_,O){if(Array.isArray(h))for(var q=0;q<h.length;q++)W(l,h[q],p,_,O);else _=d(_)?!!_.capture:!!_,p=fe(p),l&&l[K]?(l=l.i,h=String(h).toString(),h in l.g&&(q=l.g[h],p=I(q,p,_,O),-1<p&&(ce(q[p]),Array.prototype.splice.call(q,p,1),q.length==0&&(delete l.g[h],l.h--)))):l&&(l=B(l))&&(h=l.g[h.toString()],l=-1,h&&(l=I(h,p,_,O)),(p=-1<l?h[l]:null)&&J(p))}function J(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[K])Ve(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(H(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=B(h))?(Ve(p,l),p.h==0&&(p.src=null,h[R]=null)):ce(l)}}}function H(l){return l in U?U[l]:U[l]="on"+l}function te(l,h){if(l.da)l=!0;else{h=new _t(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&J(l),l=p.call(_,h)}return l}function B(l){return l=l[R],l instanceof ye?l:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(l){return typeof l=="function"?l:(l[Z]||(l[Z]=function(h){return l.handleEvent(h)}),l[Z])}function me(){Ue.call(this),this.i=new ye(this),this.M=this,this.F=null}S(me,Ue),me.prototype[K]=!0,me.prototype.removeEventListener=function(l,h,p,_){W(this,l,h,p,_)};function Ae(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new We(h,l);else if(h instanceof We)h.target=h.target||l;else{var O=h;h=new We(_,l),w(h,O)}if(O=!0,p)for(var q=p.length-1;0<=q;q--){var se=h.g=p[q];O=Re(se,_,!0,h)&&O}if(se=h.g=l,O=Re(se,_,!0,h)&&O,O=Re(se,_,!1,h)&&O,p)for(q=0;q<p.length;q++)se=h.g=p[q],O=Re(se,_,!1,h)&&O}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)ce(p[_]);delete l.g[h],l.h--}}this.F=null},me.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},me.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Re(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,q=0;q<h.length;++q){var se=h[q];if(se&&!se.da&&se.capture==p){var Be=se.listener,bt=se.ha||se.src;se.fa&&Ve(l.i,se),O=Be.call(bt,_)!==!1&&O}}return O&&!_.defaultPrevented}function yt(l,h,p){if(typeof l=="function")p&&(l=v(l,p));else if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(l,h||0)}function dt(l){l.g=yt(()=>{l.g=null,l.i&&(l.i=!1,dt(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Qt extends Ue{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ht(l){Ue.call(this),this.h=l,this.g={}}S(ht,Ue);var Bs=[];function mr(l){N(l.g,function(h,p){this.g.hasOwnProperty(p)&&J(h)},l),l.g={}}ht.prototype.N=function(){ht.aa.N.call(this),mr(this)},ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=u.JSON.stringify,ss=u.JSON.parse,Ci=class{stringify(l){return u.JSON.stringify(l,void 0)}parse(l){return u.JSON.parse(l,void 0)}};function Dn(){}Dn.prototype.h=null;function Ku(l){return l.h||(l.h=l.i())}function Wu(){}var gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ma(){We.call(this,"d")}S(ma,We);function ga(){We.call(this,"c")}S(ga,We);var cn={},Qu=null;function Si(){return Qu=Qu||new me}cn.La="serverreachability";function Yu(l){We.call(this,cn.La,l)}S(Yu,We);function vr(l){const h=Si();Ae(h,new Yu(h))}cn.STAT_EVENT="statevent";function Ju(l,h){We.call(this,cn.STAT_EVENT,l),this.stat=h}S(Ju,We);function Ft(l){const h=Si();Ae(h,new Ju(h,l))}cn.Ma="timingevent";function Xu(l,h){We.call(this,cn.Ma,l),this.size=h}S(Xu,We);function _r(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){l()},h)}function yr(){this.g=!0}yr.prototype.xa=function(){this.g=!1};function Dm(l,h,p,_,O,q){l.info(function(){if(l.g)if(q)for(var se="",Be=q.split("&"),bt=0;bt<Be.length;bt++){var De=Be[bt].split("=");if(1<De.length){var Rt=De[0];De=De[1];var Pt=Rt.split("_");se=2<=Pt.length&&Pt[1]=="type"?se+(Rt+"="+De+"&"):se+(Rt+"=redacted&")}}else se=null;else se=q;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+h+`
`+p+`
`+se})}function xm(l,h,p,_,O,q,se){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+h+`
`+p+`
`+q+" "+se})}function xn(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+Mm(l,p)+(_?" "+_:"")})}function Nm(l,h){l.info(function(){return"TIMEOUT: "+h})}yr.prototype.info=function(){};function Mm(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var q=O[0];if(q!="noop"&&q!="stop"&&q!="close")for(var se=1;se<O.length;se++)O[se]=""}}}}return Et(p)}catch{return h}}var Ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},va;function Pi(){}S(Pi,Dn),Pi.prototype.g=function(){return new XMLHttpRequest},Pi.prototype.i=function(){return{}},va=new Pi;function js(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ec}function ec(){this.i=null,this.g="",this.h=!1}var tc={},_a={};function ya(l,h,p){l.L=1,l.v=xi(Ts(h)),l.m=p,l.P=!0,sc(l,null)}function sc(l,h){l.F=Date.now(),ki(l),l.A=Ts(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),gc(p.i,"t",_),l.C=0,p=l.j.J,l.h=new ec,l.g=Nc(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Qt(v(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Bs[0]=O.toString()),O=Bs);for(var q=0;q<O.length;q++){var se=Y(p,O[q],_||h.handleEvent,!1,h.h||h);if(!se)break;h.g[se.key]=se}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),vr(),Dm(l.i,l.u,l.A,l.l,l.R,l.m)}js.prototype.ca=function(l){l=l.target;const h=this.M;h&&As(l)==3?h.j():this.Y(l)},js.prototype.Y=function(l){try{if(l==this.g)e:{const Pt=As(this.g);var h=this.g.Ba();const $n=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Ac(this.g)))){this.J||Pt!=4||h==7||(h==8||0>=$n?vr(3):vr(2)),Ea(this);var p=this.g.Z();this.X=p;t:if(nc(this)){var _=Ac(this.g);l="";var O=_.length,q=As(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),Er(this);var se="";break t}this.h.i=new u.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(q&&h==O-1)});_.length=0,this.h.g+=l,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=p==200,xm(this.i,this.u,this.A,this.l,this.R,Pt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Be,bt=this.g;if((Be=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Be)){var De=Be;break t}}De=null}if(p=De)xn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ba(this,p);else{this.o=!1,this.s=3,Ft(12),dn(this),Er(this);break e}}if(this.P){p=!0;let os;for(;!this.J&&this.C<se.length;)if(os=$m(this,se),os==_a){Pt==4&&(this.s=4,Ft(14),p=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(os==tc){this.s=4,Ft(15),xn(this.i,this.l,se,"[Invalid Chunk]"),p=!1;break}else xn(this.i,this.l,os,null),ba(this,os);if(nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||se.length!=0||this.h.h||(this.s=1,Ft(16),p=!1),this.o=this.o&&p,!p)xn(this.i,this.l,se,"[Invalid Chunked Response]"),dn(this),Er(this);else if(0<se.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Sa(Rt),Rt.M=!0,Ft(11))}}else xn(this.i,this.l,se,null),ba(this,se);Pt==4&&dn(this),this.o&&!this.J&&(Pt==4?kc(this.j,this):(this.o=!1,ki(this)))}else Zm(this.g),p==400&&0<se.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),dn(this),Er(this)}}}catch{}finally{}};function nc(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function $m(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?_a:(p=Number(h.substring(p,_)),isNaN(p)?tc:(_+=1,_+p>h.length?_a:(h=h.slice(_,_+p),l.C=_+p,h)))}js.prototype.cancel=function(){this.J=!0,dn(this)};function ki(l){l.S=Date.now()+l.I,rc(l,l.I)}function rc(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=_r(v(l.ba,l),h)}function Ea(l){l.B&&(u.clearTimeout(l.B),l.B=null)}js.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Nm(this.i,this.A),this.L!=2&&(vr(),Ft(17)),dn(this),this.s=2,Er(this)):rc(this,this.S-l)};function Er(l){l.j.G==0||l.J||kc(l.j,l)}function dn(l){Ea(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,mr(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function ba(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Ta(p.h,l))){if(!l.K&&Ta(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Li(p),Oi(p);else break e;Ca(p),Ft(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=_r(v(p.Za,p),6e3));if(1>=ac(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else fn(p,11)}else if((l.K||p.g==l)&&Li(p),!x(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let De=O[h];if(p.T=De[0],De=De[1],p.G==2)if(De[0]=="c"){p.K=De[1],p.ia=De[2];const Rt=De[3];Rt!=null&&(p.la=Rt,p.j.info("VER="+p.la));const Pt=De[4];Pt!=null&&(p.Aa=Pt,p.j.info("SVER="+p.Aa));const $n=De[5];$n!=null&&typeof $n=="number"&&0<$n&&(_=1.5*$n,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const os=l.g;if(os){const Bi=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var q=_.h;q.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Aa(q,q.h),q.h=null))}if(_.D){const Ra=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Ra&&(_.ya=Ra,Je(_.I,_.D,Ra))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var se=l;if(_.qa=xc(_,_.J?_.ia:null,_.W),se.K){lc(_.h,se);var Be=se,bt=_.L;bt&&(Be.I=bt),Be.B&&(Ea(Be),ki(Be)),_.g=se}else Rc(_);0<p.i.length&&Fi(p)}else De[0]!="stop"&&De[0]!="close"||fn(p,7);else p.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?fn(p,7):wa(p):De[0]!="noop"&&p.l&&p.l.ta(De),p.v=0)}}vr(4)}catch{}}var Om=class{constructor(l,h){this.g=l,this.map=h}};function ic(l){this.l=l||10,u.PerformanceNavigationTiming?(l=u.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function oc(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ac(l){return l.h?1:l.g?l.g.size:0}function Ta(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Aa(l,h){l.g?l.g.add(h):l.h=h}function lc(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}ic.prototype.cancel=function(){if(this.i=uc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function uc(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return k(l.i)}function Fm(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function Lm(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const _ in l)h[p++]=_;return h}}}function cc(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=Lm(l),_=Fm(l),O=_.length,q=0;q<O;q++)h.call(void 0,_[q],p&&p[q],l)}var dc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Um(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),O=null;if(0<=_){var q=l[p].substring(0,_);O=l[p].substring(_+1)}else q=l[p];h(q,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function hn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof hn){this.h=l.h,Vi(this,l.j),this.o=l.o,this.g=l.g,Di(this,l.s),this.l=l.l;var h=l.i,p=new Ar;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),hc(this,p),this.m=l.m}else l&&(h=String(l).match(dc))?(this.h=!1,Vi(this,h[1]||"",!0),this.o=br(h[2]||""),this.g=br(h[3]||"",!0),Di(this,h[4]),this.l=br(h[5]||"",!0),hc(this,h[6]||"",!0),this.m=br(h[7]||"")):(this.h=!1,this.i=new Ar(null,this.h))}hn.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Tr(h,fc,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Tr(h,fc,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Tr(p,p.charAt(0)=="/"?qm:jm,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Tr(p,Hm)),l.join("")};function Ts(l){return new hn(l)}function Vi(l,h,p){l.j=p?br(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Di(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function hc(l,h,p){h instanceof Ar?(l.i=h,zm(l.i,l.h)):(p||(h=Tr(h,Gm)),l.i=new Ar(h,l.h))}function Je(l,h,p){l.i.set(h,p)}function xi(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function br(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Tr(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,Bm),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Bm(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var fc=/[#\/\?@]/g,jm=/[#\?:]/g,qm=/[#\?]/g,Gm=/[#\?@]/g,Hm=/#/g;function Ar(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function qs(l){l.g||(l.g=new Map,l.h=0,l.i&&Um(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ar.prototype,t.add=function(l,h){qs(this),this.i=null,l=Nn(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function pc(l,h){qs(l),h=Nn(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function mc(l,h){return qs(l),h=Nn(l,h),l.g.has(h)}t.forEach=function(l,h){qs(this),this.g.forEach(function(p,_){p.forEach(function(O){l.call(h,O,_,this)},this)},this)},t.na=function(){qs(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const O=l[_];for(let q=0;q<O.length;q++)p.push(h[_])}return p},t.V=function(l){qs(this);let h=[];if(typeof l=="string")mc(this,l)&&(h=h.concat(this.g.get(Nn(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return qs(this),this.i=null,l=Nn(this,l),mc(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function gc(l,h,p){pc(l,h),0<p.length&&(l.i=null,l.g.set(Nn(l,h),k(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const q=encodeURIComponent(String(_)),se=this.V(_);for(_=0;_<se.length;_++){var O=q;se[_]!==""&&(O+="="+encodeURIComponent(String(se[_]))),l.push(O)}}return this.i=l.join("&")};function Nn(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function zm(l,h){h&&!l.j&&(qs(l),l.i=null,l.g.forEach(function(p,_){var O=_.toLowerCase();_!=O&&(pc(this,_),gc(this,O,p))},l)),l.j=h}function Km(l,h){const p=new yr;if(u.Image){const _=new Image;_.onload=E(Gs,p,"TestLoadImage: loaded",!0,h,_),_.onerror=E(Gs,p,"TestLoadImage: error",!1,h,_),_.onabort=E(Gs,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=E(Gs,p,"TestLoadImage: timeout",!1,h,_),u.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function Wm(l,h){const p=new yr,_=new AbortController,O=setTimeout(()=>{_.abort(),Gs(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(q=>{clearTimeout(O),q.ok?Gs(p,"TestPingServer: ok",!0,h):Gs(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Gs(p,"TestPingServer: error",!1,h)})}function Gs(l,h,p,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(p)}catch{}}function Qm(){this.g=new Ci}function Ym(l,h,p){const _=p||"";try{cc(l,function(O,q){let se=O;d(O)&&(se=Et(O)),h.push(_+q+"="+encodeURIComponent(se))})}catch(O){throw h.push(_+"type="+encodeURIComponent("_badmap")),O}}function Ni(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Ni,Dn),Ni.prototype.g=function(){return new Mi(this.l,this.j)},Ni.prototype.i=function(l){return function(){return l}}({});function Mi(l,h){me.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Mi,me),t=Mi.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,wr(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vc(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function vc(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ir(this):wr(this),this.readyState==3&&vc(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ir(this))},t.Qa=function(l){this.g&&(this.response=l,Ir(this))},t.ga=function(){this.g&&Ir(this)};function Ir(l){l.readyState=4,l.l=null,l.j=null,l.v=null,wr(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function wr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function _c(l){let h="";return N(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function Ia(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=_c(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Je(l,h,p))}function nt(l){me.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(nt,me);var Jm=/^https?$/i,Xm=["POST","PUT"];t=nt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():va.g(),this.v=this.o?Ku(this.o):Ku(va),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(q){yc(this,q);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)p.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const q of _.keys())p.set(q,_.get(q));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(q=>q.toLowerCase()=="content-type"),O=u.FormData&&l instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Xm,h,void 0))||_||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,se]of p)this.g.setRequestHeader(q,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tc(this),this.u=!0,this.g.send(l),this.u=!1}catch(q){yc(this,q)}};function yc(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Ec(l),$i(l)}function Ec(l){l.A||(l.A=!0,Ae(l,"complete"),Ae(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ae(this,"complete"),Ae(this,"abort"),$i(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?bc(this):this.bb())},t.bb=function(){bc(this)};function bc(l){if(l.h&&typeof a<"u"&&(!l.v[1]||As(l)!=4||l.Z()!=2)){if(l.u&&As(l)==4)yt(l.Ea,0,l);else if(Ae(l,"readystatechange"),As(l)==4){l.h=!1;try{const se=l.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=se===0){var O=String(l.D).match(dc)[1]||null;!O&&u.self&&u.self.location&&(O=u.self.location.protocol.slice(0,-1)),_=!Jm.test(O?O.toLowerCase():"")}p=_}if(p)Ae(l,"complete"),Ae(l,"success");else{l.m=6;try{var q=2<As(l)?l.g.statusText:""}catch{q=""}l.l=q+" ["+l.Z()+"]",Ec(l)}}finally{$i(l)}}}}function $i(l,h){if(l.g){Tc(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Ae(l,"ready");try{p.onreadystatechange=_}catch{}}}function Tc(l){l.I&&(u.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function As(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<As(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),ss(h)}};function Ac(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Zm(l){const h={};l=(l.g&&2<=As(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(x(l[_]))continue;var p=b(l[_]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const q=h[O]||[];h[O]=q,q.push(p)}g(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cr(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Ic(l){this.Aa=0,this.i=[],this.j=new yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cr("baseRetryDelayMs",5e3,l),this.cb=Cr("retryDelaySeedMs",1e4,l),this.Wa=Cr("forwardChannelMaxRetries",2,l),this.wa=Cr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ic(l&&l.concurrentRequestLimit),this.Da=new Qm,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ic.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,_){Ft(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=xc(this,null,this.W),Fi(this)};function wa(l){if(wc(l),l.G==3){var h=l.U++,p=Ts(l.I);if(Je(p,"SID",l.K),Je(p,"RID",h),Je(p,"TYPE","terminate"),Sr(l,p),h=new js(l,l.j,h),h.L=2,h.v=xi(Ts(p)),p=!1,u.navigator&&u.navigator.sendBeacon)try{p=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&u.Image&&(new Image().src=h.v,p=!0),p||(h.g=Nc(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ki(h)}Dc(l)}function Oi(l){l.g&&(Sa(l),l.g.cancel(),l.g=null)}function wc(l){Oi(l),l.u&&(u.clearTimeout(l.u),l.u=null),Li(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&u.clearTimeout(l.s),l.s=null)}function Fi(l){if(!oc(l.h)&&!l.s){l.s=!0;var h=l.Ga;ae||Gt(),ge||(ae(),ge=!0),mt.add(h,l),l.B=0}}function eg(l,h){return ac(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=_r(v(l.Ga,l,h),Vc(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new js(this,this.j,l);let q=this.o;if(this.S&&(q?(q=y(q),w(q,this.S)):q=this.S),this.m!==null||this.O||(O.H=q,q=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Sc(this,O,h),p=Ts(this.I),Je(p,"RID",l),Je(p,"CVER",22),this.D&&Je(p,"X-HTTP-Session-Id",this.D),Sr(this,p),q&&(this.O?h="headers="+encodeURIComponent(String(_c(q)))+"&"+h:this.m&&Ia(p,this.m,q)),Aa(this.h,O),this.Ua&&Je(p,"TYPE","init"),this.P?(Je(p,"$req",h),Je(p,"SID","null"),O.T=!0,ya(O,p,null)):ya(O,p,h),this.G=2}}else this.G==3&&(l?Cc(this,l):this.i.length==0||oc(this.h)||Cc(this))};function Cc(l,h){var p;h?p=h.l:p=l.U++;const _=Ts(l.I);Je(_,"SID",l.K),Je(_,"RID",p),Je(_,"AID",l.T),Sr(l,_),l.m&&l.o&&Ia(_,l.m,l.o),p=new js(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Sc(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Aa(l.h,p),ya(p,_,h)}function Sr(l,h){l.H&&N(l.H,function(p,_){Je(h,_,p)}),l.l&&cc({},function(p,_){Je(h,_,p)})}function Sc(l,h,p){p=Math.min(l.i.length,p);var _=l.l?v(l.l.Na,l.l,l):null;e:{var O=l.i;let q=-1;for(;;){const se=["count="+p];q==-1?0<p?(q=O[0].g,se.push("ofs="+q)):q=0:se.push("ofs="+q);let Be=!0;for(let bt=0;bt<p;bt++){let De=O[bt].g;const Rt=O[bt].map;if(De-=q,0>De)q=Math.max(0,O[bt].g-100),Be=!1;else try{Ym(Rt,se,"req"+De+"_")}catch{_&&_(Rt)}}if(Be){_=se.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function Rc(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ae||Gt(),ge||(ae(),ge=!0),mt.add(h,l),l.v=0}}function Ca(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=_r(v(l.Fa,l),Vc(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Pc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=_r(v(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),Oi(this),Pc(this))};function Sa(l){l.A!=null&&(u.clearTimeout(l.A),l.A=null)}function Pc(l){l.g=new js(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Ts(l.qa);Je(h,"RID","rpc"),Je(h,"SID",l.K),Je(h,"AID",l.T),Je(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(h,"TO",l.ja),Je(h,"TYPE","xmlhttp"),Sr(l,h),l.m&&l.o&&Ia(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=xi(Ts(h)),p.m=null,p.P=!0,sc(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Oi(this),Ca(this),Ft(19))};function Li(l){l.C!=null&&(u.clearTimeout(l.C),l.C=null)}function kc(l,h){var p=null;if(l.g==h){Li(l),Sa(l),l.g=null;var _=2}else if(Ta(l.h,h))p=h.D,lc(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;_=Si(),Ae(_,new Xu(_,p)),Fi(l)}else Rc(l);else if(O=h.s,O==3||O==0&&0<h.X||!(_==1&&eg(l,h)||_==2&&Ca(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),O){case 1:fn(l,5);break;case 4:fn(l,10);break;case 3:fn(l,6);break;default:fn(l,2)}}}function Vc(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function fn(l,h){if(l.j.info("Error code "+h),h==2){var p=v(l.fb,l),_=l.Xa;const O=!_;_=new hn(_||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Vi(_,"https"),xi(_),O?Km(_.toString(),p):Wm(_.toString(),p)}else Ft(2);l.G=0,l.l&&l.l.sa(h),Dc(l),wc(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function Dc(l){if(l.G=0,l.ka=[],l.l){const h=uc(l.h);(h.length!=0||l.i.length!=0)&&(M(l.ka,h),M(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function xc(l,h,p){var _=p instanceof hn?Ts(p):new hn(p);if(_.g!="")h&&(_.g=h+"."+_.g),Di(_,_.s);else{var O=u.location;_=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var q=new hn(null);_&&Vi(q,_),h&&(q.g=h),O&&Di(q,O),p&&(q.l=p),_=q}return p=l.D,h=l.ya,p&&h&&Je(_,p,h),Je(_,"VER",l.la),Sr(l,_),_}function Nc(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new nt(new Ni({eb:p})):new nt(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mc(){}t=Mc.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ui(){}Ui.prototype.g=function(l,h){return new Yt(l,h)};function Yt(l,h){me.call(this),this.g=new Ic(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!x(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Mn(this)}S(Yt,me),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){wa(this.g)},Yt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Et(l),l=p);h.i.push(new Om(h.Ya++,l)),h.G==3&&Fi(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,wa(this.g),delete this.g,Yt.aa.N.call(this)};function $c(l){ma.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S($c,ma);function Oc(){ga.call(this),this.status=1}S(Oc,ga);function Mn(l){this.g=l}S(Mn,Mc),Mn.prototype.ua=function(){Ae(this.g,"a")},Mn.prototype.ta=function(l){Ae(this.g,new $c(l))},Mn.prototype.sa=function(l){Ae(this.g,new Oc)},Mn.prototype.ra=function(){Ae(this.g,"b")},Ui.prototype.createWebChannel=Ui.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,mp=function(){return new Ui},pp=function(){return Si()},fp=cn,El={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,oo=Ri,Zu.COMPLETE="complete",hp=Zu,Wu.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",me.prototype.listen=me.prototype.K,Nr=Wu,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,dp=nt}).apply(typeof zi<"u"?zi:typeof self<"u"?self:typeof window<"u"?window:{});const zd="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dr="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new rp("@firebase/firestore");function Vr(){return In.logLevel}function de(t,...e){if(In.logLevel<=ke.DEBUG){const s=e.map(lu);In.debug(`Firestore (${dr}): ${t}`,...s)}}function $s(t,...e){if(In.logLevel<=ke.ERROR){const s=e.map(lu);In.error(`Firestore (${dr}): ${t}`,...s)}}function sr(t,...e){if(In.logLevel<=ke.WARN){const s=e.map(lu);In.warn(`Firestore (${dr}): ${t}`,...s)}}function lu(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${dr}) INTERNAL ASSERTION FAILED: `+t;throw $s(e),new Error(e)}function Oe(t,e){t||_e()}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends cr{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Vt.UNAUTHENTICATED))}shutdown(){}}class f0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class p0{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){Oe(this.o===void 0);let n=this.i;const r=c=>this.i!==n?(n=this.i,s(c)):Promise.resolve();let i=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vs)}},0),a()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(n=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Oe(typeof n.accessToken=="string"),new gp(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new Vt(e)}}class m0{constructor(e,s,n){this.l=e,this.h=s,this.P=n,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class g0{constructor(e,s,n){this.l=e,this.h=s,this.P=n}getToken(){return Promise.resolve(new m0(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable(()=>s(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){Oe(this.o===void 0);const n=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,de("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?s(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const r=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(Oe(typeof s.token=="string"),this.R=s.token,new v0(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let n=0;n<t;n++)s[n]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=y0(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<s&&(n+=e.charAt(r[i]%e.length))}return n}}function xe(t,e){return t<e?-1:t>e?1:0}function nr(t,e,s){return t.length===e.length&&t.every((n,r)=>s(n,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*s));return new tt(s,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?xe(this.nanoseconds,e.nanoseconds):xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new tt(0,0))}static max(){return new Ee(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,s,n){s===void 0?s=0:s>e.length&&_e(),n===void 0?n=e.length-s:n>e.length-s&&_e(),this.segments=e,this.offset=s,this.len=n}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach(n=>{s.push(n)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,n=this.limit();s<n;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const n=Math.min(e.length,s.length);for(let r=0;r<n;r++){const i=e.get(r),a=s.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class Ze extends oi{construct(e,s,n){return new Ze(e,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const n of e){if(n.indexOf("//")>=0)throw new le(Q.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter(r=>r.length>0))}return new Ze(s)}static emptyPath(){return new Ze([])}}const E0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends oi{construct(e,s,n){return new At(e,s,n)}static isValidIdentifier(e){return E0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new At(["__name__"])}static fromServerFormat(e){const s=[];let n="",r=0;const i=()=>{if(n.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new le(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(n+=u,r++):(i(),r++)}if(i(),a)throw new le(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(s)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ze.fromString(e))}static fromName(e){return new pe(Ze.fromString(e).popFirst(5))}static empty(){return new pe(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Ze.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ze(e.slice()))}}function b0(t,e){const s=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,r=Ee.fromTimestamp(n===1e9?new tt(s+1,0):new tt(s,n));return new nn(r,pe.empty(),e)}function T0(t){return new nn(t.readTime,t.key,-1)}class nn{constructor(e,s,n){this.readTime=e,this.documentKey=s,this.largestBatchId=n}static min(){return new nn(Ee.min(),pe.empty(),-1)}static max(){return new nn(Ee.max(),pe.empty(),-1)}}function A0(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=pe.comparator(t.documentKey,e.documentKey),s!==0?s:xe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==I0)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new X((n,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,r)},this.catchCallback=i=>{this.wrapFailure(s,i).next(n,r)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof X?s:X.resolve(s)}catch(s){return X.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):X.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):X.reject(s)}static resolve(e){return new X((s,n)=>{s(e)})}static reject(e){return new X((s,n)=>{n(e)})}static waitFor(e){return new X((s,n)=>{let r=0,i=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++i,a&&i===r&&s()},c=>n(c))}),a=!0,i===r&&s()})}static or(e){let s=X.resolve(!1);for(const n of e)s=s.next(r=>r?X.resolve(r):n());return s}static forEach(e,s){const n=[];return e.forEach((r,i)=>{n.push(s.call(this,r,i))}),this.waitFor(n)}static mapArray(e,s){return new X((n,r)=>{const i=e.length,a=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;s(e[d]).next(f=>{a[d]=f,++u,u===i&&n(a)},f=>r(f))}})}static doWhile(e,s){return new X((n,r)=>{const i=()=>{e()===!0?s().next(()=>{i()},r):n()};i()})}}function C0(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function yi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=n=>this.ie(n),this.se=n=>s.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}uu.oe=-1;function Yo(t){return t==null}function Ao(t){return t===0&&1/t==-1/0}function S0(t){return typeof t=="number"&&Number.isInteger(t)&&!Ao(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Rn(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function _p(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,s){this.comparator=e,this.root=s||Tt.EMPTY}insert(e,s){return new st(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}indexOf(e){let s=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return s+n.left.size;r<0?n=n.left:(s+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,n)=>(e(s,n),!1))}toString(){const e=[];return this.inorderTraversal((s,n)=>(e.push(`${s}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ki(this.root,e,this.comparator,!0)}}class Ki{constructor(e,s,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=s?n(e.key,s):1,s&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,s,n,r,i){this.key=e,this.value=s,this.color=n??Tt.RED,this.left=r??Tt.EMPTY,this.right=i??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,n,r,i){return new Tt(e??this.key,s??this.value,n??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,s,n),null):i===0?r.copy(null,s,null,null,null):r.copy(null,null,null,null,r.right.insert(e,s,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let n,r=this;if(s(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,s),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),s(e,r.key)===0){if(r.right.isEmpty())return Tt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,s))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,s,n,r,i){return this}insert(e,s,n){return new Tt(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,n)=>(e(s),!1))}forEachInRange(e,s){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;s(r.key)}}forEachWhile(e,s){let n;for(n=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Wd(this.data.getIterator())}getIteratorFrom(e){return new Wd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(n=>{s=s.add(n)}),s}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const s=this.data.getIterator(),n=e.data.getIterator();for(;s.hasNext();){const r=s.getNext().key,i=n.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new It(this.comparator);return s.data=e,s}}class Wd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new Zt([])}unionWith(e){let s=new It(At.comparator);for(const n of this.fields)s=s.add(n);for(const n of e)s=s.add(n);return new Zt(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return nr(this.fields,e.fields,(s,n)=>s.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new yp("Invalid base64 string: "+i):i}}(e);return new wt(s)}static fromUint8Array(e){const s=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new wt(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const n=new Uint8Array(s.length);for(let r=0;r<s.length;r++)n[r]=s.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const R0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rn(t){if(Oe(!!t),typeof t=="string"){let e=0;const s=R0.exec(t);if(Oe(!!s),s[1]){let r=s[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wn(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cu(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function du(t){const e=t.mapValue.fields.__previous_value__;return cu(e)?du(e):e}function ai(t){const e=rn(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,s,n,r,i,a,u,c,d){this.databaseId=e,this.appId=s,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class li{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new li("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof li&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Cn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cu(t)?4:V0(t)?9007199254740991:k0(t)?10:11:_e()}function bs(t,e){if(t===e)return!0;const s=Cn(t);if(s!==Cn(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ai(t).isEqual(ai(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=rn(r.timestampValue),u=rn(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return wn(r.bytesValue).isEqual(wn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return at(r.geoPointValue.latitude)===at(i.geoPointValue.latitude)&&at(r.geoPointValue.longitude)===at(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return at(r.integerValue)===at(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=at(r.doubleValue),u=at(i.doubleValue);return a===u?Ao(a)===Ao(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return nr(t.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(Kd(a)!==Kd(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!bs(a[c],u[c])))return!1;return!0}(t,e);default:return _e()}}function ui(t,e){return(t.values||[]).find(s=>bs(s,e))!==void 0}function rr(t,e){if(t===e)return 0;const s=Cn(t),n=Cn(e);if(s!==n)return xe(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return xe(t.booleanValue,e.booleanValue);case 2:return function(i,a){const u=at(i.integerValue||i.doubleValue),c=at(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Qd(t.timestampValue,e.timestampValue);case 4:return Qd(ai(t),ai(e));case 5:return xe(t.stringValue,e.stringValue);case 6:return function(i,a){const u=wn(i),c=wn(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),c=a.split("/");for(let d=0;d<u.length&&d<c.length;d++){const f=xe(u[d],c[d]);if(f!==0)return f}return xe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const u=xe(at(i.latitude),at(a.latitude));return u!==0?u:xe(at(i.longitude),at(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Yd(t.arrayValue,e.arrayValue);case 10:return function(i,a){var u,c,d,f;const m=i.fields||{},v=a.fields||{},E=(u=m.value)===null||u===void 0?void 0:u.arrayValue,S=(c=v.value)===null||c===void 0?void 0:c.arrayValue,k=xe(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:Yd(E,S)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Wi.mapValue&&a===Wi.mapValue)return 0;if(i===Wi.mapValue)return 1;if(a===Wi.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=a.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const v=xe(c[m],f[m]);if(v!==0)return v;const E=rr(u[c[m]],d[f[m]]);if(E!==0)return E}return xe(c.length,f.length)}(t.mapValue,e.mapValue);default:throw _e()}}function Qd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return xe(t,e);const s=rn(t),n=rn(e),r=xe(s.seconds,n.seconds);return r!==0?r:xe(s.nanos,n.nanos)}function Yd(t,e){const s=t.values||[],n=e.values||[];for(let r=0;r<s.length&&r<n.length;++r){const i=rr(s[r],n[r]);if(i)return i}return xe(s.length,n.length)}function ir(t){return bl(t)}function bl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const n=rn(s);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return wn(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return pe.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let n="[",r=!0;for(const i of s.values||[])r?r=!1:n+=",",n+=bl(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(s){const n=Object.keys(s.fields||{}).sort();let r="{",i=!0;for(const a of n)i?i=!1:r+=",",r+=`${a}:${bl(s.fields[a])}`;return r+"}"}(t.mapValue):_e()}function Jd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Tl(t){return!!t&&"integerValue"in t}function hu(t){return!!t&&"arrayValue"in t}function Xd(t){return!!t&&"nullValue"in t}function Zd(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ao(t){return!!t&&"mapValue"in t}function k0(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function Kr(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rn(t.mapValue.fields,(s,n)=>e.mapValue.fields[s]=Kr(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Kr(t.arrayValue.values[s]);return e}return Object.assign({},t)}function V0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let n=0;n<e.length-1;++n)if(s=(s.mapValue.fields||{})[e.get(n)],!ao(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kr(s)}setAll(e){let s=At.emptyPath(),n={},r=[];e.forEach((a,u)=>{if(!s.isImmediateParentOf(u)){const c=this.getFieldsMap(s);this.applyChanges(c,n,r),n={},r=[],s=u.popLast()}a?n[u.lastSegment()]=Kr(a):r.push(u.lastSegment())});const i=this.getFieldsMap(s);this.applyChanges(i,n,r)}delete(e){const s=this.field(e.popLast());ao(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=s.mapValue.fields[e.get(n)];ao(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},s.mapValue.fields[e.get(n)]=r),s=r}return s.mapValue.fields}applyChanges(e,s,n){Rn(s,(r,i)=>e[r]=i);for(const r of n)delete e[r]}clone(){return new Kt(Kr(this.value))}}function Ep(t){const e=[];return Rn(t.fields,(s,n)=>{const r=new At([s]);if(ao(n)){const i=Ep(n.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,s,n,r,i,a,u){this.key=e,this.documentType=s,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new xt(e,0,Ee.min(),Ee.min(),Ee.min(),Kt.empty(),0)}static newFoundDocument(e,s,n,r){return new xt(e,1,s,Ee.min(),n,r,0)}static newNoDocument(e,s){return new xt(e,2,s,Ee.min(),Ee.min(),Kt.empty(),0)}static newUnknownDocument(e,s){return new xt(e,3,s,Ee.min(),Ee.min(),Kt.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,s){this.position=e,this.inclusive=s}}function eh(t,e,s){let n=0;for(let r=0;r<t.position.length;r++){const i=e[r],a=t.position[r];if(i.field.isKeyField()?n=pe.comparator(pe.fromName(a.referenceValue),s.key):n=rr(a,s.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function th(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!bs(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,s="asc"){this.field=e,this.dir=s}}function D0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{}class ct extends bp{constructor(e,s,n){super(),this.field=e,this.op=s,this.value=n}static create(e,s,n){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,n):new N0(e,s,n):s==="array-contains"?new O0(e,n):s==="in"?new F0(e,n):s==="not-in"?new L0(e,n):s==="array-contains-any"?new U0(e,n):new ct(e,s,n)}static createKeyFieldInFilter(e,s,n){return s==="in"?new M0(e,n):new $0(e,n)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(rr(s,this.value)):s!==null&&Cn(this.value)===Cn(s)&&this.matchesComparison(rr(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends bp{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new ds(e,s)}matches(e){return Tp(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Tp(t){return t.op==="and"}function Ap(t){return x0(t)&&Tp(t)}function x0(t){for(const e of t.filters)if(e instanceof ds)return!1;return!0}function Al(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+ir(t.value);if(Ap(t))return t.filters.map(e=>Al(e)).join(",");{const e=t.filters.map(s=>Al(s)).join(",");return`${t.op}(${e})`}}function Ip(t,e){return t instanceof ct?function(n,r){return r instanceof ct&&n.op===r.op&&n.field.isEqual(r.field)&&bs(n.value,r.value)}(t,e):t instanceof ds?function(n,r){return r instanceof ds&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,a,u)=>i&&Ip(a,r.filters[u]),!0):!1}(t,e):void _e()}function wp(t){return t instanceof ct?function(s){return`${s.field.canonicalString()} ${s.op} ${ir(s.value)}`}(t):t instanceof ds?function(s){return s.op.toString()+" {"+s.getFilters().map(wp).join(" ,")+"}"}(t):"Filter"}class N0 extends ct{constructor(e,s,n){super(e,s,n),this.key=pe.fromName(n.referenceValue)}matches(e){const s=pe.comparator(e.key,this.key);return this.matchesComparison(s)}}class M0 extends ct{constructor(e,s){super(e,"in",s),this.keys=Cp("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class $0 extends ct{constructor(e,s){super(e,"not-in",s),this.keys=Cp("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function Cp(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(n=>pe.fromName(n.referenceValue))}class O0 extends ct{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return hu(s)&&ui(s.arrayValue,this.value)}}class F0 extends ct{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&ui(this.value.arrayValue,s)}}class L0 extends ct{constructor(e,s){super(e,"not-in",s)}matches(e){if(ui(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!ui(this.value.arrayValue,s)}}class U0 extends ct{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!hu(s)||!s.arrayValue.values)&&s.arrayValue.values.some(n=>ui(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,s=null,n=[],r=[],i=null,a=null,u=null){this.path=e,this.collectionGroup=s,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=u,this.ue=null}}function sh(t,e=null,s=[],n=[],r=null,i=null,a=null){return new B0(t,e,s,n,r,i,a)}function fu(t){const e=be(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(n=>Al(n)).join(","),s+="|ob:",s+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Yo(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(n=>ir(n)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(n=>ir(n)).join(",")),e.ue=s}return e.ue}function pu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!D0(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!Ip(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!th(t.startAt,e.startAt)&&th(t.endAt,e.endAt)}function Il(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,s=null,n=[],r=[],i=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function j0(t,e,s,n,r,i,a,u){return new hr(t,e,s,n,r,i,a,u)}function Jo(t){return new hr(t)}function nh(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Sp(t){return t.collectionGroup!==null}function Wr(t){const e=be(t);if(e.ce===null){e.ce=[];const s=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),s.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new It(At.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{s.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ci(i,n))}),s.has(At.keyField().canonicalString())||e.ce.push(new ci(At.keyField(),n))}return e.ce}function gs(t){const e=be(t);return e.le||(e.le=q0(e,Wr(t))),e.le}function q0(t,e){if(t.limitType==="F")return sh(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ci(r.field,i)});const s=t.endAt?new Io(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Io(t.startAt.position,t.startAt.inclusive):null;return sh(t.path,t.collectionGroup,e,t.filters,t.limit,s,n)}}function wl(t,e){const s=t.filters.concat([e]);return new hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Cl(t,e,s){return new hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Xo(t,e){return pu(gs(t),gs(e))&&t.limitType===e.limitType}function Rp(t){return`${fu(gs(t))}|lt:${t.limitType}`}function Bn(t){return`Query(target=${function(s){let n=s.path.canonicalString();return s.collectionGroup!==null&&(n+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(n+=`, filters: [${s.filters.map(r=>wp(r)).join(", ")}]`),Yo(s.limit)||(n+=", limit: "+s.limit),s.orderBy.length>0&&(n+=`, orderBy: [${s.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),s.startAt&&(n+=", startAt: ",n+=s.startAt.inclusive?"b:":"a:",n+=s.startAt.position.map(r=>ir(r)).join(",")),s.endAt&&(n+=", endAt: ",n+=s.endAt.inclusive?"a:":"b:",n+=s.endAt.position.map(r=>ir(r)).join(",")),`Target(${n})`}(gs(t))}; limitType=${t.limitType})`}function Zo(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):pe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Wr(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(a,u,c){const d=eh(a,u,c);return a.inclusive?d<=0:d<0}(n.startAt,Wr(n),r)||n.endAt&&!function(a,u,c){const d=eh(a,u,c);return a.inclusive?d>=0:d>0}(n.endAt,Wr(n),r))}(t,e)}function G0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Pp(t){return(e,s)=>{let n=!1;for(const r of Wr(t)){const i=H0(r,e,s);if(i!==0)return i;n=n||r.field.isKeyField()}return 0}}function H0(t,e,s){const n=t.field.isKeyField()?pe.comparator(e.key,s.key):function(i,a,u){const c=a.data.field(i),d=u.data.field(i);return c!==null&&d!==null?rr(c,d):_e()}(t.field,e,s);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n!==void 0){for(const[r,i]of n)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,s){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,s]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,s]);r.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[s]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rn(this.inner,(s,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return _p(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new st(pe.comparator);function Os(){return z0}const kp=new st(pe.comparator);function Mr(...t){let e=kp;for(const s of t)e=e.insert(s.key,s);return e}function Vp(t){let e=kp;return t.forEach((s,n)=>e=e.insert(s,n.overlayedDocument)),e}function En(){return Qr()}function Dp(){return Qr()}function Qr(){return new fr(t=>t.toString(),(t,e)=>t.isEqual(e))}const K0=new st(pe.comparator),W0=new It(pe.comparator);function Se(...t){let e=W0;for(const s of t)e=e.add(s);return e}const Q0=new It(xe);function Y0(){return Q0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ao(e)?"-0":e}}function xp(t){return{integerValue:""+t}}function J0(t,e){return S0(e)?xp(e):mu(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(){this._=void 0}}function X0(t,e,s){return t instanceof di?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&cu(i)&&(i=du(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(s,e):t instanceof hi?Mp(t,e):t instanceof fi?$p(t,e):function(r,i){const a=Np(r,i),u=rh(a)+rh(r.Pe);return Tl(a)&&Tl(r.Pe)?xp(u):mu(r.serializer,u)}(t,e)}function Z0(t,e,s){return t instanceof hi?Mp(t,e):t instanceof fi?$p(t,e):s}function Np(t,e){return t instanceof wo?function(n){return Tl(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class di extends ea{}class hi extends ea{constructor(e){super(),this.elements=e}}function Mp(t,e){const s=Op(e);for(const n of t.elements)s.some(r=>bs(r,n))||s.push(n);return{arrayValue:{values:s}}}class fi extends ea{constructor(e){super(),this.elements=e}}function $p(t,e){let s=Op(e);for(const n of t.elements)s=s.filter(r=>!bs(r,n));return{arrayValue:{values:s}}}class wo extends ea{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function rh(t){return at(t.integerValue||t.doubleValue)}function Op(t){return hu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,s){this.field=e,this.transform=s}}function tE(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof hi&&r instanceof hi||n instanceof fi&&r instanceof fi?nr(n.elements,r.elements,bs):n instanceof wo&&r instanceof wo?bs(n.Pe,r.Pe):n instanceof di&&r instanceof di}(t.transform,e.transform)}class sE{constructor(e,s){this.version=e,this.transformResults=s}}class rs{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new rs}static exists(e){return new rs(void 0,e)}static updateTime(e){return new rs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ta{}function Fp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gu(t.key,rs.none()):new Ei(t.key,t.data,rs.none());{const s=t.data,n=Kt.empty();let r=new It(At.comparator);for(let i of e.fields)if(!r.has(i)){let a=s.field(i);a===null&&i.length>1&&(i=i.popLast(),a=s.field(i)),a===null?n.delete(i):n.set(i,a),r=r.add(i)}return new ln(t.key,n,new Zt(r.toArray()),rs.none())}}function nE(t,e,s){t instanceof Ei?function(r,i,a){const u=r.value.clone(),c=oh(r.fieldTransforms,i,a.transformResults);u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,s):t instanceof ln?function(r,i,a){if(!lo(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=oh(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Lp(r)),c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,s):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,s)}function Yr(t,e,s,n){return t instanceof Ei?function(i,a,u,c){if(!lo(i.precondition,a))return u;const d=i.value.clone(),f=ah(i.fieldTransforms,c,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,s,n):t instanceof ln?function(i,a,u,c){if(!lo(i.precondition,a))return u;const d=ah(i.fieldTransforms,c,a),f=a.data;return f.setAll(Lp(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,s,n):function(i,a,u){return lo(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,s)}function rE(t,e){let s=null;for(const n of t.fieldTransforms){const r=e.data.field(n.field),i=Np(n.transform,r||null);i!=null&&(s===null&&(s=Kt.empty()),s.set(n.field,i))}return s||null}function ih(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&nr(n,r,(i,a)=>tE(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ei extends ta{constructor(e,s,n,r=[]){super(),this.key=e,this.value=s,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ln extends ta{constructor(e,s,n,r,i=[]){super(),this.key=e,this.data=s,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lp(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const n=t.data.field(s);e.set(s,n)}}),e}function oh(t,e,s){const n=new Map;Oe(t.length===s.length);for(let r=0;r<s.length;r++){const i=t[r],a=i.transform,u=e.data.field(i.field);n.set(i.field,Z0(a,u,s[r]))}return n}function ah(t,e,s){const n=new Map;for(const r of t){const i=r.transform,a=s.data.field(r.field);n.set(r.field,X0(i,a,e))}return n}class gu extends ta{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iE extends ta{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,s,n,r){this.batchId=e,this.localWriteTime=s,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,s){const n=s.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&nE(i,e,n[r])}}applyToLocalView(e,s){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(s=Yr(n,e,s,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(s=Yr(n,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const n=Dp();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let u=this.applyToLocalView(a,i.mutatedFields);u=s.has(r.key)?null:u;const c=Fp(a,u);c!==null&&n.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(Ee.min())}),n}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),Se())}isEqual(e){return this.batchId===e.batchId&&nr(this.mutations,e.mutations,(s,n)=>ih(s,n))&&nr(this.baseMutations,e.baseMutations,(s,n)=>ih(s,n))}}class vu{constructor(e,s,n,r){this.batch=e,this.commitVersion=s,this.mutationResults=n,this.docVersions=r}static from(e,s,n){Oe(e.mutations.length===n.length);let r=function(){return K0}();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new vu(e,s,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Pe;function uE(t){switch(t){default:return _e();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function Up(t){if(t===void 0)return $s("GRPC error has no .code"),Q.UNKNOWN;switch(t){case ut.OK:return Q.OK;case ut.CANCELLED:return Q.CANCELLED;case ut.UNKNOWN:return Q.UNKNOWN;case ut.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ut.INTERNAL:return Q.INTERNAL;case ut.UNAVAILABLE:return Q.UNAVAILABLE;case ut.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ut.NOT_FOUND:return Q.NOT_FOUND;case ut.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ut.ABORTED:return Q.ABORTED;case ut.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ut.DATA_LOSS:return Q.DATA_LOSS;default:return _e()}}(Pe=ut||(ut={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=new An([4294967295,4294967295],0);function lh(t){const e=cE().encode(t),s=new cp;return s.update(e),new Uint8Array(s.digest())}function uh(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new An([s,n],0),new An([r,i],0)]}class _u{constructor(e,s,n){if(this.bitmap=e,this.padding=s,this.hashCount=n,s<0||s>=8)throw new $r(`Invalid padding: ${s}`);if(n<0)throw new $r(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new $r(`Invalid hash count: ${n}`);if(e.length===0&&s!==0)throw new $r(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=An.fromNumber(this.Ie)}Ee(e,s,n){let r=e.add(s.multiply(An.fromNumber(n)));return r.compare(dE)===1&&(r=new An([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=lh(e),[n,r]=uh(s);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,r,i);if(!this.de(a))return!1}return!0}static create(e,s,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new _u(i,r,s);return n.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const s=lh(e),[n,r]=uh(s);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,r,i);this.Ae(a)}}Ae(e){const s=Math.floor(e/8),n=e%8;this.bitmap[s]|=1<<n}}class $r extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,s,n,r,i){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,s,n){const r=new Map;return r.set(e,bi.createSynthesizedTargetChangeForCurrentChange(e,s,n)),new sa(Ee.min(),r,new st(xe),Os(),Se())}}class bi{constructor(e,s,n,r,i){this.resumeToken=e,this.current=s,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,s,n){return new bi(n,s,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,s,n,r){this.Re=e,this.removedTargetIds=s,this.key=n,this.Ve=r}}class Bp{constructor(e,s){this.targetId=e,this.me=s}}class jp{constructor(e,s,n=wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=s,this.resumeToken=n,this.cause=r}}class ch{constructor(){this.fe=0,this.ge=hh(),this.pe=wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),s=Se(),n=Se();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:s=s.add(r);break;case 1:n=n.add(r);break;default:_e()}}),new bi(this.pe,this.ye,e,s,n)}Ce(){this.we=!1,this.ge=hh()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hE{constructor(e){this.Le=e,this.Be=new Map,this.ke=Os(),this.qe=dh(),this.Qe=new st(xe)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,s=>{const n=this.Ge(s);switch(e.state){case 0:this.ze(s)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),n.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach((n,r)=>{this.ze(r)&&s(r)})}He(e){const s=e.targetId,n=e.me.count,r=this.Je(s);if(r){const i=r.target;if(Il(i))if(n===0){const a=new pe(i.path);this.Ue(s,a,xt.newNoDocument(a,Ee.min()))}else Oe(n===1);else{const a=this.Ye(s);if(a!==n){const u=this.Ze(e),c=u?this.Xe(u,e,a):1;if(c!==0){this.je(s);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,d)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=s;let a,u;try{a=wn(n).toUint8Array()}catch(c){if(c instanceof yp)return sr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new _u(a,r,i)}catch(c){return sr(c instanceof $r?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,s,n){return s.me.count===n-this.nt(e,s.targetId)?0:2}nt(e,s){const n=this.Le.getRemoteKeysForTarget(s);let r=0;return n.forEach(i=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(s,i,null),r++)}),r}rt(e){const s=new Map;this.Be.forEach((i,a)=>{const u=this.Je(a);if(u){if(i.current&&Il(u.target)){const c=new pe(u.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,xt.newNoDocument(c,e))}i.be&&(s.set(a,i.ve()),i.Ce())}});let n=Se();this.qe.forEach((i,a)=>{let u=!0;a.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const r=new sa(e,s,this.Qe,this.ke,n);return this.ke=Os(),this.qe=dh(),this.Qe=new st(xe),r}$e(e,s){if(!this.ze(e))return;const n=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,n),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,s)?r.Fe(s,1):r.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),n&&(this.ke=this.ke.insert(s,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new ch,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new It(xe),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||de("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ch),this.Le.getRemoteKeysForTarget(e).forEach(s=>{this.Ue(e,s,null)})}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function dh(){return new st(pe.comparator)}function hh(){return new st(pe.comparator)}const fE=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),pE=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),mE=(()=>({and:"AND",or:"OR"}))();class gE{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Sl(t,e){return t.useProto3Json||Yo(e)?e:{value:e}}function Co(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qp(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vE(t,e){return Co(t,e.toTimestamp())}function vs(t){return Oe(!!t),Ee.fromTimestamp(function(s){const n=rn(s);return new tt(n.seconds,n.nanos)}(t))}function yu(t,e){return Rl(t,e).canonicalString()}function Rl(t,e){const s=function(r){return new Ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?s:s.child(e)}function Gp(t){const e=Ze.fromString(t);return Oe(Qp(e)),e}function Pl(t,e){return yu(t.databaseId,e.path)}function Ka(t,e){const s=Gp(e);if(s.get(1)!==t.databaseId.projectId)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new pe(zp(s))}function Hp(t,e){return yu(t.databaseId,e)}function _E(t){const e=Gp(t);return e.length===4?Ze.emptyPath():zp(e)}function kl(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zp(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function fh(t,e,s){return{name:Pl(t,e),fields:s.value.mapValue.fields}}function yE(t,e){let s;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Oe(f===void 0||typeof f=="string"),wt.fromBase64String(f||"")):(Oe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),wt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(d){const f=d.code===void 0?Q.UNKNOWN:Up(d.code);return new le(f,d.message||"")}(a);s=new jp(n,r,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=Ka(t,n.document.name),i=vs(n.document.updateTime),a=n.document.createTime?vs(n.document.createTime):Ee.min(),u=new Kt({mapValue:{fields:n.document.fields}}),c=xt.newFoundDocument(r,i,a,u),d=n.targetIds||[],f=n.removedTargetIds||[];s=new uo(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=Ka(t,n.document),i=n.readTime?vs(n.readTime):Ee.min(),a=xt.newNoDocument(r,i),u=n.removedTargetIds||[];s=new uo([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=Ka(t,n.document),i=n.removedTargetIds||[];s=new uo([],i,r,null)}else{if(!("filter"in e))return _e();{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:i}=n,a=new lE(r,i),u=n.targetId;s=new Bp(u,a)}}return s}function EE(t,e){let s;if(e instanceof Ei)s={update:fh(t,e.key,e.value)};else if(e instanceof gu)s={delete:Pl(t,e.key)};else if(e instanceof ln)s={update:fh(t,e.key,e.data),updateMask:PE(e.fieldMask)};else{if(!(e instanceof iE))return _e();s={verify:Pl(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const u=a.transform;if(u instanceof di)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof fi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof wo)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw _e()}(0,n))),e.precondition.isNone||(s.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:vE(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e()}(t,e.precondition)),s}function bE(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(s=>function(r,i){let a=r.updateTime?vs(r.updateTime):vs(i);return a.isEqual(Ee.min())&&(a=vs(i)),new sE(a,r.transformResults||[])}(s,e))):[]}function TE(t,e){return{documents:[Hp(t,e.path)]}}function AE(t,e){const s={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),s.structuredQuery.from=[{collectionId:n.lastSegment()}]),s.parent=Hp(t,r);const i=function(d){if(d.length!==0)return Wp(ds.create(d,"and"))}(e.filters);i&&(s.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:jn(v.field),direction:CE(v.dir)}}(f))}(e.orderBy);a&&(s.structuredQuery.orderBy=a);const u=Sl(t,e.limit);return u!==null&&(s.structuredQuery.limit=u),e.startAt&&(s.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:s,parent:r}}function IE(t){let e=_E(t.parent);const s=t.structuredQuery,n=s.from?s.from.length:0;let r=null;if(n>0){Oe(n===1);const f=s.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];s.where&&(i=function(m){const v=Kp(m);return v instanceof ds&&Ap(v)?v.getFilters():[v]}(s.where));let a=[];s.orderBy&&(a=function(m){return m.map(v=>function(S){return new ci(qn(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(s.orderBy));let u=null;s.limit&&(u=function(m){let v;return v=typeof m=="object"?m.value:m,Yo(v)?null:v}(s.limit));let c=null;s.startAt&&(c=function(m){const v=!!m.before,E=m.values||[];return new Io(E,v)}(s.startAt));let d=null;return s.endAt&&(d=function(m){const v=!m.before,E=m.values||[];return new Io(E,v)}(s.endAt)),j0(e,r,a,i,u,"F",c,d)}function wE(t,e){const s=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function Kp(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const n=qn(s.unaryFilter.field);return ct.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=qn(s.unaryFilter.field);return ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qn(s.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qn(s.unaryFilter.field);return ct.create(a,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(s){return ct.create(qn(s.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return ds.create(s.compositeFilter.filters.map(n=>Kp(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return _e()}}(s.compositeFilter.op))}(t):_e()}function CE(t){return fE[t]}function SE(t){return pE[t]}function RE(t){return mE[t]}function jn(t){return{fieldPath:t.canonicalString()}}function qn(t){return At.fromServerFormat(t.fieldPath)}function Wp(t){return t instanceof ct?function(s){if(s.op==="=="){if(Zd(s.value))return{unaryFilter:{field:jn(s.field),op:"IS_NAN"}};if(Xd(s.value))return{unaryFilter:{field:jn(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(Zd(s.value))return{unaryFilter:{field:jn(s.field),op:"IS_NOT_NAN"}};if(Xd(s.value))return{unaryFilter:{field:jn(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jn(s.field),op:SE(s.op),value:s.value}}}(t):t instanceof ds?function(s){const n=s.getFilters().map(r=>Wp(r));return n.length===1?n[0]:{compositeFilter:{op:RE(s.op),filters:n}}}(t):_e()}function PE(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function Qp(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,s,n,r,i=Ee.min(),a=Ee.min(),u=wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=s,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.ct=e}}function VE(t){const e=IE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.un=new xE}addToCollectionParentIndex(e,s){return this.un.add(s),X.resolve()}getCollectionParents(e,s){return X.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return X.resolve()}deleteFieldIndex(e,s){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,s){return X.resolve()}getDocumentsMatchingTarget(e,s){return X.resolve(null)}getIndexType(e,s){return X.resolve(0)}getFieldIndexes(e,s){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,s){return X.resolve(nn.min())}getMinOffsetFromCollectionGroup(e,s){return X.resolve(nn.min())}updateCollectionGroup(e,s,n){return X.resolve()}updateIndexEntries(e,s){return X.resolve()}}class xE{constructor(){this.index={}}add(e){const s=e.lastSegment(),n=e.popLast(),r=this.index[s]||new It(Ze.comparator),i=!r.has(n);return this.index[s]=r.add(n),i}has(e){const s=e.lastSegment(),n=e.popLast(),r=this.index[s];return r&&r.has(n)}getEntries(e){return(this.index[e]||new It(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new or(0)}static kn(){return new or(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.changes=new fr(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const n=this.changes.get(s);return n!==void 0?X.resolve(n):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,s,n,r){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,s){let n=null;return this.documentOverlayCache.getOverlay(e,s).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,s))).next(r=>(n!==null&&Yr(n.mutation,r,Zt.empty(),tt.now()),r))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.getLocalViewOfDocuments(e,n,Se()).next(()=>n))}getLocalViewOfDocuments(e,s,n=Se()){const r=En();return this.populateOverlays(e,r,s).next(()=>this.computeViews(e,s,r,n).next(i=>{let a=Mr();return i.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,s){const n=En();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,Se()))}populateOverlays(e,s,n){const r=[];return n.forEach(i=>{s.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((a,u)=>{s.set(a,u)})})}computeViews(e,s,n,r){let i=Os();const a=Qr(),u=function(){return Qr()}();return s.forEach((c,d)=>{const f=n.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof ln)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Yr(f.mutation,d,f.mutation.getFieldMask(),tt.now())):a.set(d.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>a.set(d,f)),s.forEach((d,f)=>{var m;return u.set(d,new ME(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,s){const n=Qr();let r=new st((a,u)=>a-u),i=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(a=>{for(const u of a)u.keys().forEach(c=>{const d=s.get(c);if(d===null)return;let f=n.get(c)||Zt.empty();f=u.applyToLocalView(d,f),n.set(c,f);const m=(r.get(u.batchId)||Se()).add(c);r=r.insert(u.batchId,m)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,f=c.value,m=Dp();f.forEach(v=>{if(!i.has(v)){const E=Fp(s.get(v),n.get(v));E!==null&&m.set(v,E),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return X.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,s,n,r){return function(a){return pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):Sp(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,n,r):this.getDocumentsMatchingCollectionQuery(e,s,n,r)}getNextDocuments(e,s,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,n,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,n.largestBatchId,r-i.size):X.resolve(En());let u=-1,c=i;return a.next(d=>X.forEach(d,(f,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(f)?X.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{c=c.insert(f,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Se())).next(f=>({batchId:u,changes:Vp(f)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new pe(s)).next(n=>{let r=Mr();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,s,n,r){const i=s.collectionGroup;let a=Mr();return this.indexManager.getCollectionParents(e,i).next(u=>X.forEach(u,c=>{const d=function(m,v){return new hr(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(s,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,n,r).next(f=>{f.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,s,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,n,i,r))).next(a=>{i.forEach((c,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,xt.newInvalidDocument(f)))});let u=Mr();return a.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Yr(f.mutation,d,Zt.empty(),tt.now()),Zo(s,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return X.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,function(r){return{id:r.id,version:r.version,createTime:vs(r.createTime)}}(s)),X.resolve()}getNamedQuery(e,s){return X.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,function(r){return{name:r.name,query:VE(r.bundledQuery),readTime:vs(r.readTime)}}(s)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.overlays=new st(pe.comparator),this.Ir=new Map}getOverlay(e,s){return X.resolve(this.overlays.get(s))}getOverlays(e,s){const n=En();return X.forEach(s,r=>this.getOverlay(e,r).next(i=>{i!==null&&n.set(r,i)})).next(()=>n)}saveOverlays(e,s,n){return n.forEach((r,i)=>{this.ht(e,s,i)}),X.resolve()}removeOverlaysForBatchId(e,s,n){const r=this.Ir.get(n);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),X.resolve()}getOverlaysForCollection(e,s,n){const r=En(),i=s.length+1,a=new pe(s.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!s.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>n&&r.set(c.getKey(),c)}return X.resolve(r)}getOverlaysForCollectionGroup(e,s,n,r){let i=new st((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===s&&d.largestBatchId>n){let f=i.get(d.largestBatchId);f===null&&(f=En(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const u=En(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=r)););return X.resolve(u)}ht(e,s,n){const r=this.overlays.get(n.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new aE(s,n));let i=this.Ir.get(s);i===void 0&&(i=Se(),this.Ir.set(s,i)),this.Ir.set(s,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(){this.Tr=new It(gt.Er),this.dr=new It(gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const n=new gt(e,s);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,s){e.forEach(n=>this.addReference(n,s))}removeReference(e,s){this.Vr(new gt(e,s))}mr(e,s){e.forEach(n=>this.removeReference(n,s))}gr(e){const s=new pe(new Ze([])),n=new gt(s,e),r=new gt(s,e+1),i=[];return this.dr.forEachInRange([n,r],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new pe(new Ze([])),n=new gt(s,e),r=new gt(s,e+1);let i=Se();return this.dr.forEachInRange([n,r],a=>{i=i.add(a.key)}),i}containsKey(e){const s=new gt(e,0),n=this.Tr.firstAfterOrEqual(s);return n!==null&&e.isEqual(n.key)}}class gt{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return pe.comparator(e.key,s.key)||xe(e.wr,s.wr)}static Ar(e,s){return xe(e.wr,s.wr)||pe.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new It(gt.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new oE(i,s,n,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new gt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return X.resolve(a)}lookupMutationBatch(e,s){return X.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const n=s+1,r=this.vr(n),i=r<0?0:r;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const n=new gt(s,0),r=new gt(s,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],a=>{const u=this.Dr(a.wr);i.push(u)}),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,s){let n=new It(xe);return s.forEach(r=>{const i=new gt(r,0),a=new gt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],u=>{n=n.add(u.wr)})}),X.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,s){const n=s.path,r=n.length+1;let i=n;pe.isDocumentKey(i)||(i=i.child(""));const a=new gt(new pe(i),0);let u=new It(xe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(u=u.add(c.wr)),!0)},a),X.resolve(this.Cr(u))}Cr(e){const s=[];return e.forEach(n=>{const r=this.Dr(n);r!==null&&s.push(r)}),s}removeMutationBatch(e,s){Oe(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return X.forEach(s.mutations,r=>{const i=new gt(r.key,s.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,s){const n=new gt(s,0),r=this.br.firstAfterOrEqual(n);return X.resolve(s.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.Mr=e,this.docs=function(){return new st(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const n=s.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mr(s);return this.docs=this.docs.insert(n,{document:s.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const n=this.docs.get(s);return X.resolve(n?n.document.mutableCopy():xt.newInvalidDocument(s))}getEntries(e,s){let n=Os();return s.forEach(r=>{const i=this.docs.get(r);n=n.insert(r,i?i.document.mutableCopy():xt.newInvalidDocument(r))}),X.resolve(n)}getDocumentsMatchingQuery(e,s,n,r){let i=Os();const a=s.path,u=new pe(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||A0(T0(f),n)<=0||(r.has(f.key)||Zo(s,f))&&(i=i.insert(f.key,f.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,s,n,r){_e()}Or(e,s){return X.forEach(this.docs,n=>s(n))}newChangeBuffer(e){return new jE(this)}getSize(e){return X.resolve(this.size)}}class jE extends NE{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?s.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),X.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.persistence=e,this.Nr=new fr(s=>fu(s),pu),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Eu,this.targetCount=0,this.kr=or.Bn()}forEachTarget(e,s){return this.Nr.forEach((n,r)=>s(r)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,s,n){return n&&(this.lastRemoteSnapshotVersion=n),s>this.Lr&&(this.Lr=s),X.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new or(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,X.resolve()}updateTargetData(e,s){return this.Kn(s),X.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,s,n){let r=0;const i=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=s&&n.get(u.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),X.waitFor(i).next(()=>r)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,s){const n=this.Nr.get(s)||null;return X.resolve(n)}addMatchingKeys(e,s,n){return this.Br.Rr(s,n),X.resolve()}removeMatchingKeys(e,s,n){this.Br.mr(s,n);const r=this.persistence.referenceDelegate,i=[];return r&&s.forEach(a=>{i.push(r.markPotentiallyOrphaned(e,a))}),X.waitFor(i)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),X.resolve()}getMatchingKeysForTargetId(e,s){const n=this.Br.yr(s);return X.resolve(n)}containsKey(e,s){return X.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,s){this.qr={},this.overlays={},this.Qr=new uu(0),this.Kr=!1,this.Kr=!0,this.$r=new LE,this.referenceDelegate=e(this),this.Ur=new qE(this),this.indexManager=new DE,this.remoteDocumentCache=function(r){return new BE(r)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new kE(s),this.Gr=new OE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new FE,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let n=this.qr[e.toKey()];return n||(n=new UE(s,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,n){de("MemoryPersistence","Starting transaction:",e);const r=new HE(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(i=>this.referenceDelegate.jr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Hr(e,s){return X.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,s)))}}class HE extends w0{constructor(e){super(),this.currentSequenceNumber=e}}class bu{constructor(e){this.persistence=e,this.Jr=new Eu,this.Yr=null}static Zr(e){return new bu(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,s,n){return this.Jr.addReference(n,s),this.Xr.delete(n.toString()),X.resolve()}removeReference(e,s,n){return this.Jr.removeReference(n,s),this.Xr.add(n.toString()),X.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),X.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach(r=>this.Xr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,s.targetId).next(r=>{r.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,s))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,n=>{const r=pe.fromPath(n);return this.ei(e,r).next(i=>{i||s.removeEntry(r,Ee.min())})}).next(()=>(this.Yr=null,s.apply(e)))}updateLimboDocument(e,s){return this.ei(e,s).next(n=>{n?this.Xr.delete(s.toString()):this.Xr.add(s.toString())})}Wr(e){return 0}ei(e,s){return X.or([()=>X.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,s,n,r){this.targetId=e,this.fromCache=s,this.$i=n,this.Ui=r}static Wi(e,s){let n=Se(),r=Se();for(const i of s.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Tu(e,s.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Wy()?8:C0(zy())>0?6:4}()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,n,r){const i={result:null};return this.Yi(e,s).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,s,r,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new zE;return this.Xi(e,s,a).next(u=>{if(i.result=u,this.zi)return this.es(e,s,a,u.size)})}).next(()=>i.result)}es(e,s,n,r){return n.documentReadCount<this.ji?(Vr()<=ke.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Bn(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Vr()<=ke.DEBUG&&de("QueryEngine","Query:",Bn(s),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Vr()<=ke.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Bn(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gs(s))):X.resolve())}Yi(e,s){if(nh(s))return X.resolve(null);let n=gs(s);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(s.limit!==null&&r===1&&(s=Cl(s,null,"F"),n=gs(s)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Se(...i);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,n).next(c=>{const d=this.ts(s,u);return this.ns(s,d,a,c.readTime)?this.Yi(e,Cl(s,null,"F")):this.rs(e,d,s,c)}))})))}Zi(e,s,n,r){return nh(s)||r.isEqual(Ee.min())?X.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(s,i);return this.ns(s,a,n,r)?X.resolve(null):(Vr()<=ke.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bn(s)),this.rs(e,a,s,b0(r,-1)).next(u=>u))})}ts(e,s){let n=new It(Pp(e));return s.forEach((r,i)=>{Zo(e,i)&&(n=n.add(i))}),n}ns(e,s,n,r){if(e.limit===null)return!1;if(n.size!==s.size)return!0;const i=e.limitType==="F"?s.last():s.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,s,n){return Vr()<=ke.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Bn(s)),this.Ji.getDocumentsMatchingQuery(e,s,nn.min(),n)}rs(e,s,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(i=>(s.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,s,n,r){this.persistence=e,this.ss=s,this.serializer=r,this.os=new st(xe),this._s=new fr(i=>fu(i),pu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $E(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.os))}}function QE(t,e,s,n){return new WE(t,e,s,n)}async function Yp(t,e){const s=be(t);return await s.persistence.runTransaction("Handle user change","readonly",n=>{let r;return s.mutationQueue.getAllMutationBatches(n).next(i=>(r=i,s.ls(e),s.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],u=[];let c=Se();for(const d of r){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){u.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return s.localDocuments.getDocuments(n,c).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:u}))})})}function YE(t,e){const s=be(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=e.batch.keys(),i=s.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,f){const m=d.batch,v=m.keys();let E=X.resolve();return v.forEach(S=>{E=E.next(()=>f.getEntry(c,S)).next(k=>{const M=d.docVersions.get(S);Oe(M!==null),k.version.compareTo(M)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(s,n,e,i).next(()=>i.apply(n)).next(()=>s.mutationQueue.performConsistencyCheck(n)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(u){let c=Se();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>s.localDocuments.getDocuments(n,r))})}function Jp(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Ur.getLastRemoteSnapshotVersion(s))}function JE(t,e){const s=be(t),n=e.snapshotVersion;let r=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=s.cs.newChangeBuffer({trackRemovals:!0});r=s.os;const u=[];e.targetChanges.forEach((f,m)=>{const v=r.get(m);if(!v)return;u.push(s.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>s.Ur.addMatchingKeys(i,f.addedDocuments,m)));let E=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(wt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,n)),r=r.insert(m,E),function(k,M,L){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(v,E,f)&&u.push(s.Ur.updateTargetData(i,E))});let c=Os(),d=Se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(s.persistence.referenceDelegate.updateLimboDocument(i,f))}),u.push(XE(i,a,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!n.isEqual(Ee.min())){const f=s.Ur.getLastRemoteSnapshotVersion(i).next(m=>s.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));u.push(f)}return X.waitFor(u).next(()=>a.apply(i)).next(()=>s.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(s.os=r,i))}function XE(t,e,s){let n=Se(),r=Se();return s.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Os();return s.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):de("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:a,Is:r}})}function ZE(t,e){const s=be(t);return s.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function eb(t,e){const s=be(t);return s.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return s.Ur.getTargetData(n,e).next(i=>i?(r=i,X.resolve(r)):s.Ur.allocateTargetId(n).next(a=>(r=new Js(e,a,"TargetPurposeListen",n.currentSequenceNumber),s.Ur.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=s.os.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(s.os=s.os.insert(n.targetId,n),s._s.set(e,n.targetId)),n})}async function Vl(t,e,s){const n=be(t),r=n.os.get(e),i=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!yi(a))throw a;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(r.target)}function ph(t,e,s){const n=be(t);let r=Ee.min(),i=Se();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,f){const m=be(c),v=m._s.get(f);return v!==void 0?X.resolve(m.os.get(v)):m.Ur.getTargetData(d,f)}(n,a,gs(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,u.targetId).next(c=>{i=c})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,s?r:Ee.min(),s?i:Se())).next(u=>(tb(n,G0(e),u),{documents:u,Ts:i})))}function tb(t,e,s){let n=t.us.get(e)||Ee.min();s.forEach((r,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class mh{constructor(){this.activeTargetIds=Y0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sb{constructor(){this.so=new mh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,n){}addLocalQueryTarget(e,s=!0){return s&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,n){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new mh,Promise.resolve()}handleUserChange(e,s,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi=null;function Wa(){return Qi===null?Qi=function(){return 268435456+Math.round(2147483648*Math.random())}():Qi++,"0x"+Qi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class ob extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const n=s.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+s.host,this.vo=`projects/${r}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${i}`}get Fo(){return!1}Mo(s,n,r,i,a){const u=Wa(),c=this.xo(s,n.toUriEncodedString());de("RestConnection",`Sending RPC '${s}' ${u}:`,c,r);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(s,c,d,r).then(f=>(de("RestConnection",`Received RPC '${s}' ${u}: `,f),f),f=>{throw sr("RestConnection",`RPC '${s}' ${u} failed with error: `,f,"url: ",c,"request:",r),f})}Lo(s,n,r,i,a,u){return this.Mo(s,n,r,i,a)}Oo(s,n,r){s["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dr}(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>s[a]=i),r&&r.headers.forEach((i,a)=>s[a]=i)}xo(s,n){const r=rb[s];return`${this.Do}/v1/${n}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,n,r){const i=Wa();return new Promise((a,u)=>{const c=new dp;c.setWithCredentials(!0),c.listenOnce(hp.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case oo.NO_ERROR:const f=c.getResponseJson();de(kt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case oo.TIMEOUT:de(kt,`RPC '${e}' ${i} timed out`),u(new le(Q.DEADLINE_EXCEEDED,"Request time out"));break;case oo.HTTP_ERROR:const m=c.getStatus();if(de(kt,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v==null?void 0:v.error;if(E&&E.status&&E.message){const S=function(M){const L=M.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(L)>=0?L:Q.UNKNOWN}(E.status);u(new le(S,E.message))}else u(new le(Q.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new le(Q.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{de(kt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(r);de(kt,`RPC '${e}' ${i} sending request:`,r),c.send(s,"POST",d,n,15)})}Bo(e,s,n){const r=Wa(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=mp(),u=pp(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,s,n),c.encodeInitMessageHeaders=!0;const f=i.join("");de(kt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const m=a.createWebChannel(f,c);let v=!1,E=!1;const S=new ib({Io:M=>{E?de(kt,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(v||(de(kt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),v=!0),de(kt,`RPC '${e}' stream ${r} sending:`,M),m.send(M))},To:()=>m.close()}),k=(M,L,x)=>{M.listen(L,$=>{try{x($)}catch(z){setTimeout(()=>{throw z},0)}})};return k(m,Nr.EventType.OPEN,()=>{E||(de(kt,`RPC '${e}' stream ${r} transport opened.`),S.yo())}),k(m,Nr.EventType.CLOSE,()=>{E||(E=!0,de(kt,`RPC '${e}' stream ${r} transport closed`),S.So())}),k(m,Nr.EventType.ERROR,M=>{E||(E=!0,sr(kt,`RPC '${e}' stream ${r} transport errored:`,M),S.So(new le(Q.UNAVAILABLE,"The operation could not be completed")))}),k(m,Nr.EventType.MESSAGE,M=>{var L;if(!E){const x=M.data[0];Oe(!!x);const $=x,z=$.error||((L=$[0])===null||L===void 0?void 0:L.error);if(z){de(kt,`RPC '${e}' stream ${r} received error:`,z);const ee=z.status;let N=function(A){const w=ut[A];if(w!==void 0)return Up(w)}(ee),g=z.message;N===void 0&&(N=Q.INTERNAL,g="Unknown error status: "+ee+" with message "+z.message),E=!0,S.So(new le(N,g)),m.close()}else de(kt,`RPC '${e}' stream ${r} received:`,x),S.bo(x)}}),k(u,fp.STAT_EVENT,M=>{M.stat===El.PROXY?de(kt,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===El.NOPROXY&&de(kt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Qa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){return new gE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,s,n=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=s,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,s-n);r>0&&de("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,s,n,r,i,a,u,c){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Xp(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===Q.RESOURCE_EXHAUSTED?($s(s.toString()),$s("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Yo===s&&this.P_(n,r)},n=>{e(()=>{const r=new le(Q.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(r)})})}P_(e,s){const n=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{n(()=>this.I_(r))}),this.stream.onMessage(r=>{n(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget(()=>this.Yo===e?s():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ab extends Zp{constructor(e,s,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,n,r,a),this.serializer=i}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=yE(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ee.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ee.min():a.readTime?vs(a.readTime):Ee.min()}(e);return this.listener.d_(s,n)}A_(e){const s={};s.database=kl(this.serializer),s.addTarget=function(i,a){let u;const c=a.target;if(u=Il(c)?{documents:TE(i,c)}:{query:AE(i,c)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=qp(i,a.resumeToken);const d=Sl(i,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(Ee.min())>0){u.readTime=Co(i,a.snapshotVersion.toTimestamp());const d=Sl(i,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const n=wE(this.serializer,e);n&&(s.labels=n),this.a_(s)}R_(e){const s={};s.database=kl(this.serializer),s.removeTarget=e,this.a_(s)}}class lb extends Zp{constructor(e,s,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,n,r,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=bE(e.writeResults,e.commitTime),n=vs(e.commitTime);return this.listener.g_(n,s)}p_(){const e={};e.database=kl(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map(n=>EE(this.serializer,n))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends class{}{constructor(e,s,n,r){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Rl(s,n),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(Q.UNKNOWN,i.toString())})}Lo(e,s,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Rl(s,n),r,a,u,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(Q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class cb{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($s(s),this.D_=!1):de("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,s,n,r,i){this.localStore=e,this.datastore=s,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Pn(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=be(c);d.L_.add(4),await Ti(d),d.q_.set("Unknown"),d.L_.delete(4),await ra(d)}(this))})}),this.q_=new cb(n,r)}}async function ra(t){if(Pn(t))for(const e of t.B_)await e(!0)}async function Ti(t){for(const e of t.B_)await e(!1)}function em(t,e){const s=be(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),Cu(s)?wu(s):pr(s).r_()&&Iu(s,e))}function Au(t,e){const s=be(t),n=pr(s);s.N_.delete(e),n.r_()&&tm(s,e),s.N_.size===0&&(n.r_()?n.o_():Pn(s)&&s.q_.set("Unknown"))}function Iu(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}pr(t).A_(e)}function tm(t,e){t.Q_.xe(e),pr(t).R_(e)}function wu(t){t.Q_=new hE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),pr(t).start(),t.q_.v_()}function Cu(t){return Pn(t)&&!pr(t).n_()&&t.N_.size>0}function Pn(t){return be(t).L_.size===0}function sm(t){t.Q_=void 0}async function hb(t){t.q_.set("Online")}async function fb(t){t.N_.forEach((e,s)=>{Iu(t,e)})}async function pb(t,e){sm(t),Cu(t)?(t.q_.M_(e),wu(t)):t.q_.set("Unknown")}async function mb(t,e,s){if(t.q_.set("Online"),e instanceof jp&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const u of i.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(n){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await So(t,n)}else if(e instanceof uo?t.Q_.Ke(e):e instanceof Bp?t.Q_.He(e):t.Q_.We(e),!s.isEqual(Ee.min()))try{const n=await Jp(t.localStore);s.compareTo(n)>=0&&await function(i,a){const u=i.Q_.rt(a);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(wt.EMPTY_BYTE_STRING,f.snapshotVersion)),tm(i,c);const m=new Js(f.target,c,d,f.sequenceNumber);Iu(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,s)}catch(n){de("RemoteStore","Failed to raise snapshot:",n),await So(t,n)}}async function So(t,e,s){if(!yi(e))throw e;t.L_.add(1),await Ti(t),t.q_.set("Offline"),s||(s=()=>Jp(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await ra(t)})}function nm(t,e){return e().catch(s=>So(t,s,e))}async function ia(t){const e=be(t),s=on(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;gb(e);)try{const r=await ZE(e.localStore,n);if(r===null){e.O_.length===0&&s.o_();break}n=r.batchId,vb(e,r)}catch(r){await So(e,r)}rm(e)&&im(e)}function gb(t){return Pn(t)&&t.O_.length<10}function vb(t,e){t.O_.push(e);const s=on(t);s.r_()&&s.V_&&s.m_(e.mutations)}function rm(t){return Pn(t)&&!on(t).n_()&&t.O_.length>0}function im(t){on(t).start()}async function _b(t){on(t).p_()}async function yb(t){const e=on(t);for(const s of t.O_)e.m_(s.mutations)}async function Eb(t,e,s){const n=t.O_.shift(),r=vu.from(n,e,s);await nm(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await ia(t)}async function bb(t,e){e&&on(t).V_&&await async function(n,r){if(function(a){return uE(a)&&a!==Q.ABORTED}(r.code)){const i=n.O_.shift();on(n).s_(),await nm(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await ia(n)}}(t,e),rm(t)&&im(t)}async function vh(t,e){const s=be(t);s.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const n=Pn(s);s.L_.add(3),await Ti(s),n&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await ra(s)}async function Tb(t,e){const s=be(t);e?(s.L_.delete(2),await ra(s)):e||(s.L_.add(2),await Ti(s),s.q_.set("Unknown"))}function pr(t){return t.K_||(t.K_=function(s,n,r){const i=be(s);return i.w_(),new ab(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Eo:hb.bind(null,t),Ro:fb.bind(null,t),mo:pb.bind(null,t),d_:mb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Cu(t)?wu(t):t.q_.set("Unknown")):(await t.K_.stop(),sm(t))})),t.K_}function on(t){return t.U_||(t.U_=function(s,n,r){const i=be(s);return i.w_(),new lb(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_b.bind(null,t),mo:bb.bind(null,t),f_:yb.bind(null,t),g_:Eb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ia(t)):(await t.U_.stop(),t.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,s,n,r,i){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,n,r,i){const a=Date.now()+n,u=new Su(e,s,a,r,i);return u.start(n),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ru(t,e){if($s("AsyncQueue",`${e}: ${t}`),yi(t))return new le(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.comparator=e?(s,n)=>e(s,n)||pe.comparator(s.key,n.key):(s,n)=>pe.comparator(s.key,n.key),this.keyedMap=Mr(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new Qn(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,n)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;s.hasNext();){const r=s.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const n=new Qn;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=s,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this.W_=new st(pe.comparator)}track(e){const s=e.doc.key,n=this.W_.get(s);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(s,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(s,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(s):e.type===1&&n.type===2?this.W_=this.W_.insert(s,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal((s,n)=>{e.push(n)}),e}}class ar{constructor(e,s,n,r,i,a,u,c,d){this.query=e,this.docs=s,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,s,n,r,i){const a=[];return s.forEach(u=>{a.push({type:0,doc:u})}),new ar(e,s,Qn.emptySet(s),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,n=e.docChanges;if(s.length!==n.length)return!1;for(let r=0;r<s.length;r++)if(s[r].type!==n[r].type||!s[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ib{constructor(){this.queries=yh(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,n){const r=be(s),i=r.queries;r.queries=yh(),i.forEach((a,u)=>{for(const c of u.j_)c.onError(n)})})(this,new le(Q.ABORTED,"Firestore shutting down"))}}function yh(){return new fr(t=>Rp(t),Xo)}async function Pu(t,e){const s=be(t);let n=3;const r=e.query;let i=s.queries.get(r);i?!i.H_()&&e.J_()&&(n=2):(i=new Ab,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await s.onListen(r,!0);break;case 1:i.z_=await s.onListen(r,!1);break;case 2:await s.onFirstRemoteStoreListen(r)}}catch(a){const u=Ru(a,`Initialization of query '${Bn(e.query)}' failed`);return void e.onError(u)}s.queries.set(r,i),i.j_.push(e),e.Z_(s.onlineState),i.z_&&e.X_(i.z_)&&Vu(s)}async function ku(t,e){const s=be(t),n=e.query;let r=3;const i=s.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?r=e.J_()?0:1:!i.H_()&&e.J_()&&(r=2))}switch(r){case 0:return s.queries.delete(n),s.onUnlisten(n,!0);case 1:return s.queries.delete(n),s.onUnlisten(n,!1);case 2:return s.onLastRemoteStoreUnlisten(n);default:return}}function wb(t,e){const s=be(t);let n=!1;for(const r of e){const i=r.query,a=s.queries.get(i);if(a){for(const u of a.j_)u.X_(r)&&(n=!0);a.z_=r}}n&&Vu(s)}function Cb(t,e,s){const n=be(t),r=n.queries.get(e);if(r)for(const i of r.j_)i.onError(s);n.queries.delete(e)}function Vu(t){t.Y_.forEach(e=>{e.next()})}var Dl,Eh;(Eh=Dl||(Dl={})).ea="default",Eh.Cache="cache";class Du{constructor(e,s,n){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new ar(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const n=s!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=ar.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Dl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e){this.key=e}}class am{constructor(e){this.key=e}}class Sb{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=Pp(e),this.Ra=new Qn(this.Aa)}get Va(){return this.Ta}ma(e,s){const n=s?s.fa:new _h,r=s?s.Ra:this.Ra;let i=s?s.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const v=r.get(f),E=Zo(this.query,m)?m:null,S=!!v&&this.mutatedKeys.has(v.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let M=!1;v&&E?v.data.isEqual(E.data)?S!==k&&(n.track({type:3,doc:E}),M=!0):this.ga(v,E)||(n.track({type:2,doc:E}),M=!0,(c&&this.Aa(E,c)>0||d&&this.Aa(E,d)<0)&&(u=!0)):!v&&E?(n.track({type:0,doc:E}),M=!0):v&&!E&&(n.track({type:1,doc:v}),M=!0,(c||d)&&(u=!0)),M&&(E?(a=a.add(E),i=k?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{Ra:a,fa:n,ns:u,mutatedKeys:i}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,m)=>function(E,S){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return k(E)-k(S)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(n),r=r!=null&&r;const u=s&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,d=c!==this.Ea;return this.Ea=c,a.length!==0||d?{snapshot:new ar(this.query,e.Ra,i,a,e.mutatedKeys,c===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _h,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(s=>this.Ta=this.Ta.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ta=this.Ta.delete(s)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const s=[];return e.forEach(n=>{this.da.has(n)||s.push(new am(n))}),this.da.forEach(n=>{e.has(n)||s.push(new om(n))}),s}ba(e){this.Ta=e.Ts,this.da=Se();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return ar.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Rb{constructor(e,s,n){this.query=e,this.targetId=s,this.view=n}}class Pb{constructor(e){this.key=e,this.va=!1}}class kb{constructor(e,s,n,r,i,a){this.localStore=e,this.remoteStore=s,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new fr(u=>Rp(u),Xo),this.Ma=new Map,this.xa=new Set,this.Oa=new st(pe.comparator),this.Na=new Map,this.La=new Eu,this.Ba={},this.ka=new Map,this.qa=or.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Vb(t,e,s=!0){const n=fm(t);let r;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Da()):r=await lm(n,e,s,!0),r}async function Db(t,e){const s=fm(t);await lm(s,e,!0,!1)}async function lm(t,e,s,n){const r=await eb(t.localStore,gs(e)),i=r.targetId,a=t.sharedClientState.addLocalQueryTarget(i,s);let u;return n&&(u=await xb(t,e,i,a==="current",r.resumeToken)),t.isPrimaryClient&&s&&em(t.remoteStore,r),u}async function xb(t,e,s,n,r){t.Ka=(m,v,E)=>async function(k,M,L,x){let $=M.view.ma(L);$.ns&&($=await ph(k.localStore,M.query,!1).then(({documents:g})=>M.view.ma(g,$)));const z=x&&x.targetChanges.get(M.targetId),ee=x&&x.targetMismatches.get(M.targetId)!=null,N=M.view.applyChanges($,k.isPrimaryClient,z,ee);return Th(k,M.targetId,N.wa),N.snapshot}(t,m,v,E);const i=await ph(t.localStore,e,!0),a=new Sb(e,i.Ts),u=a.ma(i.documents),c=bi.createSynthesizedTargetChangeForCurrentChange(s,n&&t.onlineState!=="Offline",r),d=a.applyChanges(u,t.isPrimaryClient,c);Th(t,s,d.wa);const f=new Rb(e,s,a);return t.Fa.set(e,f),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),d.snapshot}async function Nb(t,e,s){const n=be(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);if(i.length>1)return n.Ma.set(r.targetId,i.filter(a=>!Xo(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Vl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),s&&Au(n.remoteStore,r.targetId),xl(n,r.targetId)}).catch(_i)):(xl(n,r.targetId),await Vl(n.localStore,r.targetId,!0))}async function Mb(t,e){const s=be(t),n=s.Fa.get(e),r=s.Ma.get(n.targetId);s.isPrimaryClient&&r.length===1&&(s.sharedClientState.removeLocalQueryTarget(n.targetId),Au(s.remoteStore,n.targetId))}async function $b(t,e,s){const n=qb(t);try{const r=await function(a,u){const c=be(a),d=tt.now(),f=u.reduce((E,S)=>E.add(S.key),Se());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=Os(),k=Se();return c.cs.getEntries(E,f).next(M=>{S=M,S.forEach((L,x)=>{x.isValidDocument()||(k=k.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,S)).next(M=>{m=M;const L=[];for(const x of u){const $=rE(x,m.get(x.key).overlayedDocument);$!=null&&L.push(new ln(x.key,$,Ep($.value.mapValue),rs.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,L,u)}).next(M=>{v=M;const L=M.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(E,M.batchId,L)})}).then(()=>({batchId:v.batchId,changes:Vp(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let d=a.Ba[a.currentUser.toKey()];d||(d=new st(xe)),d=d.insert(u,c),a.Ba[a.currentUser.toKey()]=d}(n,r.batchId,s),await Ai(n,r.changes),await ia(n.remoteStore)}catch(r){const i=Ru(r,"Failed to persist write");s.reject(i)}}async function um(t,e){const s=be(t);try{const n=await JE(s.localStore,e);e.targetChanges.forEach((r,i)=>{const a=s.Na.get(i);a&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Oe(a.va):r.removedDocuments.size>0&&(Oe(a.va),a.va=!1))}),await Ai(s,n,e)}catch(n){await _i(n)}}function bh(t,e,s){const n=be(t);if(n.isPrimaryClient&&s===0||!n.isPrimaryClient&&s===1){const r=[];n.Fa.forEach((i,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=be(a);c.onlineState=u;let d=!1;c.queries.forEach((f,m)=>{for(const v of m.j_)v.Z_(u)&&(d=!0)}),d&&Vu(c)}(n.eventManager,e),r.length&&n.Ca.d_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Ob(t,e,s){const n=be(t);n.sharedClientState.updateQueryState(e,"rejected",s);const r=n.Na.get(e),i=r&&r.key;if(i){let a=new st(pe.comparator);a=a.insert(i,xt.newNoDocument(i,Ee.min()));const u=Se().add(i),c=new sa(Ee.min(),new Map,new st(xe),a,u);await um(n,c),n.Oa=n.Oa.remove(i),n.Na.delete(e),xu(n)}else await Vl(n.localStore,e,!1).then(()=>xl(n,e,s)).catch(_i)}async function Fb(t,e){const s=be(t),n=e.batch.batchId;try{const r=await YE(s.localStore,e);dm(s,n,null),cm(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await Ai(s,r)}catch(r){await _i(r)}}async function Lb(t,e,s){const n=be(t);try{const r=await function(a,u){const c=be(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,u).next(m=>(Oe(m!==null),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(n.localStore,e);dm(n,e,s),cm(n,e),n.sharedClientState.updateMutationState(e,"rejected",s),await Ai(n,r)}catch(r){await _i(r)}}function cm(t,e){(t.ka.get(e)||[]).forEach(s=>{s.resolve()}),t.ka.delete(e)}function dm(t,e,s){const n=be(t);let r=n.Ba[n.currentUser.toKey()];if(r){const i=r.get(e);i&&(s?i.reject(s):i.resolve(),r=r.remove(e)),n.Ba[n.currentUser.toKey()]=r}}function xl(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),s&&t.Ca.$a(n,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||hm(t,n)})}function hm(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(Au(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),xu(t))}function Th(t,e,s){for(const n of s)n instanceof om?(t.La.addReference(n.key,e),Ub(t,n)):n instanceof am?(de("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||hm(t,n.key)):_e()}function Ub(t,e){const s=e.key,n=s.path.canonicalString();t.Oa.get(s)||t.xa.has(n)||(de("SyncEngine","New document in limbo: "+s),t.xa.add(n),xu(t))}function xu(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new pe(Ze.fromString(e)),n=t.qa.next();t.Na.set(n,new Pb(s)),t.Oa=t.Oa.insert(s,n),em(t.remoteStore,new Js(gs(Jo(s.path)),n,"TargetPurposeLimboResolution",uu.oe))}}async function Ai(t,e,s){const n=be(t),r=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((u,c)=>{a.push(n.Ka(c,e,s).then(d=>{var f;if((d||s)&&n.isPrimaryClient){const m=d?!d.fromCache:(f=s==null?void 0:s.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=Tu.Wi(c.targetId,d);i.push(m)}}))}),await Promise.all(a),n.Ca.d_(r),await async function(c,d){const f=be(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>X.forEach(d,v=>X.forEach(v.$i,E=>f.persistence.referenceDelegate.addReference(m,v.targetId,E)).next(()=>X.forEach(v.Ui,E=>f.persistence.referenceDelegate.removeReference(m,v.targetId,E)))))}catch(m){if(!yi(m))throw m;de("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const v=m.targetId;if(!m.fromCache){const E=f.os.get(v),S=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(v,k)}}}(n.localStore,i))}async function Bb(t,e){const s=be(t);if(!s.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const n=await Yp(s.localStore,e);s.currentUser=e,function(i,a){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new le(Q.CANCELLED,a))})}),i.ka.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ai(s,n.hs)}}function jb(t,e){const s=be(t),n=s.Na.get(e);if(n&&n.va)return Se().add(n.key);{let r=Se();const i=s.Ma.get(e);if(!i)return r;for(const a of i){const u=s.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function fm(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=um.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ob.bind(null,e),e.Ca.d_=wb.bind(null,e.eventManager),e.Ca.$a=Cb.bind(null,e.eventManager),e}function qb(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lb.bind(null,e),e}class Ro{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=na(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,s){return null}Ha(e,s){return null}za(e){return QE(this.persistence,new KE,e.initialUser,this.serializer)}Ga(e){return new GE(bu.Zr,this.serializer)}Wa(e){return new sb}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ro.provider={build:()=>new Ro};class Nl{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>bh(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bb.bind(null,this.syncEngine),await Tb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ib}()}createDatastore(e){const s=na(e.databaseInfo.databaseId),n=function(i){return new ob(i)}(e.databaseInfo);return function(i,a,u,c){return new ub(i,a,u,c)}(e.authCredentials,e.appCheckCredentials,n,s)}createRemoteStore(e){return function(n,r,i,a,u){return new db(n,r,i,a,u)}(this.localStore,this.datastore,e.asyncQueue,s=>bh(this.syncEngine,s,0),function(){return gh.D()?new gh:new nb}())}createSyncEngine(e,s){return function(r,i,a,u,c,d,f){const m=new kb(r,i,a,u,c,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(r){const i=be(r);de("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ti(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}Nl.provider={build:()=>new Nl};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$s("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,s,n,r,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=n,this.databaseInfo=r,this.user=Vt.UNAUTHENTICATED,this.clientId=vp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{de("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(de("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const n=Ru(s,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ya(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let n=s.initialUser;t.setCredentialChangeListener(async r=>{n.isEqual(r)||(await Yp(e.localStore,r),n=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ah(t,e){t.asyncQueue.verifyOperationInProgress();const s=await Hb(t);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(n=>vh(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,r)=>vh(e.remoteStore,r)),t._onlineComponents=e}async function Hb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ya(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(r){return r.name==="FirebaseError"?r.code===Q.FAILED_PRECONDITION||r.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(s))throw s;sr("Error using user provided cache. Falling back to memory cache: "+s),await Ya(t,new Ro)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await Ya(t,new Ro);return t._offlineComponents}async function pm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await Ah(t,t._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await Ah(t,new Nl))),t._onlineComponents}function zb(t){return pm(t).then(e=>e.syncEngine)}async function Po(t){const e=await pm(t),s=e.eventManager;return s.onListen=Vb.bind(null,e.syncEngine),s.onUnlisten=Nb.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=Db.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=Mb.bind(null,e.syncEngine),s}function Kb(t,e,s={}){const n=new Vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,u,c,d){const f=new Nu({next:v=>{f.Za(),a.enqueueAndForget(()=>ku(i,m));const E=v.docs.has(u);!E&&v.fromCache?d.reject(new le(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&c&&c.source==="server"?d.reject(new le(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Du(Jo(u.path),f,{includeMetadataChanges:!0,_a:!0});return Pu(i,m)}(await Po(t),t.asyncQueue,e,s,n)),n.promise}function Wb(t,e,s={}){const n=new Vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,u,c,d){const f=new Nu({next:v=>{f.Za(),a.enqueueAndForget(()=>ku(i,m)),v.fromCache&&c.source==="server"?d.reject(new le(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new Du(u,f,{includeMetadataChanges:!0,_a:!0});return Pu(i,m)}(await Po(t),t.asyncQueue,e,s,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t,e,s){if(!s)throw new le(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qb(t,e,s,n){if(e===!0&&n===!0)throw new le(Q.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function wh(t){if(!pe.isDocumentKey(t))throw new le(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ch(t){if(pe.isDocumentKey(t))throw new le(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function oa(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=oa(t);throw new le(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e){var s,n;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mm((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aa{constructor(e,s,n,r){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sh(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new h0;switch(n.type){case"firstParty":return new g0(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new le(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const n=Ih.get(s);n&&(de("ComponentProvider","Removing Datastore"),Ih.delete(s),n.terminate())}(this),Promise.resolve()}}function Yb(t,e,s,n={}){var r;const i=(t=Wt(t,aa))._getSettings(),a=`${e}:${s}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let u,c;if(typeof n.mockUserToken=="string")u=n.mockUserToken,c=Vt.MOCK_USER;else{u=Hy(n.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new le(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Vt(d)}t._authCredentials=new f0(new gp(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new un(this.firestore,e,this._query)}}class Ot{constructor(e,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class tn extends un{constructor(e,s,n){super(e,s,Jo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new pe(e))}withConverter(e){return new tn(this.firestore,e,this._path)}}function Ge(t,e,...s){if(t=Es(t),gm("collection","path",e),t instanceof aa){const n=Ze.fromString(e,...s);return Ch(n),new tn(t,null,n)}{if(!(t instanceof Ot||t instanceof tn))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ze.fromString(e,...s));return Ch(n),new tn(t.firestore,null,n)}}function qt(t,e,...s){if(t=Es(t),arguments.length===1&&(e=vp.newId()),gm("doc","path",e),t instanceof aa){const n=Ze.fromString(e,...s);return wh(n),new Ot(t,null,new pe(n))}{if(!(t instanceof Ot||t instanceof tn))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ze.fromString(e,...s));return wh(n),new Ot(t.firestore,t instanceof tn?t.converter:null,new pe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Xp(this,"async_queue_retry"),this.Vu=()=>{const n=Qa();n&&de("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const s=Qa();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const s=Qa();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const s=new Vs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yi(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const s=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(n);throw $s("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.du=!1,n))));return this.mu=s,s}enqueueAfterDelay(e,s,n){this.fu(),this.Ru.indexOf(e)>-1&&(s=0);const r=Su.createAndSchedule(this,e,s,n,i=>this.yu(i));return this.Tu.push(r),r}fu(){this.Eu&&_e()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const s of this.Tu)if(s.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((s,n)=>s.targetTimeMs-n.targetTimeMs);for(const s of this.Tu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const s=this.Tu.indexOf(e);this.Tu.splice(s,1)}}function Ph(t){return function(s,n){if(typeof s!="object"||s===null)return!1;const r=s;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Fs extends aa{constructor(e,s,n,r){super(e,s,n,r),this.type="firestore",this._queue=new Rh,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rh(e),this._firestoreClient=void 0,await e}}}function Jb(t,e){const s=typeof t=="object"?t:e0(),n=typeof t=="string"?t:e||"(default)",r=Y1(s,"firestore").getImmediate({identifier:n});if(!r._initialized){const i=qy("firestore");i&&Yb(r,...i)}return r}function la(t){if(t._terminated)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Xb(t),t._firestoreClient}function Xb(t){var e,s,n;const r=t._freezeSettings(),i=function(u,c,d,f){return new P0(u,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,mm(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((s=r.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Gb(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(wt.fromBase64String(e))}catch(s){throw new le(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new lr(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new le(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new le(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new le(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return xe(this._lat,e._lat)||xe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=/^__.*__$/;class eT{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return this.fieldMask!==null?new ln(e,this.data,this.fieldMask,s,this.fieldTransforms):new Ei(e,this.data,s,this.fieldTransforms)}}class vm{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return new ln(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function _m(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Ou{constructor(e,s,n,r,i,a){this.settings=e,this.databaseId=s,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Ou(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ko(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(_m(this.Cu)&&Zb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tT{constructor(e,s,n){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=n||na(e)}Qu(e,s,n,r=!1){return new Ou({Cu:e,methodName:s,qu:n,path:At.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function da(t){const e=t._freezeSettings(),s=na(t._databaseId);return new tT(t._databaseId,!!e.ignoreUndefinedProperties,s)}function ym(t,e,s,n,r,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,s,r);Lu("Data must be an object, but it was:",a,n);const u=Em(n,a);let c,d;if(i.merge)c=new Zt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const v=Ml(e,m,s);if(!a.contains(v))throw new le(Q.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Tm(f,v)||f.push(v)}c=new Zt(f),d=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=a.fieldTransforms;return new eT(new Kt(u),c,d)}class ha extends ca{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ha}}class Fu extends ca{_toFieldTransform(e){return new eE(e.path,new di)}isEqual(e){return e instanceof Fu}}function sT(t,e,s,n){const r=t.Qu(1,e,s);Lu("Data must be an object, but it was:",r,n);const i=[],a=Kt.empty();Rn(n,(c,d)=>{const f=Uu(e,c,s);d=Es(d);const m=r.Nu(f);if(d instanceof ha)i.push(f);else{const v=Ii(d,m);v!=null&&(i.push(f),a.set(f,v))}});const u=new Zt(i);return new vm(a,u,r.fieldTransforms)}function nT(t,e,s,n,r,i){const a=t.Qu(1,e,s),u=[Ml(e,n,s)],c=[r];if(i.length%2!=0)throw new le(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)u.push(Ml(e,i[v])),c.push(i[v+1]);const d=[],f=Kt.empty();for(let v=u.length-1;v>=0;--v)if(!Tm(d,u[v])){const E=u[v];let S=c[v];S=Es(S);const k=a.Nu(E);if(S instanceof ha)d.push(E);else{const M=Ii(S,k);M!=null&&(d.push(E),f.set(E,M))}}const m=new Zt(d);return new vm(f,m,a.fieldTransforms)}function rT(t,e,s,n=!1){return Ii(s,t.Qu(n?4:3,e))}function Ii(t,e){if(bm(t=Es(t)))return Lu("Unsupported field value:",e,t),Em(t,e);if(t instanceof ca)return function(n,r){if(!_m(r.Cu))throw r.Bu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,r){const i=[];let a=0;for(const u of n){let c=Ii(u,r.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Es(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return J0(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=tt.fromDate(n);return{timestampValue:Co(r.serializer,i)}}if(n instanceof tt){const i=new tt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Co(r.serializer,i)}}if(n instanceof Mu)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof lr)return{bytesValue:qp(r.serializer,n._byteString)};if(n instanceof Ot){const i=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:yu(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof $u)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return mu(u.serializer,c)})}}}}}}(n,r);throw r.Bu(`Unsupported field value: ${oa(n)}`)}(t,e)}function Em(t,e){const s={};return _p(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rn(t,(n,r)=>{const i=Ii(r,e.Mu(n));i!=null&&(s[n]=i)}),{mapValue:{fields:s}}}function bm(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof Mu||t instanceof lr||t instanceof Ot||t instanceof ca||t instanceof $u)}function Lu(t,e,s){if(!bm(s)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(s)){const n=oa(s);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Ml(t,e,s){if((e=Es(e))instanceof ua)return e._internalPath;if(typeof e=="string")return Uu(t,e);throw ko("Field path arguments must be of type string or ",t,!1,void 0,s)}const iT=new RegExp("[~\\*/\\[\\]]");function Uu(t,e,s){if(e.search(iT)>=0)throw ko(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new ua(...e.split("."))._internalPath}catch{throw ko(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function ko(t,e,s,n,r){const i=n&&!n.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;s&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${n}`),a&&(c+=` in document ${r}`),c+=")"),new le(Q.INVALID_ARGUMENT,u+t+c)}function Tm(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,s,n,r,i){this._firestore=e,this._userDataWriter=s,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Bu("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class oT extends Am{data(){return super.data()}}function Bu(t,e){return typeof e=="string"?Uu(t,e):e instanceof ua?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ju{}class wm extends ju{}function Vo(t,e,...s){let n=[];e instanceof ju&&n.push(e),n=n.concat(s),function(i){const a=i.filter(c=>c instanceof Gu).length,u=i.filter(c=>c instanceof qu).length;if(a>1||a>0&&u>0)throw new le(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const r of n)t=r._apply(t);return t}class qu extends wm{constructor(e,s,n){super(),this._field=e,this._op=s,this._value=n,this.type="where"}static _create(e,s,n){return new qu(e,s,n)}_apply(e){const s=this._parse(e);return Cm(e._query,s),new un(e.firestore,e.converter,wl(e._query,s))}_parse(e){const s=da(e.firestore);return function(i,a,u,c,d,f,m){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new le(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Vh(m,f);const E=[];for(const S of m)E.push(kh(c,i,S));v={arrayValue:{values:E}}}else v=kh(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Vh(m,f),v=rT(u,a,m,f==="in"||f==="not-in");return ct.create(d,f,v)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}class Gu extends ju{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Gu(e,s)}_parse(e){const s=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return s.length===1?s[0]:ds.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(r,i){let a=r;const u=i.getFlattenedFilters();for(const c of u)Cm(a,c),a=wl(a,c)}(e._query,s),new un(e.firestore,e.converter,wl(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Hu extends wm{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new Hu(e,s)}_apply(e){const s=function(r,i,a){if(r.startAt!==null)throw new le(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new le(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ci(i,a)}(e._query,this._field,this._direction);return new un(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new hr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,s))}}function Do(t,e="asc"){const s=e,n=Bu("orderBy",t);return Hu._create(n,s)}function kh(t,e,s){if(typeof(s=Es(s))=="string"){if(s==="")throw new le(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sp(e)&&s.indexOf("/")!==-1)throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const n=e.path.child(Ze.fromString(s));if(!pe.isDocumentKey(n))throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Jd(t,new pe(n))}if(s instanceof Ot)return Jd(t,s._key);throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oa(s)}.`)}function Vh(t,e){if(!Array.isArray(t)||t.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Cm(t,e){const s=function(r,i){for(const a of r)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new le(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class aT{convertValue(e,s="none"){switch(Cn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(wn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const n={};return Rn(e,(r,i)=>{n[r]=this.convertValue(i,s)}),n}convertVectorValue(e){var s,n,r;const i=(r=(n=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(a=>at(a.doubleValue));return new $u(i)}convertGeoPoint(e){return new Mu(at(e.latitude),at(e.longitude))}convertArray(e,s){return(e.values||[]).map(n=>this.convertValue(n,s))}convertServerTimestamp(e,s){switch(s){case"previous":const n=du(e);return n==null?null:this.convertValue(n,s);case"estimate":return this.convertTimestamp(ai(e));default:return null}}convertTimestamp(e){const s=rn(e);return new tt(s.seconds,s.nanos)}convertDocumentKey(e,s){const n=Ze.fromString(e);Oe(Qp(n));const r=new li(n.get(1),n.get(3)),i=new pe(n.popFirst(5));return r.isEqual(s)||$s(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t,e,s){let n;return n=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rm extends Am{constructor(e,s,n,r,i,a){super(e,s,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new co(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const n=this._document.data.field(Bu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}}class co extends Rm{data(e={}){return super.data(e)}}class Pm{constructor(e,s,n,r){this._firestore=e,this._userDataWriter=s,this._snapshot=r,this.metadata=new Or(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(n=>{e.call(s,new co(this._firestore,this._userDataWriter,n.key,n,new Or(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new le(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new co(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Or(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new co(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Or(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),f=a.indexOf(u.doc.key)),{type:lT(u.type),doc:c,oldIndex:d,newIndex:f}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function lT(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fa(t){t=Wt(t,Ot);const e=Wt(t.firestore,Fs);return Kb(la(e),t._key).then(s=>km(e,t,s))}class zu extends aT{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,s)}}function an(t){t=Wt(t,un);const e=Wt(t.firestore,Fs),s=la(e),n=new zu(e);return Im(t._query),Wb(s,t._query).then(r=>new Pm(e,n,t,r))}function uT(t,e,s){t=Wt(t,Ot);const n=Wt(t.firestore,Fs),r=Sm(t.converter,e,s);return pa(n,[ym(da(n),"setDoc",t._key,r,t.converter!==null,s).toMutation(t._key,rs.none())])}function xo(t,e,s,...n){t=Wt(t,Ot);const r=Wt(t.firestore,Fs),i=da(r);let a;return a=typeof(e=Es(e))=="string"||e instanceof ua?nT(i,"updateDoc",t._key,e,s,n):sT(i,"updateDoc",t._key,e),pa(r,[a.toMutation(t._key,rs.exists(!0))])}function No(t){return pa(Wt(t.firestore,Fs),[new gu(t._key,rs.none())])}function Mo(t,e){const s=Wt(t.firestore,Fs),n=qt(t),r=Sm(t.converter,e);return pa(s,[ym(da(t.firestore),"addDoc",n._key,r,t.converter!==null,{}).toMutation(n._key,rs.exists(!1))]).then(()=>n)}function Mt(t,...e){var s,n,r;t=Es(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Ph(e[a])||(i=e[a],a++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Ph(e[a])){const m=e[a];e[a]=(s=m.next)===null||s===void 0?void 0:s.bind(m),e[a+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[a+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let c,d,f;if(t instanceof Ot)d=Wt(t.firestore,Fs),f=Jo(t._key.path),c={next:m=>{e[a]&&e[a](km(d,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Wt(t,un);d=Wt(m.firestore,Fs),f=m._query;const v=new zu(d);c={next:E=>{e[a]&&e[a](new Pm(d,v,m,E))},error:e[a+1],complete:e[a+2]},Im(t._query)}return function(v,E,S,k){const M=new Nu(k),L=new Du(E,M,S);return v.asyncQueue.enqueueAndForget(async()=>Pu(await Po(v),L)),()=>{M.Za(),v.asyncQueue.enqueueAndForget(async()=>ku(await Po(v),L))}}(la(d),f,u,c)}function pa(t,e){return function(n,r){const i=new Vs;return n.asyncQueue.enqueueAndForget(async()=>$b(await zb(n),r,i)),i.promise}(la(t),e)}function km(t,e,s){const n=s.docs.get(e._key),r=new zu(t);return new Rm(t,r,e._key,n,new Or(s.hasPendingWrites,s.fromCache),e.converter)}function Yi(){return new Fu("serverTimestamp")}(function(e,s=!0){(function(r){dr=r})(Z1),To(new ri("firestore",(n,{instanceIdentifier:r,options:i})=>{const a=n.getProvider("app").getImmediate(),u=new Fs(new p0(n.getProvider("auth-internal")),new _0(n.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new le(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new li(d.options.projectId,f)}(a,r),a);return i=Object.assign({useFetchStreams:s},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Wn(zd,"4.7.3",e),Wn(zd,"4.7.3","esm2017")})();const cT={apiKey:"AIzaSyA__e798LgpiDfoBZXE7mynRxAajhQZT8o",authDomain:"oishi-nigiri.firebaseapp.com",projectId:"oishi-nigiri",storageBucket:"oishi-nigiri.firebasestorage.app",messagingSenderId:"235045203402",appId:"1:235045203402:web:442b84e7b4720f33d1f333"};let Ji=null,$o=null;function Vm(){return Ji||(Ji=ap(cT),$o=Jb(Ji)),{app:Ji,db:$o}}function it(){return $o||Vm(),$o}const dT=["317665879443767306"],Xi=re(null),Zi=re(!1),Dr=re(!1),Fn=re({});function wi(){const t=()=>{if(typeof DISCORD_CONFIG>"u"){console.error("DISCORD_CONFIG n'est pas dfini");return}const d=new URLSearchParams({client_id:DISCORD_CONFIG.clientId,redirect_uri:DISCORD_CONFIG.redirectUri,response_type:"token",scope:DISCORD_CONFIG.scope});window.location.href=`https://discord.com/api/oauth2/authorize?${d.toString()}`},e=()=>{localStorage.removeItem("discordUser"),localStorage.removeItem("discordToken"),localStorage.removeItem("discord_user"),localStorage.removeItem("discord_token"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminPermissions"),localStorage.removeItem("isSuperAdmin"),Xi.value=null,Zi.value=!1,Dr.value=!1,Fn.value={},window.location.reload()},s=async()=>{const d=window.location.hash;if(d&&d.includes("access_token")){const E=new URLSearchParams(d.substring(1)).get("access_token");if(E){const S=await n(E);if(S&&(localStorage.setItem("discord_user",JSON.stringify(S)),localStorage.setItem("discord_token",E),await i(S.id)))return localStorage.setItem("discordUser",JSON.stringify(S)),localStorage.setItem("discordToken",E),localStorage.setItem("isAdmin","true"),Xi.value=S,window.history.replaceState({},document.title,window.location.pathname),!0}}const f=localStorage.getItem("discord_user"),m=localStorage.getItem("discord_token");if(f&&m){const v=JSON.parse(f);if(await i(v.id))return localStorage.setItem("discordUser",JSON.stringify(v)),localStorage.setItem("discordToken",m),localStorage.setItem("isAdmin","true"),Xi.value=v,!0}return!1},n=async d=>{try{const f=await fetch("https://discord.com/api/users/@me",{headers:{Authorization:`Bearer ${d}`}});if(f.ok)return await f.json()}catch(f){console.error("Erreur lors de la rcupration des infos Discord:",f)}return null},r=d=>{const f=String(d);return!!(typeof DISCORD_CONFIG<"u"&&DISCORD_CONFIG.adminManagerIds&&DISCORD_CONFIG.adminManagerIds.includes(f)||dT.includes(f))},i=async d=>{if(!d)return!1;try{const f=String(d);if(r(f))return Fn.value={menu:!0,team:!0,sales:!0,employees:!0,ranks:!0,admins:!0},localStorage.setItem("adminPermissions",JSON.stringify(Fn.value)),localStorage.setItem("isSuperAdmin","true"),Dr.value=!0,Zi.value=!0,!0;const m=it(),v=await fa(qt(m,"admins",f));if(v.exists()){const E=v.data();if(E.isAdmin===!0)return Fn.value=E.permissions||{},localStorage.setItem("adminPermissions",JSON.stringify(Fn.value)),localStorage.setItem("isSuperAdmin","false"),Dr.value=!1,Zi.value=!0,!0}return!1}catch(f){return console.error("Erreur lors de la vrification du statut admin:",f),!1}},a=d=>{if(Dr.value)return!0;const f=localStorage.getItem("adminPermissions");if(!f)return!1;try{return JSON.parse(f)[d]===!0}catch{return!1}},u=d=>{if(!d||!d.id)return"https://cdn.discordapp.com/embed/avatars/0.png";const f=String(d.id);return/^\d{17,19}$/.test(f)?d.avatar&&typeof d.avatar=="string"?/^[a-zA-Z0-9_-]+$/.test(d.avatar)?`https://cdn.discordapp.com/avatars/${f}/${d.avatar}.png`:`https://cdn.discordapp.com/embed/avatars/${(parseInt(f)>>22)%6}.png`:`https://cdn.discordapp.com/embed/avatars/${(parseInt(f)>>22)%6}.png`:"https://cdn.discordapp.com/embed/avatars/0.png"},c=d=>d.discriminator&&d.discriminator!=="0"?`${d.username}#${d.discriminator}`:d.global_name||d.username;return{user:ue(()=>Xi.value),isAdmin:ue(()=>Zi.value),isSuperAdmin:ue(()=>Dr.value),permissions:ue(()=>Fn.value),loginWithDiscord:t,logout:e,checkAuth:s,hasPermission:a,getAvatarUrl:u,getUsername:c}}const Fe=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},hT={class:"auth-container"},fT={key:0,class:"user-profile"},pT=["src","alt"],mT={class:"user-name"},gT={key:0,href:"#/admin.html",class:"admin-btn"},vT={__name:"AuthContainer",setup(t){const{user:e,isAdmin:s,loginWithDiscord:n,logout:r,getAvatarUrl:i,getUsername:a,checkAuth:u}=wi(),c=ue(()=>!!e.value),d=ue(()=>s.value),f=ue(()=>e.value?a(e.value):""),m=ue(()=>e.value?i(e.value):""),v=()=>{n()},E=()=>{r()};return Ct(async()=>{await u()}),(S,k)=>(V(),F("div",hT,[c.value?(V(),F("div",fT,[o("img",{src:m.value,alt:f.value,class:"user-avatar-small"},null,8,pT),o("span",mT,j(f.value),1),d.value?(V(),F("a",gT,"Admin")):he("",!0),o("button",{onClick:E,class:"logout-btn-small"},"Dconnexion")])):(V(),F("button",{key:1,onClick:v,class:"discord-login-btn-small"},[...k[0]||(k[0]=[o("svg",{width:"16",height:"16",viewBox:"0 0 71 55",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 49.9718 48.5383C51.038 50.6034 52.2584 52.5699 53.5959 54.435C53.6519 54.5139 53.7526 54.5477 53.845 54.5195C59.6464 52.7249 65.529 50.0174 71.6019 45.5576C71.6551 45.5182 71.6887 45.459 71.6943 45.3942C73.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z",fill:"currentColor"})],-1),ne(" Se connecter ",-1)])]))]))}},_T=Fe(vT,[["__scopeId","data-v-4644da45"]]);const yT={class:"navbar"},ET={class:"container"},bT={class:"logo-section"},TT={href:"#/",class:"logo"},AT=["src"],IT={__name:"Navbar",setup(t){const e=re(!1),s=ue(()=>"./logo.png"),n=()=>{e.value=!e.value},r=()=>{e.value=!1},i=a=>{r(),setTimeout(()=>{const u=document.getElementById(a);if(u){const c=u.offsetTop-80;window.scrollTo({top:c,behavior:"smooth"})}},100)};return Ct(()=>{const a=document.querySelector(".navbar");a&&window.addEventListener("scroll",()=>{window.scrollY>100?a.style.background="rgba(26, 26, 26, 0.98)":a.style.background="rgba(26, 26, 26, 0.95)"})}),(a,u)=>(V(),F("nav",yT,[o("div",ET,[o("div",bT,[o("div",{class:je(["hamburger",{active:e.value}]),onClick:n,"aria-label":"Menu",role:"button",tabindex:"0"},[...u[4]||(u[4]=[o("span",null,null,-1),o("span",null,null,-1),o("span",null,null,-1)])],2),o("a",TT,[o("img",{src:s.value,alt:"Oishi Nigiri",class:"logo-img"},null,8,AT),u[5]||(u[5]=o("div",{class:"logo-text-container"},[o("span",{class:"logo-kanji"},""),o("span",{class:"logo-text"},"Oishi Nigiri")],-1))])]),o("ul",{class:je(["nav-menu",{active:e.value}])},[o("li",null,[o("a",{href:"#/",onClick:u[0]||(u[0]=He(c=>i("accueil"),["prevent"]))},"Accueil")]),o("li",null,[o("a",{href:"#/",onClick:u[1]||(u[1]=He(c=>i("carte-semaine"),["prevent"]))},"Menu")]),o("li",null,[o("a",{href:"#/",onClick:u[2]||(u[2]=He(c=>i("apropos"),["prevent"]))}," Propos")]),o("li",null,[o("a",{href:"#/",onClick:u[3]||(u[3]=He(c=>i("equipe"),["prevent"]))},"quipe")]),o("li",null,[o("a",{href:"./recrutement.html",onClick:r},"Recrutement")])],2),Xe(_T)]),e.value?(V(),F("div",{key:0,class:"menu-overlay",onClick:r})):he("",!0)]))}},wT=Fe(IT,[["__scopeId","data-v-3c5156e5"]]);const CT={id:"accueil",class:"hero"},ST={class:"hero-content"},RT={__name:"HeroSection",setup(t){const e=()=>{const s=document.getElementById("carte-semaine");if(s){const n=s.offsetTop-80;window.scrollTo({top:n,behavior:"smooth"})}};return Ct(()=>{window.addEventListener("scroll",()=>{const s=window.pageYOffset,n=document.querySelector(".hero-content");n&&s<window.innerHeight&&(n.style.transform=`translateY(${s*.5}px)`,n.style.opacity=1-s/window.innerHeight)})}),(s,n)=>(V(),F("section",CT,[n[2]||(n[2]=o("div",{class:"hero-overlay"},null,-1)),o("div",ST,[n[0]||(n[0]=o("h1",{class:"hero-title"},[o("span",{class:"hero-kanji"},""),o("span",{class:"hero-name"},"Oishi Nigiri")],-1)),n[1]||(n[1]=o("p",{class:"hero-subtitle"},"Une exprience culinaire authentique du Japon",-1)),o("a",{href:"#/",onClick:He(e,["prevent"]),class:"cta-button"},"Dcouvrir le Menu")])]))}},PT=Fe(RT,[["__scopeId","data-v-b892f168"]]);const kT={id:"carte-semaine",class:"weekly-menu-section"},VT={class:"container"},DT={key:0,class:"loading-menu"},xT={key:1,class:"weekly-menu-image-container"},NT=["src"],MT={key:2,class:"loading-menu"},$T={key:3,class:"weekly-menu-grid"},OT={class:"weekly-menu-category-title"},FT={class:"weekly-menu-grid"},LT={class:"weekly-menu-item-header"},UT={class:"weekly-menu-item-title"},BT={class:"weekly-menu-item-price"},jT={class:"weekly-menu-item-description"},qT={__name:"WeeklyMenuSection",setup(t){const e=re([]),s=re([]),n=re(!0),r=re(!1),i=re(""),a=ue(()=>{const d={};return s.value.forEach(m=>{d[m.name]=m.order||999}),[...new Set(e.value.map(m=>m.category||"Sans catgorie"))].sort((m,v)=>{const E=d[m]!==void 0?d[m]:999,S=d[v]!==void 0?d[v]:999;return E!==S?E-S:m.localeCompare(v)})}),u=d=>e.value.filter(f=>(f.category||"Sans catgorie")===d).sort((f,m)=>(f.name||"").localeCompare(m.name||"")),c=async()=>{try{n.value=!0;const d=it(),f=await fa(qt(d,"menuConfig","display"));if(f.exists()){const E=f.data();r.value=E.useImageMode||!1,i.value=E.imageUrl||""}if(r.value&&i.value){n.value=!1;return}const m=await an(Vo(Ge(d,"menuCategories"),Do("order","asc")));s.value=m.docs.map(E=>({id:E.id,...E.data()}));const v=await an(Ge(d,"menuSemaine"));e.value=v.docs.map(E=>({id:E.id,...E.data()})),n.value=!1}catch(d){console.error("Erreur lors du chargement du menu:",d),n.value=!1}};return Ct(()=>{c();const d=it();Mt(Ge(d,"menuSemaine"),()=>{c()}),Mt(qt(d,"menuConfig","display"),()=>{c()})}),(d,f)=>(V(),F("section",kT,[o("div",VT,[f[2]||(f[2]=o("h2",{class:"section-title"},[o("span",{class:"title-decor"},""),ne(" Carte de la Semaine "),o("span",{class:"title-decor"},"")],-1)),n.value?(V(),F("div",DT,[...f[0]||(f[0]=[o("p",null,"Chargement de la carte de la semaine...",-1)])])):r.value&&i.value?(V(),F("div",xT,[o("img",{src:i.value,alt:"Carte de la semaine",class:"weekly-menu-image"},null,8,NT)])):e.value.length===0?(V(),F("div",MT,[...f[1]||(f[1]=[o("p",null,"Aucune carte de la semaine disponible pour le moment.",-1)])])):(V(),F("div",$T,[(V(!0),F(we,null,Ye(a.value,m=>(V(),F("div",{key:m,class:"weekly-menu-category-section"},[o("h3",OT,j(m),1),o("div",FT,[(V(!0),F(we,null,Ye(u(m),v=>(V(),F("div",{key:v.id,class:"weekly-menu-item"},[o("div",LT,[o("div",UT,j(v.name),1),o("div",BT,j(v.price)+"",1)]),o("div",jT,j(v.description),1)]))),128))])]))),128))]))])]))}},GT=Fe(qT,[["__scopeId","data-v-d167b753"]]);const HT={},zT={id:"apropos",class:"about-section"};function KT(t,e){return V(),F("section",zT,[...e[0]||(e[0]=[Lv('<div class="container" data-v-16aacaed><div class="about-content" data-v-16aacaed><div class="about-text" data-v-16aacaed><h2 class="section-title" data-v-16aacaed><span class="title-decor" data-v-16aacaed></span> Notre Histoire <span class="title-decor" data-v-16aacaed></span></h2><p class="lead-text" data-v-16aacaed> Bienvenue chez Oishi Nigiri, o la tradition japonaise rencontre l&#39;excellence culinaire. </p><p data-v-16aacaed> Fond par un chef japonais passionn, notre restaurant vous propose une exprience authentique avec des ingrdients frais imports directement du Japon. Chaque plat est prpar avec soin et respect de la tradition culinaire japonaise. </p><div class="features" data-v-16aacaed><div class="feature" data-v-16aacaed><span class="feature-icon" data-v-16aacaed></span><h4 data-v-16aacaed>Authenticit</h4><p data-v-16aacaed>Recettes traditionnelles japonaises</p></div><div class="feature" data-v-16aacaed><span class="feature-icon" data-v-16aacaed></span><h4 data-v-16aacaed>Fracheur</h4><p data-v-16aacaed>Poissons frais quotidiennement</p></div><div class="feature" data-v-16aacaed><span class="feature-icon" data-v-16aacaed></span><h4 data-v-16aacaed>Excellence</h4><p data-v-16aacaed>Chef expriment du Japon</p></div></div></div><div class="about-image" data-v-16aacaed><div class="image-placeholder" data-v-16aacaed><span data-v-16aacaed></span></div></div></div></div>',1)])])}const WT=Fe(HT,[["render",KT],["__scopeId","data-v-16aacaed"]]);const QT={id:"equipe",class:"team-section"},YT={class:"container"},JT={key:0,class:"loading-menu"},XT={key:1,class:"loading-menu"},ZT={key:2,class:"organigramme-grid"},eA={class:"team-member-photo"},tA=["src","alt"],sA={key:1,class:"team-member-placeholder"},nA={class:"team-member-info"},rA={class:"team-member-name"},iA={class:"team-member-role"},oA={key:0,class:"team-member-description"},aA={__name:"TeamSection",setup(t){const e=re([]),s=re(!0),n=ue(()=>[...e.value].sort((i,a)=>(i.order||0)-(a.order||0))),r=async()=>{try{s.value=!0;const i=it(),a=await an(Ge(i,"organigramme"));e.value=a.docs.map(u=>({id:u.id,...u.data()})),s.value=!1}catch(i){console.error("Erreur lors du chargement de l'quipe:",i),s.value=!1}};return Ct(()=>{r();const i=it();Mt(Ge(i,"organigramme"),()=>{r()})}),(i,a)=>(V(),F("section",QT,[o("div",YT,[a[2]||(a[2]=o("h2",{class:"section-title"},[o("span",{class:"title-decor"},""),ne(" Notre quipe "),o("span",{class:"title-decor"},"")],-1)),s.value?(V(),F("div",JT,[...a[0]||(a[0]=[o("p",null,"Chargement de l'quipe...",-1)])])):e.value.length===0?(V(),F("div",XT,[...a[1]||(a[1]=[o("p",null,"Aucun membre de l'quipe pour le moment.",-1)])])):(V(),F("div",ZT,[(V(!0),F(we,null,Ye(n.value,u=>(V(),F("div",{key:u.id,class:"team-member-card"},[o("div",eA,[u.photo?(V(),F("img",{key:0,src:u.photo,alt:u.name},null,8,tA)):(V(),F("div",sA,""))]),o("div",nA,[o("h3",rA,j(u.name),1),o("p",iA,j(u.role),1),u.description?(V(),F("p",oA,j(u.description),1)):he("",!0)])]))),128))]))])]))}},lA=Fe(aA,[["__scopeId","data-v-a2edb862"]]);const uA={class:"footer"},cA={class:"container"},dA={class:"footer-content"},hA={class:"footer-section"},fA={__name:"Footer",setup(t){const e=s=>{const n=document.getElementById(s);if(n){const r=n.offsetTop-80;window.scrollTo({top:r,behavior:"smooth"})}};return(s,n)=>(V(),F("footer",uA,[o("div",cA,[o("div",dA,[n[4]||(n[4]=o("div",{class:"footer-section"},[o("h3",null,"Oishi Nigiri"),o("p",null,"L'authenticit du Japon dans chaque bouche.")],-1)),o("div",hA,[n[3]||(n[3]=o("h4",null,"Navigation",-1)),o("ul",null,[o("li",null,[o("a",{href:"#/",onClick:n[0]||(n[0]=He(r=>e("accueil"),["prevent"]))},"Accueil")]),o("li",null,[o("a",{href:"#/",onClick:n[1]||(n[1]=He(r=>e("carte-semaine"),["prevent"]))},"Menu")]),o("li",null,[o("a",{href:"#/",onClick:n[2]||(n[2]=He(r=>e("apropos"),["prevent"]))}," Propos")])])])]),n[5]||(n[5]=o("div",{class:"footer-bottom"},[o("p",null," 2025 Oishi Nigiri GPRP. Tous droits rservs.")],-1))])]))}},pA=Fe(fA,[["__scopeId","data-v-a9041f0d"]]);const mA={class:"home-page"},gA={__name:"Home",setup(t){return(e,s)=>(V(),F("div",mA,[Xe(wT),Xe(PT),Xe(GT),Xe(WT),Xe(lA),Xe(pA)]))}},Dh=Fe(gA,[["__scopeId","data-v-a41f303e"]]);const vA={class:"login-screen"},_A={class:"login-container"},yA={class:"login-card"},EA={class:"login-title"},bA=["src"],TA={key:0,class:"error-message show"},AA={__name:"LoginScreen",props:{error:String},emits:["login"],setup(t){const e=ue(()=>"./logo.png");return(s,n)=>(V(),F("div",vA,[o("div",_A,[o("div",yA,[o("h1",EA,[o("img",{src:e.value,alt:"Oishi Nigiri",class:"logo-img-login"},null,8,bA),n[1]||(n[1]=o("span",{class:"logo-kanji"},"",-1)),n[2]||(n[2]=o("span",{class:"logo-text"},"Oishi Nigiri",-1))]),n[4]||(n[4]=o("h2",null,"Panel Administrateur",-1)),n[5]||(n[5]=o("p",{class:"login-subtitle"},"Connectez-vous avec Discord pour accder au panel",-1)),o("button",{onClick:n[0]||(n[0]=r=>s.$emit("login")),class:"discord-login-btn"},[...n[3]||(n[3]=[o("svg",{width:"20",height:"20",viewBox:"0 0 71 55",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 49.9718 48.5383C51.038 50.6034 52.2584 52.5699 53.5959 54.435C53.6519 54.5139 53.7526 54.5477 53.845 54.5195C59.6464 52.7249 65.529 50.0174 71.6019 45.5576C71.6551 45.5182 71.6887 45.459 71.6943 45.3942C73.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z",fill:"currentColor"})],-1),ne(" Se connecter avec Discord ",-1)])]),t.error?(V(),F("div",TA,j(t.error),1)):he("",!0)])])]))}},IA=Fe(AA,[["__scopeId","data-v-a6e589a2"]]),wA="/assets/logo-76d65970.png";const CA={class:"sidebar-header"},SA={class:"logo-section"},RA={class:"header-actions"},PA=["title"],kA={class:"sidebar-nav"},VA={key:0,class:"nav-section"},DA=["onClick"],xA={key:0,class:"nav-badge"},NA={key:1,class:"nav-section"},MA=["onClick"],$A={class:"user-section"},OA={class:"user-info-sidebar"},FA=["src","alt"],LA={class:"user-details-sidebar"},UA={class:"username-sidebar"},BA={class:"user-role-sidebar"},jA={__name:"AdminSidebar",props:{activeTab:String,permissions:Object,user:Object},emits:["tab-change","logout"],setup(t,{emit:e}){const{getAvatarUrl:s,getUsername:n}=wi(),r=t,i=e,a=re(!1),u=re(!1),c=re(!1),d=[{id:"menu",label:"Carte",icon:"fas fa-utensils",permission:"menu",category:"management"},{id:"team",label:"quipe",icon:"fas fa-users",permission:"team",category:"management"},{id:"sales",label:"Ventes",icon:"fas fa-chart-line",permission:"sales",category:"management"},{id:"history",label:"Historique",icon:"fas fa-history",permission:"history",category:"management"},{id:"employees",label:"Employs",icon:"fas fa-user-tie",permission:"employees",category:"config"},{id:"ranks",label:"Grades",icon:"fas fa-star",permission:"ranks",category:"config"},{id:"admins",label:"Administrateurs",icon:"fas fa-shield-alt",permission:"admins",category:"config"}],f=ue(()=>localStorage.getItem("isSuperAdmin")==="true"),m=ue(()=>d.filter(z=>f.value?!0:r.permissions[z.permission]===!0)),v=ue(()=>m.value.filter(z=>z.category==="management")),E=ue(()=>m.value.filter(z=>z.category==="config")),S=z=>{i("tab-change",z),a.value=!1},k=()=>{c.value&&(u.value=!u.value)},M=()=>{c.value=window.innerWidth<=768,window.innerWidth<=1024&&(a.value=!1),window.innerWidth>768&&u.value&&(u.value=!1)};Ct(()=>{M(),window.addEventListener("resize",M)}),Xl(()=>{window.removeEventListener("resize",M)});const L=ue(()=>r.user?n(r.user):"Admin"),x=ue(()=>r.user?s(r.user):"https://cdn.discordapp.com/embed/avatars/0.png"),$=ue(()=>localStorage.getItem("isSuperAdmin")==="true"?"Super Admin":"Administrateur");return(z,ee)=>(V(),F(we,null,[o("aside",{class:je(["admin-sidebar",{"mobile-open":a.value,collapsed:u.value&&c.value}])},[o("div",CA,[o("div",SA,[o("img",{src:wA,alt:"Oishi Nigiri",class:je(["sidebar-logo",{hidden:u.value&&c.value}])},null,2),o("div",{class:je(["logo-text",{hidden:u.value&&c.value}])},[...ee[3]||(ee[3]=[o("span",{class:"logo-kanji"},"",-1),o("span",{class:"logo-title"},"Admin",-1)])],2)]),o("div",RA,[a.value?(V(),F("button",{key:0,class:"mobile-close",onClick:ee[0]||(ee[0]=N=>a.value=!1)},[...ee[4]||(ee[4]=[o("i",{class:"fas fa-times"},null,-1)])])):he("",!0),c.value?(V(),F("button",{key:1,class:"collapse-btn",onClick:k,title:u.value?"Afficher la sidebar":"Masquer la sidebar"},[o("i",{class:je(u.value?"fas fa-chevron-right":"fas fa-chevron-left")},null,2)],8,PA)):he("",!0)])]),o("nav",kA,[v.value.length>0?(V(),F("div",VA,[o("div",{class:je(["nav-section-title",{hidden:u.value&&c.value}])},"Gestion",2),(V(!0),F(we,null,Ye(v.value,N=>(V(),F("button",{key:N.id,class:je(["nav-item",{active:t.activeTab===N.id,collapsed:u.value&&c.value}]),onClick:g=>S(N.id)},[o("i",{class:je(N.icon)},null,2),o("span",{class:je({hidden:u.value&&c.value})},j(N.label),3),N.badge&&!(u.value&&c.value)?(V(),F("span",xA,j(N.badge),1)):he("",!0)],10,DA))),128))])):he("",!0),E.value.length>0?(V(),F("div",NA,[o("div",{class:je(["nav-section-title",{hidden:u.value&&c.value}])},"Configuration",2),(V(!0),F(we,null,Ye(E.value,N=>(V(),F("button",{key:N.id,class:je(["nav-item",{active:t.activeTab===N.id,collapsed:u.value&&c.value}]),onClick:g=>S(N.id)},[o("i",{class:je(N.icon)},null,2),o("span",{class:je({hidden:u.value&&c.value})},j(N.label),3)],10,MA))),128))])):he("",!0)]),o("div",{class:je(["sidebar-footer",{hidden:u.value&&c.value}])},[o("div",$A,[o("div",OA,[o("img",{src:x.value,alt:L.value,class:"user-avatar-sidebar"},null,8,FA),o("div",LA,[o("span",UA,j(L.value),1),o("span",BA,j($.value),1)])]),o("button",{onClick:ee[1]||(ee[1]=N=>z.$emit("logout")),class:"logout-btn-sidebar"},[...ee[5]||(ee[5]=[o("i",{class:"fas fa-sign-out-alt"},null,-1),ne(" Dconnexion ",-1)])])]),ee[6]||(ee[6]=o("a",{href:"#/",class:"home-link"},[o("i",{class:"fas fa-home"}),o("span",null,"Retour au site")],-1))],2)],2),a.value?(V(),F("div",{key:0,class:"mobile-overlay",onClick:ee[2]||(ee[2]=N=>a.value=!1)})):he("",!0)],64))}},qA=Fe(jA,[["__scopeId","data-v-a57ec0cc"]]);const GA={class:"admin-header"},HA={class:"header-left"},zA={class:"breadcrumb"},KA={class:"breadcrumb-item"},WA={__name:"AdminHeader",props:{activeTab:String},setup(t){const e=t,s={menu:"Gestion de la Carte",team:"Gestion de l'quipe",sales:"Gestion des Ventes",history:"Historique des Ventes",employees:"Gestion des Employs",ranks:"Gestion des Grades",admins:"Gestion des Administrateurs"},n=ue(()=>s[e.activeTab]||"Panel Admin"),r=()=>{const i=document.querySelector(".admin-sidebar");i&&i.classList.toggle("mobile-open")};return(i,a)=>(V(),F("header",GA,[o("div",HA,[o("button",{class:"mobile-menu-btn",onClick:r},[...a[0]||(a[0]=[o("i",{class:"fas fa-bars"},null,-1)])]),o("div",zA,[o("span",KA,j(n.value),1)])])]))}},QA=Fe(WA,[["__scopeId","data-v-1989eccd"]]),gn=re(!1),Ja=re({title:"Confirmation",message:"",confirmText:"Confirmer",cancelText:"Annuler",type:"warning",onConfirm:null,onCancel:null});function kn(){return{showConfirm:gn,confirmConfig:Ja,confirm:(s,n={})=>new Promise((r,i)=>{Ja.value={title:n.title||"Confirmation",message:s,confirmText:n.confirmText||"Confirmer",cancelText:n.cancelText||"Annuler",type:n.type||"warning",onConfirm:()=>{gn.value=!1,r(!0)},onCancel:()=>{gn.value=!1,r(!1)}},gn.value=!0}),alert:(s,n={})=>new Promise(r=>{Ja.value={title:n.title||"Information",message:s,confirmText:n.confirmText||"OK",cancelText:"",type:n.type||"info",onConfirm:()=>{gn.value=!1,r()},onCancel:()=>{gn.value=!1,r()}},gn.value=!0})}}const YA={class:"modal-container"},JA={class:"modal-header"},XA={class:"modal-header-content"},ZA={class:"modal-subtitle"},eI={class:"form-grid"},tI={class:"form-group"},sI={class:"form-group"},nI=["value"],rI={class:"form-group full-width"},iI={class:"form-group"},oI={class:"modal-footer"},aI={type:"submit",class:"btn btn-primary"},lI={__name:"ItemModal",props:{item:Object,categories:Array},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=re({name:"",category:"",description:"",price:0});es(()=>s.item,a=>{a?r.value={name:a.name||"",category:a.category||"",description:a.description||"",price:a.price||0}:r.value={name:"",category:"",description:"",price:0}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[6]||(u[6]=He(c=>a.$emit("close"),["self"]))},[o("div",YA,[o("div",JA,[o("div",XA,[u[7]||(u[7]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-utensils"})],-1)),o("div",null,[o("h2",null,j(t.item?"Modifier un Plat":"Ajouter un Plat"),1),o("p",ZA,j(t.item?"Modifiez les informations du plat":"Remplissez les informations pour ajouter un nouveau plat"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[8]||(u[8]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",eI,[o("div",tI,[u[9]||(u[9]=o("label",{for:"item-name"},[o("i",{class:"fas fa-tag"}),ne(" Nom du plat ")],-1)),Ie(o("input",{type:"text",id:"item-name","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.name=c),required:"",placeholder:"Ex: Sushi Saumon",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",sI,[u[11]||(u[11]=o("label",{for:"item-category"},[o("i",{class:"fas fa-folder"}),ne(" Catgorie ")],-1)),Ie(o("select",{id:"item-category","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.category=c),required:""},[u[10]||(u[10]=o("option",{value:""},"Slectionner une catgorie",-1)),(V(!0),F(we,null,Ye(t.categories,c=>(V(),F("option",{key:c.id,value:c.name},j(c.name),9,nI))),128))],512),[[Zn,r.value.category]])]),o("div",rI,[u[12]||(u[12]=o("label",{for:"item-description"},[o("i",{class:"fas fa-align-left"}),ne(" Description ")],-1)),Ie(o("textarea",{id:"item-description","onUpdate:modelValue":u[3]||(u[3]=c=>r.value.description=c),rows:"4",required:"",placeholder:"Dcrivez le plat..."},null,512),[[et,r.value.description]])]),o("div",iI,[u[13]||(u[13]=o("label",{for:"item-price"},[o("i",{class:"fas fa-euro-sign"}),ne(" Prix () ")],-1)),Ie(o("input",{type:"number",id:"item-price","onUpdate:modelValue":u[4]||(u[4]=c=>r.value.price=c),step:"0.01",min:"0",required:"",placeholder:"0.00"},null,512),[[et,r.value.price,void 0,{number:!0}]])])]),o("div",oI,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[5]||(u[5]=c=>a.$emit("close"))},[...u[14]||(u[14]=[o("i",{class:"fas fa-times"},null,-1),ne(" Annuler ",-1)])]),o("button",aI,[u[15]||(u[15]=o("i",{class:"fas fa-check"},null,-1)),ne(" "+j(t.item?"Modifier":"Ajouter"),1)])])],32)])])]))}},uI=Fe(lI,[["__scopeId","data-v-c34fc61d"]]);const cI={class:"modal-container"},dI={class:"modal-header"},hI={class:"modal-header-content"},fI={class:"modal-subtitle"},pI={class:"form-group"},mI={class:"form-group"},gI={class:"modal-footer"},vI={type:"submit",class:"btn btn-primary"},_I={__name:"CategoryModal",props:{category:Object},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=re({name:"",order:0});es(()=>s.category,a=>{a?r.value={name:a.name||"",order:a.order||0}:r.value={name:"",order:0}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[4]||(u[4]=He(c=>a.$emit("close"),["self"]))},[o("div",cI,[o("div",dI,[o("div",hI,[u[5]||(u[5]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-folder"})],-1)),o("div",null,[o("h2",null,j(t.category?"Modifier une Catgorie":"Ajouter une Catgorie"),1),o("p",fI,j(t.category?"Modifiez les informations de la catgorie":"Crez une nouvelle catgorie pour organiser vos plats"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[6]||(u[6]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",pI,[u[7]||(u[7]=o("label",{for:"category-name"},[o("i",{class:"fas fa-tag"}),ne(" Nom de la catgorie ")],-1)),Ie(o("input",{type:"text",id:"category-name","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.name=c),required:"",placeholder:"Ex: Nigiri, Sashimi, Maki...",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",mI,[u[8]||(u[8]=o("label",{for:"category-order"},[o("i",{class:"fas fa-sort-numeric-down"}),ne(" Ordre d'affichage ")],-1)),Ie(o("input",{type:"number",id:"category-order","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.order=c),min:"0",placeholder:"0"},null,512),[[et,r.value.order,void 0,{number:!0}]]),u[9]||(u[9]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),ne(" Plus le nombre est petit, plus la catgorie apparatra en premier ")],-1))]),o("div",gI,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[3]||(u[3]=c=>a.$emit("close"))},[...u[10]||(u[10]=[o("i",{class:"fas fa-times"},null,-1),ne(" Annuler ",-1)])]),o("button",vI,[u[11]||(u[11]=o("i",{class:"fas fa-check"},null,-1)),ne(" "+j(t.category?"Modifier":"Ajouter"),1)])])],32)])])]))}},yI=Fe(_I,[["__scopeId","data-v-1faba6b6"]]);const EI={class:"menu-dashboard"},bI={class:"dashboard-header"},TI={class:"header-content"},AI={class:"header-actions"},II={class:"stats-grid"},wI={class:"stat-card-large primary"},CI={class:"stat-card-content"},SI={class:"stat-info"},RI={class:"stat-value-large"},PI={class:"stat-trend"},kI={class:"stat-card-large success"},VI={class:"stat-card-content"},DI={class:"stat-info"},xI={class:"stat-value-large"},NI={class:"stat-card-large warning"},MI={class:"stat-card-content"},$I={class:"stat-info"},OI={class:"stat-value-large"},FI={class:"stat-trend"},LI={class:"stat-card-large info"},UI={class:"stat-card-content"},BI={class:"stat-info"},jI={class:"stat-value-large"},qI={class:"content-section"},GI={class:"config-card"},HI={class:"config-item"},zI={class:"checkbox-label-modern"},KI={key:0,class:"config-item"},WI={class:"content-section"},QI={class:"section-header-modern"},YI={class:"section-actions"},JI={key:0,class:"loading-container"},XI={key:1,class:"empty-container"},ZI={key:2,class:"categories-grid"},ew={class:"card-header-modern"},tw={class:"card-info"},sw={class:"card-title"},nw={class:"card-subtitle"},rw={class:"card-actions-modern"},iw=["onClick"],ow=["onClick"],aw={class:"content-section"},lw={class:"section-header-modern"},uw={class:"section-actions"},cw={key:0,class:"loading-container"},dw={key:1,class:"empty-container"},hw={key:2},fw={class:"category-title-modern"},pw={class:"items-grid-modern"},mw={class:"card-header-modern"},gw={class:"card-info"},vw={class:"card-title"},_w={class:"card-price-modern"},yw={class:"card-badge"},Ew={key:0,class:"card-description"},bw={class:"card-actions-modern"},Tw=["onClick"],Aw=["onClick"],Iw={__name:"MenuTab",setup(t){const e=re([]),s=re([]),n=re(!0),r=re(!1),i=re(""),a=re(!1),u=re(!1),c=re(null),d=re(null),{confirm:f,alert:m}=kn(),v=ue(()=>{const w={};return s.value.forEach(P=>{w[P.name]=P.order||999}),[...new Set(e.value.map(P=>P.category||"Sans catgorie"))].sort((P,C)=>{const Ce=w[P]!==void 0?w[P]:999,ot=w[C]!==void 0?w[C]:999;return Ce!==ot?Ce-ot:P.localeCompare(C)})}),E=ue(()=>e.value.length===0?0:e.value.reduce((b,P)=>{const C=parseFloat(P.price)||0;return b+C},0)/e.value.length),S=w=>e.value.filter(b=>(b.category||"Sans catgorie")===w).sort((b,P)=>(b.name||"").localeCompare(P.name||"")),k=async()=>{try{n.value=!0;const w=it(),b=await fa(qt(w,"menuConfig","display"));if(b.exists()){const Ce=b.data();r.value=Ce.useImageMode||!1,i.value=Ce.imageUrl||""}const P=await an(Vo(Ge(w,"menuCategories"),Do("order","asc")));s.value=P.docs.map(Ce=>({id:Ce.id,...Ce.data()}));const C=await an(Ge(w,"menuSemaine"));e.value=C.docs.map(Ce=>({id:Ce.id,...Ce.data()})),n.value=!1}catch(w){console.error("Erreur lors du chargement:",w),n.value=!1}},M=async()=>{try{const w=it();await uT(qt(w,"menuConfig","display"),{useImageMode:r.value,imageUrl:i.value})}catch(w){console.error("Erreur lors de la sauvegarde de la config:",w),m("Erreur lors de la sauvegarde")}},L=()=>{M()},x=(w=null)=>{c.value=w,a.value=!0},$=()=>{a.value=!1,c.value=null},z=async w=>{try{const b=it();c.value?await xo(qt(b,"menuSemaine",c.value.id),{...w,updatedAt:new Date}):await Mo(Ge(b,"menuSemaine"),{...w,createdAt:new Date,updatedAt:new Date}),$(),k()}catch(b){console.error("Erreur lors de la sauvegarde:",b),await m("Erreur lors de la sauvegarde",{type:"danger"})}},ee=async w=>{if(await f("tes-vous sr de vouloir supprimer ce plat ?",{type:"danger",title:"Supprimer un plat",confirmText:"Supprimer"}))try{const P=it();await No(qt(P,"menuSemaine",w)),k()}catch(P){console.error("Erreur lors de la suppression:",P),await m("Erreur lors de la suppression",{type:"danger"})}},N=(w=null)=>{d.value=w,u.value=!0},g=()=>{u.value=!1,d.value=null},y=async w=>{try{const b=it();d.value?await xo(qt(b,"menuCategories",d.value.id),w):await Mo(Ge(b,"menuCategories"),w),g(),k()}catch(b){console.error("Erreur lors de la sauvegarde:",b),await m("Erreur lors de la sauvegarde",{type:"danger"})}},A=async w=>{if(await f("tes-vous sr de vouloir supprimer cette catgorie ?",{type:"danger",title:"Supprimer une catgorie",confirmText:"Supprimer"}))try{const P=it();await No(qt(P,"menuCategories",w)),k()}catch(P){console.error("Erreur lors de la suppression:",P),await m("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{k();const w=it();Mt(Ge(w,"menuSemaine"),()=>k()),Mt(Ge(w,"menuCategories"),()=>k())}),(w,b)=>(V(),F("div",EI,[o("div",bI,[o("div",TI,[b[8]||(b[8]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion de la Carte"),o("p",{class:"dashboard-subtitle"},"Grez vos catgories et plats de la semaine")],-1)),o("div",AI,[o("button",{onClick:b[0]||(b[0]=P=>x()),class:"btn-action btn-primary-action"},[...b[6]||(b[6]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouveau Plat",-1)])]),o("button",{onClick:b[1]||(b[1]=P=>N()),class:"btn-action btn-secondary-action"},[...b[7]||(b[7]=[o("i",{class:"fas fa-folder-plus"},null,-1),o("span",null,"Nouvelle Catgorie",-1)])])])])]),o("div",II,[o("div",wI,[o("div",CI,[b[10]||(b[10]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-utensils"})],-1)),o("div",SI,[b[9]||(b[9]=o("div",{class:"stat-label"},"Total Plats",-1)),o("div",RI,[o("span",null,j(e.value.length),1)])])]),o("div",PI,[b[11]||(b[11]=o("i",{class:"fas fa-list"},null,-1)),o("span",null,j(v.value.length)+" catgories",1)])]),o("div",kI,[o("div",VI,[b[13]||(b[13]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-folder"})],-1)),o("div",DI,[b[12]||(b[12]=o("div",{class:"stat-label"},"Catgories",-1)),o("div",xI,[o("span",null,j(s.value.length),1)])])]),b[14]||(b[14]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-check-circle"}),o("span",null,"Organises")],-1))]),o("div",NI,[o("div",MI,[b[16]||(b[16]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-image"})],-1)),o("div",$I,[b[15]||(b[15]=o("div",{class:"stat-label"},"Mode Affichage",-1)),o("div",OI,[o("span",null,j(r.value?"Image":"Manuel"),1)])])]),o("div",FI,[b[17]||(b[17]=o("i",{class:"fas fa-toggle-on"},null,-1)),o("span",null,j(r.value?"Activ":"Dsactiv"),1)])]),o("div",LI,[o("div",UI,[b[20]||(b[20]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-euro-sign"})],-1)),o("div",BI,[b[19]||(b[19]=o("div",{class:"stat-label"},"Prix Moyen",-1)),o("div",jI,[o("span",null,j(E.value.toFixed(2)),1),b[18]||(b[18]=o("span",{class:"currency"},"",-1))])])]),b[21]||(b[21]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-chart-bar"}),o("span",null,"Prix moyen")],-1))])]),o("div",qI,[b[26]||(b[26]=o("div",{class:"section-header-modern"},[o("div",null,[o("h2",{class:"section-title"},"Configuration d'Affichage"),o("p",{class:"section-description"},"Choisissez comment afficher le menu sur le site")])],-1)),o("div",GI,[o("div",HI,[o("label",zI,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":b[2]||(b[2]=P=>r.value=P),onChange:L},null,544),[[fs,r.value]]),b[22]||(b[22]=o("span",{class:"checkbox-custom"},null,-1)),b[23]||(b[23]=o("div",{class:"checkbox-content"},[o("span",{class:"checkbox-title"},"Utiliser une image au lieu du menu manuel"),o("span",{class:"checkbox-description"},"Si coch, seule l'image sera affiche sur le site")],-1))])]),r.value?(V(),F("div",KI,[b[24]||(b[24]=o("label",{for:"menu-image-url",class:"form-label-modern"},[o("i",{class:"fas fa-link"}),ne(" URL de l'image du menu ")],-1)),Ie(o("input",{type:"url",id:"menu-image-url","onUpdate:modelValue":b[3]||(b[3]=P=>i.value=P),placeholder:"https://...",onBlur:M,class:"form-input-modern"},null,544),[[et,i.value]]),b[25]||(b[25]=o("small",{class:"form-hint-modern"},[o("i",{class:"fas fa-info-circle"}),ne(" Collez ici le lien de l'image (ex: depuis Discord ou un hbergeur d'images) ")],-1))])):he("",!0)])]),o("div",WI,[o("div",QI,[b[28]||(b[28]=o("div",null,[o("h2",{class:"section-title"},"Catgories"),o("p",{class:"section-description"},"Organisez vos plats par catgories")],-1)),o("div",YI,[o("button",{onClick:b[4]||(b[4]=P=>N()),class:"btn-icon-text"},[...b[27]||(b[27]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),n.value?(V(),F("div",JI,[...b[29]||(b[29]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):s.value.length===0?(V(),F("div",XI,[...b[30]||(b[30]=[o("i",{class:"fas fa-folder-open"},null,-1),o("p",null,"Aucune catgorie. Ajoutez-en une pour commencer !",-1)])])):(V(),F("div",ZI,[(V(!0),F(we,null,Ye(v.value,P=>(V(),F("div",{key:P.id,class:"category-card-modern"},[o("div",ew,[b[31]||(b[31]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-folder"})],-1)),o("div",tw,[o("h3",sw,j(P.name),1),o("p",nw,"Ordre: "+j(P.order||0),1)])]),o("div",rw,[o("button",{onClick:C=>N(P),class:"btn-card-action"},[...b[32]||(b[32]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,iw),o("button",{onClick:C=>A(P.id),class:"btn-card-action danger"},[...b[33]||(b[33]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,ow)])]))),128))]))]),o("div",aw,[o("div",lw,[b[35]||(b[35]=o("div",null,[o("h2",{class:"section-title"},"Plats de la Semaine"),o("p",{class:"section-description"},"Grez les plats disponibles cette semaine")],-1)),o("div",uw,[o("button",{onClick:b[5]||(b[5]=P=>x()),class:"btn-icon-text"},[...b[34]||(b[34]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),n.value?(V(),F("div",cw,[...b[36]||(b[36]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):e.value.length===0?(V(),F("div",dw,[...b[37]||(b[37]=[o("i",{class:"fas fa-utensils"},null,-1),o("p",null,"Aucun plat dans la carte. Ajoutez-en un pour commencer !",-1)])])):(V(),F("div",hw,[(V(!0),F(we,null,Ye(v.value,P=>(V(),F("div",{key:P,class:"category-section-modern"},[o("h3",fw,[b[38]||(b[38]=o("i",{class:"fas fa-folder-open"},null,-1)),ne(" "+j(P),1)]),o("div",pw,[(V(!0),F(we,null,Ye(S(P),C=>(V(),F("div",{key:C.id,class:"menu-item-card-modern"},[o("div",mw,[o("div",gw,[o("h3",vw,j(C.name),1),o("div",_w,j(C.price)+"",1)]),o("div",yw,[b[39]||(b[39]=o("i",{class:"fas fa-tag"},null,-1)),ne(" "+j(C.category),1)])]),C.description?(V(),F("div",Ew,j(C.description),1)):he("",!0),o("div",bw,[o("button",{onClick:Ce=>x(C),class:"btn-card-action"},[...b[40]||(b[40]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,Tw),o("button",{onClick:Ce=>ee(C.id),class:"btn-card-action danger"},[...b[41]||(b[41]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,Aw)])]))),128))])]))),128))]))]),a.value?(V(),Le(uI,{key:0,item:c.value,categories:s.value,onClose:$,onSave:z},null,8,["item","categories"])):he("",!0),u.value?(V(),Le(yI,{key:1,category:d.value,onClose:g,onSave:y},null,8,["category"])):he("",!0)]))}},ww=Fe(Iw,[["__scopeId","data-v-5639010b"]]);const Cw={class:"modal-container"},Sw={class:"modal-header"},Rw={class:"modal-header-content"},Pw={class:"modal-subtitle"},kw={class:"form-grid"},Vw={class:"form-group"},Dw={class:"form-group"},xw=["value"],Nw={class:"form-group full-width"},Mw={class:"form-group full-width"},$w={class:"form-group"},Ow={class:"modal-footer"},Fw={type:"submit",class:"btn btn-primary"},Lw={__name:"MemberModal",props:{member:Object,ranks:Array},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=re({name:"",role:"",description:"",photo:"",order:0});es(()=>s.member,a=>{a?r.value={name:a.name||"",role:a.role||"",description:a.description||"",photo:a.photo||"",order:a.order||0}:r.value={name:"",role:"",description:"",photo:"",order:0}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[7]||(u[7]=He(c=>a.$emit("close"),["self"]))},[o("div",Cw,[o("div",Sw,[o("div",Rw,[u[8]||(u[8]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-user"})],-1)),o("div",null,[o("h2",null,j(t.member?"Modifier un Membre":"Ajouter un Membre"),1),o("p",Pw,j(t.member?"Modifiez les informations du membre":"Ajoutez un nouveau membre  l'quipe"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[9]||(u[9]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",kw,[o("div",Vw,[u[10]||(u[10]=o("label",{for:"member-name"},[o("i",{class:"fas fa-user"}),ne(" Nom ")],-1)),Ie(o("input",{type:"text",id:"member-name","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.name=c),required:"",placeholder:"Ex: Jean Dupont",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",Dw,[u[12]||(u[12]=o("label",{for:"member-role"},[o("i",{class:"fas fa-briefcase"}),ne(" Grade ")],-1)),Ie(o("select",{id:"member-role","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.role=c),required:""},[u[11]||(u[11]=o("option",{value:""},"Slectionner un grade",-1)),(V(!0),F(we,null,Ye(t.ranks,c=>(V(),F("option",{key:c.id,value:c.name},j(c.name),9,xw))),128))],512),[[Zn,r.value.role]])]),o("div",Nw,[u[13]||(u[13]=o("label",{for:"member-description"},[o("i",{class:"fas fa-align-left"}),ne(" Description (optionnel) ")],-1)),Ie(o("textarea",{id:"member-description","onUpdate:modelValue":u[3]||(u[3]=c=>r.value.description=c),rows:"3",placeholder:"Description du membre..."},null,512),[[et,r.value.description]])]),o("div",Mw,[u[14]||(u[14]=o("label",{for:"member-photo"},[o("i",{class:"fas fa-image"}),ne(" URL de la photo (optionnel) ")],-1)),Ie(o("input",{type:"url",id:"member-photo","onUpdate:modelValue":u[4]||(u[4]=c=>r.value.photo=c),placeholder:"https://..."},null,512),[[et,r.value.photo]])]),o("div",$w,[u[15]||(u[15]=o("label",{for:"member-order"},[o("i",{class:"fas fa-sort-numeric-down"}),ne(" Ordre d'affichage ")],-1)),Ie(o("input",{type:"number",id:"member-order","onUpdate:modelValue":u[5]||(u[5]=c=>r.value.order=c),min:"0",placeholder:"0"},null,512),[[et,r.value.order,void 0,{number:!0}]]),u[16]||(u[16]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),ne(" Plus le nombre est petit, plus le membre apparatra en premier ")],-1))])]),o("div",Ow,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[6]||(u[6]=c=>a.$emit("close"))},[...u[17]||(u[17]=[o("i",{class:"fas fa-times"},null,-1),ne(" Annuler ",-1)])]),o("button",Fw,[u[18]||(u[18]=o("i",{class:"fas fa-check"},null,-1)),ne(" "+j(t.member?"Modifier":"Ajouter"),1)])])],32)])])]))}},Uw=Fe(Lw,[["__scopeId","data-v-a5e52a9d"]]);const Bw={class:"team-dashboard"},jw={class:"dashboard-header"},qw={class:"header-content"},Gw={class:"header-actions"},Hw={class:"stats-grid"},zw={class:"stat-card-large primary"},Kw={class:"stat-card-content"},Ww={class:"stat-info"},Qw={class:"stat-value-large"},Yw={class:"stat-card-large success"},Jw={class:"stat-card-content"},Xw={class:"stat-info"},Zw={class:"stat-value-large"},e2={class:"stat-trend"},t2={class:"stat-card-large info"},s2={class:"stat-card-content"},n2={class:"stat-info"},r2={class:"stat-value-large"},i2={class:"content-section"},o2={class:"section-header-modern"},a2={class:"section-actions"},l2={key:0,class:"loading-container"},u2={key:1,class:"empty-container"},c2={key:2,class:"members-grid"},d2={class:"card-header-modern"},h2={class:"member-avatar-wrapper"},f2=["src","alt"],p2={key:1,class:"member-avatar-placeholder"},m2={class:"card-info"},g2={class:"card-title"},v2={class:"card-badge"},_2={key:0,class:"card-description"},y2={class:"card-actions-modern"},E2=["onClick"],b2=["onClick"],T2={__name:"TeamTab",setup(t){const e=re([]),s=re([]),n=re(!0),r=re(!1),i=re(null),{confirm:a,alert:u}=kn(),c=ue(()=>[...e.value].sort((L,x)=>(L.order||0)-(x.order||0))),d=ue(()=>e.value.filter(L=>L.photo).length),f=ue(()=>e.value.length===0?0:Math.round(d.value/e.value.length*100)),m=ue(()=>new Set(e.value.map(x=>x.role).filter(Boolean)).size),v=async()=>{try{n.value=!0;const L=it(),x=await an(Ge(L,"organigramme"));e.value=x.docs.map(z=>({id:z.id,...z.data()}));const $=await an(Ge(L,"ranks"));s.value=$.docs.map(z=>({id:z.id,...z.data()})),n.value=!1}catch(L){console.error("Erreur lors du chargement:",L),n.value=!1}},E=(L=null)=>{i.value=L,r.value=!0},S=()=>{r.value=!1,i.value=null},k=async L=>{try{const x=it();i.value?await xo(qt(x,"organigramme",i.value.id),{...L,updatedAt:new Date}):await Mo(Ge(x,"organigramme"),{...L,createdAt:new Date,updatedAt:new Date}),S(),v()}catch(x){console.error("Erreur lors de la sauvegarde:",x),await u("Erreur lors de la sauvegarde",{type:"danger"})}},M=async L=>{if(await a("tes-vous sr de vouloir supprimer ce membre ?",{type:"danger",title:"Supprimer un membre",confirmText:"Supprimer"}))try{const $=it();await No(qt($,"organigramme",L)),v()}catch($){console.error("Erreur lors de la suppression:",$),await u("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{v();const L=it();Mt(Ge(L,"organigramme"),()=>v())}),(L,x)=>(V(),F("div",Bw,[o("div",jw,[o("div",qw,[x[3]||(x[3]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion de l'quipe"),o("p",{class:"dashboard-subtitle"},"Grez les membres de votre organigramme")],-1)),o("div",Gw,[o("button",{onClick:x[0]||(x[0]=$=>E()),class:"btn-action btn-primary-action"},[...x[2]||(x[2]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouveau Membre",-1)])])])])]),o("div",Hw,[o("div",zw,[o("div",Kw,[x[5]||(x[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-users"})],-1)),o("div",Ww,[x[4]||(x[4]=o("div",{class:"stat-label"},"Total Membres",-1)),o("div",Qw,[o("span",null,j(e.value.length),1)])])]),x[6]||(x[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-check-circle"}),o("span",null,"Dans l'organigramme")],-1))]),o("div",Yw,[o("div",Jw,[x[8]||(x[8]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-user-tie"})],-1)),o("div",Xw,[x[7]||(x[7]=o("div",{class:"stat-label"},"Avec Photo",-1)),o("div",Zw,[o("span",null,j(d.value),1)])])]),o("div",e2,[x[9]||(x[9]=o("i",{class:"fas fa-image"},null,-1)),o("span",null,j(f.value)+"% avec photo",1)])]),o("div",t2,[o("div",s2,[x[11]||(x[11]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-briefcase"})],-1)),o("div",n2,[x[10]||(x[10]=o("div",{class:"stat-label"},"Rles Uniques",-1)),o("div",r2,[o("span",null,j(m.value),1)])])]),x[12]||(x[12]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-tags"}),o("span",null,"Diffrents rles")],-1))])]),o("div",i2,[o("div",o2,[x[14]||(x[14]=o("div",null,[o("h2",{class:"section-title"},"Membres de l'quipe"),o("p",{class:"section-description"},"Grez les membres affichs dans l'organigramme")],-1)),o("div",a2,[o("button",{onClick:x[1]||(x[1]=$=>E()),class:"btn-icon-text"},[...x[13]||(x[13]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),n.value?(V(),F("div",l2,[...x[15]||(x[15]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):e.value.length===0?(V(),F("div",u2,[...x[16]||(x[16]=[o("i",{class:"fas fa-users"},null,-1),o("p",null,"Aucun membre dans l'organigramme. Ajoutez-en un pour commencer !",-1)])])):(V(),F("div",c2,[(V(!0),F(we,null,Ye(c.value,$=>(V(),F("div",{key:$.id,class:"member-card-modern"},[o("div",d2,[o("div",h2,[$.photo?(V(),F("img",{key:0,src:$.photo,alt:$.name,class:"member-avatar-large"},null,8,f2)):(V(),F("div",p2,[...x[17]||(x[17]=[o("i",{class:"fas fa-user"},null,-1)])]))]),o("div",m2,[o("h3",g2,j($.name),1),o("div",v2,[x[18]||(x[18]=o("i",{class:"fas fa-briefcase"},null,-1)),ne(" "+j($.role||"Rle non dfini"),1)])])]),$.description?(V(),F("div",_2,j($.description),1)):he("",!0),o("div",y2,[o("button",{onClick:z=>E($),class:"btn-card-action"},[...x[19]||(x[19]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,E2),o("button",{onClick:z=>M($.id),class:"btn-card-action danger"},[...x[20]||(x[20]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,b2)])]))),128))]))]),r.value?(V(),Le(Uw,{key:0,member:i.value,ranks:s.value,onClose:S,onSave:k},null,8,["member","ranks"])):he("",!0)]))}},A2=Fe(T2,[["__scopeId","data-v-39e6deb2"]]);function Vn(){const t=it(),e=S=>{if(!S)return"-";const k=S.toDate?S.toDate():new Date(S);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)},s=S=>{if(!S)return"";const k=S.toDate?S.toDate():new Date(S),M=k.getFullYear(),L=String(k.getMonth()+1).padStart(2,"0"),x=String(k.getDate()).padStart(2,"0");return`${M}-${L}-${x}`},n=S=>{if(!S)return"";const k=S.toDate?S.toDate():new Date(S),M=k.getFullYear(),L=String(k.getMonth()+1).padStart(2,"0"),x=String(k.getDate()).padStart(2,"0"),$=String(k.getHours()).padStart(2,"0"),z=String(k.getMinutes()).padStart(2,"0");return`${M}-${L}-${x}T${$}:${z}`},r=S=>S instanceof Date?tt.fromDate(S):typeof S=="string"?tt.fromDate(new Date(S)):tt.now(),i=async(S,k=null)=>{try{let M=Ge(t,S);return k&&(M=Vo(M,Do(k))),(await an(M)).docs.map(x=>({id:x.id,...x.data()}))}catch(M){return console.error(`Erreur lors du chargement de ${S}:`,M),[]}},a=async(S,k)=>{try{const M=qt(t,S,k),L=await fa(M);return L.exists()?{id:L.id,...L.data()}:null}catch(M){return console.error(`Erreur lors de la rcupration de ${S}/${k}:`,M),null}};return{db:t,formatDate:e,formatDateInput:s,formatDateTimeLocal:n,toTimestamp:r,getAll:i,getById:a,create:async(S,k)=>{try{const M={...k,createdAt:Yi(),updatedAt:Yi()};return(await Mo(Ge(t,S),M)).id}catch(M){throw console.error(`Erreur lors de la cration dans ${S}:`,M),M}},update:async(S,k,M)=>{try{const L={...M,updatedAt:Yi()};await xo(qt(t,S,k),L)}catch(L){throw console.error(`Erreur lors de la mise  jour de ${S}/${k}:`,L),L}},remove:async(S,k)=>{try{await No(qt(t,S,k))}catch(M){throw console.error(`Erreur lors de la suppression de ${S}/${k}:`,M),M}},getAllEmployees:async()=>i("employees","name"),getEmployeeById:async S=>S?a("employees",S):null,getAllRanks:async()=>i("ranks","name"),getRankById:async S=>S?a("ranks",S):null,onSnapshot:Mt,collection:S=>Ge(t,S),query:Vo,orderBy:Do,Timestamp:tt,serverTimestamp:Yi}}const I2={class:"modal-container"},w2={class:"modal-header"},C2={class:"modal-header-content"},S2={class:"modal-subtitle"},R2={class:"form-grid"},P2={class:"form-group"},k2={class:"form-group"},V2=["value"],D2={class:"form-group"},x2={class:"form-group full-width"},N2={class:"modal-footer"},M2={type:"submit",class:"btn btn-primary"},$2={__name:"SaleModal",props:{sale:Object,employees:Array},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,{formatDateTimeLocal:r}=Vn(),i=re({date:"",employeeId:"",amount:0,description:""});es(()=>s.sale,u=>{u?i.value={date:r(u.date),employeeId:u.employeeId||"",amount:u.amount||0,description:u.description||""}:i.value={date:r(new Date),employeeId:"",amount:0,description:""}},{immediate:!0});const a=()=>{n("save",i.value)};return(u,c)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:c[6]||(c[6]=He(d=>u.$emit("close"),["self"]))},[o("div",I2,[o("div",w2,[o("div",C2,[c[7]||(c[7]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-money-bill-wave"})],-1)),o("div",null,[o("h2",null,j(t.sale?"Modifier une Vente":"Ajouter une Vente"),1),o("p",S2,j(t.sale?"Modifiez les informations de la vente":"Enregistrez une nouvelle vente"),1)])]),o("button",{class:"modal-close",onClick:c[0]||(c[0]=d=>u.$emit("close")),"aria-label":"Fermer"},[...c[8]||(c[8]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(a,["prevent"]),class:"modal-body"},[o("div",R2,[o("div",P2,[c[9]||(c[9]=o("label",{for:"sale-date"},[o("i",{class:"fas fa-calendar-alt"}),ne(" Date ")],-1)),Ie(o("input",{type:"datetime-local",id:"sale-date","onUpdate:modelValue":c[1]||(c[1]=d=>i.value.date=d),required:""},null,512),[[et,i.value.date]])]),o("div",k2,[c[11]||(c[11]=o("label",{for:"sale-employee"},[o("i",{class:"fas fa-user-tie"}),ne(" Employ ")],-1)),Ie(o("select",{id:"sale-employee","onUpdate:modelValue":c[2]||(c[2]=d=>i.value.employeeId=d),required:""},[c[10]||(c[10]=o("option",{value:""},"Slectionner un employ",-1)),(V(!0),F(we,null,Ye(t.employees,d=>(V(),F("option",{key:d.id,value:d.id},j(d.name),9,V2))),128))],512),[[Zn,i.value.employeeId]])]),o("div",D2,[c[12]||(c[12]=o("label",{for:"sale-amount"},[o("i",{class:"fas fa-euro-sign"}),ne(" Montant () ")],-1)),Ie(o("input",{type:"number",id:"sale-amount","onUpdate:modelValue":c[3]||(c[3]=d=>i.value.amount=d),step:"0.01",min:"0",required:"",placeholder:"0.00"},null,512),[[et,i.value.amount,void 0,{number:!0}]])]),o("div",x2,[c[13]||(c[13]=o("label",{for:"sale-description"},[o("i",{class:"fas fa-align-left"}),ne(" Description (optionnel) ")],-1)),Ie(o("textarea",{id:"sale-description","onUpdate:modelValue":c[4]||(c[4]=d=>i.value.description=d),rows:"3",placeholder:"Dtails de la vente..."},null,512),[[et,i.value.description]])])]),o("div",N2,[o("button",{type:"button",class:"btn btn-secondary",onClick:c[5]||(c[5]=d=>u.$emit("close"))},[...c[14]||(c[14]=[o("i",{class:"fas fa-times"},null,-1),ne(" Annuler ",-1)])]),o("button",M2,[c[15]||(c[15]=o("i",{class:"fas fa-check"},null,-1)),ne(" "+j(t.sale?"Modifier":"Ajouter"),1)])])],32)])])]))}},O2=Fe($2,[["__scopeId","data-v-29e02259"]]);const F2={class:"modal-container"},L2={class:"modal-header"},U2={class:"modal-header-content"},B2={class:"modal-subtitle"},j2={class:"form-grid"},q2={class:"form-group"},G2=["value"],H2={class:"form-group"},z2={class:"form-group"},K2={class:"form-group full-width"},W2={class:"modal-footer"},Q2={type:"submit",class:"btn btn-primary"},Y2={__name:"BonusModal",props:{bonus:Object,employees:Array},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,{formatDateInput:r}=Vn(),i=re({employeeId:"",amount:0,date:"",description:""});es(()=>s.bonus,u=>{u?i.value={employeeId:u.employeeId||"",amount:u.amount||0,date:r(u.date),description:u.description||""}:i.value={employeeId:"",amount:0,date:r(new Date),description:""}},{immediate:!0});const a=()=>{n("save",i.value)};return(u,c)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:c[6]||(c[6]=He(d=>u.$emit("close"),["self"]))},[o("div",F2,[o("div",L2,[o("div",U2,[c[7]||(c[7]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-gift"})],-1)),o("div",null,[o("h2",null,j(t.bonus?"Modifier une Prime":"Ajouter une Prime"),1),o("p",B2,j(t.bonus?"Modifiez les informations de la prime":"Attribuez une prime  un employ"),1)])]),o("button",{class:"modal-close",onClick:c[0]||(c[0]=d=>u.$emit("close")),"aria-label":"Fermer"},[...c[8]||(c[8]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(a,["prevent"]),class:"modal-body"},[o("div",j2,[o("div",q2,[c[10]||(c[10]=o("label",{for:"bonus-employee"},[o("i",{class:"fas fa-user-tie"}),ne(" Employ ")],-1)),Ie(o("select",{id:"bonus-employee","onUpdate:modelValue":c[1]||(c[1]=d=>i.value.employeeId=d),required:""},[c[9]||(c[9]=o("option",{value:""},"Slectionner un employ",-1)),(V(!0),F(we,null,Ye(t.employees,d=>(V(),F("option",{key:d.id,value:d.id},j(d.name),9,G2))),128))],512),[[Zn,i.value.employeeId]])]),o("div",H2,[c[11]||(c[11]=o("label",{for:"bonus-amount"},[o("i",{class:"fas fa-euro-sign"}),ne(" Montant de la prime () ")],-1)),Ie(o("input",{type:"number",id:"bonus-amount","onUpdate:modelValue":c[2]||(c[2]=d=>i.value.amount=d),step:"0.01",min:"0",required:"",placeholder:"0.00"},null,512),[[et,i.value.amount,void 0,{number:!0}]])]),o("div",z2,[c[12]||(c[12]=o("label",{for:"bonus-date"},[o("i",{class:"fas fa-calendar-alt"}),ne(" Date ")],-1)),Ie(o("input",{type:"date",id:"bonus-date","onUpdate:modelValue":c[3]||(c[3]=d=>i.value.date=d),required:""},null,512),[[et,i.value.date]])]),o("div",K2,[c[13]||(c[13]=o("label",{for:"bonus-description"},[o("i",{class:"fas fa-align-left"}),ne(" Raison de la prime (optionnel) ")],-1)),Ie(o("textarea",{id:"bonus-description","onUpdate:modelValue":c[4]||(c[4]=d=>i.value.description=d),rows:"3",placeholder:"Ex: Prime de performance, Prime exceptionnelle..."},null,512),[[et,i.value.description]])])]),o("div",W2,[o("button",{type:"button",class:"btn btn-secondary",onClick:c[5]||(c[5]=d=>u.$emit("close"))},[...c[14]||(c[14]=[o("i",{class:"fas fa-times"},null,-1),ne(" Annuler ",-1)])]),o("button",Q2,[c[15]||(c[15]=o("i",{class:"fas fa-check"},null,-1)),ne(" "+j(t.bonus?"Modifier":"Ajouter"),1)])])],32)])])]))}},J2=Fe(Y2,[["__scopeId","data-v-00171223"]]);const X2={class:"sales-dashboard"},Z2={class:"dashboard-header"},eC={class:"header-content"},tC={class:"header-actions"},sC={class:"stats-grid"},nC={class:"stat-card-large primary"},rC={class:"stat-card-content"},iC={class:"stat-info"},oC={class:"stat-value-large"},aC={class:"stat-trend"},lC={class:"stat-card-large success"},uC={class:"stat-card-content"},cC={class:"stat-info"},dC={class:"stat-value-large"},hC={class:"stat-trend"},fC={class:"stat-card-large warning"},pC={class:"stat-card-content"},mC={class:"stat-info"},gC={class:"stat-value-large"},vC={class:"stat-trend"},_C={class:"stat-card-content"},yC={class:"stat-info"},EC={class:"stat-value-large"},bC={class:"stat-trend"},TC={class:"content-section"},AC={class:"section-header-modern"},IC={class:"section-actions"},wC={key:0,class:"loading-container"},CC={key:1,class:"empty-state-modern"},SC={key:2,class:"sales-grid"},RC={class:"sale-card-header"},PC={class:"sale-employee"},kC={class:"employee-info"},VC={class:"employee-name"},DC={class:"sale-date"},xC={class:"sale-amount-large"},NC={class:"sale-card-body"},MC={class:"sale-details"},$C={class:"detail-item"},OC={class:"sale-card-footer"},FC=["onClick"],LC=["onClick","title"],UC={class:"content-section"},BC={key:0,class:"loading-container"},jC={key:1,class:"empty-state-modern"},qC={key:2,class:"employees-grid"},GC={class:"employee-card-header"},HC={class:"employee-header-info"},zC={class:"employee-card-name"},KC={class:"employee-stats-mini"},WC={class:"stat-badge"},QC={key:0,class:"stat-badge bonus"},YC={class:"employee-card-body"},JC={class:"employee-metrics"},XC={class:"metric-item"},ZC={class:"metric-value primary"},eS={class:"metric-item"},tS={class:"metric-value success"},sS={key:0,class:"metric-item"},nS={class:"metric-value warning"},rS={key:1,class:"metric-item total"},iS={class:"metric-value total-value"},oS={key:0,class:"employee-sales-mini"},aS={class:"mini-sales-list"},lS={class:"mini-sale-date"},uS={class:"mini-sale-amount"},cS=["onClick"],dS={key:0,class:"content-section"},hS={key:0,class:"loading-container"},fS={key:1,class:"empty-state-modern"},pS={key:2,class:"bonuses-grid"},mS={class:"bonus-card-header"},gS={class:"bonus-amount-large"},vS={class:"bonus-card-body"},_S={class:"bonus-employee"},yS={class:"bonus-date"},ES={key:0,class:"bonus-description"},bS={class:"bonus-card-footer"},TS=["onClick"],AS=["onClick"],IS={class:"employee-sales-modal"},wS={class:"modal-header"},CS={class:"modal-subtitle"},SS={class:"modal-body"},RS={class:"employee-sales-summary"},PS={class:"summary-item"},kS={class:"summary-value"},VS={class:"summary-item"},DS={class:"summary-value success"},xS={key:0,class:"summary-item"},NS={class:"summary-value warning"},MS={key:0,class:"empty-sales-message"},$S={key:1,class:"sales-list-modal"},OS={class:"sale-item-info"},FS={class:"sale-item-date"},LS={class:"sale-item-amount"},US={class:"sale-item-commission"},BS={class:"sale-item-actions"},jS=["onClick"],qS=["onClick","title"],GS={__name:"SalesTab",setup(t){const{getAll:e,create:s,update:n,remove:r,formatDate:i,getAllEmployees:a,getAllRanks:u,toTimestamp:c}=Vn(),{hasPermission:d,user:f}=wi(),{confirm:m,alert:v}=kn(),E=re([]),S=re([]),k=re([]),M=re([]),L=re(!0),x=re(!1),$=re(!1),z=re(!1),ee=re(null),N=re(null),g=re(null),y=D=>{if(localStorage.getItem("isSuperAdmin")==="true")return!0;try{return JSON.parse(localStorage.getItem("adminPermissions")||"{}")[D]===!0}catch{return!1}},A=ue(()=>E.value.reduce((D,T)=>D+parseFloat(T.amount||0),0)),w=ue(()=>E.value.length>0?A.value/E.value.length:0),b=ue(()=>{let D=0;return E.value.forEach(T=>{const G=Ke(T);D+=G}),D}),P=ue(()=>S.value.reduce((D,T)=>D+parseFloat(T.amount||0),0)),C=ue(()=>A.value-b.value-P.value),Ce=ue(()=>{const D={};return k.value.forEach(T=>{const G=E.value.filter(Z=>Z.employeeId===T.id),W=S.value.filter(Z=>Z.employeeId===T.id),J=M.value.find(Z=>Z.id===T.rankId);let H=0,te=0;G.forEach(Z=>{H+=parseFloat(Z.amount||0),J&&(te+=parseFloat(Z.amount||0)*parseFloat(J.percentage||0)/100)});const B=W.reduce((Z,fe)=>Z+parseFloat(fe.amount||0),0);(G.length>0||W.length>0)&&(D[T.id]={employeeId:T.id,employeeName:T.name,salesCount:G.length,bonusesCount:W.length,totalAmount:H,totalCommission:te,totalBonus:B,sales:G.sort((Z,fe)=>fe.date-Z.date)})}),Object.values(D)}),ot=D=>{const T=k.value.find(G=>G.id===D);return T?T.name:"Employ supprim"},Ke=D=>{const T=k.value.find(W=>W.id===D.employeeId);if(!T)return 0;const G=M.value.find(W=>W.id===T.rankId);return G?parseFloat(D.amount||0)*parseFloat(G.percentage||0)/100:0},ae=async()=>{try{L.value=!0,k.value=await a(),M.value=await u();const D=await e("sales");E.value=D.map(G=>{var W;return{...G,date:(W=G.date)!=null&&W.toDate?G.date.toDate():G.date instanceof Date?G.date:new Date(G.date)}}).sort((G,W)=>W.date-G.date);const T=await e("bonuses");S.value=T.map(G=>{var W;return{...G,date:(W=G.date)!=null&&W.toDate?G.date.toDate():G.date instanceof Date?G.date:new Date(G.date)}}).sort((G,W)=>W.date-G.date),L.value=!1}catch(D){console.error("Erreur lors du chargement:",D),L.value=!1}},ge=(D=null)=>{ee.value=D,x.value=!0},mt=()=>{x.value=!1,ee.value=null},Gt=async D=>{try{const T={...D,date:c(new Date(D.date)),amount:parseFloat(D.amount)};ee.value?await n("sales",ee.value.id,T):await s("sales",T),mt(),ae()}catch(T){console.error("Erreur lors de la sauvegarde:",T),await v("Erreur lors de la sauvegarde",{type:"danger"})}},Ht=D=>{if(!D)return!1;if(localStorage.getItem("isSuperAdmin")==="true")return!0;let G=!1,W=!1;try{const B=JSON.parse(localStorage.getItem("adminPermissions")||"{}");G=B.admins===!0,W=B.sales===!0}catch{G=!1,W=!1}if(G)return!0;const J=f.value;if(!J||!J.id)return!1;const H=String(J.id),te=k.value.find(B=>B.discordId&&B.discordId.trim()?String(B.discordId).trim()===H:!1);return!!((W||te)&&D.employeeId===(te==null?void 0:te.id))},Ue=D=>Ht(D),We=D=>{if(!D)return!1;if(localStorage.getItem("isSuperAdmin")==="true")return!0;let G=!1;try{G=JSON.parse(localStorage.getItem("adminPermissions")||"{}").admins===!0}catch{G=!1}if(G)return!0;const W=f.value;if(!W||!W.id)return!1;const J=String(W.id),H=k.value.find(te=>te.discordId&&te.discordId.trim()?String(te.discordId).trim()===J:!1);return!!(H&&D.employeeId===H.id)},ts=()=>{const D=f.value;if(!D||!D.id)return!1;const T=String(D.id);return k.value.some(G=>G.discordId&&G.discordId.trim()?String(G.discordId).trim()===T:!1)},_t=()=>{const D=f.value;if(!D||!D.id)return null;const T=String(D.id);return k.value.find(G=>G.discordId&&G.discordId.trim()?String(G.discordId).trim()===T:!1)},St=D=>{if(!D||!D.sales)return[];if(localStorage.getItem("isSuperAdmin")==="true")return D.sales;try{if(JSON.parse(localStorage.getItem("adminPermissions")||"{}").sales===!0)return D.sales}catch{}const G=f.value;if(!G||!G.id)return[];const W=String(G.id),J=k.value.find(H=>H.discordId?String(H.discordId)===W:!1);return J&&D.employeeId===J.id?D.sales:[]},K=async D=>{const T=E.value.find(W=>W.id===D);if(!T){await v("Vente introuvable",{type:"danger"});return}if(!Ue(T)){const W=localStorage.getItem("isSuperAdmin")==="true",J=f.value,H=J?String(J.id):null,te=k.value.find(Z=>Z.discordId&&Z.discordId.trim()?String(Z.discordId).trim()===H:!1);let B="Vous n'avez pas la permission de supprimer cette vente.";if(!W)try{JSON.parse(localStorage.getItem("adminPermissions")||"{}").sales||(te?B+=" Vous ne pouvez supprimer que vos propres ventes.":B+=" Votre compte employ n'est pas correctement configur avec Discord.")}catch{B+=" Erreur de configuration des permissions."}await v(B,{type:"danger",title:"Permission refuse"});return}if(await m("tes-vous sr de vouloir supprimer cette vente ?",{type:"danger",title:"Supprimer une vente",confirmText:"Supprimer"}))try{await r("sales",D),ae()}catch(W){console.error("Erreur lors de la suppression:",W),await v("Erreur lors de la suppression",{type:"danger"})}},oe=(D=null)=>{N.value=D,$.value=!0},ie=()=>{$.value=!1,N.value=null},ce=ue(()=>g.value?St(g.value):[]),ye=D=>{g.value=D,z.value=!0},Ve=()=>{z.value=!1,g.value=null},I=async D=>{await K(D),ae()},R=async D=>{try{const T={...D,date:c(new Date(D.date)),amount:parseFloat(D.amount)};N.value?await n("bonuses",N.value.id,T):await s("bonuses",T),ie(),ae()}catch(T){console.error("Erreur lors de la sauvegarde:",T),await v("Erreur lors de la sauvegarde",{type:"danger"})}},U=async D=>{if(await m("tes-vous sr de vouloir supprimer cette prime ?",{type:"danger",title:"Supprimer une prime",confirmText:"Supprimer"}))try{await r("bonuses",D),ae()}catch(G){console.error("Erreur lors de la suppression:",G),await v("Erreur lors de la suppression",{type:"danger"})}},Y=async()=>{if(!(!await m(" ATTENTION: Cette action va supprimer TOUTES les ventes et primes. Cette action est irrversible. Continuer ?",{type:"danger",title:"Rinitialiser les ventes",confirmText:"Continuer"})||!await m("tes-vous VRAIMENT sr ? Toutes les donnes de ventes seront perdues.",{type:"danger",title:"Confirmation finale",confirmText:"Oui, supprimer tout"})))try{L.value=!0;for(const H of E.value)await r("sales",H.id);for(const H of S.value)await r("bonuses",H.id);const G=E.value.map(H=>{var B;let te=H.date;return te&&!te.toDate&&!(te instanceof Date)&&(te=(B=H.date)!=null&&B.toDate?H.date.toDate():new Date(H.date)),{date:te,employeeId:H.employeeId,amount:H.amount,description:H.description||""}}),W=S.value.map(H=>{var B;let te=H.date;return te&&!te.toDate&&!(te instanceof Date)&&(te=(B=H.date)!=null&&B.toDate?H.date.toDate():new Date(H.date)),{date:te,employeeId:H.employeeId,amount:H.amount,description:H.description||""}}),J={period:new Date().toISOString(),totalSales:A.value,totalCommissions:b.value,totalBonuses:P.value,salesCount:E.value.length,bonusesCount:S.value.length,sales:G,bonuses:W,archivedAt:new Date};await s("salesHistory",J),ae(),await v("Ventes rinitialises avec succs. Les donnes ont t archives dans l'historique.",{type:"success",title:"Succs"})}catch(G){console.error("Erreur lors de la rinitialisation:",G),await v("Erreur lors de la rinitialisation",{type:"danger"}),L.value=!1}};return Ct(()=>{ae();const D=it();Mt(Ge(D,"sales"),()=>ae()),Mt(Ge(D,"bonuses"),()=>ae()),Mt(Ge(D,"employees"),()=>ae()),Mt(Ge(D,"ranks"),()=>ae())}),(D,T)=>{var G,W,J,H,te;return V(),F("div",X2,[o("div",Z2,[o("div",eC,[T[5]||(T[5]=o("div",null,[o("h1",{class:"dashboard-title"},"Tableau de Bord des Ventes"),o("p",{class:"dashboard-subtitle"},"Grez vos ventes et suivez vos performances")],-1)),o("div",tC,[o("button",{onClick:T[0]||(T[0]=B=>ge()),class:"btn-action btn-primary-action"},[...T[3]||(T[3]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouvelle Vente",-1)])]),y("bonuses")?(V(),F("button",{key:0,onClick:T[1]||(T[1]=B=>oe()),class:"btn-action btn-secondary-action"},[...T[4]||(T[4]=[o("i",{class:"fas fa-gift"},null,-1),o("span",null,"Ajouter Prime",-1)])])):he("",!0)])])]),o("div",sC,[o("div",nC,[o("div",rC,[T[8]||(T[8]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-euro-sign"})],-1)),o("div",iC,[T[7]||(T[7]=o("div",{class:"stat-label"},"Chiffre d'Affaires",-1)),o("div",oC,[o("span",null,j(A.value.toFixed(2)),1),T[6]||(T[6]=o("span",{class:"currency"},"",-1))])])]),o("div",aC,[T[9]||(T[9]=o("i",{class:"fas fa-arrow-up"},null,-1)),o("span",null,j(E.value.length)+" ventes",1)])]),o("div",lC,[o("div",uC,[T[12]||(T[12]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-wallet"})],-1)),o("div",cC,[T[11]||(T[11]=o("div",{class:"stat-label"},"Salaires & Commissions",-1)),o("div",dC,[o("span",null,j(b.value.toFixed(2)),1),T[10]||(T[10]=o("span",{class:"currency"},"",-1))])])]),o("div",hC,[T[13]||(T[13]=o("i",{class:"fas fa-users"},null,-1)),o("span",null,j(Ce.value.length)+" employs",1)])]),o("div",fC,[o("div",pC,[T[16]||(T[16]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-gift"})],-1)),o("div",mC,[T[15]||(T[15]=o("div",{class:"stat-label"},"Primes Total",-1)),o("div",gC,[o("span",null,j(P.value.toFixed(2)),1),T[14]||(T[14]=o("span",{class:"currency"},"",-1))])])]),o("div",vC,[T[17]||(T[17]=o("i",{class:"fas fa-star"},null,-1)),o("span",null,j(S.value.length)+" primes",1)])]),o("div",{class:je(["stat-card-large",C.value>=0?"info":"danger"])},[o("div",_C,[T[20]||(T[20]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-chart-line"})],-1)),o("div",yC,[T[19]||(T[19]=o("div",{class:"stat-label"},"Bnfices",-1)),o("div",EC,[o("span",null,j(C.value.toFixed(2)),1),T[18]||(T[18]=o("span",{class:"currency"},"",-1))])])]),o("div",bC,[T[21]||(T[21]=o("i",{class:"fas fa-percentage"},null,-1)),o("span",null,"Moy: "+j(w.value.toFixed(2))+"",1)])],2)]),o("div",TC,[o("div",AC,[T[23]||(T[23]=o("div",null,[o("h2",{class:"section-title"},"Ventes Rcentes"),o("p",{class:"section-description"},"Dernires transactions enregistres")],-1)),o("div",IC,[y("resetSales")?(V(),F("button",{key:0,onClick:Y,class:"btn-icon-text danger"},[...T[22]||(T[22]=[o("i",{class:"fas fa-redo"},null,-1),o("span",null,"Rinitialiser",-1)])])):he("",!0)])]),L.value?(V(),F("div",wC,[...T[24]||(T[24]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):E.value.length===0?(V(),F("div",CC,[T[26]||(T[26]=o("div",{class:"empty-icon"},[o("i",{class:"fas fa-shopping-cart"})],-1)),T[27]||(T[27]=o("h3",null,"Aucune vente enregistre",-1)),T[28]||(T[28]=o("p",null,"Commencez par ajouter votre premire vente",-1)),o("button",{onClick:T[2]||(T[2]=B=>ge()),class:"btn-action btn-primary-action"},[...T[25]||(T[25]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter une Vente",-1)])])])):(V(),F("div",SC,[(V(!0),F(we,null,Ye(E.value,B=>{var Z,fe;return V(),F("div",{key:B.id,class:"sale-card"},[o("div",RC,[o("div",PC,[T[29]||(T[29]=o("div",{class:"employee-avatar"},[o("i",{class:"fas fa-user"})],-1)),o("div",kC,[o("div",VC,j(ot(B.employeeId)),1),o("div",DC,j(pt(i)(B.date)),1)])]),o("div",xC,[o("span",null,j(parseFloat(B.amount).toFixed(2)),1),T[30]||(T[30]=o("span",{class:"currency-small"},"",-1))])]),o("div",NC,[o("div",MC,[o("div",$C,[T[32]||(T[32]=o("i",{class:"fas fa-percent"},null,-1)),o("span",null,[T[31]||(T[31]=ne("Commission: ",-1)),o("strong",null,j(Ke(B).toFixed(2))+"",1)])])])]),o("div",OC,[We(B)?(V(),F("button",{key:0,onClick:me=>ge(B),class:"btn-card-action"},[...T[33]||(T[33]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,FC)):he("",!0),Ue(B)?(V(),F("button",{key:1,onClick:me=>K(B.id),class:"btn-card-action danger",title:ts()&&((Z=_t())==null?void 0:Z.id)===B.employeeId?"Supprimer votre vente":"Supprimer cette vente"},[T[34]||(T[34]=o("i",{class:"fas fa-trash"},null,-1)),o("span",null,j(ts()&&((fe=_t())==null?void 0:fe.id)===B.employeeId?"Supprimer (vtre)":"Supprimer"),1)],8,LC)):he("",!0)])])}),128))]))]),o("div",UC,[T[50]||(T[50]=o("div",{class:"section-header-modern"},[o("div",null,[o("h2",{class:"section-title"},"Performance par Employ"),o("p",{class:"section-description"},"Dtails des ventes et commissions par employ")])],-1)),L.value?(V(),F("div",BC,[...T[35]||(T[35]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement...",-1)])])):Ce.value.length===0?(V(),F("div",jC,[...T[36]||(T[36]=[o("div",{class:"empty-icon"},[o("i",{class:"fas fa-users"})],-1),o("h3",null,"Aucun employ avec des ventes",-1)])])):(V(),F("div",qC,[(V(!0),F(we,null,Ye(Ce.value,B=>(V(),F("div",{key:B.employeeId,class:"employee-card"},[o("div",GC,[T[39]||(T[39]=o("div",{class:"employee-avatar-large"},[o("i",{class:"fas fa-user-circle"})],-1)),o("div",HC,[o("h3",zC,j(B.employeeName),1),o("div",KC,[o("span",WC,[T[37]||(T[37]=o("i",{class:"fas fa-shopping-cart"},null,-1)),ne(" "+j(B.salesCount)+" ventes ",1)]),B.bonusesCount>0?(V(),F("span",QC,[T[38]||(T[38]=o("i",{class:"fas fa-gift"},null,-1)),ne(" "+j(B.bonusesCount)+" primes ",1)])):he("",!0)])])]),o("div",YC,[o("div",JC,[o("div",XC,[T[41]||(T[41]=o("div",{class:"metric-label"},"Chiffre d'Affaires",-1)),o("div",ZC,[o("span",null,j(B.totalAmount.toFixed(2)),1),T[40]||(T[40]=o("span",{class:"currency-small"},"",-1))])]),o("div",eS,[T[43]||(T[43]=o("div",{class:"metric-label"},"Salaire",-1)),o("div",tS,[o("span",null,j(B.totalCommission.toFixed(2)),1),T[42]||(T[42]=o("span",{class:"currency-small"},"",-1))])]),B.totalBonus>0?(V(),F("div",sS,[T[45]||(T[45]=o("div",{class:"metric-label"},"Primes",-1)),o("div",nS,[o("span",null,j(B.totalBonus.toFixed(2)),1),T[44]||(T[44]=o("span",{class:"currency-small"},"",-1))])])):he("",!0),B.totalBonus>0?(V(),F("div",rS,[T[47]||(T[47]=o("div",{class:"metric-label"},"Total",-1)),o("div",iS,[o("span",null,j((B.totalCommission+B.totalBonus).toFixed(2)),1),T[46]||(T[46]=o("span",{class:"currency-small"},"",-1))])])):he("",!0)]),B.sales.length>0?(V(),F("div",oS,[T[49]||(T[49]=o("div",{class:"mini-sales-header"},[o("span",null,"Dernires ventes")],-1)),o("div",aS,[(V(!0),F(we,null,Ye(B.sales.slice(0,3),Z=>(V(),F("div",{key:Z.id,class:"mini-sale-item"},[o("span",lS,j(pt(i)(Z.date)),1),o("span",uS,j(parseFloat(Z.amount).toFixed(2))+"",1)]))),128)),o("button",{onClick:Z=>ye(B),class:"mini-sale-more"},[...T[48]||(T[48]=[o("i",{class:"fas fa-eye"},null,-1),ne(" Voir toutes les ventes ",-1)])],8,cS)])])):he("",!0)])]))),128))]))]),y("bonuses")||y("sales")?(V(),F("div",dS,[T[60]||(T[60]=o("div",{class:"section-header-modern"},[o("div",null,[o("h2",{class:"section-title"},"Primes Attribues"),o("p",{class:"section-description"},"Historique des primes distribues")])],-1)),L.value?(V(),F("div",hS,[...T[51]||(T[51]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement...",-1)])])):S.value.length===0?(V(),F("div",fS,[...T[52]||(T[52]=[o("div",{class:"empty-icon"},[o("i",{class:"fas fa-gift"})],-1),o("h3",null,"Aucune prime enregistre",-1)])])):(V(),F("div",pS,[(V(!0),F(we,null,Ye(S.value,B=>(V(),F("div",{key:B.id,class:"bonus-card"},[o("div",mS,[T[54]||(T[54]=o("div",{class:"bonus-icon"},[o("i",{class:"fas fa-gift"})],-1)),o("div",gS,[o("span",null,j(parseFloat(B.amount).toFixed(2)),1),T[53]||(T[53]=o("span",{class:"currency-small"},"",-1))])]),o("div",vS,[o("div",_S,[T[55]||(T[55]=o("i",{class:"fas fa-user"},null,-1)),o("span",null,j(ot(B.employeeId)),1)]),o("div",yS,[T[56]||(T[56]=o("i",{class:"fas fa-calendar"},null,-1)),o("span",null,j(pt(i)(B.date)),1)]),B.description?(V(),F("div",ES,[T[57]||(T[57]=o("i",{class:"fas fa-info-circle"},null,-1)),o("span",null,j(B.description),1)])):he("",!0)]),o("div",bS,[o("button",{onClick:Z=>oe(B),class:"btn-card-action"},[...T[58]||(T[58]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,TS),o("button",{onClick:Z=>U(B.id),class:"btn-card-action danger"},[...T[59]||(T[59]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,AS)])]))),128))]))])):he("",!0),x.value?(V(),Le(O2,{key:1,sale:ee.value,employees:k.value,onClose:mt,onSave:Gt},null,8,["sale","employees"])):he("",!0),$.value?(V(),Le(J2,{key:2,bonus:N.value,employees:k.value,onClose:ie,onSave:R},null,8,["bonus","employees"])):he("",!0),z.value?(V(),F("div",{key:3,class:"modal-overlay",onClick:He(Ve,["self"])},[o("div",IS,[o("div",wS,[o("div",null,[T[61]||(T[61]=o("h2",{class:"modal-title"},"Toutes les ventes",-1)),o("p",CS,j((G=g.value)==null?void 0:G.employeeName),1)]),o("button",{onClick:Ve,class:"modal-close"},[...T[62]||(T[62]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("div",SS,[o("div",RS,[o("div",PS,[T[63]||(T[63]=o("span",{class:"summary-label"},"Total CA:",-1)),o("span",kS,j((W=g.value)==null?void 0:W.totalAmount.toFixed(2))+"",1)]),o("div",VS,[T[64]||(T[64]=o("span",{class:"summary-label"},"Total Salaire:",-1)),o("span",DS,j((J=g.value)==null?void 0:J.totalCommission.toFixed(2))+"",1)]),((H=g.value)==null?void 0:H.totalBonus)>0?(V(),F("div",xS,[T[65]||(T[65]=o("span",{class:"summary-label"},"Total Primes:",-1)),o("span",NS,j((te=g.value)==null?void 0:te.totalBonus.toFixed(2))+"",1)])):he("",!0)]),ce.value.length===0?(V(),F("div",MS,[...T[66]||(T[66]=[o("i",{class:"fas fa-lock"},null,-1),o("p",null,"Vous n'avez pas la permission de voir ces ventes.",-1)])])):(V(),F("div",$S,[(V(!0),F(we,null,Ye(ce.value,B=>{var Z;return V(),F("div",{key:B.id,class:"sale-item-modal"},[o("div",OS,[o("div",FS,j(pt(i)(B.date)),1),o("div",LS,j(parseFloat(B.amount).toFixed(2))+"",1)]),o("div",US,[T[67]||(T[67]=ne(" Commission: ",-1)),o("strong",null,j(Ke(B).toFixed(2))+"",1)]),o("div",BS,[We(B)?(V(),F("button",{key:0,onClick:fe=>{ge(B),Ve()},class:"btn-small",title:"Modifier"},[...T[68]||(T[68]=[o("i",{class:"fas fa-edit"},null,-1)])],8,jS)):he("",!0),Ue(B)?(V(),F("button",{key:1,onClick:fe=>I(B.id),class:"btn-small danger",title:ts()&&((Z=_t())==null?void 0:Z.id)===B.employeeId?"Supprimer votre vente":"Supprimer cette vente"},[...T[69]||(T[69]=[o("i",{class:"fas fa-trash"},null,-1)])],8,qS)):he("",!0)])])}),128))]))])])])):he("",!0)])}}},HS=Fe(GS,[["__scopeId","data-v-6cd5e005"]]);const zS={class:"history-dashboard"},KS={key:0,class:"stats-grid"},WS={class:"stat-card-large primary"},QS={class:"stat-card-content"},YS={class:"stat-info"},JS={class:"stat-value-large"},XS={class:"stat-card-large success"},ZS={class:"stat-card-content"},eR={class:"stat-info"},tR={class:"stat-value-large"},sR={class:"stat-card-large info"},nR={class:"stat-card-content"},rR={class:"stat-info"},iR={class:"stat-value-large"},oR={class:"stat-card-content"},aR={class:"stat-info"},lR={class:"stat-value-large"},uR={class:"content-section"},cR={key:0,class:"loading-container"},dR={key:1,class:"empty-container"},hR={key:2,class:"history-grid-modern"},fR=["onClick"],pR={class:"card-header-modern"},mR={class:"card-info"},gR={class:"card-date"},vR={class:"history-stats-modern"},_R={class:"history-stat-item"},yR={class:"stat-content"},ER={class:"stat-value-small"},bR={class:"history-stat-item primary"},TR={class:"stat-content"},AR={class:"stat-value-small primary"},IR={class:"history-stat-item success"},wR={class:"stat-content"},CR={class:"stat-value-small success"},SR={class:"history-stat-item warning"},RR={class:"stat-content"},PR={class:"stat-value-small warning"},kR={class:"stat-content"},VR={class:"history-details-modal"},DR={class:"modal-header"},xR={class:"modal-subtitle"},NR={class:"modal-body"},MR={key:0,class:"empty-sales-message"},$R={key:1,class:"history-employees-grid"},OR={class:"employee-card-header"},FR={class:"employee-card-info"},LR={class:"employee-card-name"},UR={class:"employee-card-meta"},BR={class:"employee-card-metrics"},jR={class:"metric-item"},qR={class:"metric-value"},GR={class:"metric-item"},HR={class:"metric-value success"},zR={key:0,class:"metric-item"},KR={class:"metric-value warning"},WR={key:0,class:"employee-sales-list"},QR={class:"sales-list-content"},YR={class:"mini-sale-date"},JR={class:"mini-sale-amount"},XR={__name:"HistoryTab",setup(t){const{getAll:e,formatDate:s,getAllEmployees:n,getAllRanks:r}=Vn(),i=re([]),a=re(!0),u=re(!1),c=re(null),d=re([]),f=re([]),m=ue(()=>i.value.reduce((N,g)=>N+parseFloat(g.totalSales||g.totalAmount||0),0)),v=ue(()=>i.value.reduce((N,g)=>N+parseFloat(g.totalCommissions||0),0)),E=ue(()=>i.value.reduce((N,g)=>N+parseFloat(g.totalBonuses||0),0)),S=ue(()=>m.value-v.value-E.value),k=N=>{const g=parseFloat(N.totalSales||N.totalAmount||0),y=parseFloat(N.totalCommissions||0),A=parseFloat(N.totalBonuses||0);return g-y-A},M=N=>{const g=k(N);return g<0?"danger":g>0?"success":""},L=ue(()=>{if(!c.value)return[];const N=c.value,g=N.sales||[],y=N.bonuses||[],A={};return d.value.forEach(w=>{const b=g.filter(ae=>ae.employeeId===w.id),P=y.filter(ae=>ae.employeeId===w.id),C=f.value.find(ae=>ae.id===w.rankId);let Ce=0,ot=0;b.forEach(ae=>{Ce+=parseFloat(ae.amount||0),C&&(ot+=parseFloat(ae.amount||0)*parseFloat(C.percentage||0)/100)});const Ke=P.reduce((ae,ge)=>ae+parseFloat(ge.amount||0),0);(b.length>0||P.length>0)&&(A[w.id]={employeeId:w.id,employeeName:w.name,salesCount:b.length,bonusesCount:P.length,totalAmount:Ce,totalCommission:ot,totalBonus:Ke,sales:b.map(ae=>{var ge;return{...ae,date:(ge=ae.date)!=null&&ge.toDate?ae.date.toDate():ae.date instanceof Date?ae.date:new Date(ae.date)}}).sort((ae,ge)=>{const mt=ae.date instanceof Date?ae.date:new Date(ae.date);return(ge.date instanceof Date?ge.date:new Date(ge.date))-mt})})}),Object.values(A)}),x=N=>{if(!N)return"Date inconnue";try{const g=N!=null&&N.toDate?N.toDate():N instanceof Date?N:new Date(N);return s(g)}catch{return"Date invalide"}},$=async N=>{c.value=N,d.value.length===0&&(d.value=await n(),f.value=await r()),u.value=!0},z=()=>{u.value=!1,c.value=null},ee=async()=>{try{a.value=!0;const N=await e("salesHistory");i.value=N.map(g=>{var y;return{...g,archivedAt:(y=g.archivedAt)!=null&&y.toDate?g.archivedAt.toDate():g.archivedAt instanceof Date?g.archivedAt:new Date(g.archivedAt)}}).sort((g,y)=>y.archivedAt-g.archivedAt),a.value=!1}catch(N){console.error("Erreur lors du chargement:",N),a.value=!1}};return Ct(()=>{ee();const N=it();Mt(Ge(N,"salesHistory"),()=>ee())}),(N,g)=>{var y;return V(),F("div",zS,[g[46]||(g[46]=o("div",{class:"dashboard-header"},[o("div",{class:"header-content"},[o("div",null,[o("h1",{class:"dashboard-title"},"Historique des Ventes"),o("p",{class:"dashboard-subtitle"},"Consultez les priodes archives")])])],-1)),!a.value&&i.value.length>0?(V(),F("div",KS,[o("div",WS,[o("div",QS,[g[1]||(g[1]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-archive"})],-1)),o("div",YS,[g[0]||(g[0]=o("div",{class:"stat-label"},"Priodes Archives",-1)),o("div",JS,[o("span",null,j(i.value.length),1)])])]),g[2]||(g[2]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-calendar"}),o("span",null,"Total archiv")],-1))]),o("div",XS,[o("div",ZS,[g[5]||(g[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-euro-sign"})],-1)),o("div",eR,[g[4]||(g[4]=o("div",{class:"stat-label"},"CA Total Archiv",-1)),o("div",tR,[o("span",null,j(m.value.toFixed(2)),1),g[3]||(g[3]=o("span",{class:"currency"},"",-1))])])]),g[6]||(g[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-chart-bar"}),o("span",null,"Toutes priodes")],-1))]),o("div",sR,[o("div",nR,[g[9]||(g[9]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-wallet"})],-1)),o("div",rR,[g[8]||(g[8]=o("div",{class:"stat-label"},"Salaires Total",-1)),o("div",iR,[o("span",null,j(v.value.toFixed(2)),1),g[7]||(g[7]=o("span",{class:"currency"},"",-1))])])]),g[10]||(g[10]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-users"}),o("span",null,"Total vers")],-1))]),o("div",{class:je(["stat-card-large",S.value>=0?"warning":"danger"])},[o("div",oR,[g[13]||(g[13]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-chart-line"})],-1)),o("div",aR,[g[12]||(g[12]=o("div",{class:"stat-label"},"Bnfices Total",-1)),o("div",lR,[o("span",null,j(S.value.toFixed(2)),1),g[11]||(g[11]=o("span",{class:"currency"},"",-1))])])]),g[14]||(g[14]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-percentage"}),o("span",null,"Toutes priodes")],-1))],2)])):he("",!0),o("div",uR,[g[34]||(g[34]=o("div",{class:"section-header-modern"},[o("div",null,[o("h2",{class:"section-title"},"Archives des Priodes"),o("p",{class:"section-description"},"Consultez les statistiques des priodes archives")])],-1)),a.value?(V(),F("div",cR,[...g[15]||(g[15]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):i.value.length===0?(V(),F("div",dR,[...g[16]||(g[16]=[o("i",{class:"fas fa-archive"},null,-1),o("p",null,"Aucun historique disponible. Les priodes archives apparatront ici aprs une rinitialisation des ventes.",-1)])])):(V(),F("div",hR,[(V(!0),F(we,null,Ye(i.value,A=>{var w,b;return V(),F("div",{key:A.id,class:"history-card-modern clickable",onClick:P=>$(A)},[o("div",pR,[g[18]||(g[18]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-calendar-alt"})],-1)),o("div",mR,[g[17]||(g[17]=o("h3",{class:"card-title"},"Priode Archive",-1)),o("div",gR,j(pt(s)(A.archivedAt)),1)]),g[19]||(g[19]=o("div",{class:"card-action-icon"},[o("i",{class:"fas fa-eye"})],-1))]),o("div",vR,[o("div",_R,[g[21]||(g[21]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-shopping-cart"})],-1)),o("div",yR,[g[20]||(g[20]=o("div",{class:"stat-label-small"},"Nombre de ventes",-1)),o("div",ER,j(A.salesCount||0),1)])]),o("div",bR,[g[24]||(g[24]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-euro-sign"})],-1)),o("div",TR,[g[23]||(g[23]=o("div",{class:"stat-label-small"},"Chiffre d'Affaires",-1)),o("div",AR,[o("span",null,j((A.totalSales||A.totalAmount||0).toFixed(2)),1),g[22]||(g[22]=o("span",{class:"currency-small"},"",-1))])])]),o("div",IR,[g[27]||(g[27]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-wallet"})],-1)),o("div",wR,[g[26]||(g[26]=o("div",{class:"stat-label-small"},"Total Salaires",-1)),o("div",CR,[o("span",null,j(((w=A.totalCommissions)==null?void 0:w.toFixed(2))||"0.00"),1),g[25]||(g[25]=o("span",{class:"currency-small"},"",-1))])])]),o("div",SR,[g[30]||(g[30]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-gift"})],-1)),o("div",RR,[g[29]||(g[29]=o("div",{class:"stat-label-small"},"Total Primes",-1)),o("div",PR,[o("span",null,j(((b=A.totalBonuses)==null?void 0:b.toFixed(2))||"0.00"),1),g[28]||(g[28]=o("span",{class:"currency-small"},"",-1))])])]),o("div",{class:je(["history-stat-item total",M(A)])},[g[33]||(g[33]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-chart-line"})],-1)),o("div",kR,[g[32]||(g[32]=o("div",{class:"stat-label-small"},"Bnfices",-1)),o("div",{class:je(["stat-value-small total-value",M(A)])},[o("span",null,j(k(A).toFixed(2)),1),g[31]||(g[31]=o("span",{class:"currency-small"},"",-1))],2)])],2)])],8,fR)}),128))]))]),u.value?(V(),F("div",{key:1,class:"modal-overlay",onClick:He(z,["self"])},[o("div",VR,[o("div",DR,[o("div",null,[g[35]||(g[35]=o("h2",{class:"modal-title"},"Dtails de la Priode Archive",-1)),o("p",xR,j(pt(s)((y=c.value)==null?void 0:y.archivedAt)),1)]),o("button",{onClick:z,class:"modal-close"},[...g[36]||(g[36]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("div",NR,[L.value.length===0?(V(),F("div",MR,[...g[37]||(g[37]=[o("i",{class:"fas fa-info-circle"},null,-1),o("p",null,"Aucune donne dtaille disponible pour cette priode.",-1)])])):(V(),F("div",$R,[(V(!0),F(we,null,Ye(L.value,A=>(V(),F("div",{key:A.employeeId,class:"history-employee-card"},[o("div",OR,[g[38]||(g[38]=o("div",{class:"employee-card-icon"},[o("i",{class:"fas fa-user"})],-1)),o("div",FR,[o("h3",LR,j(A.employeeName),1),o("div",UR,j(A.salesCount)+" vente"+j(A.salesCount>1?"s":""),1)])]),o("div",BR,[o("div",jR,[g[40]||(g[40]=o("div",{class:"metric-label"},"Chiffre d'Affaires",-1)),o("div",qR,[o("span",null,j(A.totalAmount.toFixed(2)),1),g[39]||(g[39]=o("span",{class:"currency"},"",-1))])]),o("div",GR,[g[42]||(g[42]=o("div",{class:"metric-label"},"Salaire",-1)),o("div",HR,[o("span",null,j(A.totalCommission.toFixed(2)),1),g[41]||(g[41]=o("span",{class:"currency"},"",-1))])]),A.totalBonus>0?(V(),F("div",zR,[g[44]||(g[44]=o("div",{class:"metric-label"},"Primes",-1)),o("div",KR,[o("span",null,j(A.totalBonus.toFixed(2)),1),g[43]||(g[43]=o("span",{class:"currency"},"",-1))])])):he("",!0)]),A.sales&&A.sales.length>0?(V(),F("div",WR,[g[45]||(g[45]=o("div",{class:"sales-list-header"},[o("h4",null,"Ventes dtailles")],-1)),o("div",QR,[(V(!0),F(we,null,Ye(A.sales,w=>(V(),F("div",{key:w.id||w.date,class:"mini-sale-item"},[o("div",YR,j(x(w.date)),1),o("div",JR,j(parseFloat(w.amount||0).toFixed(2))+"",1)]))),128))])])):he("",!0)]))),128))]))])])])):he("",!0)])}}},ZR=Fe(XR,[["__scopeId","data-v-2f844a30"]]);const eP={class:"modal-container"},tP={class:"modal-header"},sP={class:"modal-header-content"},nP={class:"modal-subtitle"},rP={class:"form-group"},iP={class:"form-group"},oP=["value"],aP={class:"form-group"},lP={class:"discord-id-selector"},uP=["value"],cP={class:"modal-footer"},dP={type:"submit",class:"btn btn-primary"},hP={__name:"EmployeeModal",props:{employee:Object,ranks:Array,admins:{type:Array,default:()=>[]}},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=re({name:"",rankId:"",discordId:""}),i=re(""),a=re(!1);es(()=>s.employee,d=>{if(d)if(r.value={name:d.name||"",rankId:d.rankId||"",discordId:d.discordId||""},d.discordId){const f=s.admins.find(m=>m.discordId===d.discordId);f?(i.value=f.discordId,a.value=!1):(i.value="manual",a.value=!0)}else i.value="",a.value=!1;else r.value={name:"",rankId:"",discordId:""},i.value="",a.value=!1},{immediate:!0});const u=()=>{i.value==="manual"?(a.value=!0,r.value.discordId=""):i.value?(r.value.discordId=i.value,a.value=!1):(r.value.discordId="",a.value=!1)},c=()=>{n("save",r.value)};return(d,f)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:f[6]||(f[6]=He(m=>d.$emit("close"),["self"]))},[o("div",eP,[o("div",tP,[o("div",sP,[f[7]||(f[7]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-user-tie"})],-1)),o("div",null,[o("h2",null,j(t.employee?"Modifier un Employ":"Ajouter un Employ"),1),o("p",nP,j(t.employee?"Modifiez les informations de l'employ":"Ajoutez un nouvel employ  votre quipe"),1)])]),o("button",{class:"modal-close",onClick:f[0]||(f[0]=m=>d.$emit("close")),"aria-label":"Fermer"},[...f[8]||(f[8]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(c,["prevent"]),class:"modal-body"},[o("div",rP,[f[9]||(f[9]=o("label",{for:"employee-name"},[o("i",{class:"fas fa-user"}),ne(" Nom ")],-1)),Ie(o("input",{type:"text",id:"employee-name","onUpdate:modelValue":f[1]||(f[1]=m=>r.value.name=m),required:"",placeholder:"Ex: Jean Dupont",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",iP,[f[11]||(f[11]=o("label",{for:"employee-rank"},[o("i",{class:"fas fa-star"}),ne(" Grade ")],-1)),Ie(o("select",{id:"employee-rank","onUpdate:modelValue":f[2]||(f[2]=m=>r.value.rankId=m),required:""},[f[10]||(f[10]=o("option",{value:""},"Slectionner un grade",-1)),(V(!0),F(we,null,Ye(t.ranks,m=>(V(),F("option",{key:m.id,value:m.id},j(m.name),9,oP))),128))],512),[[Zn,r.value.rankId]])]),o("div",aP,[f[14]||(f[14]=o("label",{for:"employee-discord-id"},[o("i",{class:"fab fa-discord"}),ne(" Discord ID (optionnel) ")],-1)),o("div",lP,[Ie(o("select",{id:"employee-discord-id-select","onUpdate:modelValue":f[3]||(f[3]=m=>i.value=m),onChange:u,class:"discord-select"},[f[12]||(f[12]=o("option",{value:""},"Slectionner un administrateur",-1)),(V(!0),F(we,null,Ye(t.admins,m=>(V(),F("option",{key:m.id,value:m.discordId},j(m.username||m.discordId||"Admin")+" ("+j(m.discordId)+") ",9,uP))),128)),f[13]||(f[13]=o("option",{value:"manual"},"Saisir manuellement",-1))],544),[[Zn,i.value]]),a.value?Ie((V(),F("input",{key:0,type:"text",id:"employee-discord-id","onUpdate:modelValue":f[4]||(f[4]=m=>r.value.discordId=m),placeholder:"Ex: 123456789012345678",autocomplete:"off",class:"discord-input"},null,512)),[[et,r.value.discordId]]):he("",!0)]),f[15]||(f[15]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),ne(" Choisissez un administrateur ou saisissez l'ID Discord pour que l'employ puisse supprimer ses propres ventes ")],-1))]),o("div",cP,[o("button",{type:"button",class:"btn btn-secondary",onClick:f[5]||(f[5]=m=>d.$emit("close"))},[...f[16]||(f[16]=[o("i",{class:"fas fa-times"},null,-1),ne(" Annuler ",-1)])]),o("button",dP,[f[17]||(f[17]=o("i",{class:"fas fa-check"},null,-1)),ne(" "+j(t.employee?"Modifier":"Ajouter"),1)])])],32)])])]))}},fP=Fe(hP,[["__scopeId","data-v-2a049d18"]]);const pP={class:"employees-dashboard"},mP={class:"dashboard-header"},gP={class:"header-content"},vP={class:"header-actions"},_P={class:"stats-grid"},yP={class:"stat-card-large primary"},EP={class:"stat-card-content"},bP={class:"stat-info"},TP={class:"stat-value-large"},AP={class:"stat-card-large success"},IP={class:"stat-card-content"},wP={class:"stat-info"},CP={class:"stat-value-large"},SP={class:"stat-card-large info"},RP={class:"stat-card-content"},PP={class:"stat-info"},kP={class:"stat-value-large"},VP={class:"stat-trend"},DP={class:"content-section"},xP={class:"section-header-modern"},NP={class:"section-actions"},MP={key:0,class:"loading-container"},$P={key:1,class:"empty-container"},OP={key:2,class:"employees-grid"},FP={class:"card-header-modern"},LP={class:"card-info"},UP={class:"card-title"},BP={class:"card-badge"},jP={key:0,class:"card-meta"},qP={class:"card-actions-modern"},GP=["onClick"],HP=["onClick"],zP={__name:"EmployeesTab",setup(t){const{getAll:e,create:s,update:n,remove:r,getAllRanks:i}=Vn(),a=re([]),u=re([]),c=re([]),d=re(!0),f=re(!1),m=re(null),{confirm:v,alert:E}=kn(),S=g=>{const y=u.value.find(A=>A.id===g);return y?y.name:"Aucun"},k=ue(()=>new Set(a.value.map(y=>y.rankId).filter(Boolean)).size),M=ue(()=>a.value.filter(g=>g.discordId).length),L=ue(()=>a.value.length===0?0:Math.round(M.value/a.value.length*100)),x=async()=>{try{d.value=!0,a.value=await e("employees","name"),u.value=await i(),c.value=await e("admins"),d.value=!1}catch(g){console.error("Erreur lors du chargement:",g),d.value=!1}},$=(g=null)=>{m.value=g,f.value=!0},z=()=>{f.value=!1,m.value=null},ee=async g=>{try{m.value?await n("employees",m.value.id,g):await s("employees",g),z(),x()}catch(y){console.error("Erreur lors de la sauvegarde:",y),await E("Erreur lors de la sauvegarde",{type:"danger"})}},N=async g=>{if(await v("tes-vous sr de vouloir supprimer cet employ ?",{type:"danger",title:"Supprimer un employ",confirmText:"Supprimer"}))try{await r("employees",g),x()}catch(A){console.error("Erreur lors de la suppression:",A),await E("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{x();const g=it();Mt(Ge(g,"employees"),()=>x()),Mt(Ge(g,"ranks"),()=>x())}),(g,y)=>(V(),F("div",pP,[o("div",mP,[o("div",gP,[y[3]||(y[3]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion des Employs"),o("p",{class:"dashboard-subtitle"},"Grez les employs et leurs grades")],-1)),o("div",vP,[o("button",{onClick:y[0]||(y[0]=A=>$()),class:"btn-action btn-primary-action"},[...y[2]||(y[2]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouvel Employ",-1)])])])])]),o("div",_P,[o("div",yP,[o("div",EP,[y[5]||(y[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-user-tie"})],-1)),o("div",bP,[y[4]||(y[4]=o("div",{class:"stat-label"},"Total Employs",-1)),o("div",TP,[o("span",null,j(a.value.length),1)])])]),y[6]||(y[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-users"}),o("span",null,"Enregistrs")],-1))]),o("div",AP,[o("div",IP,[y[8]||(y[8]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-star"})],-1)),o("div",wP,[y[7]||(y[7]=o("div",{class:"stat-label"},"Grades Uniques",-1)),o("div",CP,[o("span",null,j(k.value),1)])])]),y[9]||(y[9]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-tags"}),o("span",null,"Diffrents grades")],-1))]),o("div",SP,[o("div",RP,[y[11]||(y[11]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-id-card"})],-1)),o("div",PP,[y[10]||(y[10]=o("div",{class:"stat-label"},"Avec Discord ID",-1)),o("div",kP,[o("span",null,j(M.value),1)])])]),o("div",VP,[y[12]||(y[12]=o("i",{class:"fas fa-percentage"},null,-1)),o("span",null,j(L.value)+"% lis",1)])])]),o("div",DP,[o("div",xP,[y[14]||(y[14]=o("div",null,[o("h2",{class:"section-title"},"Liste des Employs"),o("p",{class:"section-description"},"Grez les employs et leurs informations")],-1)),o("div",NP,[o("button",{onClick:y[1]||(y[1]=A=>$()),class:"btn-icon-text"},[...y[13]||(y[13]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),d.value?(V(),F("div",MP,[...y[15]||(y[15]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):a.value.length===0?(V(),F("div",$P,[...y[16]||(y[16]=[o("i",{class:"fas fa-user-tie"},null,-1),o("p",null,"Aucun employ enregistr. Ajoutez-en un pour commencer !",-1)])])):(V(),F("div",OP,[(V(!0),F(we,null,Ye(a.value,A=>(V(),F("div",{key:A.id,class:"employee-card-modern"},[o("div",FP,[y[18]||(y[18]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-user-tie"})],-1)),o("div",LP,[o("h3",UP,j(A.name),1),o("div",BP,[y[17]||(y[17]=o("i",{class:"fas fa-star"},null,-1)),ne(" "+j(S(A.rankId)),1)])])]),A.discordId?(V(),F("div",jP,[y[19]||(y[19]=o("i",{class:"fab fa-discord"},null,-1)),o("span",null,"Discord ID: "+j(A.discordId),1)])):he("",!0),o("div",qP,[o("button",{onClick:w=>$(A),class:"btn-card-action"},[...y[20]||(y[20]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,GP),o("button",{onClick:w=>N(A.id),class:"btn-card-action danger"},[...y[21]||(y[21]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,HP)])]))),128))]))]),f.value?(V(),Le(fP,{key:0,employee:m.value,ranks:u.value,admins:c.value,onClose:z,onSave:ee},null,8,["employee","ranks","admins"])):he("",!0)]))}},KP=Fe(zP,[["__scopeId","data-v-8a056627"]]);const WP={class:"modal-container"},QP={class:"modal-header"},YP={class:"modal-header-content"},JP={class:"modal-subtitle"},XP={class:"form-group"},ZP={class:"form-group"},e4={class:"form-group"},t4={class:"modal-footer"},s4={type:"submit",class:"btn btn-primary"},n4={__name:"RankModal",props:{rank:Object},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=re({name:"",percentage:0,description:""});es(()=>s.rank,a=>{a?r.value={name:a.name||"",percentage:a.percentage||0,description:a.description||""}:r.value={name:"",percentage:0,description:""}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[5]||(u[5]=He(c=>a.$emit("close"),["self"]))},[o("div",WP,[o("div",QP,[o("div",YP,[u[6]||(u[6]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-star"})],-1)),o("div",null,[o("h2",null,j(t.rank?"Modifier un Grade":"Crer un Grade"),1),o("p",JP,j(t.rank?"Modifiez les informations du grade":"Crez un nouveau grade avec un pourcentage de commission"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[7]||(u[7]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",XP,[u[8]||(u[8]=o("label",{for:"rank-name"},[o("i",{class:"fas fa-tag"}),ne(" Nom du Grade ")],-1)),Ie(o("input",{type:"text",id:"rank-name","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.name=c),required:"",placeholder:"Ex: Serveur, Chef, Manager...",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",ZP,[u[9]||(u[9]=o("label",{for:"rank-percentage"},[o("i",{class:"fas fa-percent"}),ne(" Pourcentage de Commission (%) ")],-1)),Ie(o("input",{type:"number",id:"rank-percentage","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.percentage=c),step:"0.01",min:"0",max:"100",required:"",placeholder:"Ex: 5.5"},null,512),[[et,r.value.percentage,void 0,{number:!0}]]),u[10]||(u[10]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),ne(" Le pourcentage que les employs de ce grade gagneront sur chaque vente ")],-1))]),o("div",e4,[u[11]||(u[11]=o("label",{for:"rank-description"},[o("i",{class:"fas fa-align-left"}),ne(" Description (optionnel) ")],-1)),Ie(o("textarea",{id:"rank-description","onUpdate:modelValue":u[3]||(u[3]=c=>r.value.description=c),rows:"3",placeholder:"Description du grade..."},null,512),[[et,r.value.description]])]),o("div",t4,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[4]||(u[4]=c=>a.$emit("close"))},[...u[12]||(u[12]=[o("i",{class:"fas fa-times"},null,-1),ne(" Annuler ",-1)])]),o("button",s4,[u[13]||(u[13]=o("i",{class:"fas fa-check"},null,-1)),ne(" "+j(t.rank?"Modifier":"Crer"),1)])])],32)])])]))}},r4=Fe(n4,[["__scopeId","data-v-1ef96811"]]);const i4={class:"ranks-dashboard"},o4={class:"dashboard-header"},a4={class:"header-content"},l4={class:"header-actions"},u4={class:"stats-grid"},c4={class:"stat-card-large primary"},d4={class:"stat-card-content"},h4={class:"stat-info"},f4={class:"stat-value-large"},p4={class:"stat-card-large success"},m4={class:"stat-card-content"},g4={class:"stat-info"},v4={class:"stat-value-large"},_4={class:"stat-card-large info"},y4={class:"stat-card-content"},E4={class:"stat-info"},b4={class:"stat-value-large"},T4={class:"content-section"},A4={class:"section-header-modern"},I4={class:"section-actions"},w4={key:0,class:"loading-container"},C4={key:1,class:"empty-container"},S4={key:2,class:"ranks-grid"},R4={class:"card-header-modern"},P4={class:"card-info"},k4={class:"card-title"},V4={class:"card-commission"},D4={class:"commission-value"},x4={key:0,class:"card-description"},N4={class:"card-actions-modern"},M4=["onClick"],$4=["onClick"],O4={__name:"RanksTab",setup(t){const{getAll:e,create:s,update:n,remove:r}=Vn(),i=re([]),a=re(!0),u=re(!1),c=re(null),{confirm:d,alert:f}=kn(),m=ue(()=>i.value.length===0?0:i.value.reduce(($,z)=>$+parseFloat(z.percentage||0),0)/i.value.length),v=ue(()=>i.value.length===0?0:Math.max(...i.value.map(x=>parseFloat(x.percentage||0)))),E=async()=>{try{a.value=!0,i.value=await e("ranks","name"),a.value=!1}catch(x){console.error("Erreur lors du chargement:",x),a.value=!1}},S=(x=null)=>{c.value=x,u.value=!0},k=()=>{u.value=!1,c.value=null},M=async x=>{try{const $={...x,percentage:parseFloat(x.percentage)};c.value?await n("ranks",c.value.id,$):await s("ranks",$),k(),E()}catch($){console.error("Erreur lors de la sauvegarde:",$),await f("Erreur lors de la sauvegarde",{type:"danger"})}},L=async x=>{if(await d("tes-vous sr de vouloir supprimer ce grade ? Les employs avec ce grade devront tre rassigns.",{type:"warning",title:"Supprimer un grade",confirmText:"Supprimer"}))try{await r("ranks",x),E()}catch(z){console.error("Erreur lors de la suppression:",z),await f("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{E();const x=it();Mt(Ge(x,"ranks"),()=>E())}),(x,$)=>(V(),F("div",i4,[o("div",o4,[o("div",a4,[$[3]||($[3]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion des Grades"),o("p",{class:"dashboard-subtitle"},"Grez les grades et leurs commissions")],-1)),o("div",l4,[o("button",{onClick:$[0]||($[0]=z=>S()),class:"btn-action btn-primary-action"},[...$[2]||($[2]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouveau Grade",-1)])])])])]),o("div",u4,[o("div",c4,[o("div",d4,[$[5]||($[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-star"})],-1)),o("div",h4,[$[4]||($[4]=o("div",{class:"stat-label"},"Total Grades",-1)),o("div",f4,[o("span",null,j(i.value.length),1)])])]),$[6]||($[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-list"}),o("span",null,"Enregistrs")],-1))]),o("div",p4,[o("div",m4,[$[9]||($[9]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-percent"})],-1)),o("div",g4,[$[8]||($[8]=o("div",{class:"stat-label"},"Commission Moyenne",-1)),o("div",v4,[o("span",null,j(m.value.toFixed(2)),1),$[7]||($[7]=o("span",{class:"currency"},"%",-1))])])]),$[10]||($[10]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-chart-line"}),o("span",null,"Moyenne")],-1))]),o("div",_4,[o("div",y4,[$[13]||($[13]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-arrow-up"})],-1)),o("div",E4,[$[12]||($[12]=o("div",{class:"stat-label"},"Commission Max",-1)),o("div",b4,[o("span",null,j(v.value.toFixed(2)),1),$[11]||($[11]=o("span",{class:"currency"},"%",-1))])])]),$[14]||($[14]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-trophy"}),o("span",null,"Maximum")],-1))])]),o("div",T4,[o("div",A4,[$[16]||($[16]=o("div",null,[o("h2",{class:"section-title"},"Grades et Commissions"),o("p",{class:"section-description"},"Grez les grades disponibles pour les employs")],-1)),o("div",I4,[o("button",{onClick:$[1]||($[1]=z=>S()),class:"btn-icon-text"},[...$[15]||($[15]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),a.value?(V(),F("div",w4,[...$[17]||($[17]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):i.value.length===0?(V(),F("div",C4,[...$[18]||($[18]=[o("i",{class:"fas fa-star"},null,-1),o("p",null,"Aucun grade enregistr. Crez-en un pour commencer !",-1)])])):(V(),F("div",S4,[(V(!0),F(we,null,Ye(i.value,z=>(V(),F("div",{key:z.id,class:"rank-card-modern"},[o("div",R4,[$[20]||($[20]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-star"})],-1)),o("div",P4,[o("h3",k4,j(z.name),1),o("div",V4,[o("span",D4,j(parseFloat(z.percentage).toFixed(2))+"%",1),$[19]||($[19]=o("span",{class:"commission-label"},"Commission",-1))])])]),z.description?(V(),F("div",x4,j(z.description),1)):he("",!0),o("div",N4,[o("button",{onClick:ee=>S(z),class:"btn-card-action"},[...$[21]||($[21]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,M4),o("button",{onClick:ee=>L(z.id),class:"btn-card-action danger"},[...$[22]||($[22]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,$4)])]))),128))]))]),u.value?(V(),Le(r4,{key:0,rank:c.value,onClose:k,onSave:M},null,8,["rank"])):he("",!0)]))}},F4=Fe(O4,[["__scopeId","data-v-2907b62b"]]);const L4={class:"modal-container"},U4={class:"modal-header"},B4={class:"modal-header-content"},j4={class:"modal-subtitle"},q4={class:"form-group"},G4={class:"form-group"},H4={class:"form-group"},z4={class:"permissions-grid"},K4={class:"permission-item"},W4={class:"permission-item"},Q4={class:"permission-item"},Y4={class:"permission-item"},J4={class:"permission-item"},X4={class:"permission-item"},Z4={class:"permission-item"},ek={class:"permission-item"},tk={class:"permission-item"},sk={class:"modal-footer"},nk={type:"submit",class:"btn btn-primary"},rk={__name:"AdminModal",props:{admin:Object},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=re({discordId:"",username:"",permissions:{menu:!0,team:!0,sales:!0,history:!1,resetSales:!1,bonuses:!1,employees:!0,ranks:!0,admins:!1}});es(()=>s.admin,a=>{a?r.value={discordId:a.discordId||"",username:a.username||"",permissions:{...r.value.permissions,...a.permissions||{}}}:r.value={discordId:"",username:"",permissions:{menu:!0,team:!0,sales:!0,history:!1,resetSales:!1,bonuses:!1,employees:!0,ranks:!0,admins:!1}}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[13]||(u[13]=He(c=>a.$emit("close"),["self"]))},[o("div",L4,[o("div",U4,[o("div",B4,[u[14]||(u[14]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-shield-alt"})],-1)),o("div",null,[o("h2",null,j(t.admin?"Modifier un Administrateur":"Ajouter un Administrateur"),1),o("p",j4,j(t.admin?"Modifiez les permissions de l'administrateur":"Ajoutez un nouvel administrateur avec des permissions personnalises"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[15]||(u[15]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",q4,[u[16]||(u[16]=o("label",{for:"admin-discord-id"},[o("i",{class:"fab fa-discord"}),ne(" Discord ID * ")],-1)),Ie(o("input",{type:"text",id:"admin-discord-id","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.discordId=c),required:"",placeholder:"Ex: 123456789012345678",autocomplete:"off"},null,512),[[et,r.value.discordId]]),u[17]||(u[17]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),ne(" L'ID Discord de l'utilisateur (visible dans le mode dveloppeur Discord) ")],-1))]),o("div",G4,[u[18]||(u[18]=o("label",{for:"admin-username"},[o("i",{class:"fas fa-user"}),ne(" Nom d'utilisateur (optionnel) ")],-1)),Ie(o("input",{type:"text",id:"admin-username","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.username=c),placeholder:"Ex: JohnDoe#1234",autocomplete:"off"},null,512),[[et,r.value.username]])]),o("div",H4,[u[28]||(u[28]=o("label",{class:"permissions-label"},[o("i",{class:"fas fa-key"}),ne(" Permissions ")],-1)),o("div",z4,[o("label",K4,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[3]||(u[3]=c=>r.value.permissions.menu=c)},null,512),[[fs,r.value.permissions.menu]]),u[19]||(u[19]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-utensils"}),o("span",null,"Carte")],-1))]),o("label",W4,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[4]||(u[4]=c=>r.value.permissions.team=c)},null,512),[[fs,r.value.permissions.team]]),u[20]||(u[20]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-users"}),o("span",null,"quipe")],-1))]),o("label",Q4,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[5]||(u[5]=c=>r.value.permissions.sales=c)},null,512),[[fs,r.value.permissions.sales]]),u[21]||(u[21]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-chart-line"}),o("span",null,"Ventes")],-1))]),o("label",Y4,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[6]||(u[6]=c=>r.value.permissions.history=c)},null,512),[[fs,r.value.permissions.history]]),u[22]||(u[22]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-history"}),o("span",null,"Historique")],-1))]),o("label",J4,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[7]||(u[7]=c=>r.value.permissions.resetSales=c)},null,512),[[fs,r.value.permissions.resetSales]]),u[23]||(u[23]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-redo"}),o("span",null,"Rinit. Ventes")],-1))]),o("label",X4,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[8]||(u[8]=c=>r.value.permissions.bonuses=c)},null,512),[[fs,r.value.permissions.bonuses]]),u[24]||(u[24]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-gift"}),o("span",null,"Primes")],-1))]),o("label",Z4,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[9]||(u[9]=c=>r.value.permissions.employees=c)},null,512),[[fs,r.value.permissions.employees]]),u[25]||(u[25]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-user-tie"}),o("span",null,"Employs")],-1))]),o("label",ek,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[10]||(u[10]=c=>r.value.permissions.ranks=c)},null,512),[[fs,r.value.permissions.ranks]]),u[26]||(u[26]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-star"}),o("span",null,"Grades")],-1))]),o("label",tk,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[11]||(u[11]=c=>r.value.permissions.admins=c)},null,512),[[fs,r.value.permissions.admins]]),u[27]||(u[27]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-shield-alt"}),o("span",null,"Administrateurs")],-1))])])]),o("div",sk,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[12]||(u[12]=c=>a.$emit("close"))},[...u[29]||(u[29]=[o("i",{class:"fas fa-times"},null,-1),ne(" Annuler ",-1)])]),o("button",nk,[u[30]||(u[30]=o("i",{class:"fas fa-check"},null,-1)),ne(" "+j(t.admin?"Modifier":"Ajouter"),1)])])],32)])])]))}},ik=Fe(rk,[["__scopeId","data-v-c449a0e4"]]);const ok={class:"admins-dashboard"},ak={class:"dashboard-header"},lk={class:"header-content"},uk={class:"header-actions"},ck={class:"stats-grid"},dk={class:"stat-card-large primary"},hk={class:"stat-card-content"},fk={class:"stat-info"},pk={class:"stat-value-large"},mk={class:"stat-card-large success"},gk={class:"stat-card-content"},vk={class:"stat-info"},_k={class:"stat-value-large"},yk={class:"stat-card-large info"},Ek={class:"stat-card-content"},bk={class:"stat-info"},Tk={class:"stat-value-large"},Ak={class:"content-section"},Ik={class:"section-header-modern"},wk={class:"section-actions"},Ck={key:0,class:"empty-container"},Sk={key:1,class:"loading-container"},Rk={key:2,class:"empty-container"},Pk={key:3,class:"admins-grid"},kk={class:"card-header-modern"},Vk={class:"card-info"},Dk={class:"card-title"},xk={class:"card-meta"},Nk={class:"permissions-section-modern"},Mk={class:"permissions-grid-modern"},$k={key:0,class:"permission-badge"},Ok={key:1,class:"permission-badge"},Fk={key:2,class:"permission-badge"},Lk={key:3,class:"permission-badge"},Uk={key:4,class:"permission-badge"},Bk={key:5,class:"permission-badge"},jk={key:6,class:"permission-badge"},qk={key:7,class:"permission-badge"},Gk={key:8,class:"permission-badge success"},Hk={class:"card-actions-modern"},zk=["onClick"],Kk=["onClick"],Wk={__name:"AdminsTab",setup(t){const{getAll:e,create:s,update:n,remove:r}=Vn(),i=re([]),a=re(!0),u=re(!1),c=re(null),{confirm:d,alert:f}=kn(),m=ue(()=>localStorage.getItem("isSuperAdmin")==="true"),v=ue(()=>JSON.parse(localStorage.getItem("adminPermissions")||"{}")),E=ue(()=>m.value||v.value.admins===!0),S=ue(()=>i.value.reduce((ee,N)=>{const g=N.permissions||{};return ee+Object.values(g).filter(Boolean).length},0)),k=ue(()=>i.value.filter(ee=>{const N=ee.permissions||{};return Object.values(N).every(y=>y===!0)}).length),M=async()=>{try{a.value=!0,i.value=await e("admins"),a.value=!1}catch(ee){console.error("Erreur lors du chargement:",ee),a.value=!1}},L=async(ee=null)=>{if(!E.value){await f("Vous n'avez pas la permission de grer les administrateurs.",{type:"warning"});return}c.value=ee,u.value=!0},x=()=>{u.value=!1,c.value=null},$=async ee=>{try{const N={discordId:String(ee.discordId),username:ee.username||null,isAdmin:!0,permissions:ee.permissions};c.value?await n("admins",String(c.value.id),N):await s("admins",N),x(),M()}catch(N){console.error("Erreur lors de la sauvegarde:",N),await f("Erreur lors de la sauvegarde",{type:"danger"})}},z=async ee=>{if(!E.value){await f("Vous n'avez pas la permission de supprimer des administrateurs.",{type:"warning"});return}if(await d("tes-vous sr de vouloir supprimer cet administrateur ?",{type:"danger",title:"Supprimer un administrateur",confirmText:"Supprimer"}))try{await r("admins",ee),M()}catch(g){console.error("Erreur lors de la suppression:",g),await f("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{M();const ee=it();Mt(Ge(ee,"admins"),()=>M())}),(ee,N)=>(V(),F("div",ok,[o("div",ak,[o("div",lk,[N[3]||(N[3]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion des Administrateurs"),o("p",{class:"dashboard-subtitle"},"Grez les administrateurs et leurs permissions")],-1)),o("div",uk,[E.value?(V(),F("button",{key:0,onClick:N[0]||(N[0]=g=>L()),class:"btn-action btn-primary-action"},[...N[2]||(N[2]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouvel Admin",-1)])])):he("",!0)])])]),o("div",ck,[o("div",dk,[o("div",hk,[N[5]||(N[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-user-shield"})],-1)),o("div",fk,[N[4]||(N[4]=o("div",{class:"stat-label"},"Total Admins",-1)),o("div",pk,[o("span",null,j(i.value.length),1)])])]),N[6]||(N[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-users"}),o("span",null,"Enregistrs")],-1))]),o("div",mk,[o("div",gk,[N[8]||(N[8]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-key"})],-1)),o("div",vk,[N[7]||(N[7]=o("div",{class:"stat-label"},"Permissions Actives",-1)),o("div",_k,[o("span",null,j(S.value),1)])])]),N[9]||(N[9]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-check-circle"}),o("span",null,"Au total")],-1))]),o("div",yk,[o("div",Ek,[N[11]||(N[11]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-crown"})],-1)),o("div",bk,[N[10]||(N[10]=o("div",{class:"stat-label"},"Super Admins",-1)),o("div",Tk,[o("span",null,j(k.value),1)])])]),N[12]||(N[12]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-star"}),o("span",null,"Accs complet")],-1))])]),o("div",Ak,[o("div",Ik,[N[14]||(N[14]=o("div",null,[o("h2",{class:"section-title"},"Administrateurs"),o("p",{class:"section-description"},"Grez les administrateurs et leurs permissions")],-1)),o("div",wk,[E.value?(V(),F("button",{key:0,onClick:N[1]||(N[1]=g=>L()),class:"btn-icon-text"},[...N[13]||(N[13]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])):he("",!0)])]),E.value?a.value?(V(),F("div",Sk,[...N[16]||(N[16]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):i.value.length===0?(V(),F("div",Rk,[...N[17]||(N[17]=[o("i",{class:"fas fa-user-shield"},null,-1),o("p",null,"Aucun administrateur enregistr",-1)])])):(V(),F("div",Pk,[(V(!0),F(we,null,Ye(i.value,g=>(V(),F("div",{key:g.id,class:"admin-card-modern"},[o("div",kk,[N[19]||(N[19]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-user-shield"})],-1)),o("div",Vk,[o("h3",Dk,j(g.username||g.discordId||"Admin"),1),o("div",xk,[N[18]||(N[18]=o("i",{class:"fab fa-discord"},null,-1)),o("span",null,j(g.discordId),1)])])]),o("div",Nk,[N[29]||(N[29]=o("div",{class:"permissions-label"},[o("i",{class:"fas fa-key"}),ne(" Permissions ")],-1)),o("div",Mk,[(g.permissions||{}).menu?(V(),F("span",$k,[...N[20]||(N[20]=[o("i",{class:"fas fa-utensils"},null,-1),ne(" Carte ",-1)])])):he("",!0),(g.permissions||{}).team?(V(),F("span",Ok,[...N[21]||(N[21]=[o("i",{class:"fas fa-users"},null,-1),ne(" quipe ",-1)])])):he("",!0),(g.permissions||{}).sales?(V(),F("span",Fk,[...N[22]||(N[22]=[o("i",{class:"fas fa-chart-line"},null,-1),ne(" Ventes ",-1)])])):he("",!0),(g.permissions||{}).history?(V(),F("span",Lk,[...N[23]||(N[23]=[o("i",{class:"fas fa-clock"},null,-1),ne(" Historique ",-1)])])):he("",!0),(g.permissions||{}).resetSales?(V(),F("span",Uk,[...N[24]||(N[24]=[o("i",{class:"fas fa-redo"},null,-1),ne(" Rinit. Ventes ",-1)])])):he("",!0),(g.permissions||{}).bonuses?(V(),F("span",Bk,[...N[25]||(N[25]=[o("i",{class:"fas fa-gift"},null,-1),ne(" Primes ",-1)])])):he("",!0),(g.permissions||{}).employees?(V(),F("span",jk,[...N[26]||(N[26]=[o("i",{class:"fas fa-user-tie"},null,-1),ne(" Employs ",-1)])])):he("",!0),(g.permissions||{}).ranks?(V(),F("span",qk,[...N[27]||(N[27]=[o("i",{class:"fas fa-star"},null,-1),ne(" Grades ",-1)])])):he("",!0),(g.permissions||{}).admins?(V(),F("span",Gk,[...N[28]||(N[28]=[o("i",{class:"fas fa-crown"},null,-1),ne(" Admins ",-1)])])):he("",!0)])]),o("div",Hk,[o("button",{onClick:y=>L(g),class:"btn-card-action"},[...N[30]||(N[30]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,zk),o("button",{onClick:y=>z(g.id),class:"btn-card-action danger"},[...N[31]||(N[31]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,Kk)])]))),128))])):(V(),F("div",Ck,[...N[15]||(N[15]=[o("i",{class:"fas fa-lock"},null,-1),o("p",null,"Vous n'avez pas les permissions pour grer les administrateurs.",-1)])]))]),u.value&&E.value?(V(),Le(ik,{key:0,admin:c.value,onClose:x,onSave:$},null,8,["admin"])):he("",!0)]))}},Qk=Fe(Wk,[["__scopeId","data-v-defd981a"]]);const Yk={class:"confirm-container"},Jk={class:"confirm-title"},Xk={class:"confirm-message"},Zk={class:"confirm-actions"},eV={__name:"ConfirmModal",props:{title:{type:String,default:"Confirmation"},message:{type:String,required:!0},confirmText:{type:String,default:"Confirmer"},cancelText:{type:String,default:"Annuler"},type:{type:String,default:"warning",validator:t=>["warning","danger","info","success"].includes(t)}},emits:["confirm","cancel"],setup(t,{emit:e}){const s=t,n=e,r={warning:"fas fa-exclamation-triangle",danger:"fas fa-exclamation-circle",info:"fas fa-info-circle",success:"fas fa-check-circle"},i=ue(()=>r[s.type]||r.warning),a=ue(()=>`icon-${s.type}`),u=ue(()=>s.type==="danger"?"fas fa-trash":(s.type==="success","fas fa-check")),c=ue(()=>s.type==="danger"?"btn-danger":s.type==="success"?"btn-success":"btn-primary"),d=()=>{n("confirm")},f=()=>{n("cancel")};return(m,v)=>(V(),Le(Ls,{to:"body"},[o("div",{class:"confirm-overlay",onClick:He(f,["self"])},[o("div",Yk,[o("div",{class:je(["confirm-icon",a.value])},[o("i",{class:je(i.value)},null,2)],2),o("h3",Jk,j(t.title),1),o("p",Xk,j(t.message),1),o("div",Zk,[t.cancelText?(V(),F("button",{key:0,onClick:f,class:"btn btn-cancel"},[v[0]||(v[0]=o("i",{class:"fas fa-times"},null,-1)),ne(" "+j(t.cancelText),1)])):he("",!0),o("button",{onClick:d,class:je(["btn btn-confirm",c.value])},[o("i",{class:je(u.value)},null,2),ne(" "+j(t.confirmText),1)],2)])])])]))}},tV=Fe(eV,[["__scopeId","data-v-74b83c62"]]),sV={__name:"ConfirmDialog",setup(t){const{showConfirm:e,confirmConfig:s}=kn(),n=()=>{s.value.onConfirm&&s.value.onConfirm()},r=()=>{s.value.onCancel?s.value.onCancel():s.value.cancelText||s.value.onConfirm&&s.value.onConfirm()};return(i,a)=>pt(e)?(V(),Le(tV,{key:0,title:pt(s).title,message:pt(s).message,confirmText:pt(s).confirmText,cancelText:pt(s).cancelText,type:pt(s).type,onConfirm:n,onCancel:r},null,8,["title","message","confirmText","cancelText","type"])):he("",!0)}};const nV={class:"admin-panel"},rV={class:"admin-main"},iV={class:"content-wrapper"},oV={__name:"AdminPanel",props:{user:Object},emits:["logout"],setup(t,{emit:e}){wi();const s=re("menu"),n=re(null),r=re(!1),i=ue(()=>{const u={},c=localStorage.getItem("adminPermissions");if(c)try{return JSON.parse(c)}catch{return{}}return u}),a=u=>localStorage.getItem("isSuperAdmin")==="true"?!0:i.value[u]===!0;return es(()=>{var u;return(u=n.value)==null?void 0:u.collapsed},u=>{r.value=u||!1},{immediate:!0}),Ct(()=>{const u=["menu","team","sales","history","employees","ranks","admins"];for(const c of u)if(a(c)){s.value=c;break}}),(u,c)=>(V(),F("div",nV,[Xe(qA,{activeTab:s.value,permissions:i.value,user:t.user,onTabChange:c[0]||(c[0]=d=>s.value=d),onLogout:c[1]||(c[1]=d=>u.$emit("logout")),ref_key:"sidebarRef",ref:n},null,8,["activeTab","permissions","user"]),o("div",{class:je(["admin-content",{"sidebar-collapsed":r.value}])},[Xe(QA,{activeTab:s.value},null,8,["activeTab"]),o("main",rV,[o("div",iV,[s.value==="menu"&&a("menu")?(V(),Le(ww,{key:0})):he("",!0),s.value==="team"&&a("team")?(V(),Le(A2,{key:1})):he("",!0),s.value==="sales"&&a("sales")?(V(),Le(HS,{key:2})):he("",!0),s.value==="history"&&a("history")?(V(),Le(ZR,{key:3})):he("",!0),s.value==="employees"&&a("employees")?(V(),Le(KP,{key:4})):he("",!0),s.value==="ranks"&&a("ranks")?(V(),Le(F4,{key:5})):he("",!0),s.value==="admins"&&a("admins")?(V(),Le(Qk,{key:6})):he("",!0)])])],2),Xe(sV)]))}},aV=Fe(oV,[["__scopeId","data-v-c281c530"]]);const lV={class:"admin-page"},uV={__name:"Admin",setup(t){const{user:e,isAdmin:s,checkAuth:n,loginWithDiscord:r,logout:i}=wi(),a=re(!1);Ct(async()=>{const d=await n();a.value=d&&s.value});const u=()=>{r()},c=()=>{i(),a.value=!1};return(d,f)=>(V(),F("div",lV,[a.value?(V(),Le(aV,{key:1,user:pt(e),onLogout:c},null,8,["user"])):(V(),Le(IA,{key:0,onLogin:u}))]))}},cV=Fe(uV,[["__scopeId","data-v-1999b6a0"]]),dV=[{path:"/",component:Dh},{path:"/index.html",component:Dh},{path:"/admin.html",component:cV}],hV=xy({history:dy(),routes:dV});Vm();T_(C_).use(hV).mount("#app");
