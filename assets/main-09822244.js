(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Fl(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return s=>s in e}const qe={},Gn=[],as=()=>{},Nh=()=>!1,Oo=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Ll=t=>t.startsWith("onUpdate:"),vt=Object.assign,Ul=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},sg=Object.prototype.hasOwnProperty,Oe=(t,e)=>sg.call(t,e),ve=Array.isArray,Hn=t=>pi(t)==="[object Map]",ur=t=>pi(t)==="[object Set]",Lc=t=>pi(t)==="[object Date]",Ae=t=>typeof t=="function",lt=t=>typeof t=="string",_s=t=>typeof t=="symbol",ze=t=>t!==null&&typeof t=="object",Mh=t=>(ze(t)||Ae(t))&&Ae(t.then)&&Ae(t.catch),$h=Object.prototype.toString,pi=t=>$h.call(t),ng=t=>pi(t).slice(8,-1),Oh=t=>pi(t)==="[object Object]",Bl=t=>lt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Fr=Fl(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fo=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},rg=/-\w/g,is=Fo(t=>t.replace(rg,e=>e.slice(1).toUpperCase())),ig=/\B([A-Z])/g,Sn=Fo(t=>t.replace(ig,"-$1").toLowerCase()),Lo=Fo(t=>t.charAt(0).toUpperCase()+t.slice(1)),ka=Fo(t=>t?`on${Lo(t)}`:""),Xs=(t,e)=>!Object.is(t,e),eo=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},Fh=(t,e,s,n=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:n,value:s})},Uo=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let Uc;const Bo=()=>Uc||(Uc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jl(t){if(ve(t)){const e={};for(let s=0;s<t.length;s++){const n=t[s],r=lt(n)?ug(n):jl(n);if(r)for(const i in r)e[i]=r[i]}return e}else if(lt(t)||ze(t))return t}const og=/;(?![^(]*\))/g,ag=/:([^]+)/,lg=/\/\*[^]*?\*\//g;function ug(t){const e={};return t.replace(lg,"").split(og).forEach(s=>{if(s){const n=s.split(ag);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function xe(t){let e="";if(lt(t))e=t;else if(ve(t))for(let s=0;s<t.length;s++){const n=xe(t[s]);n&&(e+=n+" ")}else if(ze(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const cg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dg=Fl(cg);function Lh(t){return!!t||t===""}function hg(t,e){if(t.length!==e.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=mi(t[n],e[n]);return s}function mi(t,e){if(t===e)return!0;let s=Lc(t),n=Lc(e);if(s||n)return s&&n?t.getTime()===e.getTime():!1;if(s=_s(t),n=_s(e),s||n)return t===e;if(s=ve(t),n=ve(e),s||n)return s&&n?hg(t,e):!1;if(s=ze(t),n=ze(e),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,i=Object.keys(e).length;if(r!==i)return!1;for(const a in t){const u=t.hasOwnProperty(a),c=e.hasOwnProperty(a);if(u&&!c||!u&&c||!mi(t[a],e[a]))return!1}}return String(t)===String(e)}function ql(t,e){return t.findIndex(s=>mi(s,e))}const Uh=t=>!!(t&&t.__v_isRef===!0),j=t=>lt(t)?t:t==null?"":ve(t)||ze(t)&&(t.toString===$h||!Ae(t.toString))?Uh(t)?j(t.value):JSON.stringify(t,Bh,2):String(t),Bh=(t,e)=>Uh(e)?Bh(t,e.value):Hn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((s,[n,r],i)=>(s[Va(n,i)+" =>"]=r,s),{})}:ur(e)?{[`Set(${e.size})`]:[...e.values()].map(s=>Va(s))}:_s(e)?Va(e):ze(e)&&!ve(e)&&!Oh(e)?String(e):e,Va=(t,e="")=>{var s;return _s(t)?`Symbol(${(s=t.description)!=null?s:e})`:t};/**
* @vue/reactivity v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zt;class fg{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=zt,!e&&zt&&(this.index=(zt.scopes||(zt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].pause();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,s;if(this.scopes)for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].resume();for(e=0,s=this.effects.length;e<s;e++)this.effects[e].resume()}}run(e){if(this._active){const s=zt;try{return zt=this,e()}finally{zt=s}}}on(){++this._on===1&&(this.prevScope=zt,zt=this)}off(){this._on>0&&--this._on===0&&(zt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function pg(){return zt}let Qe;const Da=new WeakSet;class jh{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,zt&&zt.active&&zt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Da.has(this)&&(Da.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Bc(this),Hh(this);const e=Qe,s=ls;Qe=this,ls=!0;try{return this.fn()}finally{zh(this),Qe=e,ls=s,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)zl(e);this.deps=this.depsTail=void 0,Bc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Da.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Za(this)&&this.run()}get dirty(){return Za(this)}}let qh=0,Lr,Ur;function Gh(t,e=!1){if(t.flags|=8,e){t.next=Ur,Ur=t;return}t.next=Lr,Lr=t}function Gl(){qh++}function Hl(){if(--qh>0)return;if(Ur){let e=Ur;for(Ur=void 0;e;){const s=e.next;e.next=void 0,e.flags&=-9,e=s}}let t;for(;Lr;){let e=Lr;for(Lr=void 0;e;){const s=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(n){t||(t=n)}e=s}}if(t)throw t}function Hh(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function zh(t){let e,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),zl(n),mg(n)):e=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=e,t.depsTail=s}function Za(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Kh(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Kh(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Jr)||(t.globalVersion=Jr,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Za(t))))return;t.flags|=2;const e=t.dep,s=Qe,n=ls;Qe=t,ls=!0;try{Hh(t);const r=t.fn(t._value);(e.version===0||Xs(r,t._value))&&(t.flags|=128,t._value=r,e.version++)}catch(r){throw e.version++,r}finally{Qe=s,ls=n,zh(t),t.flags&=-3}}function zl(t,e=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)zl(i,!0)}!e&&!--s.sc&&s.map&&s.map.delete(s.key)}function mg(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}let ls=!0;const Wh=[];function Ds(){Wh.push(ls),ls=!1}function xs(){const t=Wh.pop();ls=t===void 0?!0:t}function Bc(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const s=Qe;Qe=void 0;try{e()}finally{Qe=s}}}let Jr=0;class gg{constructor(e,s){this.sub=e,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Kl{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!Qe||!ls||Qe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==Qe)s=this.activeLink=new gg(Qe,this),Qe.deps?(s.prevDep=Qe.depsTail,Qe.depsTail.nextDep=s,Qe.depsTail=s):Qe.deps=Qe.depsTail=s,Qh(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=Qe.depsTail,s.nextDep=void 0,Qe.depsTail.nextDep=s,Qe.depsTail=s,Qe.deps===s&&(Qe.deps=n)}return s}trigger(e){this.version++,Jr++,this.notify(e)}notify(e){Gl();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Hl()}}}function Qh(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let n=e.deps;n;n=n.nextDep)Qh(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const el=new WeakMap,bn=Symbol(""),tl=Symbol(""),Xr=Symbol("");function Dt(t,e,s){if(ls&&Qe){let n=el.get(t);n||el.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new Kl),r.map=n,r.key=s),r.track()}}function Ss(t,e,s,n,r,i){const a=el.get(t);if(!a){Jr++;return}const u=c=>{c&&c.trigger()};if(Gl(),e==="clear")a.forEach(u);else{const c=ve(t),d=c&&Bl(s);if(c&&s==="length"){const f=Number(n);a.forEach((m,v)=>{(v==="length"||v===Xr||!_s(v)&&v>=f)&&u(m)})}else switch((s!==void 0||a.has(void 0))&&u(a.get(s)),d&&u(a.get(Xr)),e){case"add":c?d&&u(a.get("length")):(u(a.get(bn)),Hn(t)&&u(a.get(tl)));break;case"delete":c||(u(a.get(bn)),Hn(t)&&u(a.get(tl)));break;case"set":Hn(t)&&u(a.get(bn));break}}Hl()}function On(t){const e=$e(t);return e===t?e:(Dt(e,"iterate",Xr),ns(t)?e:e.map(us))}function jo(t){return Dt(t=$e(t),"iterate",Xr),t}function zs(t,e){return Ns(t)?An(t)?Yn(us(e)):Yn(e):us(e)}const vg={__proto__:null,[Symbol.iterator](){return xa(this,Symbol.iterator,t=>zs(this,t))},concat(...t){return On(this).concat(...t.map(e=>ve(e)?On(e):e))},entries(){return xa(this,"entries",t=>(t[1]=zs(this,t[1]),t))},every(t,e){return Is(this,"every",t,e,void 0,arguments)},filter(t,e){return Is(this,"filter",t,e,s=>s.map(n=>zs(this,n)),arguments)},find(t,e){return Is(this,"find",t,e,s=>zs(this,s),arguments)},findIndex(t,e){return Is(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Is(this,"findLast",t,e,s=>zs(this,s),arguments)},findLastIndex(t,e){return Is(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Is(this,"forEach",t,e,void 0,arguments)},includes(...t){return Na(this,"includes",t)},indexOf(...t){return Na(this,"indexOf",t)},join(t){return On(this).join(t)},lastIndexOf(...t){return Na(this,"lastIndexOf",t)},map(t,e){return Is(this,"map",t,e,void 0,arguments)},pop(){return Rr(this,"pop")},push(...t){return Rr(this,"push",t)},reduce(t,...e){return jc(this,"reduce",t,e)},reduceRight(t,...e){return jc(this,"reduceRight",t,e)},shift(){return Rr(this,"shift")},some(t,e){return Is(this,"some",t,e,void 0,arguments)},splice(...t){return Rr(this,"splice",t)},toReversed(){return On(this).toReversed()},toSorted(t){return On(this).toSorted(t)},toSpliced(...t){return On(this).toSpliced(...t)},unshift(...t){return Rr(this,"unshift",t)},values(){return xa(this,"values",t=>zs(this,t))}};function xa(t,e,s){const n=jo(t),r=n[e]();return n!==t&&!ns(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=s(i.value)),i}),r}const _g=Array.prototype;function Is(t,e,s,n,r,i){const a=jo(t),u=a!==t&&!ns(t),c=a[e];if(c!==_g[e]){const m=c.apply(t,i);return u?us(m):m}let d=s;a!==t&&(u?d=function(m,v){return s.call(this,zs(t,m),v,t)}:s.length>2&&(d=function(m,v){return s.call(this,m,v,t)}));const f=c.call(a,d,n);return u&&r?r(f):f}function jc(t,e,s,n){const r=jo(t);let i=s;return r!==t&&(ns(t)?s.length>3&&(i=function(a,u,c){return s.call(this,a,u,c,t)}):i=function(a,u,c){return s.call(this,a,zs(t,u),c,t)}),r[e](i,...n)}function Na(t,e,s){const n=$e(t);Dt(n,"iterate",Xr);const r=n[e](...s);return(r===-1||r===!1)&&Yl(s[0])?(s[0]=$e(s[0]),n[e](...s)):r}function Rr(t,e,s=[]){Ds(),Gl();const n=$e(t)[e].apply(t,s);return Hl(),xs(),n}const yg=Fl("__proto__,__v_isRef,__isVue"),Yh=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(_s));function Eg(t){_s(t)||(t=String(t));const e=$e(this);return Dt(e,"has",t),e.hasOwnProperty(t)}class Jh{constructor(e=!1,s=!1){this._isReadonly=e,this._isShallow=s}get(e,s,n){if(s==="__v_skip")return e.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?kg:tf:i?ef:Zh).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const a=ve(e);if(!r){let c;if(a&&(c=vg[s]))return c;if(s==="hasOwnProperty")return Eg}const u=Reflect.get(e,s,$t(e)?e:n);if((_s(s)?Yh.has(s):yg(s))||(r||Dt(e,"get",s),i))return u;if($t(u)){const c=a&&Bl(s)?u:u.value;return r&&ze(c)?nl(c):c}return ze(u)?r?nl(u):qo(u):u}}class Xh extends Jh{constructor(e=!1){super(!1,e)}set(e,s,n,r){let i=e[s];const a=ve(e)&&Bl(s);if(!this._isShallow){const d=Ns(i);if(!ns(n)&&!Ns(n)&&(i=$e(i),n=$e(n)),!a&&$t(i)&&!$t(n))return d||(i.value=n),!0}const u=a?Number(s)<e.length:Oe(e,s),c=Reflect.set(e,s,n,$t(e)?e:r);return e===$e(r)&&(u?Xs(n,i)&&Ss(e,"set",s,n):Ss(e,"add",s,n)),c}deleteProperty(e,s){const n=Oe(e,s);e[s];const r=Reflect.deleteProperty(e,s);return r&&n&&Ss(e,"delete",s,void 0),r}has(e,s){const n=Reflect.has(e,s);return(!_s(s)||!Yh.has(s))&&Dt(e,"has",s),n}ownKeys(e){return Dt(e,"iterate",ve(e)?"length":bn),Reflect.ownKeys(e)}}class bg extends Jh{constructor(e=!1){super(!0,e)}set(e,s){return!0}deleteProperty(e,s){return!0}}const Ag=new Xh,Tg=new bg,Ig=new Xh(!0);const sl=t=>t,ji=t=>Reflect.getPrototypeOf(t);function wg(t,e,s){return function(...n){const r=this.__v_raw,i=$e(r),a=Hn(i),u=t==="entries"||t===Symbol.iterator&&a,c=t==="keys"&&a,d=r[t](...n),f=s?sl:e?Yn:us;return!e&&Dt(i,"iterate",c?tl:bn),{next(){const{value:m,done:v}=d.next();return v?{value:m,done:v}:{value:u?[f(m[0]),f(m[1])]:f(m),done:v}},[Symbol.iterator](){return this}}}}function qi(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Cg(t,e){const s={get(r){const i=this.__v_raw,a=$e(i),u=$e(r);t||(Xs(r,u)&&Dt(a,"get",r),Dt(a,"get",u));const{has:c}=ji(a),d=e?sl:t?Yn:us;if(c.call(a,r))return d(i.get(r));if(c.call(a,u))return d(i.get(u));i!==a&&i.get(r)},get size(){const r=this.__v_raw;return!t&&Dt($e(r),"iterate",bn),r.size},has(r){const i=this.__v_raw,a=$e(i),u=$e(r);return t||(Xs(r,u)&&Dt(a,"has",r),Dt(a,"has",u)),r===u?i.has(r):i.has(r)||i.has(u)},forEach(r,i){const a=this,u=a.__v_raw,c=$e(u),d=e?sl:t?Yn:us;return!t&&Dt(c,"iterate",bn),u.forEach((f,m)=>r.call(i,d(f),d(m),a))}};return vt(s,t?{add:qi("add"),set:qi("set"),delete:qi("delete"),clear:qi("clear")}:{add(r){!e&&!ns(r)&&!Ns(r)&&(r=$e(r));const i=$e(this);return ji(i).has.call(i,r)||(i.add(r),Ss(i,"add",r,r)),this},set(r,i){!e&&!ns(i)&&!Ns(i)&&(i=$e(i));const a=$e(this),{has:u,get:c}=ji(a);let d=u.call(a,r);d||(r=$e(r),d=u.call(a,r));const f=c.call(a,r);return a.set(r,i),d?Xs(i,f)&&Ss(a,"set",r,i):Ss(a,"add",r,i),this},delete(r){const i=$e(this),{has:a,get:u}=ji(i);let c=a.call(i,r);c||(r=$e(r),c=a.call(i,r)),u&&u.call(i,r);const d=i.delete(r);return c&&Ss(i,"delete",r,void 0),d},clear(){const r=$e(this),i=r.size!==0,a=r.clear();return i&&Ss(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=wg(r,t,e)}),s}function Wl(t,e){const s=Cg(t,e);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(Oe(s,r)&&r in n?s:n,r,i)}const Sg={get:Wl(!1,!1)},Rg={get:Wl(!1,!0)},Pg={get:Wl(!0,!1)};const Zh=new WeakMap,ef=new WeakMap,tf=new WeakMap,kg=new WeakMap;function Vg(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Dg(t){return t.__v_skip||!Object.isExtensible(t)?0:Vg(ng(t))}function qo(t){return Ns(t)?t:Ql(t,!1,Ag,Sg,Zh)}function sf(t){return Ql(t,!1,Ig,Rg,ef)}function nl(t){return Ql(t,!0,Tg,Pg,tf)}function Ql(t,e,s,n,r){if(!ze(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=Dg(t);if(i===0)return t;const a=r.get(t);if(a)return a;const u=new Proxy(t,i===2?n:s);return r.set(t,u),u}function An(t){return Ns(t)?An(t.__v_raw):!!(t&&t.__v_isReactive)}function Ns(t){return!!(t&&t.__v_isReadonly)}function ns(t){return!!(t&&t.__v_isShallow)}function Yl(t){return t?!!t.__v_raw:!1}function $e(t){const e=t&&t.__v_raw;return e?$e(e):t}function xg(t){return!Oe(t,"__v_skip")&&Object.isExtensible(t)&&Fh(t,"__v_skip",!0),t}const us=t=>ze(t)?qo(t):t,Yn=t=>ze(t)?nl(t):t;function $t(t){return t?t.__v_isRef===!0:!1}function ne(t){return nf(t,!1)}function Ng(t){return nf(t,!0)}function nf(t,e){return $t(t)?t:new Mg(t,e)}class Mg{constructor(e,s){this.dep=new Kl,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?e:$e(e),this._value=s?e:us(e),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(e){const s=this._rawValue,n=this.__v_isShallow||ns(e)||Ns(e);e=n?e:$e(e),Xs(e,s)&&(this._rawValue=e,this._value=n?e:us(e),this.dep.trigger())}}function pt(t){return $t(t)?t.value:t}const $g={get:(t,e,s)=>e==="__v_raw"?t:pt(Reflect.get(t,e,s)),set:(t,e,s,n)=>{const r=t[e];return $t(r)&&!$t(s)?(r.value=s,!0):Reflect.set(t,e,s,n)}};function rf(t){return An(t)?t:new Proxy(t,$g)}class Og{constructor(e,s,n){this.fn=e,this.setter=s,this._value=void 0,this.dep=new Kl(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Jr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&Qe!==this)return Gh(this,!0),!0}get value(){const e=this.dep.track();return Kh(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function Fg(t,e,s=!1){let n,r;return Ae(t)?n=t:(n=t.get,r=t.set),new Og(n,r,s)}const Gi={},ho=new WeakMap;let vn;function Lg(t,e=!1,s=vn){if(s){let n=ho.get(s);n||ho.set(s,n=[]),n.push(t)}}function Ug(t,e,s=qe){const{immediate:n,deep:r,once:i,scheduler:a,augmentJob:u,call:c}=s,d=z=>r?z:ns(z)||r===!1||r===0?Rs(z,1):Rs(z);let f,m,v,E,S=!1,k=!1;if($t(t)?(m=()=>t.value,S=ns(t)):An(t)?(m=()=>d(t),S=!0):ve(t)?(k=!0,S=t.some(z=>An(z)||ns(z)),m=()=>t.map(z=>{if($t(z))return z.value;if(An(z))return d(z);if(Ae(z))return c?c(z,2):z()})):Ae(t)?e?m=c?()=>c(t,2):t:m=()=>{if(v){Ds();try{v()}finally{xs()}}const z=vn;vn=f;try{return c?c(t,3,[E]):t(E)}finally{vn=z}}:m=as,e&&r){const z=m,ee=r===!0?1/0:r;m=()=>Rs(z(),ee)}const M=pg(),L=()=>{f.stop(),M&&M.active&&Ul(M.effects,f)};if(i&&e){const z=e;e=(...ee)=>{z(...ee),L()}}let x=k?new Array(t.length).fill(Gi):Gi;const $=z=>{if(!(!(f.flags&1)||!f.dirty&&!z))if(e){const ee=f.run();if(r||S||(k?ee.some((N,g)=>Xs(N,x[g])):Xs(ee,x))){v&&v();const N=vn;vn=f;try{const g=[ee,x===Gi?void 0:k&&x[0]===Gi?[]:x,E];x=ee,c?c(e,3,g):e(...g)}finally{vn=N}}}else f.run()};return u&&u($),f=new jh(m),f.scheduler=a?()=>a($,!1):$,E=z=>Lg(z,!1,f),v=f.onStop=()=>{const z=ho.get(f);if(z){if(c)c(z,4);else for(const ee of z)ee();ho.delete(f)}},e?n?$(!0):x=f.run():a?a($.bind(null,!0),!0):f.run(),L.pause=f.pause.bind(f),L.resume=f.resume.bind(f),L.stop=L,L}function Rs(t,e=1/0,s){if(e<=0||!ze(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=e))return t;if(s.set(t,e),e--,$t(t))Rs(t.value,e,s);else if(ve(t))for(let n=0;n<t.length;n++)Rs(t[n],e,s);else if(ur(t)||Hn(t))t.forEach(n=>{Rs(n,e,s)});else if(Oh(t)){for(const n in t)Rs(t[n],e,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&Rs(t[n],e,s)}return t}/**
* @vue/runtime-core v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gi(t,e,s,n){try{return n?t(...n):t()}catch(r){Go(r,e,s)}}function ys(t,e,s,n){if(Ae(t)){const r=gi(t,e,s,n);return r&&Mh(r)&&r.catch(i=>{Go(i,e,s)}),r}if(ve(t)){const r=[];for(let i=0;i<t.length;i++)r.push(ys(t[i],e,s,n));return r}}function Go(t,e,s,n=!0){const r=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=e&&e.appContext.config||qe;if(e){let u=e.parent;const c=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;u;){const f=u.ec;if(f){for(let m=0;m<f.length;m++)if(f[m](t,c,d)===!1)return}u=u.parent}if(i){Ds(),gi(i,null,10,[t,c,d]),xs();return}}Bg(t,s,r,n,a)}function Bg(t,e,s,n=!0,r=!1){if(r)throw t;console.error(t)}const jt=[];let ps=-1;const zn=[];let Ks=null,Ln=0;const of=Promise.resolve();let fo=null;function Jl(t){const e=fo||of;return t?e.then(this?t.bind(this):t):e}function jg(t){let e=ps+1,s=jt.length;for(;e<s;){const n=e+s>>>1,r=jt[n],i=Zr(r);i<t||i===t&&r.flags&2?e=n+1:s=n}return e}function Xl(t){if(!(t.flags&1)){const e=Zr(t),s=jt[jt.length-1];!s||!(t.flags&2)&&e>=Zr(s)?jt.push(t):jt.splice(jg(e),0,t),t.flags|=1,af()}}function af(){fo||(fo=of.then(uf))}function qg(t){ve(t)?zn.push(...t):Ks&&t.id===-1?Ks.splice(Ln+1,0,t):t.flags&1||(zn.push(t),t.flags|=1),af()}function qc(t,e,s=ps+1){for(;s<jt.length;s++){const n=jt[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;jt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function lf(t){if(zn.length){const e=[...new Set(zn)].sort((s,n)=>Zr(s)-Zr(n));if(zn.length=0,Ks){Ks.push(...e);return}for(Ks=e,Ln=0;Ln<Ks.length;Ln++){const s=Ks[Ln];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Ks=null,Ln=0}}const Zr=t=>t.id==null?t.flags&2?-1:1/0:t.id;function uf(t){const e=as;try{for(ps=0;ps<jt.length;ps++){const s=jt[ps];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),gi(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;ps<jt.length;ps++){const s=jt[ps];s&&(s.flags&=-2)}ps=-1,jt.length=0,lf(),fo=null,(jt.length||zn.length)&&uf()}}let Jt=null,cf=null;function po(t){const e=Jt;return Jt=t,cf=t&&t.type.__scopeId||null,e}function Gg(t,e=Jt,s){if(!e||t._n)return t;const n=(...r)=>{n._d&&vo(-1);const i=po(e);let a;try{a=t(...r)}finally{po(i),n._d&&vo(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function Ie(t,e){if(Jt===null)return t;const s=Qo(Jt),n=t.dirs||(t.dirs=[]);for(let r=0;r<e.length;r++){let[i,a,u,c=qe]=e[r];i&&(Ae(i)&&(i={mounted:i,updated:i}),i.deep&&Rs(a),n.push({dir:i,instance:s,value:a,oldValue:void 0,arg:u,modifiers:c}))}return t}function pn(t,e,s,n){const r=t.dirs,i=e&&e.dirs;for(let a=0;a<r.length;a++){const u=r[a];i&&(u.oldValue=i[a].value);let c=u.dir[n];c&&(Ds(),ys(c,s,8,[t.el,u,t,e]),xs())}}function to(t,e){if(Nt){let s=Nt.provides;const n=Nt.parent&&Nt.parent.provides;n===s&&(s=Nt.provides=Object.create(n)),s[t]=e}}function Ps(t,e,s=!1){const n=Gv();if(n||Kn){let r=Kn?Kn._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&Ae(e)?e.call(n&&n.proxy):e}}const Hg=Symbol.for("v-scx"),zg=()=>Ps(Hg);function es(t,e,s){return df(t,e,s)}function df(t,e,s=qe){const{immediate:n,deep:r,flush:i,once:a}=s,u=vt({},s),c=e&&n||!e&&i!=="post";let d;if(ti){if(i==="sync"){const E=zg();d=E.__watcherHandles||(E.__watcherHandles=[])}else if(!c){const E=()=>{};return E.stop=as,E.resume=as,E.pause=as,E}}const f=Nt;u.call=(E,S,k)=>ys(E,f,S,k);let m=!1;i==="post"?u.scheduler=E=>{Ut(E,f&&f.suspense)}:i!=="sync"&&(m=!0,u.scheduler=(E,S)=>{S?E():Xl(E)}),u.augmentJob=E=>{e&&(E.flags|=4),m&&(E.flags|=2,f&&(E.id=f.uid,E.i=f))};const v=Ug(t,e,u);return ti&&(d?d.push(v):c&&v()),v}function Kg(t,e,s){const n=this.proxy,r=lt(t)?t.includes(".")?hf(n,t):()=>n[t]:t.bind(n,n);let i;Ae(e)?i=e:(i=e.handler,s=e);const a=vi(this),u=df(r,i.bind(n),s);return a(),u}function hf(t,e){const s=e.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const ff=Symbol("_vte"),Wg=t=>t.__isTeleport,Br=t=>t&&(t.disabled||t.disabled===""),Gc=t=>t&&(t.defer||t.defer===""),Hc=t=>typeof SVGElement<"u"&&t instanceof SVGElement,zc=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,rl=(t,e)=>{const s=t&&t.to;return lt(s)?e?e(s):null:s},pf={name:"Teleport",__isTeleport:!0,process(t,e,s,n,r,i,a,u,c,d){const{mc:f,pc:m,pbc:v,o:{insert:E,querySelector:S,createText:k,createComment:M}}=d,L=Br(e.props);let{shapeFlag:x,children:$,dynamicChildren:z}=e;if(t==null){const ee=e.el=k(""),N=e.anchor=k("");E(ee,s,n),E(N,s,n);const g=(T,w)=>{x&16&&f($,T,w,r,i,a,u,c)},y=()=>{const T=e.target=rl(e.props,S),w=mf(T,e,k,E);T&&(a!=="svg"&&Hc(T)?a="svg":a!=="mathml"&&zc(T)&&(a="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(T),L||(g(T,w),so(e,!1)))};L&&(g(s,N),so(e,!0)),Gc(e.props)?(e.el.__isMounted=!1,Ut(()=>{y(),delete e.el.__isMounted},i)):y()}else{if(Gc(e.props)&&t.el.__isMounted===!1){Ut(()=>{pf.process(t,e,s,n,r,i,a,u,c,d)},i);return}e.el=t.el,e.targetStart=t.targetStart;const ee=e.anchor=t.anchor,N=e.target=t.target,g=e.targetAnchor=t.targetAnchor,y=Br(t.props),T=y?s:N,w=y?ee:g;if(a==="svg"||Hc(N)?a="svg":(a==="mathml"||zc(N))&&(a="mathml"),z?(v(t.dynamicChildren,z,T,r,i,a,u),nu(t,e,!0)):c||m(t,e,T,w,r,i,a,u,!1),L)y?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Hi(e,s,ee,d,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const b=e.target=rl(e.props,S);b&&Hi(e,b,null,d,0)}else y&&Hi(e,N,g,d,1);so(e,L)}},remove(t,e,s,{um:n,o:{remove:r}},i){const{shapeFlag:a,children:u,anchor:c,targetStart:d,targetAnchor:f,target:m,props:v}=t;if(m&&(r(d),r(f)),i&&r(c),a&16){const E=i||!Br(v);for(let S=0;S<u.length;S++){const k=u[S];n(k,e,s,E,!!k.dynamicChildren)}}},move:Hi,hydrate:Qg};function Hi(t,e,s,{o:{insert:n},m:r},i=2){i===0&&n(t.targetAnchor,e,s);const{el:a,anchor:u,shapeFlag:c,children:d,props:f}=t,m=i===2;if(m&&n(a,e,s),(!m||Br(f))&&c&16)for(let v=0;v<d.length;v++)r(d[v],e,s,2);m&&n(u,e,s)}function Qg(t,e,s,n,r,i,{o:{nextSibling:a,parentNode:u,querySelector:c,insert:d,createText:f}},m){function v(k,M,L,x){M.anchor=m(a(k),M,u(k),s,n,r,i),M.targetStart=L,M.targetAnchor=x}const E=e.target=rl(e.props,c),S=Br(e.props);if(E){const k=E._lpa||E.firstChild;if(e.shapeFlag&16)if(S)v(t,e,k,k&&a(k));else{e.anchor=a(t);let M=k;for(;M;){if(M&&M.nodeType===8){if(M.data==="teleport start anchor")e.targetStart=M;else if(M.data==="teleport anchor"){e.targetAnchor=M,E._lpa=e.targetAnchor&&a(e.targetAnchor);break}}M=a(M)}e.targetAnchor||mf(E,e,f,d),m(k&&a(k),e,E,s,n,r,i)}so(e,S)}else S&&e.shapeFlag&16&&v(t,e,t,a(t));return e.anchor&&a(e.anchor)}const Ls=pf;function so(t,e){const s=t.ctx;if(s&&s.ut){let n,r;for(e?(n=t.el,r=t.anchor):(n=t.targetStart,r=t.targetAnchor);n&&n!==r;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function mf(t,e,s,n){const r=e.targetStart=s(""),i=e.targetAnchor=s("");return r[ff]=i,t&&(n(r,t),n(i,t)),i}const Yg=Symbol("_leaveCb");function Zl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Zl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function gf(t,e){return Ae(t)?(()=>vt({name:t.name},e,{setup:t}))():t}function vf(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const mo=new WeakMap;function jr(t,e,s,n,r=!1){if(ve(t)){t.forEach((S,k)=>jr(S,e&&(ve(e)?e[k]:e),s,n,r));return}if(qr(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&jr(t,e,s,n.component.subTree);return}const i=n.shapeFlag&4?Qo(n.component):n.el,a=r?null:i,{i:u,r:c}=t,d=e&&e.r,f=u.refs===qe?u.refs={}:u.refs,m=u.setupState,v=$e(m),E=m===qe?Nh:S=>Oe(v,S);if(d!=null&&d!==c){if(Kc(e),lt(d))f[d]=null,E(d)&&(m[d]=null);else if($t(d)){d.value=null;const S=e;S.k&&(f[S.k]=null)}}if(Ae(c))gi(c,u,12,[a,f]);else{const S=lt(c),k=$t(c);if(S||k){const M=()=>{if(t.f){const L=S?E(c)?m[c]:f[c]:c.value;if(r)ve(L)&&Ul(L,i);else if(ve(L))L.includes(i)||L.push(i);else if(S)f[c]=[i],E(c)&&(m[c]=f[c]);else{const x=[i];c.value=x,t.k&&(f[t.k]=x)}}else S?(f[c]=a,E(c)&&(m[c]=a)):k&&(c.value=a,t.k&&(f[t.k]=a))};if(a){const L=()=>{M(),mo.delete(t)};L.id=-1,mo.set(t,L),Ut(L,s)}else Kc(t),M()}}}function Kc(t){const e=mo.get(t);e&&(e.flags|=8,mo.delete(t))}Bo().requestIdleCallback;Bo().cancelIdleCallback;const qr=t=>!!t.type.__asyncLoader,_f=t=>t.type.__isKeepAlive;function Jg(t,e){yf(t,"a",e)}function Xg(t,e){yf(t,"da",e)}function yf(t,e,s=Nt){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Ho(e,n,s),s){let r=s.parent;for(;r&&r.parent;)_f(r.parent.vnode)&&Zg(n,e,s,r),r=r.parent}}function Zg(t,e,s,n){const r=Ho(e,t,n,!0);zo(()=>{Ul(n[e],r)},s)}function Ho(t,e,s=Nt,n=!1){if(s){const r=s[t]||(s[t]=[]),i=e.__weh||(e.__weh=(...a)=>{Ds();const u=vi(s),c=ys(e,s,t,a);return u(),xs(),c});return n?r.unshift(i):r.push(i),i}}const Us=t=>(e,s=Nt)=>{(!ti||t==="sp")&&Ho(t,(...n)=>e(...n),s)},ev=Us("bm"),Ct=Us("m"),tv=Us("bu"),sv=Us("u"),nv=Us("bum"),zo=Us("um"),rv=Us("sp"),iv=Us("rtg"),ov=Us("rtc");function av(t,e=Nt){Ho("ec",t,e)}const Ef="components";function lv(t,e){return cv(Ef,t,!0,e)||t}const uv=Symbol.for("v-ndc");function cv(t,e,s=!0,n=!1){const r=Jt||Nt;if(r){const i=r.type;if(t===Ef){const u=Qv(i,!1);if(u&&(u===e||u===is(e)||u===Lo(is(e))))return i}const a=Wc(r[t]||i[t],e)||Wc(r.appContext[t],e);return!a&&n?i:a}}function Wc(t,e){return t&&(t[e]||t[is(e)]||t[Lo(is(e))])}function Ye(t,e,s,n){let r;const i=s&&s[n],a=ve(t);if(a||lt(t)){const u=a&&An(t);let c=!1,d=!1;u&&(c=!ns(t),d=Ns(t),t=jo(t)),r=new Array(t.length);for(let f=0,m=t.length;f<m;f++)r[f]=e(c?d?Yn(us(t[f])):us(t[f]):t[f],f,void 0,i&&i[f])}else if(typeof t=="number"){r=new Array(t);for(let u=0;u<t;u++)r[u]=e(u+1,u,void 0,i&&i[u])}else if(ze(t))if(t[Symbol.iterator])r=Array.from(t,(u,c)=>e(u,c,void 0,i&&i[c]));else{const u=Object.keys(t);r=new Array(u.length);for(let c=0,d=u.length;c<d;c++){const f=u[c];r[c]=e(t[f],f,c,i&&i[c])}}else r=[];return s&&(s[n]=r),r}const il=t=>t?Of(t)?Qo(t):il(t.parent):null,Gr=vt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>il(t.parent),$root:t=>il(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>eu(t),$forceUpdate:t=>t.f||(t.f=()=>{Xl(t.update)}),$nextTick:t=>t.n||(t.n=Jl.bind(t.proxy)),$watch:t=>Kg.bind(t)}),Ma=(t,e)=>t!==qe&&!t.__isScriptSetup&&Oe(t,e),dv={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:a,type:u,appContext:c}=t;if(e[0]!=="$"){const v=a[e];if(v!==void 0)switch(v){case 1:return n[e];case 2:return r[e];case 4:return s[e];case 3:return i[e]}else{if(Ma(n,e))return a[e]=1,n[e];if(r!==qe&&Oe(r,e))return a[e]=2,r[e];if(Oe(i,e))return a[e]=3,i[e];if(s!==qe&&Oe(s,e))return a[e]=4,s[e];ol&&(a[e]=0)}}const d=Gr[e];let f,m;if(d)return e==="$attrs"&&Dt(t.attrs,"get",""),d(t);if((f=u.__cssModules)&&(f=f[e]))return f;if(s!==qe&&Oe(s,e))return a[e]=4,s[e];if(m=c.config.globalProperties,Oe(m,e))return m[e]},set({_:t},e,s){const{data:n,setupState:r,ctx:i}=t;return Ma(r,e)?(r[e]=s,!0):n!==qe&&Oe(n,e)?(n[e]=s,!0):Oe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=s,!0)},has({_:{data:t,setupState:e,accessCache:s,ctx:n,appContext:r,props:i,type:a}},u){let c;return!!(s[u]||t!==qe&&u[0]!=="$"&&Oe(t,u)||Ma(e,u)||Oe(i,u)||Oe(n,u)||Oe(Gr,u)||Oe(r.config.globalProperties,u)||(c=a.__cssModules)&&c[u])},defineProperty(t,e,s){return s.get!=null?t._.accessCache[e]=0:Oe(s,"value")&&this.set(t,e,s.value,null),Reflect.defineProperty(t,e,s)}};function Qc(t){return ve(t)?t.reduce((e,s)=>(e[s]=null,e),{}):t}let ol=!0;function hv(t){const e=eu(t),s=t.proxy,n=t.ctx;ol=!1,e.beforeCreate&&Yc(e.beforeCreate,t,"bc");const{data:r,computed:i,methods:a,watch:u,provide:c,inject:d,created:f,beforeMount:m,mounted:v,beforeUpdate:E,updated:S,activated:k,deactivated:M,beforeDestroy:L,beforeUnmount:x,destroyed:$,unmounted:z,render:ee,renderTracked:N,renderTriggered:g,errorCaptured:y,serverPrefetch:T,expose:w,inheritAttrs:b,components:P,directives:C,filters:Ce}=e;if(d&&fv(d,n,null),a)for(const ae in a){const ge=a[ae];Ae(ge)&&(n[ae]=ge.bind(s))}if(r){const ae=r.call(s,s);ze(ae)&&(t.data=qo(ae))}if(ol=!0,i)for(const ae in i){const ge=i[ae],mt=Ae(ge)?ge.bind(s,s):Ae(ge.get)?ge.get.bind(s,s):as,Gt=!Ae(ge)&&Ae(ge.set)?ge.set.bind(s):as,Ht=ue({get:mt,set:Gt});Object.defineProperty(n,ae,{enumerable:!0,configurable:!0,get:()=>Ht.value,set:Be=>Ht.value=Be})}if(u)for(const ae in u)bf(u[ae],n,s,ae);if(c){const ae=Ae(c)?c.call(s):c;Reflect.ownKeys(ae).forEach(ge=>{to(ge,ae[ge])})}f&&Yc(f,t,"c");function Ke(ae,ge){ve(ge)?ge.forEach(mt=>ae(mt.bind(s))):ge&&ae(ge.bind(s))}if(Ke(ev,m),Ke(Ct,v),Ke(tv,E),Ke(sv,S),Ke(Jg,k),Ke(Xg,M),Ke(av,y),Ke(ov,N),Ke(iv,g),Ke(nv,x),Ke(zo,z),Ke(rv,T),ve(w))if(w.length){const ae=t.exposed||(t.exposed={});w.forEach(ge=>{Object.defineProperty(ae,ge,{get:()=>s[ge],set:mt=>s[ge]=mt,enumerable:!0})})}else t.exposed||(t.exposed={});ee&&t.render===as&&(t.render=ee),b!=null&&(t.inheritAttrs=b),P&&(t.components=P),C&&(t.directives=C),T&&vf(t)}function fv(t,e,s=as){ve(t)&&(t=al(t));for(const n in t){const r=t[n];let i;ze(r)?"default"in r?i=Ps(r.from||n,r.default,!0):i=Ps(r.from||n):i=Ps(r),$t(i)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):e[n]=i}}function Yc(t,e,s){ys(ve(t)?t.map(n=>n.bind(e.proxy)):t.bind(e.proxy),e,s)}function bf(t,e,s,n){let r=n.includes(".")?hf(s,n):()=>s[n];if(lt(t)){const i=e[t];Ae(i)&&es(r,i)}else if(Ae(t))es(r,t.bind(s));else if(ze(t))if(ve(t))t.forEach(i=>bf(i,e,s,n));else{const i=Ae(t.handler)?t.handler.bind(s):e[t.handler];Ae(i)&&es(r,i,t)}}function eu(t){const e=t.type,{mixins:s,extends:n}=e,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,u=i.get(e);let c;return u?c=u:!r.length&&!s&&!n?c=e:(c={},r.length&&r.forEach(d=>go(c,d,a,!0)),go(c,e,a)),ze(e)&&i.set(e,c),c}function go(t,e,s,n=!1){const{mixins:r,extends:i}=e;i&&go(t,i,s,!0),r&&r.forEach(a=>go(t,a,s,!0));for(const a in e)if(!(n&&a==="expose")){const u=pv[a]||s&&s[a];t[a]=u?u(t[a],e[a]):e[a]}return t}const pv={data:Jc,props:Xc,emits:Xc,methods:xr,computed:xr,beforeCreate:Lt,created:Lt,beforeMount:Lt,mounted:Lt,beforeUpdate:Lt,updated:Lt,beforeDestroy:Lt,beforeUnmount:Lt,destroyed:Lt,unmounted:Lt,activated:Lt,deactivated:Lt,errorCaptured:Lt,serverPrefetch:Lt,components:xr,directives:xr,watch:gv,provide:Jc,inject:mv};function Jc(t,e){return e?t?function(){return vt(Ae(t)?t.call(this,this):t,Ae(e)?e.call(this,this):e)}:e:t}function mv(t,e){return xr(al(t),al(e))}function al(t){if(ve(t)){const e={};for(let s=0;s<t.length;s++)e[t[s]]=t[s];return e}return t}function Lt(t,e){return t?[...new Set([].concat(t,e))]:e}function xr(t,e){return t?vt(Object.create(null),t,e):e}function Xc(t,e){return t?ve(t)&&ve(e)?[...new Set([...t,...e])]:vt(Object.create(null),Qc(t),Qc(e??{})):e}function gv(t,e){if(!t)return e;if(!e)return t;const s=vt(Object.create(null),t);for(const n in e)s[n]=Lt(t[n],e[n]);return s}function Af(){return{app:null,config:{isNativeTag:Nh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let vv=0;function _v(t,e){return function(n,r=null){Ae(n)||(n=vt({},n)),r!=null&&!ze(r)&&(r=null);const i=Af(),a=new WeakSet,u=[];let c=!1;const d=i.app={_uid:vv++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:Jv,get config(){return i.config},set config(f){},use(f,...m){return a.has(f)||(f&&Ae(f.install)?(a.add(f),f.install(d,...m)):Ae(f)&&(a.add(f),f(d,...m))),d},mixin(f){return i.mixins.includes(f)||i.mixins.push(f),d},component(f,m){return m?(i.components[f]=m,d):i.components[f]},directive(f,m){return m?(i.directives[f]=m,d):i.directives[f]},mount(f,m,v){if(!c){const E=d._ceVNode||Xe(n,r);return E.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),m&&e?e(E,f):t(E,f,v),c=!0,d._container=f,f.__vue_app__=d,Qo(E.component)}},onUnmount(f){u.push(f)},unmount(){c&&(ys(u,d._instance,16),t(null,d._container),delete d._container.__vue_app__)},provide(f,m){return i.provides[f]=m,d},runWithContext(f){const m=Kn;Kn=d;try{return f()}finally{Kn=m}}};return d}}let Kn=null;const yv=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${is(e)}Modifiers`]||t[`${Sn(e)}Modifiers`];function Ev(t,e,...s){if(t.isUnmounted)return;const n=t.vnode.props||qe;let r=s;const i=e.startsWith("update:"),a=i&&yv(n,e.slice(7));a&&(a.trim&&(r=s.map(f=>lt(f)?f.trim():f)),a.number&&(r=s.map(Uo)));let u,c=n[u=ka(e)]||n[u=ka(is(e))];!c&&i&&(c=n[u=ka(Sn(e))]),c&&ys(c,t,6,r);const d=n[u+"Once"];if(d){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,ys(d,t,6,r)}}const bv=new WeakMap;function Tf(t,e,s=!1){const n=s?bv:e.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let a={},u=!1;if(!Ae(t)){const c=d=>{const f=Tf(d,e,!0);f&&(u=!0,vt(a,f))};!s&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}return!i&&!u?(ze(t)&&n.set(t,null),null):(ve(i)?i.forEach(c=>a[c]=null):vt(a,i),ze(t)&&n.set(t,a),a)}function Ko(t,e){return!t||!Oo(e)?!1:(e=e.slice(2).replace(/Once$/,""),Oe(t,e[0].toLowerCase()+e.slice(1))||Oe(t,Sn(e))||Oe(t,e))}function $a(t){const{type:e,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:a,attrs:u,emit:c,render:d,renderCache:f,props:m,data:v,setupState:E,ctx:S,inheritAttrs:k}=t,M=po(t);let L,x;try{if(s.shapeFlag&4){const z=r||n,ee=z;L=ms(d.call(ee,z,f,m,E,v,S)),x=u}else{const z=e;L=ms(z.length>1?z(m,{attrs:u,slots:a,emit:c}):z(m,null)),x=e.props?u:Av(u)}}catch(z){Hr.length=0,Go(z,t,1),L=Xe(sn)}let $=L;if(x&&k!==!1){const z=Object.keys(x),{shapeFlag:ee}=$;z.length&&ee&7&&(i&&z.some(Ll)&&(x=Tv(x,i)),$=Jn($,x,!1,!0))}return s.dirs&&($=Jn($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(s.dirs):s.dirs),s.transition&&Zl($,s.transition),L=$,po(M),L}const Av=t=>{let e;for(const s in t)(s==="class"||s==="style"||Oo(s))&&((e||(e={}))[s]=t[s]);return e},Tv=(t,e)=>{const s={};for(const n in t)(!Ll(n)||!(n.slice(9)in e))&&(s[n]=t[n]);return s};function Iv(t,e,s){const{props:n,children:r,component:i}=t,{props:a,children:u,patchFlag:c}=e,d=i.emitsOptions;if(e.dirs||e.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return n?Zc(n,a,d):!!a;if(c&8){const f=e.dynamicProps;for(let m=0;m<f.length;m++){const v=f[m];if(a[v]!==n[v]&&!Ko(d,v))return!0}}}else return(r||u)&&(!u||!u.$stable)?!0:n===a?!1:n?a?Zc(n,a,d):!0:!!a;return!1}function Zc(t,e,s){const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(e[i]!==t[i]&&!Ko(s,i))return!0}return!1}function wv({vnode:t,parent:e},s){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=e.vnode).el=s,e=e.parent;else break}}const If={},wf=()=>Object.create(If),Cf=t=>Object.getPrototypeOf(t)===If;function Cv(t,e,s,n=!1){const r={},i=wf();t.propsDefaults=Object.create(null),Sf(t,e,r,i);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);s?t.props=n?r:sf(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Sv(t,e,s,n){const{props:r,attrs:i,vnode:{patchFlag:a}}=t,u=$e(r),[c]=t.propsOptions;let d=!1;if((n||a>0)&&!(a&16)){if(a&8){const f=t.vnode.dynamicProps;for(let m=0;m<f.length;m++){let v=f[m];if(Ko(t.emitsOptions,v))continue;const E=e[v];if(c)if(Oe(i,v))E!==i[v]&&(i[v]=E,d=!0);else{const S=is(v);r[S]=ll(c,u,S,E,t,!1)}else E!==i[v]&&(i[v]=E,d=!0)}}}else{Sf(t,e,r,i)&&(d=!0);let f;for(const m in u)(!e||!Oe(e,m)&&((f=Sn(m))===m||!Oe(e,f)))&&(c?s&&(s[m]!==void 0||s[f]!==void 0)&&(r[m]=ll(c,u,m,void 0,t,!0)):delete r[m]);if(i!==u)for(const m in i)(!e||!Oe(e,m))&&(delete i[m],d=!0)}d&&Ss(t.attrs,"set","")}function Sf(t,e,s,n){const[r,i]=t.propsOptions;let a=!1,u;if(e)for(let c in e){if(Fr(c))continue;const d=e[c];let f;r&&Oe(r,f=is(c))?!i||!i.includes(f)?s[f]=d:(u||(u={}))[f]=d:Ko(t.emitsOptions,c)||(!(c in n)||d!==n[c])&&(n[c]=d,a=!0)}if(i){const c=$e(s),d=u||qe;for(let f=0;f<i.length;f++){const m=i[f];s[m]=ll(r,c,m,d[m],t,!Oe(d,m))}}return a}function ll(t,e,s,n,r,i){const a=t[s];if(a!=null){const u=Oe(a,"default");if(u&&n===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&Ae(c)){const{propsDefaults:d}=r;if(s in d)n=d[s];else{const f=vi(r);n=d[s]=c.call(null,e),f()}}else n=c;r.ce&&r.ce._setProp(s,n)}a[0]&&(i&&!u?n=!1:a[1]&&(n===""||n===Sn(s))&&(n=!0))}return n}const Rv=new WeakMap;function Rf(t,e,s=!1){const n=s?Rv:e.propsCache,r=n.get(t);if(r)return r;const i=t.props,a={},u=[];let c=!1;if(!Ae(t)){const f=m=>{c=!0;const[v,E]=Rf(m,e,!0);vt(a,v),E&&u.push(...E)};!s&&e.mixins.length&&e.mixins.forEach(f),t.extends&&f(t.extends),t.mixins&&t.mixins.forEach(f)}if(!i&&!c)return ze(t)&&n.set(t,Gn),Gn;if(ve(i))for(let f=0;f<i.length;f++){const m=is(i[f]);ed(m)&&(a[m]=qe)}else if(i)for(const f in i){const m=is(f);if(ed(m)){const v=i[f],E=a[m]=ve(v)||Ae(v)?{type:v}:vt({},v),S=E.type;let k=!1,M=!0;if(ve(S))for(let L=0;L<S.length;++L){const x=S[L],$=Ae(x)&&x.name;if($==="Boolean"){k=!0;break}else $==="String"&&(M=!1)}else k=Ae(S)&&S.name==="Boolean";E[0]=k,E[1]=M,(k||Oe(E,"default"))&&u.push(m)}}const d=[a,u];return ze(t)&&n.set(t,d),d}function ed(t){return t[0]!=="$"&&!Fr(t)}const tu=t=>t==="_"||t==="_ctx"||t==="$stable",su=t=>ve(t)?t.map(ms):[ms(t)],Pv=(t,e,s)=>{if(e._n)return e;const n=Gg((...r)=>su(e(...r)),s);return n._c=!1,n},Pf=(t,e,s)=>{const n=t._ctx;for(const r in t){if(tu(r))continue;const i=t[r];if(Ae(i))e[r]=Pv(r,i,n);else if(i!=null){const a=su(i);e[r]=()=>a}}},kf=(t,e)=>{const s=su(e);t.slots.default=()=>s},Vf=(t,e,s)=>{for(const n in e)(s||!tu(n))&&(t[n]=e[n])},kv=(t,e,s)=>{const n=t.slots=wf();if(t.vnode.shapeFlag&32){const r=e._;r?(Vf(n,e,s),s&&Fh(n,"_",r,!0)):Pf(e,n)}else e&&kf(t,e)},Vv=(t,e,s)=>{const{vnode:n,slots:r}=t;let i=!0,a=qe;if(n.shapeFlag&32){const u=e._;u?s&&u===1?i=!1:Vf(r,e,s):(i=!e.$stable,Pf(e,r)),a=e}else e&&(kf(t,e),a={default:1});if(i)for(const u in r)!tu(u)&&a[u]==null&&delete r[u]},Ut=$v;function Dv(t){return xv(t)}function xv(t,e){const s=Bo();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:u,createComment:c,setText:d,setElementText:f,parentNode:m,nextSibling:v,setScopeId:E=as,insertStaticContent:S}=t,k=(I,R,U,Y=null,D=null,A=null,G=void 0,W=null,J=!!R.dynamicChildren)=>{if(I===R)return;I&&!Pr(I,R)&&(Y=K(I),Be(I,D,A,!0),I=null),R.patchFlag===-2&&(J=!1,R.dynamicChildren=null);const{type:H,ref:te,shapeFlag:B}=R;switch(H){case Wo:M(I,R,U,Y);break;case sn:L(I,R,U,Y);break;case no:I==null&&x(R,U,Y,G);break;case we:P(I,R,U,Y,D,A,G,W,J);break;default:B&1?ee(I,R,U,Y,D,A,G,W,J):B&6?C(I,R,U,Y,D,A,G,W,J):(B&64||B&128)&&H.process(I,R,U,Y,D,A,G,W,J,ce)}te!=null&&D?jr(te,I&&I.ref,A,R||I,!R):te==null&&I&&I.ref!=null&&jr(I.ref,null,A,I,!0)},M=(I,R,U,Y)=>{if(I==null)n(R.el=u(R.children),U,Y);else{const D=R.el=I.el;R.children!==I.children&&d(D,R.children)}},L=(I,R,U,Y)=>{I==null?n(R.el=c(R.children||""),U,Y):R.el=I.el},x=(I,R,U,Y)=>{[I.el,I.anchor]=S(I.children,R,U,Y,I.el,I.anchor)},$=({el:I,anchor:R},U,Y)=>{let D;for(;I&&I!==R;)D=v(I),n(I,U,Y),I=D;n(R,U,Y)},z=({el:I,anchor:R})=>{let U;for(;I&&I!==R;)U=v(I),r(I),I=U;r(R)},ee=(I,R,U,Y,D,A,G,W,J)=>{if(R.type==="svg"?G="svg":R.type==="math"&&(G="mathml"),I==null)N(R,U,Y,D,A,G,W,J);else{const H=I.el&&I.el._isVueCE?I.el:null;try{H&&H._beginPatch(),T(I,R,D,A,G,W,J)}finally{H&&H._endPatch()}}},N=(I,R,U,Y,D,A,G,W)=>{let J,H;const{props:te,shapeFlag:B,transition:Z,dirs:fe}=I;if(J=I.el=a(I.type,A,te&&te.is,te),B&8?f(J,I.children):B&16&&y(I.children,J,null,Y,D,Oa(I,A),G,W),fe&&pn(I,null,Y,"created"),g(J,I,I.scopeId,G,Y),te){for(const Te in te)Te!=="value"&&!Fr(Te)&&i(J,Te,null,te[Te],A,Y);"value"in te&&i(J,"value",null,te.value,A),(H=te.onVnodeBeforeMount)&&hs(H,Y,I)}fe&&pn(I,null,Y,"beforeMount");const me=Nv(D,Z);me&&Z.beforeEnter(J),n(J,R,U),((H=te&&te.onVnodeMounted)||me||fe)&&Ut(()=>{H&&hs(H,Y,I),me&&Z.enter(J),fe&&pn(I,null,Y,"mounted")},D)},g=(I,R,U,Y,D)=>{if(U&&E(I,U),Y)for(let A=0;A<Y.length;A++)E(I,Y[A]);if(D){let A=D.subTree;if(R===A||Nf(A.type)&&(A.ssContent===R||A.ssFallback===R)){const G=D.vnode;g(I,G,G.scopeId,G.slotScopeIds,D.parent)}}},y=(I,R,U,Y,D,A,G,W,J=0)=>{for(let H=J;H<I.length;H++){const te=I[H]=W?Ws(I[H]):ms(I[H]);k(null,te,R,U,Y,D,A,G,W)}},T=(I,R,U,Y,D,A,G)=>{const W=R.el=I.el;let{patchFlag:J,dynamicChildren:H,dirs:te}=R;J|=I.patchFlag&16;const B=I.props||qe,Z=R.props||qe;let fe;if(U&&mn(U,!1),(fe=Z.onVnodeBeforeUpdate)&&hs(fe,U,R,I),te&&pn(R,I,U,"beforeUpdate"),U&&mn(U,!0),(B.innerHTML&&Z.innerHTML==null||B.textContent&&Z.textContent==null)&&f(W,""),H?w(I.dynamicChildren,H,W,U,Y,Oa(R,D),A):G||ge(I,R,W,null,U,Y,Oa(R,D),A,!1),J>0){if(J&16)b(W,B,Z,U,D);else if(J&2&&B.class!==Z.class&&i(W,"class",null,Z.class,D),J&4&&i(W,"style",B.style,Z.style,D),J&8){const me=R.dynamicProps;for(let Te=0;Te<me.length;Te++){const Re=me[Te],yt=B[Re],dt=Z[Re];(dt!==yt||Re==="value")&&i(W,Re,yt,dt,D,U)}}J&1&&I.children!==R.children&&f(W,R.children)}else!G&&H==null&&b(W,B,Z,U,D);((fe=Z.onVnodeUpdated)||te)&&Ut(()=>{fe&&hs(fe,U,R,I),te&&pn(R,I,U,"updated")},Y)},w=(I,R,U,Y,D,A,G)=>{for(let W=0;W<R.length;W++){const J=I[W],H=R[W],te=J.el&&(J.type===we||!Pr(J,H)||J.shapeFlag&198)?m(J.el):U;k(J,H,te,null,Y,D,A,G,!0)}},b=(I,R,U,Y,D)=>{if(R!==U){if(R!==qe)for(const A in R)!Fr(A)&&!(A in U)&&i(I,A,R[A],null,D,Y);for(const A in U){if(Fr(A))continue;const G=U[A],W=R[A];G!==W&&A!=="value"&&i(I,A,W,G,D,Y)}"value"in U&&i(I,"value",R.value,U.value,D)}},P=(I,R,U,Y,D,A,G,W,J)=>{const H=R.el=I?I.el:u(""),te=R.anchor=I?I.anchor:u("");let{patchFlag:B,dynamicChildren:Z,slotScopeIds:fe}=R;fe&&(W=W?W.concat(fe):fe),I==null?(n(H,U,Y),n(te,U,Y),y(R.children||[],U,te,D,A,G,W,J)):B>0&&B&64&&Z&&I.dynamicChildren&&I.dynamicChildren.length===Z.length?(w(I.dynamicChildren,Z,U,D,A,G,W),(R.key!=null||D&&R===D.subTree)&&nu(I,R,!0)):ge(I,R,U,te,D,A,G,W,J)},C=(I,R,U,Y,D,A,G,W,J)=>{R.slotScopeIds=W,I==null?R.shapeFlag&512?D.ctx.activate(R,U,Y,G,J):Ce(R,U,Y,D,A,G,J):ot(I,R,J)},Ce=(I,R,U,Y,D,A,G)=>{const W=I.component=qv(I,Y,D);if(_f(I)&&(W.ctx.renderer=ce),Hv(W,!1,G),W.asyncDep){if(D&&D.registerDep(W,Ke,G),!I.el){const J=W.subTree=Xe(sn);L(null,J,R,U),I.placeholder=J.el}}else Ke(W,I,R,U,D,A,G)},ot=(I,R,U)=>{const Y=R.component=I.component;if(Iv(I,R,U))if(Y.asyncDep&&!Y.asyncResolved){ae(Y,R,U);return}else Y.next=R,Y.update();else R.el=I.el,Y.vnode=R},Ke=(I,R,U,Y,D,A,G)=>{const W=()=>{if(I.isMounted){let{next:B,bu:Z,u:fe,parent:me,vnode:Te}=I;{const ht=Df(I);if(ht){B&&(B.el=Te.el,ae(I,B,G)),ht.asyncDep.then(()=>{I.isUnmounted||W()});return}}let Re=B,yt;mn(I,!1),B?(B.el=Te.el,ae(I,B,G)):B=Te,Z&&eo(Z),(yt=B.props&&B.props.onVnodeBeforeUpdate)&&hs(yt,me,B,Te),mn(I,!0);const dt=$a(I),Qt=I.subTree;I.subTree=dt,k(Qt,dt,m(Qt.el),K(Qt),I,D,A),B.el=dt.el,Re===null&&wv(I,dt.el),fe&&Ut(fe,D),(yt=B.props&&B.props.onVnodeUpdated)&&Ut(()=>hs(yt,me,B,Te),D)}else{let B;const{el:Z,props:fe}=R,{bm:me,m:Te,parent:Re,root:yt,type:dt}=I,Qt=qr(R);if(mn(I,!1),me&&eo(me),!Qt&&(B=fe&&fe.onVnodeBeforeMount)&&hs(B,Re,R),mn(I,!0),Z&&Ve){const ht=()=>{I.subTree=$a(I),Ve(Z,I.subTree,I,D,null)};Qt&&dt.__asyncHydrate?dt.__asyncHydrate(Z,I,ht):ht()}else{yt.ce&&yt.ce._def.shadowRoot!==!1&&yt.ce._injectChildStyle(dt);const ht=I.subTree=$a(I);k(null,ht,U,Y,I,D,A),R.el=ht.el}if(Te&&Ut(Te,D),!Qt&&(B=fe&&fe.onVnodeMounted)){const ht=R;Ut(()=>hs(B,Re,ht),D)}(R.shapeFlag&256||Re&&qr(Re.vnode)&&Re.vnode.shapeFlag&256)&&I.a&&Ut(I.a,D),I.isMounted=!0,R=U=Y=null}};I.scope.on();const J=I.effect=new jh(W);I.scope.off();const H=I.update=J.run.bind(J),te=I.job=J.runIfDirty.bind(J);te.i=I,te.id=I.uid,J.scheduler=()=>Xl(te),mn(I,!0),H()},ae=(I,R,U)=>{R.component=I;const Y=I.vnode.props;I.vnode=R,I.next=null,Sv(I,R.props,Y,U),Vv(I,R.children,U),Ds(),qc(I),xs()},ge=(I,R,U,Y,D,A,G,W,J=!1)=>{const H=I&&I.children,te=I?I.shapeFlag:0,B=R.children,{patchFlag:Z,shapeFlag:fe}=R;if(Z>0){if(Z&128){Gt(H,B,U,Y,D,A,G,W,J);return}else if(Z&256){mt(H,B,U,Y,D,A,G,W,J);return}}fe&8?(te&16&&St(H,D,A),B!==H&&f(U,B)):te&16?fe&16?Gt(H,B,U,Y,D,A,G,W,J):St(H,D,A,!0):(te&8&&f(U,""),fe&16&&y(B,U,Y,D,A,G,W,J))},mt=(I,R,U,Y,D,A,G,W,J)=>{I=I||Gn,R=R||Gn;const H=I.length,te=R.length,B=Math.min(H,te);let Z;for(Z=0;Z<B;Z++){const fe=R[Z]=J?Ws(R[Z]):ms(R[Z]);k(I[Z],fe,U,null,D,A,G,W,J)}H>te?St(I,D,A,!0,!1,B):y(R,U,Y,D,A,G,W,J,B)},Gt=(I,R,U,Y,D,A,G,W,J)=>{let H=0;const te=R.length;let B=I.length-1,Z=te-1;for(;H<=B&&H<=Z;){const fe=I[H],me=R[H]=J?Ws(R[H]):ms(R[H]);if(Pr(fe,me))k(fe,me,U,null,D,A,G,W,J);else break;H++}for(;H<=B&&H<=Z;){const fe=I[B],me=R[Z]=J?Ws(R[Z]):ms(R[Z]);if(Pr(fe,me))k(fe,me,U,null,D,A,G,W,J);else break;B--,Z--}if(H>B){if(H<=Z){const fe=Z+1,me=fe<te?R[fe].el:Y;for(;H<=Z;)k(null,R[H]=J?Ws(R[H]):ms(R[H]),U,me,D,A,G,W,J),H++}}else if(H>Z)for(;H<=B;)Be(I[H],D,A,!0),H++;else{const fe=H,me=H,Te=new Map;for(H=me;H<=Z;H++){const Et=R[H]=J?Ws(R[H]):ms(R[H]);Et.key!=null&&Te.set(Et.key,H)}let Re,yt=0;const dt=Z-me+1;let Qt=!1,ht=0;const Bs=new Array(dt);for(H=0;H<dt;H++)Bs[H]=0;for(H=fe;H<=B;H++){const Et=I[H];if(yt>=dt){Be(Et,D,A,!0);continue}let ss;if(Et.key!=null)ss=Te.get(Et.key);else for(Re=me;Re<=Z;Re++)if(Bs[Re-me]===0&&Pr(Et,R[Re])){ss=Re;break}ss===void 0?Be(Et,D,A,!0):(Bs[ss-me]=H+1,ss>=ht?ht=ss:Qt=!0,k(Et,R[ss],U,null,D,A,G,W,J),yt++)}const mr=Qt?Mv(Bs):Gn;for(Re=mr.length-1,H=dt-1;H>=0;H--){const Et=me+H,ss=R[Et],Ci=R[Et+1],Dn=Et+1<te?Ci.el||xf(Ci):Y;Bs[H]===0?k(null,ss,U,Dn,D,A,G,W,J):Qt&&(Re<0||H!==mr[Re]?Ht(ss,U,Dn,2):Re--)}}},Ht=(I,R,U,Y,D=null)=>{const{el:A,type:G,transition:W,children:J,shapeFlag:H}=I;if(H&6){Ht(I.component.subTree,R,U,Y);return}if(H&128){I.suspense.move(R,U,Y);return}if(H&64){G.move(I,R,U,ce);return}if(G===we){n(A,R,U);for(let B=0;B<J.length;B++)Ht(J[B],R,U,Y);n(I.anchor,R,U);return}if(G===no){$(I,R,U);return}if(Y!==2&&H&1&&W)if(Y===0)W.beforeEnter(A),n(A,R,U),Ut(()=>W.enter(A),D);else{const{leave:B,delayLeave:Z,afterLeave:fe}=W,me=()=>{I.ctx.isUnmounted?r(A):n(A,R,U)},Te=()=>{A._isLeaving&&A[Yg](!0),B(A,()=>{me(),fe&&fe()})};Z?Z(A,me,Te):Te()}else n(A,R,U)},Be=(I,R,U,Y=!1,D=!1)=>{const{type:A,props:G,ref:W,children:J,dynamicChildren:H,shapeFlag:te,patchFlag:B,dirs:Z,cacheIndex:fe}=I;if(B===-2&&(D=!1),W!=null&&(Ds(),jr(W,null,U,I,!0),xs()),fe!=null&&(R.renderCache[fe]=void 0),te&256){R.ctx.deactivate(I);return}const me=te&1&&Z,Te=!qr(I);let Re;if(Te&&(Re=G&&G.onVnodeBeforeUnmount)&&hs(Re,R,I),te&6)_t(I.component,U,Y);else{if(te&128){I.suspense.unmount(U,Y);return}me&&pn(I,null,R,"beforeUnmount"),te&64?I.type.remove(I,R,U,ce,Y):H&&!H.hasOnce&&(A!==we||B>0&&B&64)?St(H,R,U,!1,!0):(A===we&&B&384||!D&&te&16)&&St(J,R,U),Y&&We(I)}(Te&&(Re=G&&G.onVnodeUnmounted)||me)&&Ut(()=>{Re&&hs(Re,R,I),me&&pn(I,null,R,"unmounted")},U)},We=I=>{const{type:R,el:U,anchor:Y,transition:D}=I;if(R===we){ts(U,Y);return}if(R===no){z(I);return}const A=()=>{r(U),D&&!D.persisted&&D.afterLeave&&D.afterLeave()};if(I.shapeFlag&1&&D&&!D.persisted){const{leave:G,delayLeave:W}=D,J=()=>G(U,A);W?W(I.el,A,J):J()}else A()},ts=(I,R)=>{let U;for(;I!==R;)U=v(I),r(I),I=U;r(R)},_t=(I,R,U)=>{const{bum:Y,scope:D,job:A,subTree:G,um:W,m:J,a:H}=I;td(J),td(H),Y&&eo(Y),D.stop(),A&&(A.flags|=8,Be(G,I,R,U)),W&&Ut(W,R),Ut(()=>{I.isUnmounted=!0},R)},St=(I,R,U,Y=!1,D=!1,A=0)=>{for(let G=A;G<I.length;G++)Be(I[G],R,U,Y,D)},K=I=>{if(I.shapeFlag&6)return K(I.component.subTree);if(I.shapeFlag&128)return I.suspense.next();const R=v(I.anchor||I.el),U=R&&R[ff];return U?v(U):R};let oe=!1;const ie=(I,R,U)=>{let Y;I==null?R._vnode&&(Be(R._vnode,null,null,!0),Y=R._vnode.component):k(R._vnode||null,I,R,null,null,null,U),R._vnode=I,oe||(oe=!0,qc(Y),lf(),oe=!1)},ce={p:k,um:Be,m:Ht,r:We,mt:Ce,mc:y,pc:ge,pbc:w,n:K,o:t};let ye,Ve;return e&&([ye,Ve]=e(ce)),{render:ie,hydrate:ye,createApp:_v(ie,ye)}}function Oa({type:t,props:e},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:s}function mn({effect:t,job:e},s){s?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function Nv(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function nu(t,e,s=!1){const n=t.children,r=e.children;if(ve(n)&&ve(r))for(let i=0;i<n.length;i++){const a=n[i];let u=r[i];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=r[i]=Ws(r[i]),u.el=a.el),!s&&u.patchFlag!==-2&&nu(a,u)),u.type===Wo&&(u.patchFlag!==-1?u.el=a.el:u.__elIndex=i+(t.type===we?1:0)),u.type===sn&&!u.el&&(u.el=a.el)}}function Mv(t){const e=t.slice(),s=[0];let n,r,i,a,u;const c=t.length;for(n=0;n<c;n++){const d=t[n];if(d!==0){if(r=s[s.length-1],t[r]<d){e[n]=r,s.push(n);continue}for(i=0,a=s.length-1;i<a;)u=i+a>>1,t[s[u]]<d?i=u+1:a=u;d<t[s[i]]&&(i>0&&(e[n]=s[i-1]),s[i]=n)}}for(i=s.length,a=s[i-1];i-- >0;)s[i]=a,a=e[a];return s}function Df(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Df(e)}function td(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}function xf(t){if(t.placeholder)return t.placeholder;const e=t.component;return e?xf(e.subTree):null}const Nf=t=>t.__isSuspense;function $v(t,e){e&&e.pendingBranch?ve(t)?e.effects.push(...t):e.effects.push(t):qg(t)}const we=Symbol.for("v-fgt"),Wo=Symbol.for("v-txt"),sn=Symbol.for("v-cmt"),no=Symbol.for("v-stc"),Hr=[];let Xt=null;function V(t=!1){Hr.push(Xt=t?null:[])}function Ov(){Hr.pop(),Xt=Hr[Hr.length-1]||null}let ei=1;function vo(t,e=!1){ei+=t,t<0&&Xt&&e&&(Xt.hasOnce=!0)}function Mf(t){return t.dynamicChildren=ei>0?Xt||Gn:null,Ov(),ei>0&&Xt&&Xt.push(t),t}function F(t,e,s,n,r,i){return Mf(o(t,e,s,n,r,i,!0))}function Ue(t,e,s,n,r){return Mf(Xe(t,e,s,n,r,!0))}function _o(t){return t?t.__v_isVNode===!0:!1}function Pr(t,e){return t.type===e.type&&t.key===e.key}const $f=({key:t})=>t??null,ro=({ref:t,ref_key:e,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?lt(t)||$t(t)||Ae(t)?{i:Jt,r:t,k:e,f:!!s}:t:null);function o(t,e=null,s=null,n=0,r=null,i=t===we?0:1,a=!1,u=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&$f(e),ref:e&&ro(e),scopeId:cf,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:Jt};return u?(ru(c,s),i&128&&t.normalize(c)):s&&(c.shapeFlag|=lt(s)?8:16),ei>0&&!a&&Xt&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Xt.push(c),c}const Xe=Fv;function Fv(t,e=null,s=null,n=0,r=null,i=!1){if((!t||t===uv)&&(t=sn),_o(t)){const u=Jn(t,e,!0);return s&&ru(u,s),ei>0&&!i&&Xt&&(u.shapeFlag&6?Xt[Xt.indexOf(t)]=u:Xt.push(u)),u.patchFlag=-2,u}if(Yv(t)&&(t=t.__vccOpts),e){e=Lv(e);let{class:u,style:c}=e;u&&!lt(u)&&(e.class=xe(u)),ze(c)&&(Yl(c)&&!ve(c)&&(c=vt({},c)),e.style=jl(c))}const a=lt(t)?1:Nf(t)?128:Wg(t)?64:ze(t)?4:Ae(t)?2:0;return o(t,e,s,n,r,a,i,!0)}function Lv(t){return t?Yl(t)||Cf(t)?vt({},t):t:null}function Jn(t,e,s=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:u,transition:c}=t,d=e?Uv(r||{},e):r,f={__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&$f(d),ref:e&&e.ref?s&&i?ve(i)?i.concat(ro(e)):[i,ro(e)]:ro(e):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==we?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:c,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Jn(t.ssContent),ssFallback:t.ssFallback&&Jn(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c&&n&&Zl(f,c.clone(f)),f}function re(t=" ",e=0){return Xe(Wo,null,t,e)}function ul(t,e){const s=Xe(no,null,t);return s.staticCount=e,s}function he(t="",e=!1){return e?(V(),Ue(sn,null,t)):Xe(sn,null,t)}function ms(t){return t==null||typeof t=="boolean"?Xe(sn):ve(t)?Xe(we,null,t.slice()):_o(t)?Ws(t):Xe(Wo,null,String(t))}function Ws(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:Jn(t)}function ru(t,e){let s=0;const{shapeFlag:n}=t;if(e==null)e=null;else if(ve(e))s=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),ru(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=e._;!r&&!Cf(e)?e._ctx=Jt:r===3&&Jt&&(Jt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ae(e)?(e={default:e,_ctx:Jt},s=32):(e=String(e),n&64?(s=16,e=[re(e)]):s=8);t.children=e,t.shapeFlag|=s}function Uv(...t){const e={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=xe([e.class,n.class]));else if(r==="style")e.style=jl([e.style,n.style]);else if(Oo(r)){const i=e[r],a=n[r];a&&i!==a&&!(ve(i)&&i.includes(a))&&(e[r]=i?[].concat(i,a):a)}else r!==""&&(e[r]=n[r])}return e}function hs(t,e,s,n=null){ys(t,e,7,[s,n])}const Bv=Af();let jv=0;function qv(t,e,s){const n=t.type,r=(e?e.appContext:t.appContext)||Bv,i={uid:jv++,vnode:t,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new fg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Rf(n,r),emitsOptions:Tf(n,r),emit:null,emitted:null,propsDefaults:qe,inheritAttrs:n.inheritAttrs,ctx:qe,data:qe,props:qe,attrs:qe,slots:qe,refs:qe,setupState:qe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=Ev.bind(null,i),t.ce&&t.ce(i),i}let Nt=null;const Gv=()=>Nt||Jt;let yo,cl;{const t=Bo(),e=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};yo=e("__VUE_INSTANCE_SETTERS__",s=>Nt=s),cl=e("__VUE_SSR_SETTERS__",s=>ti=s)}const vi=t=>{const e=Nt;return yo(t),t.scope.on(),()=>{t.scope.off(),yo(e)}},sd=()=>{Nt&&Nt.scope.off(),yo(null)};function Of(t){return t.vnode.shapeFlag&4}let ti=!1;function Hv(t,e=!1,s=!1){e&&cl(e);const{props:n,children:r}=t.vnode,i=Of(t);Cv(t,n,i,e),kv(t,r,s||e);const a=i?zv(t,e):void 0;return e&&cl(!1),a}function zv(t,e){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,dv);const{setup:n}=s;if(n){Ds();const r=t.setupContext=n.length>1?Wv(t):null,i=vi(t),a=gi(n,t,0,[t.props,r]),u=Mh(a);if(xs(),i(),(u||t.sp)&&!qr(t)&&vf(t),u){if(a.then(sd,sd),e)return a.then(c=>{nd(t,c,e)}).catch(c=>{Go(c,t,0)});t.asyncDep=a}else nd(t,a,e)}else Ff(t,e)}function nd(t,e,s){Ae(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ze(e)&&(t.setupState=rf(e)),Ff(t,s)}let rd;function Ff(t,e,s){const n=t.type;if(!t.render){if(!e&&rd&&!n.render){const r=n.template||eu(t).template;if(r){const{isCustomElement:i,compilerOptions:a}=t.appContext.config,{delimiters:u,compilerOptions:c}=n,d=vt(vt({isCustomElement:i,delimiters:u},a),c);n.render=rd(r,d)}}t.render=n.render||as}{const r=vi(t);Ds();try{hv(t)}finally{xs(),r()}}}const Kv={get(t,e){return Dt(t,"get",""),t[e]}};function Wv(t){const e=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,Kv),slots:t.slots,emit:t.emit,expose:e}}function Qo(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(rf(xg(t.exposed)),{get(e,s){if(s in e)return e[s];if(s in Gr)return Gr[s](t)},has(e,s){return s in e||s in Gr}})):t.proxy}function Qv(t,e=!0){return Ae(t)?t.displayName||t.name:t.name||e&&t.__name}function Yv(t){return Ae(t)&&"__vccOpts"in t}const ue=(t,e)=>Fg(t,e,ti);function Lf(t,e,s){try{vo(-1);const n=arguments.length;return n===2?ze(e)&&!ve(e)?_o(e)?Xe(t,null,[e]):Xe(t,e):Xe(t,null,e):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&_o(s)&&(s=[s]),Xe(t,e,s))}finally{vo(1)}}const Jv="3.5.26";/**
* @vue/runtime-dom v3.5.26
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let dl;const id=typeof window<"u"&&window.trustedTypes;if(id)try{dl=id.createPolicy("vue",{createHTML:t=>t})}catch{}const Uf=dl?t=>dl.createHTML(t):t=>t,Xv="http://www.w3.org/2000/svg",Zv="http://www.w3.org/1998/Math/MathML",Cs=typeof document<"u"?document:null,od=Cs&&Cs.createElement("template"),e_={insert:(t,e,s)=>{e.insertBefore(t,s||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,s,n)=>{const r=e==="svg"?Cs.createElementNS(Xv,t):e==="mathml"?Cs.createElementNS(Zv,t):s?Cs.createElement(t,{is:s}):Cs.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>Cs.createTextNode(t),createComment:t=>Cs.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Cs.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,s,n,r,i){const a=s?s.previousSibling:e.lastChild;if(r&&(r===i||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{od.innerHTML=Uf(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const u=od.content;if(n==="svg"||n==="mathml"){const c=u.firstChild;for(;c.firstChild;)u.appendChild(c.firstChild);u.removeChild(c)}e.insertBefore(u,s)}return[a?a.nextSibling:e.firstChild,s?s.previousSibling:e.lastChild]}},t_=Symbol("_vtc");function s_(t,e,s){const n=t[t_];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?t.removeAttribute("class"):s?t.setAttribute("class",e):t.className=e}const ad=Symbol("_vod"),n_=Symbol("_vsh"),r_=Symbol(""),i_=/(?:^|;)\s*display\s*:/;function o_(t,e,s){const n=t.style,r=lt(s);let i=!1;if(s&&!r){if(e)if(lt(e))for(const a of e.split(";")){const u=a.slice(0,a.indexOf(":")).trim();s[u]==null&&io(n,u,"")}else for(const a in e)s[a]==null&&io(n,a,"");for(const a in s)a==="display"&&(i=!0),io(n,a,s[a])}else if(r){if(e!==s){const a=n[r_];a&&(s+=";"+a),n.cssText=s,i=i_.test(s)}}else e&&t.removeAttribute("style");ad in t&&(t[ad]=i?n.display:"",t[n_]&&(n.display="none"))}const ld=/\s*!important$/;function io(t,e,s){if(ve(s))s.forEach(n=>io(t,e,n));else if(s==null&&(s=""),e.startsWith("--"))t.setProperty(e,s);else{const n=a_(t,e);ld.test(s)?t.setProperty(Sn(n),s.replace(ld,""),"important"):t[n]=s}}const ud=["Webkit","Moz","ms"],Fa={};function a_(t,e){const s=Fa[e];if(s)return s;let n=is(e);if(n!=="filter"&&n in t)return Fa[e]=n;n=Lo(n);for(let r=0;r<ud.length;r++){const i=ud[r]+n;if(i in t)return Fa[e]=i}return e}const cd="http://www.w3.org/1999/xlink";function dd(t,e,s,n,r,i=dg(e)){n&&e.startsWith("xlink:")?s==null?t.removeAttributeNS(cd,e.slice(6,e.length)):t.setAttributeNS(cd,e,s):s==null||i&&!Lh(s)?t.removeAttribute(e):t.setAttribute(e,i?"":_s(s)?String(s):s)}function hd(t,e,s,n,r){if(e==="innerHTML"||e==="textContent"){s!=null&&(t[e]=e==="innerHTML"?Uf(s):s);return}const i=t.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const u=i==="OPTION"?t.getAttribute("value")||"":t.value,c=s==null?t.type==="checkbox"?"on":"":String(s);(u!==c||!("_value"in t))&&(t.value=c),s==null&&t.removeAttribute(e),t._value=s;return}let a=!1;if(s===""||s==null){const u=typeof t[e];u==="boolean"?s=Lh(s):s==null&&u==="string"?(s="",a=!0):u==="number"&&(s=0,a=!0)}try{t[e]=s}catch{}a&&t.removeAttribute(r||e)}function Ys(t,e,s,n){t.addEventListener(e,s,n)}function l_(t,e,s,n){t.removeEventListener(e,s,n)}const fd=Symbol("_vei");function u_(t,e,s,n,r=null){const i=t[fd]||(t[fd]={}),a=i[e];if(n&&a)a.value=n;else{const[u,c]=c_(e);if(n){const d=i[e]=f_(n,r);Ys(t,u,d,c)}else a&&(l_(t,u,a,c),i[e]=void 0)}}const pd=/(?:Once|Passive|Capture)$/;function c_(t){let e;if(pd.test(t)){e={};let n;for(;n=t.match(pd);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Sn(t.slice(2)),e]}let La=0;const d_=Promise.resolve(),h_=()=>La||(d_.then(()=>La=0),La=Date.now());function f_(t,e){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;ys(p_(n,s.value),e,5,[n])};return s.value=t,s.attached=h_(),s}function p_(t,e){if(ve(e)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const md=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,m_=(t,e,s,n,r,i)=>{const a=r==="svg";e==="class"?s_(t,n,a):e==="style"?o_(t,s,n):Oo(e)?Ll(e)||u_(t,e,s,n,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):g_(t,e,n,a))?(hd(t,e,n),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&dd(t,e,n,a,i,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!lt(n))?hd(t,is(e),n,i,e):(e==="true-value"?t._trueValue=n:e==="false-value"&&(t._falseValue=n),dd(t,e,n,a))};function g_(t,e,s,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in t&&md(e)&&Ae(s));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return md(e)&&lt(s)?!1:e in t}const Xn=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ve(e)?s=>eo(e,s):e};function v_(t){t.target.composing=!0}function gd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const ks=Symbol("_assign");function vd(t,e,s){return e&&(t=t.trim()),s&&(t=Uo(t)),t}const et={created(t,{modifiers:{lazy:e,trim:s,number:n}},r){t[ks]=Xn(r);const i=n||r.props&&r.props.type==="number";Ys(t,e?"change":"input",a=>{a.target.composing||t[ks](vd(t.value,s,i))}),(s||i)&&Ys(t,"change",()=>{t.value=vd(t.value,s,i)}),e||(Ys(t,"compositionstart",v_),Ys(t,"compositionend",gd),Ys(t,"change",gd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},a){if(t[ks]=Xn(a),t.composing)return;const u=(i||t.type==="number")&&!/^0\d/.test(t.value)?Uo(t.value):t.value,c=e??"";u!==c&&(document.activeElement===t&&t.type!=="range"&&(n&&e===s||r&&t.value.trim()===c)||(t.value=c))}},fs={deep:!0,created(t,e,s){t[ks]=Xn(s),Ys(t,"change",()=>{const n=t._modelValue,r=si(t),i=t.checked,a=t[ks];if(ve(n)){const u=ql(n,r),c=u!==-1;if(i&&!c)a(n.concat(r));else if(!i&&c){const d=[...n];d.splice(u,1),a(d)}}else if(ur(n)){const u=new Set(n);i?u.add(r):u.delete(r),a(u)}else a(Bf(t,i))})},mounted:_d,beforeUpdate(t,e,s){t[ks]=Xn(s),_d(t,e,s)}};function _d(t,{value:e,oldValue:s},n){t._modelValue=e;let r;if(ve(e))r=ql(e,n.props.value)>-1;else if(ur(e))r=e.has(n.props.value);else{if(e===s)return;r=mi(e,Bf(t,!0))}t.checked!==r&&(t.checked=r)}const Zn={deep:!0,created(t,{value:e,modifiers:{number:s}},n){const r=ur(e);Ys(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>s?Uo(si(a)):si(a));t[ks](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Jl(()=>{t._assigning=!1})}),t[ks]=Xn(n)},mounted(t,{value:e}){yd(t,e)},beforeUpdate(t,e,s){t[ks]=Xn(s)},updated(t,{value:e}){t._assigning||yd(t,e)}};function yd(t,e){const s=t.multiple,n=ve(e);if(!(s&&!n&&!ur(e))){for(let r=0,i=t.options.length;r<i;r++){const a=t.options[r],u=si(a);if(s)if(n){const c=typeof u;c==="string"||c==="number"?a.selected=e.some(d=>String(d)===String(u)):a.selected=ql(e,u)>-1}else a.selected=e.has(u);else if(mi(si(a),e)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function si(t){return"_value"in t?t._value:t.value}function Bf(t,e){const s=e?"_trueValue":"_falseValue";return s in t?t[s]:e}const __=["ctrl","shift","alt","meta"],y_={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>__.some(s=>t[`${s}Key`]&&!e.includes(s))},He=(t,e)=>{const s=t._withMods||(t._withMods={}),n=e.join(".");return s[n]||(s[n]=(r,...i)=>{for(let a=0;a<e.length;a++){const u=y_[e[a]];if(u&&u(r,e))return}return t(r,...i)})},E_=vt({patchProp:m_},e_);let Ed;function b_(){return Ed||(Ed=Dv(E_))}const A_=(...t)=>{const e=b_().createApp(...t),{mount:s}=e;return e.mount=n=>{const r=I_(n);if(!r)return;const i=e._component;!Ae(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=s(r,!1,T_(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},e};function T_(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function I_(t){return lt(t)?document.querySelector(t):t}const w_={id:"app"},C_={__name:"App",setup(t){return Ct(()=>{console.log("Oishi Nigiri App loaded")}),(e,s)=>{const n=lv("router-view");return V(),F("div",w_,[Xe(n)])}}};/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const Un=typeof document<"u";function jf(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function S_(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&jf(t.default)}const Me=Object.assign;function Ua(t,e){const s={};for(const n in e){const r=e[n];s[n]=cs(r)?r.map(t):t(r)}return s}const zr=()=>{},cs=Array.isArray;function bd(t,e){const s={};for(const n in t)s[n]=n in e?e[n]:t[n];return s}const qf=/#/g,R_=/&/g,P_=/\//g,k_=/=/g,V_=/\?/g,Gf=/\+/g,D_=/%5B/g,x_=/%5D/g,Hf=/%5E/g,N_=/%60/g,zf=/%7B/g,M_=/%7C/g,Kf=/%7D/g,$_=/%20/g;function iu(t){return t==null?"":encodeURI(""+t).replace(M_,"|").replace(D_,"[").replace(x_,"]")}function O_(t){return iu(t).replace(zf,"{").replace(Kf,"}").replace(Hf,"^")}function hl(t){return iu(t).replace(Gf,"%2B").replace($_,"+").replace(qf,"%23").replace(R_,"%26").replace(N_,"`").replace(zf,"{").replace(Kf,"}").replace(Hf,"^")}function F_(t){return hl(t).replace(k_,"%3D")}function L_(t){return iu(t).replace(qf,"%23").replace(V_,"%3F")}function U_(t){return L_(t).replace(P_,"%2F")}function ni(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const B_=/\/$/,j_=t=>t.replace(B_,"");function Ba(t,e,s="/"){let n,r={},i="",a="";const u=e.indexOf("#");let c=e.indexOf("?");return c=u>=0&&c>u?-1:c,c>=0&&(n=e.slice(0,c),i=e.slice(c,u>0?u:e.length),r=t(i.slice(1))),u>=0&&(n=n||e.slice(0,u),a=e.slice(u,e.length)),n=z_(n??e,s),{fullPath:n+i+a,path:n,query:r,hash:ni(a)}}function q_(t,e){const s=e.query?t(e.query):"";return e.path+(s&&"?")+s+(e.hash||"")}function Ad(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function G_(t,e,s){const n=e.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&er(e.matched[n],s.matched[r])&&Wf(e.params,s.params)&&t(e.query)===t(s.query)&&e.hash===s.hash}function er(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function Wf(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var s in t)if(!H_(t[s],e[s]))return!1;return!0}function H_(t,e){return cs(t)?Td(t,e):cs(e)?Td(e,t):(t==null?void 0:t.valueOf())===(e==null?void 0:e.valueOf())}function Td(t,e){return cs(e)?t.length===e.length&&t.every((s,n)=>s===e[n]):t.length===1&&t[0]===e}function z_(t,e){if(t.startsWith("/"))return t;if(!t)return e;const s=e.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=s.length-1,a,u;for(a=0;a<n.length;a++)if(u=n[a],u!==".")if(u==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Hs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let fl=function(t){return t.pop="pop",t.push="push",t}({}),ja=function(t){return t.back="back",t.forward="forward",t.unknown="",t}({});function K_(t){if(!t)if(Un){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),j_(t)}const W_=/^[^#]+#/;function Q_(t,e){return t.replace(W_,"#")+e}function Y_(t,e){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:e.behavior,left:n.left-s.left-(e.left||0),top:n.top-s.top-(e.top||0)}}const Yo=()=>({left:window.scrollX,top:window.scrollY});function J_(t){let e;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;e=Y_(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Id(t,e){return(history.state?history.state.position-e:-1)+t}const pl=new Map;function X_(t,e){pl.set(t,e)}function Z_(t){const e=pl.get(t);return pl.delete(t),e}function ey(t){return typeof t=="string"||t&&typeof t=="object"}function Qf(t){return typeof t=="string"||typeof t=="symbol"}let rt=function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t}({});const Yf=Symbol("");rt.MATCHER_NOT_FOUND+"",rt.NAVIGATION_GUARD_REDIRECT+"",rt.NAVIGATION_ABORTED+"",rt.NAVIGATION_CANCELLED+"",rt.NAVIGATION_DUPLICATED+"";function tr(t,e){return Me(new Error,{type:t,[Yf]:!0},e)}function ws(t,e){return t instanceof Error&&Yf in t&&(e==null||!!(t.type&e))}const ty=["params","query","hash"];function sy(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const s of ty)s in t&&(e[s]=t[s]);return JSON.stringify(e,null,2)}function ny(t){const e={};if(t===""||t==="?")return e;const s=(t[0]==="?"?t.slice(1):t).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(Gf," "),i=r.indexOf("="),a=ni(i<0?r:r.slice(0,i)),u=i<0?null:ni(r.slice(i+1));if(a in e){let c=e[a];cs(c)||(c=e[a]=[c]),c.push(u)}else e[a]=u}return e}function wd(t){let e="";for(let s in t){const n=t[s];if(s=F_(s),n==null){n!==void 0&&(e+=(e.length?"&":"")+s);continue}(cs(n)?n.map(r=>r&&hl(r)):[n&&hl(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+s,r!=null&&(e+="="+r))})}return e}function ry(t){const e={};for(const s in t){const n=t[s];n!==void 0&&(e[s]=cs(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const iy=Symbol(""),Cd=Symbol(""),ou=Symbol(""),Jf=Symbol(""),ml=Symbol("");function kr(){let t=[];function e(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:e,list:()=>t.slice(),reset:s}}function Qs(t,e,s,n,r,i=a=>a()){const a=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((u,c)=>{const d=v=>{v===!1?c(tr(rt.NAVIGATION_ABORTED,{from:s,to:e})):v instanceof Error?c(v):ey(v)?c(tr(rt.NAVIGATION_GUARD_REDIRECT,{from:e,to:v})):(a&&n.enterCallbacks[r]===a&&typeof v=="function"&&a.push(v),u())},f=i(()=>t.call(n&&n.instances[r],e,s,d));let m=Promise.resolve(f);t.length<3&&(m=m.then(d)),m.catch(v=>c(v))})}function qa(t,e,s,n,r=i=>i()){const i=[];for(const a of t)for(const u in a.components){let c=a.components[u];if(!(e!=="beforeRouteEnter"&&!a.instances[u]))if(jf(c)){const d=(c.__vccOpts||c)[e];d&&i.push(Qs(d,s,n,a,u,r))}else{let d=c();i.push(()=>d.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${u}" at "${a.path}"`);const m=S_(f)?f.default:f;a.mods[u]=f,a.components[u]=m;const v=(m.__vccOpts||m)[e];return v&&Qs(v,s,n,a,u,r)()}))}}return i}function oy(t,e){const s=[],n=[],r=[],i=Math.max(e.matched.length,t.matched.length);for(let a=0;a<i;a++){const u=e.matched[a];u&&(t.matched.find(d=>er(d,u))?n.push(u):s.push(u));const c=t.matched[a];c&&(e.matched.find(d=>er(d,c))||r.push(c))}return[s,n,r]}/*!
 * vue-router v4.6.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let ay=()=>location.protocol+"//"+location.host;function Xf(t,e){const{pathname:s,search:n,hash:r}=e,i=t.indexOf("#");if(i>-1){let a=r.includes(t.slice(i))?t.slice(i).length:1,u=r.slice(a);return u[0]!=="/"&&(u="/"+u),Ad(u,"")}return Ad(s,t)+n+r}function ly(t,e,s,n){let r=[],i=[],a=null;const u=({state:v})=>{const E=Xf(t,location),S=s.value,k=e.value;let M=0;if(v){if(s.value=E,e.value=v,a&&a===S){a=null;return}M=k?v.position-k.position:0}else n(E);r.forEach(L=>{L(s.value,S,{delta:M,type:fl.pop,direction:M?M>0?ja.forward:ja.back:ja.unknown})})};function c(){a=s.value}function d(v){r.push(v);const E=()=>{const S=r.indexOf(v);S>-1&&r.splice(S,1)};return i.push(E),E}function f(){if(document.visibilityState==="hidden"){const{history:v}=window;if(!v.state)return;v.replaceState(Me({},v.state,{scroll:Yo()}),"")}}function m(){for(const v of i)v();i=[],window.removeEventListener("popstate",u),window.removeEventListener("pagehide",f),document.removeEventListener("visibilitychange",f)}return window.addEventListener("popstate",u),window.addEventListener("pagehide",f),document.addEventListener("visibilitychange",f),{pauseListeners:c,listen:d,destroy:m}}function Sd(t,e,s,n=!1,r=!1){return{back:t,current:e,forward:s,replaced:n,position:window.history.length,scroll:r?Yo():null}}function uy(t){const{history:e,location:s}=window,n={value:Xf(t,s)},r={value:e.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(c,d,f){const m=t.indexOf("#"),v=m>-1?(s.host&&document.querySelector("base")?t:t.slice(m))+c:ay()+t+c;try{e[f?"replaceState":"pushState"](d,"",v),r.value=d}catch(E){console.error(E),s[f?"replace":"assign"](v)}}function a(c,d){i(c,Me({},e.state,Sd(r.value.back,c,r.value.forward,!0),d,{position:r.value.position}),!0),n.value=c}function u(c,d){const f=Me({},r.value,e.state,{forward:c,scroll:Yo()});i(f.current,f,!0),i(c,Me({},Sd(n.value,c,null),{position:f.position+1},d),!1),n.value=c}return{location:n,state:r,push:u,replace:a}}function cy(t){t=K_(t);const e=uy(t),s=ly(t,e.state,e.location,e.replace);function n(i,a=!0){a||s.pauseListeners(),history.go(i)}const r=Me({location:"",base:t,go:n,createHref:Q_.bind(null,t)},e,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function dy(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),cy(t)}let yn=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t}({});var ft=function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t}(ft||{});const hy={type:yn.Static,value:""},fy=/[a-zA-Z0-9_]/;function py(t){if(!t)return[[]];if(t==="/")return[[hy]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(E){throw new Error(`ERR (${s})/"${d}": ${E}`)}let s=ft.Static,n=s;const r=[];let i;function a(){i&&r.push(i),i=[]}let u=0,c,d="",f="";function m(){d&&(s===ft.Static?i.push({type:yn.Static,value:d}):s===ft.Param||s===ft.ParamRegExp||s===ft.ParamRegExpEnd?(i.length>1&&(c==="*"||c==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),i.push({type:yn.Param,value:d,regexp:f,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):e("Invalid state to consume buffer"),d="")}function v(){d+=c}for(;u<t.length;){if(c=t[u++],c==="\\"&&s!==ft.ParamRegExp){n=s,s=ft.EscapeNext;continue}switch(s){case ft.Static:c==="/"?(d&&m(),a()):c===":"?(m(),s=ft.Param):v();break;case ft.EscapeNext:v(),s=n;break;case ft.Param:c==="("?s=ft.ParamRegExp:fy.test(c)?v():(m(),s=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&u--);break;case ft.ParamRegExp:c===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+c:s=ft.ParamRegExpEnd:f+=c;break;case ft.ParamRegExpEnd:m(),s=ft.Static,c!=="*"&&c!=="?"&&c!=="+"&&u--,f="";break;default:e("Unknown state");break}}return s===ft.ParamRegExp&&e(`Unfinished custom RegExp for param "${d}"`),m(),a(),r}const Rd="[^/]+?",my={sensitive:!1,strict:!1,start:!0,end:!0};var Bt=function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t}(Bt||{});const gy=/[.+*?^${}()[\]/\\]/g;function vy(t,e){const s=Me({},my,e),n=[];let r=s.start?"^":"";const i=[];for(const d of t){const f=d.length?[]:[Bt.Root];s.strict&&!d.length&&(r+="/");for(let m=0;m<d.length;m++){const v=d[m];let E=Bt.Segment+(s.sensitive?Bt.BonusCaseSensitive:0);if(v.type===yn.Static)m||(r+="/"),r+=v.value.replace(gy,"\\$&"),E+=Bt.Static;else if(v.type===yn.Param){const{value:S,repeatable:k,optional:M,regexp:L}=v;i.push({name:S,repeatable:k,optional:M});const x=L||Rd;if(x!==Rd){E+=Bt.BonusCustomRegExp;try{`${x}`}catch(z){throw new Error(`Invalid custom RegExp for param "${S}" (${x}): `+z.message)}}let $=k?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;m||($=M&&d.length<2?`(?:/${$})`:"/"+$),M&&($+="?"),r+=$,E+=Bt.Dynamic,M&&(E+=Bt.BonusOptional),k&&(E+=Bt.BonusRepeatable),x===".*"&&(E+=Bt.BonusWildcard)}f.push(E)}n.push(f)}if(s.strict&&s.end){const d=n.length-1;n[d][n[d].length-1]+=Bt.BonusStrict}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const a=new RegExp(r,s.sensitive?"":"i");function u(d){const f=d.match(a),m={};if(!f)return null;for(let v=1;v<f.length;v++){const E=f[v]||"",S=i[v-1];m[S.name]=E&&S.repeatable?E.split("/"):E}return m}function c(d){let f="",m=!1;for(const v of t){(!m||!f.endsWith("/"))&&(f+="/"),m=!1;for(const E of v)if(E.type===yn.Static)f+=E.value;else if(E.type===yn.Param){const{value:S,repeatable:k,optional:M}=E,L=S in d?d[S]:"";if(cs(L)&&!k)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const x=cs(L)?L.join("/"):L;if(!x)if(M)v.length<2&&(f.endsWith("/")?f=f.slice(0,-1):m=!0);else throw new Error(`Missing required param "${S}"`);f+=x}}return f||"/"}return{re:a,score:n,keys:i,parse:u,stringify:c}}function _y(t,e){let s=0;for(;s<t.length&&s<e.length;){const n=e[s]-t[s];if(n)return n;s++}return t.length<e.length?t.length===1&&t[0]===Bt.Static+Bt.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===Bt.Static+Bt.Segment?1:-1:0}function Zf(t,e){let s=0;const n=t.score,r=e.score;for(;s<n.length&&s<r.length;){const i=_y(n[s],r[s]);if(i)return i;s++}if(Math.abs(r.length-n.length)===1){if(Pd(n))return 1;if(Pd(r))return-1}return r.length-n.length}function Pd(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const yy={strict:!1,end:!0,sensitive:!1};function Ey(t,e,s){const n=vy(py(t.path),s),r=Me(n,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function by(t,e){const s=[],n=new Map;e=bd(yy,e);function r(m){return n.get(m)}function i(m,v,E){const S=!E,k=Vd(m);k.aliasOf=E&&E.record;const M=bd(e,m),L=[k];if("alias"in m){const z=typeof m.alias=="string"?[m.alias]:m.alias;for(const ee of z)L.push(Vd(Me({},k,{components:E?E.record.components:k.components,path:ee,aliasOf:E?E.record:k})))}let x,$;for(const z of L){const{path:ee}=z;if(v&&ee[0]!=="/"){const N=v.record.path,g=N[N.length-1]==="/"?"":"/";z.path=v.record.path+(ee&&g+ee)}if(x=Ey(z,v,M),E?E.alias.push(x):($=$||x,$!==x&&$.alias.push(x),S&&m.name&&!Dd(x)&&a(m.name)),ep(x)&&c(x),k.children){const N=k.children;for(let g=0;g<N.length;g++)i(N[g],x,E&&E.children[g])}E=E||x}return $?()=>{a($)}:zr}function a(m){if(Qf(m)){const v=n.get(m);v&&(n.delete(m),s.splice(s.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=s.indexOf(m);v>-1&&(s.splice(v,1),m.record.name&&n.delete(m.record.name),m.children.forEach(a),m.alias.forEach(a))}}function u(){return s}function c(m){const v=Iy(m,s);s.splice(v,0,m),m.record.name&&!Dd(m)&&n.set(m.record.name,m)}function d(m,v){let E,S={},k,M;if("name"in m&&m.name){if(E=n.get(m.name),!E)throw tr(rt.MATCHER_NOT_FOUND,{location:m});M=E.record.name,S=Me(kd(v.params,E.keys.filter($=>!$.optional).concat(E.parent?E.parent.keys.filter($=>$.optional):[]).map($=>$.name)),m.params&&kd(m.params,E.keys.map($=>$.name))),k=E.stringify(S)}else if(m.path!=null)k=m.path,E=s.find($=>$.re.test(k)),E&&(S=E.parse(k),M=E.record.name);else{if(E=v.name?n.get(v.name):s.find($=>$.re.test(v.path)),!E)throw tr(rt.MATCHER_NOT_FOUND,{location:m,currentLocation:v});M=E.record.name,S=Me({},v.params,m.params),k=E.stringify(S)}const L=[];let x=E;for(;x;)L.unshift(x.record),x=x.parent;return{name:M,path:k,params:S,matched:L,meta:Ty(L)}}t.forEach(m=>i(m));function f(){s.length=0,n.clear()}return{addRoute:i,resolve:d,removeRoute:a,clearRoutes:f,getRoutes:u,getRecordMatcher:r}}function kd(t,e){const s={};for(const n of e)n in t&&(s[n]=t[n]);return s}function Vd(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Ay(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function Ay(t){const e={},s=t.props||!1;if("component"in t)e.default=s;else for(const n in t.components)e[n]=typeof s=="object"?s[n]:s;return e}function Dd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Ty(t){return t.reduce((e,s)=>Me(e,s.meta),{})}function Iy(t,e){let s=0,n=e.length;for(;s!==n;){const i=s+n>>1;Zf(t,e[i])<0?n=i:s=i+1}const r=wy(t);return r&&(n=e.lastIndexOf(r,n-1)),n}function wy(t){let e=t;for(;e=e.parent;)if(ep(e)&&Zf(t,e)===0)return e}function ep({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function xd(t){const e=Ps(ou),s=Ps(Jf),n=ue(()=>{const c=pt(t.to);return e.resolve(c)}),r=ue(()=>{const{matched:c}=n.value,{length:d}=c,f=c[d-1],m=s.matched;if(!f||!m.length)return-1;const v=m.findIndex(er.bind(null,f));if(v>-1)return v;const E=Nd(c[d-2]);return d>1&&Nd(f)===E&&m[m.length-1].path!==E?m.findIndex(er.bind(null,c[d-2])):v}),i=ue(()=>r.value>-1&&ky(s.params,n.value.params)),a=ue(()=>r.value>-1&&r.value===s.matched.length-1&&Wf(s.params,n.value.params));function u(c={}){if(Py(c)){const d=e[pt(t.replace)?"replace":"push"](pt(t.to)).catch(zr);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:n,href:ue(()=>n.value.href),isActive:i,isExactActive:a,navigate:u}}function Cy(t){return t.length===1?t[0]:t}const Sy=gf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:xd,setup(t,{slots:e}){const s=qo(xd(t)),{options:n}=Ps(ou),r=ue(()=>({[Md(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Md(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=e.default&&Cy(e.default(s));return t.custom?i:Lf("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},i)}}}),Ry=Sy;function Py(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function ky(t,e){for(const s in e){const n=e[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!cs(r)||r.length!==n.length||n.some((i,a)=>i.valueOf()!==r[a].valueOf()))return!1}return!0}function Nd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Md=(t,e,s)=>t??e??s,Vy=gf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:s}){const n=Ps(ml),r=ue(()=>t.route||n.value),i=Ps(Cd,0),a=ue(()=>{let d=pt(i);const{matched:f}=r.value;let m;for(;(m=f[d])&&!m.components;)d++;return d}),u=ue(()=>r.value.matched[a.value]);to(Cd,ue(()=>a.value+1)),to(iy,u),to(ml,r);const c=ne();return es(()=>[c.value,u.value,t.name],([d,f,m],[v,E,S])=>{f&&(f.instances[m]=d,E&&E!==f&&d&&d===v&&(f.leaveGuards.size||(f.leaveGuards=E.leaveGuards),f.updateGuards.size||(f.updateGuards=E.updateGuards))),d&&f&&(!E||!er(f,E)||!v)&&(f.enterCallbacks[m]||[]).forEach(k=>k(d))},{flush:"post"}),()=>{const d=r.value,f=t.name,m=u.value,v=m&&m.components[f];if(!v)return $d(s.default,{Component:v,route:d});const E=m.props[f],S=E?E===!0?d.params:typeof E=="function"?E(d):E:null,M=Lf(v,Me({},S,e,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(m.instances[f]=null)},ref:c}));return $d(s.default,{Component:M,route:d})||M}}});function $d(t,e){if(!t)return null;const s=t(e);return s.length===1?s[0]:s}const Dy=Vy;function xy(t){const e=by(t.routes,t),s=t.parseQuery||ny,n=t.stringifyQuery||wd,r=t.history,i=kr(),a=kr(),u=kr(),c=Ng(Hs);let d=Hs;Un&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Ua.bind(null,K=>""+K),m=Ua.bind(null,U_),v=Ua.bind(null,ni);function E(K,oe){let ie,ce;return Qf(K)?(ie=e.getRecordMatcher(K),ce=oe):ce=K,e.addRoute(ce,ie)}function S(K){const oe=e.getRecordMatcher(K);oe&&e.removeRoute(oe)}function k(){return e.getRoutes().map(K=>K.record)}function M(K){return!!e.getRecordMatcher(K)}function L(K,oe){if(oe=Me({},oe||c.value),typeof K=="string"){const R=Ba(s,K,oe.path),U=e.resolve({path:R.path},oe),Y=r.createHref(R.fullPath);return Me(R,U,{params:v(U.params),hash:ni(R.hash),redirectedFrom:void 0,href:Y})}let ie;if(K.path!=null)ie=Me({},K,{path:Ba(s,K.path,oe.path).path});else{const R=Me({},K.params);for(const U in R)R[U]==null&&delete R[U];ie=Me({},K,{params:m(R)}),oe.params=m(oe.params)}const ce=e.resolve(ie,oe),ye=K.hash||"";ce.params=f(v(ce.params));const Ve=q_(n,Me({},K,{hash:O_(ye),path:ce.path})),I=r.createHref(Ve);return Me({fullPath:Ve,hash:ye,query:n===wd?ry(K.query):K.query||{}},ce,{redirectedFrom:void 0,href:I})}function x(K){return typeof K=="string"?Ba(s,K,c.value.path):Me({},K)}function $(K,oe){if(d!==K)return tr(rt.NAVIGATION_CANCELLED,{from:oe,to:K})}function z(K){return g(K)}function ee(K){return z(Me(x(K),{replace:!0}))}function N(K,oe){const ie=K.matched[K.matched.length-1];if(ie&&ie.redirect){const{redirect:ce}=ie;let ye=typeof ce=="function"?ce(K,oe):ce;return typeof ye=="string"&&(ye=ye.includes("?")||ye.includes("#")?ye=x(ye):{path:ye},ye.params={}),Me({query:K.query,hash:K.hash,params:ye.path!=null?{}:K.params},ye)}}function g(K,oe){const ie=d=L(K),ce=c.value,ye=K.state,Ve=K.force,I=K.replace===!0,R=N(ie,ce);if(R)return g(Me(x(R),{state:typeof R=="object"?Me({},ye,R.state):ye,force:Ve,replace:I}),oe||ie);const U=ie;U.redirectedFrom=oe;let Y;return!Ve&&G_(n,ce,ie)&&(Y=tr(rt.NAVIGATION_DUPLICATED,{to:U,from:ce}),Ht(ce,ce,!0,!1)),(Y?Promise.resolve(Y):w(U,ce)).catch(D=>ws(D)?ws(D,rt.NAVIGATION_GUARD_REDIRECT)?D:Gt(D):ge(D,U,ce)).then(D=>{if(D){if(ws(D,rt.NAVIGATION_GUARD_REDIRECT))return g(Me({replace:I},x(D.to),{state:typeof D.to=="object"?Me({},ye,D.to.state):ye,force:Ve}),oe||U)}else D=P(U,ce,!0,I,ye);return b(U,ce,D),D})}function y(K,oe){const ie=$(K,oe);return ie?Promise.reject(ie):Promise.resolve()}function T(K){const oe=ts.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(K):K()}function w(K,oe){let ie;const[ce,ye,Ve]=oy(K,oe);ie=qa(ce.reverse(),"beforeRouteLeave",K,oe);for(const R of ce)R.leaveGuards.forEach(U=>{ie.push(Qs(U,K,oe))});const I=y.bind(null,K,oe);return ie.push(I),St(ie).then(()=>{ie=[];for(const R of i.list())ie.push(Qs(R,K,oe));return ie.push(I),St(ie)}).then(()=>{ie=qa(ye,"beforeRouteUpdate",K,oe);for(const R of ye)R.updateGuards.forEach(U=>{ie.push(Qs(U,K,oe))});return ie.push(I),St(ie)}).then(()=>{ie=[];for(const R of Ve)if(R.beforeEnter)if(cs(R.beforeEnter))for(const U of R.beforeEnter)ie.push(Qs(U,K,oe));else ie.push(Qs(R.beforeEnter,K,oe));return ie.push(I),St(ie)}).then(()=>(K.matched.forEach(R=>R.enterCallbacks={}),ie=qa(Ve,"beforeRouteEnter",K,oe,T),ie.push(I),St(ie))).then(()=>{ie=[];for(const R of a.list())ie.push(Qs(R,K,oe));return ie.push(I),St(ie)}).catch(R=>ws(R,rt.NAVIGATION_CANCELLED)?R:Promise.reject(R))}function b(K,oe,ie){u.list().forEach(ce=>T(()=>ce(K,oe,ie)))}function P(K,oe,ie,ce,ye){const Ve=$(K,oe);if(Ve)return Ve;const I=oe===Hs,R=Un?history.state:{};ie&&(ce||I?r.replace(K.fullPath,Me({scroll:I&&R&&R.scroll},ye)):r.push(K.fullPath,ye)),c.value=K,Ht(K,oe,ie,I),Gt()}let C;function Ce(){C||(C=r.listen((K,oe,ie)=>{if(!_t.listening)return;const ce=L(K),ye=N(ce,_t.currentRoute.value);if(ye){g(Me(ye,{replace:!0,force:!0}),ce).catch(zr);return}d=ce;const Ve=c.value;Un&&X_(Id(Ve.fullPath,ie.delta),Yo()),w(ce,Ve).catch(I=>ws(I,rt.NAVIGATION_ABORTED|rt.NAVIGATION_CANCELLED)?I:ws(I,rt.NAVIGATION_GUARD_REDIRECT)?(g(Me(x(I.to),{force:!0}),ce).then(R=>{ws(R,rt.NAVIGATION_ABORTED|rt.NAVIGATION_DUPLICATED)&&!ie.delta&&ie.type===fl.pop&&r.go(-1,!1)}).catch(zr),Promise.reject()):(ie.delta&&r.go(-ie.delta,!1),ge(I,ce,Ve))).then(I=>{I=I||P(ce,Ve,!1),I&&(ie.delta&&!ws(I,rt.NAVIGATION_CANCELLED)?r.go(-ie.delta,!1):ie.type===fl.pop&&ws(I,rt.NAVIGATION_ABORTED|rt.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),b(ce,Ve,I)}).catch(zr)}))}let ot=kr(),Ke=kr(),ae;function ge(K,oe,ie){Gt(K);const ce=Ke.list();return ce.length?ce.forEach(ye=>ye(K,oe,ie)):console.error(K),Promise.reject(K)}function mt(){return ae&&c.value!==Hs?Promise.resolve():new Promise((K,oe)=>{ot.add([K,oe])})}function Gt(K){return ae||(ae=!K,Ce(),ot.list().forEach(([oe,ie])=>K?ie(K):oe()),ot.reset()),K}function Ht(K,oe,ie,ce){const{scrollBehavior:ye}=t;if(!Un||!ye)return Promise.resolve();const Ve=!ie&&Z_(Id(K.fullPath,0))||(ce||!ie)&&history.state&&history.state.scroll||null;return Jl().then(()=>ye(K,oe,Ve)).then(I=>I&&J_(I)).catch(I=>ge(I,K,oe))}const Be=K=>r.go(K);let We;const ts=new Set,_t={currentRoute:c,listening:!0,addRoute:E,removeRoute:S,clearRoutes:e.clearRoutes,hasRoute:M,getRoutes:k,resolve:L,options:t,push:z,replace:ee,go:Be,back:()=>Be(-1),forward:()=>Be(1),beforeEach:i.add,beforeResolve:a.add,afterEach:u.add,onError:Ke.add,isReady:mt,install(K){K.component("RouterLink",Ry),K.component("RouterView",Dy),K.config.globalProperties.$router=_t,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>pt(c)}),Un&&!We&&c.value===Hs&&(We=!0,z(r.location).catch(ce=>{}));const oe={};for(const ce in Hs)Object.defineProperty(oe,ce,{get:()=>c.value[ce],enumerable:!0});K.provide(ou,_t),K.provide(Jf,sf(oe)),K.provide(ml,c);const ie=K.unmount;ts.add(K),K.unmount=function(){ts.delete(K),ts.size<1&&(d=Hs,C&&C(),C=null,c.value=Hs,We=!1,ae=!1),ie()}}};function St(K){return K.reduce((oe,ie)=>oe.then(()=>T(ie)),Promise.resolve())}return _t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tp=function(t){const e=[];let s=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e[s++]=r:r<2048?(e[s++]=r>>6|192,e[s++]=r&63|128):(r&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++n)&1023),e[s++]=r>>18|240,e[s++]=r>>12&63|128,e[s++]=r>>6&63|128,e[s++]=r&63|128):(e[s++]=r>>12|224,e[s++]=r>>6&63|128,e[s++]=r&63|128)}return e},Ny=function(t){const e=[];let s=0,n=0;for(;s<t.length;){const r=t[s++];if(r<128)e[n++]=String.fromCharCode(r);else if(r>191&&r<224){const i=t[s++];e[n++]=String.fromCharCode((r&31)<<6|i&63)}else if(r>239&&r<365){const i=t[s++],a=t[s++],u=t[s++],c=((r&7)<<18|(i&63)<<12|(a&63)<<6|u&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const i=t[s++],a=t[s++];e[n++]=String.fromCharCode((r&15)<<12|(i&63)<<6|a&63)}}return e.join("")},sp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let r=0;r<t.length;r+=3){const i=t[r],a=r+1<t.length,u=a?t[r+1]:0,c=r+2<t.length,d=c?t[r+2]:0,f=i>>2,m=(i&3)<<4|u>>4;let v=(u&15)<<2|d>>6,E=d&63;c||(E=64,a||(v=64)),n.push(s[f],s[m],s[v],s[E])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tp(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ny(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let r=0;r<t.length;){const i=s[t.charAt(r++)],u=r<t.length?s[t.charAt(r)]:0;++r;const d=r<t.length?s[t.charAt(r)]:64;++r;const m=r<t.length?s[t.charAt(r)]:64;if(++r,i==null||u==null||d==null||m==null)throw new My;const v=i<<2|u>>4;if(n.push(v),d!==64){const E=u<<4&240|d>>2;if(n.push(E),m!==64){const S=d<<6&192|m;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class My extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $y=function(t){const e=tp(t);return sp.encodeByteArray(e,!0)},Eo=function(t){return $y(t).replace(/\./g,"")},Oy=function(t){try{return sp.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly=()=>Fy().__FIREBASE_DEFAULTS__,Uy=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},By=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Oy(t[1]);return e&&JSON.parse(e)},au=()=>{try{return Ly()||Uy()||By()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jy=t=>{var e,s;return(s=(e=au())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},qy=t=>{const e=jy(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),n]:[e.substring(0,s),n]},np=()=>{var t;return(t=au())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,n)=>{s?this.reject(s):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),u="";return[Eo(JSON.stringify(s)),Eo(JSON.stringify(a)),u].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ky(){var t;const e=(t=au())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wy(){return!Ky()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qy(){try{return typeof indexedDB=="object"}catch{return!1}}function Yy(){return new Promise((t,e)=>{try{let s=!0;const n="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(n);r.onsuccess=()=>{r.result.close(),s||self.indexedDB.deleteDatabase(n),t(!0)},r.onupgradeneeded=()=>{s=!1},r.onerror=()=>{var i;e(((i=r.error)===null||i===void 0?void 0:i.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="FirebaseError";class cr extends Error{constructor(e,s,n){super(s),this.code=e,this.customData=n,this.name=Jy,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rp.prototype.create)}}class rp{constructor(e,s,n){this.service=e,this.serviceName=s,this.errors=n}create(e,...s){const n=s[0]||{},r=`${this.service}/${e}`,i=this.errors[e],a=i?Xy(i,n):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new cr(r,u,n)}}function Xy(t,e){return t.replace(Zy,(s,n)=>{const r=e[n];return r!=null?String(r):`<${n}?>`})}const Zy=/\{\$([^}]+)}/g;function gl(t,e){if(t===e)return!0;const s=Object.keys(t),n=Object.keys(e);for(const r of s){if(!n.includes(r))return!1;const i=t[r],a=e[r];if(Od(i)&&Od(a)){if(!gl(i,a))return!1}else if(i!==a)return!1}for(const r of n)if(!s.includes(r))return!1;return!0}function Od(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(t){return t&&t._delegate?t._delegate:t}class ri{constructor(e,s,n){this.name=e,this.instanceFactory=s,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const n=new Gy;if(this.instancesDeferred.set(s,n),this.isInitialized(s)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:s});r&&n.resolve(r)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s1(e))try{this.getOrInitializeService({instanceIdentifier:_n})}catch{}for(const[s,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(s);try{const i=this.getOrInitializeService({instanceIdentifier:r});n.resolve(i)}catch{}}}}clearInstance(e=_n){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_n){return this.instances.has(e)}getOptions(e=_n){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:s});for(const[i,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);n===u&&a.resolve(r)}return r}onInit(e,s){var n;const r=this.normalizeInstanceIdentifier(s),i=(n=this.onInitCallbacks.get(r))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,s){const n=this.onInitCallbacks.get(s);if(n)for(const r of n)try{r(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:t1(e),options:s}),this.instances.set(e,n),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=_n){return this.component?this.component.multipleInstances?e:_n:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function t1(t){return t===_n?void 0:t}function s1(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new e1(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const r1={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},i1=ke.INFO,o1={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},a1=(t,e,...s)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),r=o1[e];if(r)console[r](`[${n}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ip{constructor(e){this.name=e,this._logLevel=i1,this._logHandler=a1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?r1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const l1=(t,e)=>e.some(s=>t instanceof s);let Fd,Ld;function u1(){return Fd||(Fd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function c1(){return Ld||(Ld=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const op=new WeakMap,vl=new WeakMap,ap=new WeakMap,Ga=new WeakMap,lu=new WeakMap;function d1(t){const e=new Promise((s,n)=>{const r=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{s(Zs(t.result)),r()},a=()=>{n(t.error),r()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(s=>{s instanceof IDBCursor&&op.set(s,t)}).catch(()=>{}),lu.set(e,t),e}function h1(t){if(vl.has(t))return;const e=new Promise((s,n)=>{const r=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{s(),r()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});vl.set(t,e)}let _l={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return vl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ap.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Zs(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function f1(t){_l=t(_l)}function p1(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const n=t.call(Ha(this),e,...s);return ap.set(n,e.sort?e.sort():[e]),Zs(n)}:c1().includes(t)?function(...e){return t.apply(Ha(this),e),Zs(op.get(this))}:function(...e){return Zs(t.apply(Ha(this),e))}}function m1(t){return typeof t=="function"?p1(t):(t instanceof IDBTransaction&&h1(t),l1(t,u1())?new Proxy(t,_l):t)}function Zs(t){if(t instanceof IDBRequest)return d1(t);if(Ga.has(t))return Ga.get(t);const e=m1(t);return e!==t&&(Ga.set(t,e),lu.set(e,t)),e}const Ha=t=>lu.get(t);function g1(t,e,{blocked:s,upgrade:n,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),u=Zs(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Zs(a.result),c.oldVersion,c.newVersion,Zs(a.transaction),c)}),s&&a.addEventListener("blocked",c=>s(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),r&&c.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const v1=["get","getKey","getAll","getAllKeys","count"],_1=["put","add","delete","clear"],za=new Map;function Ud(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(za.get(e))return za.get(e);const s=e.replace(/FromIndex$/,""),n=e!==s,r=_1.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!(r||v1.includes(s)))return;const i=async function(a,...u){const c=this.transaction(a,r?"readwrite":"readonly");let d=c.store;return n&&(d=d.index(u.shift())),(await Promise.all([d[s](...u),r&&c.done]))[0]};return za.set(e,i),i}f1(t=>({...t,get:(e,s,n)=>Ud(e,s)||t.get(e,s,n),has:(e,s)=>!!Ud(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(E1(s)){const n=s.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(s=>s).join(" ")}}function E1(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yl="@firebase/app",Bd="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new ip("@firebase/app"),b1="@firebase/app-compat",A1="@firebase/analytics-compat",T1="@firebase/analytics",I1="@firebase/app-check-compat",w1="@firebase/app-check",C1="@firebase/auth",S1="@firebase/auth-compat",R1="@firebase/database",P1="@firebase/data-connect",k1="@firebase/database-compat",V1="@firebase/functions",D1="@firebase/functions-compat",x1="@firebase/installations",N1="@firebase/installations-compat",M1="@firebase/messaging",$1="@firebase/messaging-compat",O1="@firebase/performance",F1="@firebase/performance-compat",L1="@firebase/remote-config",U1="@firebase/remote-config-compat",B1="@firebase/storage",j1="@firebase/storage-compat",q1="@firebase/firestore",G1="@firebase/vertexai-preview",H1="@firebase/firestore-compat",z1="firebase",K1="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El="[DEFAULT]",W1={[yl]:"fire-core",[b1]:"fire-core-compat",[T1]:"fire-analytics",[A1]:"fire-analytics-compat",[w1]:"fire-app-check",[I1]:"fire-app-check-compat",[C1]:"fire-auth",[S1]:"fire-auth-compat",[R1]:"fire-rtdb",[P1]:"fire-data-connect",[k1]:"fire-rtdb-compat",[V1]:"fire-fn",[D1]:"fire-fn-compat",[x1]:"fire-iid",[N1]:"fire-iid-compat",[M1]:"fire-fcm",[$1]:"fire-fcm-compat",[O1]:"fire-perf",[F1]:"fire-perf-compat",[L1]:"fire-rc",[U1]:"fire-rc-compat",[B1]:"fire-gcs",[j1]:"fire-gcs-compat",[q1]:"fire-fst",[H1]:"fire-fst-compat",[G1]:"fire-vertex","fire-js":"fire-js",[z1]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=new Map,Q1=new Map,bl=new Map;function jd(t,e){try{t.container.addComponent(e)}catch(s){Ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function Ao(t){const e=t.name;if(bl.has(e))return Ms.debug(`There were multiple attempts to register component ${e}.`),!1;bl.set(e,t);for(const s of bo.values())jd(s,t);for(const s of Q1.values())jd(s,t);return!0}function Y1(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},en=new rp("app","Firebase",J1);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,s,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new ri("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw en.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1=K1;function lp(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:El,automaticDataCollectionEnabled:!1},e),r=n.name;if(typeof r!="string"||!r)throw en.create("bad-app-name",{appName:String(r)});if(s||(s=np()),!s)throw en.create("no-options");const i=bo.get(r);if(i){if(gl(s,i.options)&&gl(n,i.config))return i;throw en.create("duplicate-app",{appName:r})}const a=new n1(r);for(const c of bl.values())a.addComponent(c);const u=new X1(s,n,a);return bo.set(r,u),u}function e0(t=El){const e=bo.get(t);if(!e&&t===El&&np())return lp();if(!e)throw en.create("no-app",{appName:t});return e}function Wn(t,e,s){var n;let r=(n=W1[t])!==null&&n!==void 0?n:t;s&&(r+=`-${s}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const u=[`Unable to register library "${r}" with version "${e}":`];i&&u.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ms.warn(u.join(" "));return}Ao(new ri(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="firebase-heartbeat-database",s0=1,ii="firebase-heartbeat-store";let Ka=null;function up(){return Ka||(Ka=g1(t0,s0,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ii)}catch(s){console.warn(s)}}}}).catch(t=>{throw en.create("idb-open",{originalErrorMessage:t.message})})),Ka}async function n0(t){try{const s=(await up()).transaction(ii),n=await s.objectStore(ii).get(cp(t));return await s.done,n}catch(e){if(e instanceof cr)Ms.warn(e.message);else{const s=en.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ms.warn(s.message)}}}async function qd(t,e){try{const n=(await up()).transaction(ii,"readwrite");await n.objectStore(ii).put(e,cp(t)),await n.done}catch(s){if(s instanceof cr)Ms.warn(s.message);else{const n=en.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Ms.warn(n.message)}}}function cp(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=1024,i0=30*24*60*60*1e3;class o0{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new l0(s),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,s;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Gd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=i0}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ms.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=Gd(),{heartbeatsToSend:n,unsentEntries:r}=a0(this._heartbeatsCache.heartbeats),i=Eo(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=s,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(s){return Ms.warn(s),""}}}function Gd(){return new Date().toISOString().substring(0,10)}function a0(t,e=r0){const s=[];let n=t.slice();for(const r of t){const i=s.find(a=>a.agent===r.agent);if(i){if(i.dates.push(r.date),Hd(s)>e){i.dates.pop();break}}else if(s.push({agent:r.agent,dates:[r.date]}),Hd(s)>e){s.pop();break}n=n.slice(1)}return{heartbeatsToSend:s,unsentEntries:n}}class l0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qy()?Yy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await n0(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const r=await this.read();return qd(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const r=await this.read();return qd(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Hd(t){return Eo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){Ao(new ri("platform-logger",e=>new y1(e),"PRIVATE")),Ao(new ri("heartbeat",e=>new o0(e),"PRIVATE")),Wn(yl,Bd,t),Wn(yl,Bd,"esm2017"),Wn("fire-js","")}u0("");var c0="firebase",d0="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wn(c0,d0,"app");var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tn,dp;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(g,y){function T(){}T.prototype=y.prototype,g.D=y.prototype,g.prototype=new T,g.prototype.constructor=g,g.C=function(w,b,P){for(var C=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)C[Ce-2]=arguments[Ce];return y.prototype[b].apply(w,C)}}function s(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,s),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(g,y,T){T||(T=0);var w=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)w[b]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(b=0;16>b;++b)w[b]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=g.g[0],T=g.g[1],b=g.g[2];var P=g.g[3],C=y+(P^T&(b^P))+w[0]+3614090360&4294967295;y=T+(C<<7&4294967295|C>>>25),C=P+(b^y&(T^b))+w[1]+3905402710&4294967295,P=y+(C<<12&4294967295|C>>>20),C=b+(T^P&(y^T))+w[2]+606105819&4294967295,b=P+(C<<17&4294967295|C>>>15),C=T+(y^b&(P^y))+w[3]+3250441966&4294967295,T=b+(C<<22&4294967295|C>>>10),C=y+(P^T&(b^P))+w[4]+4118548399&4294967295,y=T+(C<<7&4294967295|C>>>25),C=P+(b^y&(T^b))+w[5]+1200080426&4294967295,P=y+(C<<12&4294967295|C>>>20),C=b+(T^P&(y^T))+w[6]+2821735955&4294967295,b=P+(C<<17&4294967295|C>>>15),C=T+(y^b&(P^y))+w[7]+4249261313&4294967295,T=b+(C<<22&4294967295|C>>>10),C=y+(P^T&(b^P))+w[8]+1770035416&4294967295,y=T+(C<<7&4294967295|C>>>25),C=P+(b^y&(T^b))+w[9]+2336552879&4294967295,P=y+(C<<12&4294967295|C>>>20),C=b+(T^P&(y^T))+w[10]+4294925233&4294967295,b=P+(C<<17&4294967295|C>>>15),C=T+(y^b&(P^y))+w[11]+2304563134&4294967295,T=b+(C<<22&4294967295|C>>>10),C=y+(P^T&(b^P))+w[12]+1804603682&4294967295,y=T+(C<<7&4294967295|C>>>25),C=P+(b^y&(T^b))+w[13]+4254626195&4294967295,P=y+(C<<12&4294967295|C>>>20),C=b+(T^P&(y^T))+w[14]+2792965006&4294967295,b=P+(C<<17&4294967295|C>>>15),C=T+(y^b&(P^y))+w[15]+1236535329&4294967295,T=b+(C<<22&4294967295|C>>>10),C=y+(b^P&(T^b))+w[1]+4129170786&4294967295,y=T+(C<<5&4294967295|C>>>27),C=P+(T^b&(y^T))+w[6]+3225465664&4294967295,P=y+(C<<9&4294967295|C>>>23),C=b+(y^T&(P^y))+w[11]+643717713&4294967295,b=P+(C<<14&4294967295|C>>>18),C=T+(P^y&(b^P))+w[0]+3921069994&4294967295,T=b+(C<<20&4294967295|C>>>12),C=y+(b^P&(T^b))+w[5]+3593408605&4294967295,y=T+(C<<5&4294967295|C>>>27),C=P+(T^b&(y^T))+w[10]+38016083&4294967295,P=y+(C<<9&4294967295|C>>>23),C=b+(y^T&(P^y))+w[15]+3634488961&4294967295,b=P+(C<<14&4294967295|C>>>18),C=T+(P^y&(b^P))+w[4]+3889429448&4294967295,T=b+(C<<20&4294967295|C>>>12),C=y+(b^P&(T^b))+w[9]+568446438&4294967295,y=T+(C<<5&4294967295|C>>>27),C=P+(T^b&(y^T))+w[14]+3275163606&4294967295,P=y+(C<<9&4294967295|C>>>23),C=b+(y^T&(P^y))+w[3]+4107603335&4294967295,b=P+(C<<14&4294967295|C>>>18),C=T+(P^y&(b^P))+w[8]+1163531501&4294967295,T=b+(C<<20&4294967295|C>>>12),C=y+(b^P&(T^b))+w[13]+2850285829&4294967295,y=T+(C<<5&4294967295|C>>>27),C=P+(T^b&(y^T))+w[2]+4243563512&4294967295,P=y+(C<<9&4294967295|C>>>23),C=b+(y^T&(P^y))+w[7]+1735328473&4294967295,b=P+(C<<14&4294967295|C>>>18),C=T+(P^y&(b^P))+w[12]+2368359562&4294967295,T=b+(C<<20&4294967295|C>>>12),C=y+(T^b^P)+w[5]+4294588738&4294967295,y=T+(C<<4&4294967295|C>>>28),C=P+(y^T^b)+w[8]+2272392833&4294967295,P=y+(C<<11&4294967295|C>>>21),C=b+(P^y^T)+w[11]+1839030562&4294967295,b=P+(C<<16&4294967295|C>>>16),C=T+(b^P^y)+w[14]+4259657740&4294967295,T=b+(C<<23&4294967295|C>>>9),C=y+(T^b^P)+w[1]+2763975236&4294967295,y=T+(C<<4&4294967295|C>>>28),C=P+(y^T^b)+w[4]+1272893353&4294967295,P=y+(C<<11&4294967295|C>>>21),C=b+(P^y^T)+w[7]+4139469664&4294967295,b=P+(C<<16&4294967295|C>>>16),C=T+(b^P^y)+w[10]+3200236656&4294967295,T=b+(C<<23&4294967295|C>>>9),C=y+(T^b^P)+w[13]+681279174&4294967295,y=T+(C<<4&4294967295|C>>>28),C=P+(y^T^b)+w[0]+3936430074&4294967295,P=y+(C<<11&4294967295|C>>>21),C=b+(P^y^T)+w[3]+3572445317&4294967295,b=P+(C<<16&4294967295|C>>>16),C=T+(b^P^y)+w[6]+76029189&4294967295,T=b+(C<<23&4294967295|C>>>9),C=y+(T^b^P)+w[9]+3654602809&4294967295,y=T+(C<<4&4294967295|C>>>28),C=P+(y^T^b)+w[12]+3873151461&4294967295,P=y+(C<<11&4294967295|C>>>21),C=b+(P^y^T)+w[15]+530742520&4294967295,b=P+(C<<16&4294967295|C>>>16),C=T+(b^P^y)+w[2]+3299628645&4294967295,T=b+(C<<23&4294967295|C>>>9),C=y+(b^(T|~P))+w[0]+4096336452&4294967295,y=T+(C<<6&4294967295|C>>>26),C=P+(T^(y|~b))+w[7]+1126891415&4294967295,P=y+(C<<10&4294967295|C>>>22),C=b+(y^(P|~T))+w[14]+2878612391&4294967295,b=P+(C<<15&4294967295|C>>>17),C=T+(P^(b|~y))+w[5]+4237533241&4294967295,T=b+(C<<21&4294967295|C>>>11),C=y+(b^(T|~P))+w[12]+1700485571&4294967295,y=T+(C<<6&4294967295|C>>>26),C=P+(T^(y|~b))+w[3]+2399980690&4294967295,P=y+(C<<10&4294967295|C>>>22),C=b+(y^(P|~T))+w[10]+4293915773&4294967295,b=P+(C<<15&4294967295|C>>>17),C=T+(P^(b|~y))+w[1]+2240044497&4294967295,T=b+(C<<21&4294967295|C>>>11),C=y+(b^(T|~P))+w[8]+1873313359&4294967295,y=T+(C<<6&4294967295|C>>>26),C=P+(T^(y|~b))+w[15]+4264355552&4294967295,P=y+(C<<10&4294967295|C>>>22),C=b+(y^(P|~T))+w[6]+2734768916&4294967295,b=P+(C<<15&4294967295|C>>>17),C=T+(P^(b|~y))+w[13]+1309151649&4294967295,T=b+(C<<21&4294967295|C>>>11),C=y+(b^(T|~P))+w[4]+4149444226&4294967295,y=T+(C<<6&4294967295|C>>>26),C=P+(T^(y|~b))+w[11]+3174756917&4294967295,P=y+(C<<10&4294967295|C>>>22),C=b+(y^(P|~T))+w[2]+718787259&4294967295,b=P+(C<<15&4294967295|C>>>17),C=T+(P^(b|~y))+w[9]+3951481745&4294967295,g.g[0]=g.g[0]+y&4294967295,g.g[1]=g.g[1]+(b+(C<<21&4294967295|C>>>11))&4294967295,g.g[2]=g.g[2]+b&4294967295,g.g[3]=g.g[3]+P&4294967295}n.prototype.u=function(g,y){y===void 0&&(y=g.length);for(var T=y-this.blockSize,w=this.B,b=this.h,P=0;P<y;){if(b==0)for(;P<=T;)r(this,g,P),P+=this.blockSize;if(typeof g=="string"){for(;P<y;)if(w[b++]=g.charCodeAt(P++),b==this.blockSize){r(this,w),b=0;break}}else for(;P<y;)if(w[b++]=g[P++],b==this.blockSize){r(this,w),b=0;break}}this.h=b,this.o+=y},n.prototype.v=function(){var g=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);g[0]=128;for(var y=1;y<g.length-8;++y)g[y]=0;var T=8*this.o;for(y=g.length-8;y<g.length;++y)g[y]=T&255,T/=256;for(this.u(g),g=Array(16),y=T=0;4>y;++y)for(var w=0;32>w;w+=8)g[T++]=this.g[y]>>>w&255;return g};function i(g,y){var T=u;return Object.prototype.hasOwnProperty.call(T,g)?T[g]:T[g]=y(g)}function a(g,y){this.h=y;for(var T=[],w=!0,b=g.length-1;0<=b;b--){var P=g[b]|0;w&&P==y||(T[b]=P,w=!1)}this.g=T}var u={};function c(g){return-128<=g&&128>g?i(g,function(y){return new a([y|0],0>y?-1:0)}):new a([g|0],0>g?-1:0)}function d(g){if(isNaN(g)||!isFinite(g))return m;if(0>g)return M(d(-g));for(var y=[],T=1,w=0;g>=T;w++)y[w]=g/T|0,T*=4294967296;return new a(y,0)}function f(g,y){if(g.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(g.charAt(0)=="-")return M(f(g.substring(1),y));if(0<=g.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=d(Math.pow(y,8)),w=m,b=0;b<g.length;b+=8){var P=Math.min(8,g.length-b),C=parseInt(g.substring(b,b+P),y);8>P?(P=d(Math.pow(y,P)),w=w.j(P).add(d(C))):(w=w.j(T),w=w.add(d(C)))}return w}var m=c(0),v=c(1),E=c(16777216);t=a.prototype,t.m=function(){if(k(this))return-M(this).m();for(var g=0,y=1,T=0;T<this.g.length;T++){var w=this.i(T);g+=(0<=w?w:4294967296+w)*y,y*=4294967296}return g},t.toString=function(g){if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(S(this))return"0";if(k(this))return"-"+M(this).toString(g);for(var y=d(Math.pow(g,6)),T=this,w="";;){var b=z(T,y).g;T=L(T,b.j(y));var P=((0<T.g.length?T.g[0]:T.h)>>>0).toString(g);if(T=b,S(T))return P+w;for(;6>P.length;)P="0"+P;w=P+w}},t.i=function(g){return 0>g?0:g<this.g.length?this.g[g]:this.h};function S(g){if(g.h!=0)return!1;for(var y=0;y<g.g.length;y++)if(g.g[y]!=0)return!1;return!0}function k(g){return g.h==-1}t.l=function(g){return g=L(this,g),k(g)?-1:S(g)?0:1};function M(g){for(var y=g.g.length,T=[],w=0;w<y;w++)T[w]=~g.g[w];return new a(T,~g.h).add(v)}t.abs=function(){return k(this)?M(this):this},t.add=function(g){for(var y=Math.max(this.g.length,g.g.length),T=[],w=0,b=0;b<=y;b++){var P=w+(this.i(b)&65535)+(g.i(b)&65535),C=(P>>>16)+(this.i(b)>>>16)+(g.i(b)>>>16);w=C>>>16,P&=65535,C&=65535,T[b]=C<<16|P}return new a(T,T[T.length-1]&-2147483648?-1:0)};function L(g,y){return g.add(M(y))}t.j=function(g){if(S(this)||S(g))return m;if(k(this))return k(g)?M(this).j(M(g)):M(M(this).j(g));if(k(g))return M(this.j(M(g)));if(0>this.l(E)&&0>g.l(E))return d(this.m()*g.m());for(var y=this.g.length+g.g.length,T=[],w=0;w<2*y;w++)T[w]=0;for(w=0;w<this.g.length;w++)for(var b=0;b<g.g.length;b++){var P=this.i(w)>>>16,C=this.i(w)&65535,Ce=g.i(b)>>>16,ot=g.i(b)&65535;T[2*w+2*b]+=C*ot,x(T,2*w+2*b),T[2*w+2*b+1]+=P*ot,x(T,2*w+2*b+1),T[2*w+2*b+1]+=C*Ce,x(T,2*w+2*b+1),T[2*w+2*b+2]+=P*Ce,x(T,2*w+2*b+2)}for(w=0;w<y;w++)T[w]=T[2*w+1]<<16|T[2*w];for(w=y;w<2*y;w++)T[w]=0;return new a(T,0)};function x(g,y){for(;(g[y]&65535)!=g[y];)g[y+1]+=g[y]>>>16,g[y]&=65535,y++}function $(g,y){this.g=g,this.h=y}function z(g,y){if(S(y))throw Error("division by zero");if(S(g))return new $(m,m);if(k(g))return y=z(M(g),y),new $(M(y.g),M(y.h));if(k(y))return y=z(g,M(y)),new $(M(y.g),y.h);if(30<g.g.length){if(k(g)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var T=v,w=y;0>=w.l(g);)T=ee(T),w=ee(w);var b=N(T,1),P=N(w,1);for(w=N(w,2),T=N(T,2);!S(w);){var C=P.add(w);0>=C.l(g)&&(b=b.add(T),P=C),w=N(w,1),T=N(T,1)}return y=L(g,b.j(y)),new $(b,y)}for(b=m;0<=g.l(y);){for(T=Math.max(1,Math.floor(g.m()/y.m())),w=Math.ceil(Math.log(T)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),P=d(T),C=P.j(y);k(C)||0<C.l(g);)T-=w,P=d(T),C=P.j(y);S(P)&&(P=v),b=b.add(P),g=L(g,C)}return new $(b,g)}t.A=function(g){return z(this,g).h},t.and=function(g){for(var y=Math.max(this.g.length,g.g.length),T=[],w=0;w<y;w++)T[w]=this.i(w)&g.i(w);return new a(T,this.h&g.h)},t.or=function(g){for(var y=Math.max(this.g.length,g.g.length),T=[],w=0;w<y;w++)T[w]=this.i(w)|g.i(w);return new a(T,this.h|g.h)},t.xor=function(g){for(var y=Math.max(this.g.length,g.g.length),T=[],w=0;w<y;w++)T[w]=this.i(w)^g.i(w);return new a(T,this.h^g.h)};function ee(g){for(var y=g.g.length+1,T=[],w=0;w<y;w++)T[w]=g.i(w)<<1|g.i(w-1)>>>31;return new a(T,g.h)}function N(g,y){var T=y>>5;y%=32;for(var w=g.g.length-T,b=[],P=0;P<w;P++)b[P]=0<y?g.i(P+T)>>>y|g.i(P+T+1)<<32-y:g.i(P+T);return new a(b,g.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,dp=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,Tn=a}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});var zi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hp,Nr,fp,oo,Al,pp,mp,gp;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function s(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof zi=="object"&&zi];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var n=s(this);function r(l,h){if(h)e:{var p=n;l=l.split(".");for(var _=0;_<l.length-1;_++){var O=l[_];if(!(O in p))break e;p=p[O]}l=l[l.length-1],_=p[l],h=h(_),h!=_&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,_=!1,O={next:function(){if(!_&&p<l.length){var q=p++;return{value:h(q,l[q]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}r("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function v(l,h,p){return v=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,v.apply(null,arguments)}function E(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),l.apply(this,_)}}function S(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(_,O,q){for(var se=Array(arguments.length-2),je=2;je<arguments.length;je++)se[je-2]=arguments[je];return h.prototype[O].apply(_,se)}}function k(l){const h=l.length;if(0<h){const p=Array(h);for(let _=0;_<h;_++)p[_]=l[_];return p}return[]}function M(l,h){for(let p=1;p<arguments.length;p++){const _=arguments[p];if(c(_)){const O=l.length||0,q=_.length||0;l.length=O+q;for(let se=0;se<q;se++)l[O+se]=_[se]}else l.push(_)}}class L{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(l){return/^[\s\xa0]*$/.test(l)}function $(){var l=u.navigator;return l&&(l=l.userAgent)?l:""}function z(l){return z[" "](l),l}z[" "]=function(){};var ee=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function N(l,h,p){for(const _ in l)h.call(p,l[_],_,l)}function g(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(l,h){let p,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(p in _)l[p]=_[p];for(let q=0;q<T.length;q++)p=T[q],Object.prototype.hasOwnProperty.call(_,p)&&(l[p]=_[p])}}function b(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function P(l){u.setTimeout(()=>{throw l},0)}function C(){var l=mt;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Ce{constructor(){this.h=this.g=null}add(h,p){const _=ot.get();_.set(h,p),this.h?this.h.next=_:this.g=_,this.h=_}}var ot=new L(()=>new Ke,l=>l.reset());class Ke{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ae,ge=!1,mt=new Ce,Gt=()=>{const l=u.Promise.resolve(void 0);ae=()=>{l.then(Ht)}};var Ht=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(p){P(p)}var h=ot;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}ge=!1};function Be(){this.s=this.s,this.C=this.C}Be.prototype.s=!1,Be.prototype.ma=function(){this.s||(this.s=!0,this.N())},Be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function We(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var ts=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};u.addEventListener("test",p,h),u.removeEventListener("test",p,h)}catch{}return l}();function _t(l,h){if(We.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,_=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(ee){e:{try{z(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:St[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&_t.aa.h.call(this)}}S(_t,We);var St={2:"touch",3:"pen",4:"mouse"};_t.prototype.h=function(){_t.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var K="closure_listenable_"+(1e6*Math.random()|0),oe=0;function ie(l,h,p,_,O){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!_,this.ha=O,this.key=++oe,this.da=this.fa=!1}function ce(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ye(l){this.src=l,this.g={},this.h=0}ye.prototype.add=function(l,h,p,_,O){var q=l.toString();l=this.g[q],l||(l=this.g[q]=[],this.h++);var se=I(l,h,_,O);return-1<se?(h=l[se],p||(h.fa=!1)):(h=new ie(h,this.src,q,!!_,O),h.fa=p,l.push(h)),h};function Ve(l,h){var p=h.type;if(p in l.g){var _=l.g[p],O=Array.prototype.indexOf.call(_,h,void 0),q;(q=0<=O)&&Array.prototype.splice.call(_,O,1),q&&(ce(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function I(l,h,p,_){for(var O=0;O<l.length;++O){var q=l[O];if(!q.da&&q.listener==h&&q.capture==!!p&&q.ha==_)return O}return-1}var R="closure_lm_"+(1e6*Math.random()|0),U={};function Y(l,h,p,_,O){if(_&&_.once)return G(l,h,p,_,O);if(Array.isArray(h)){for(var q=0;q<h.length;q++)Y(l,h[q],p,_,O);return null}return p=fe(p),l&&l[K]?l.K(h,p,d(_)?!!_.capture:!!_,O):D(l,h,p,!1,_,O)}function D(l,h,p,_,O,q){if(!h)throw Error("Invalid event type");var se=d(O)?!!O.capture:!!O,je=B(l);if(je||(l[R]=je=new ye(l)),p=je.add(h,p,_,se,q),p.proxy)return p;if(_=A(),p.proxy=_,_.src=l,_.listener=p,l.addEventListener)ts||(O=se),O===void 0&&(O=!1),l.addEventListener(h.toString(),_,O);else if(l.attachEvent)l.attachEvent(H(h.toString()),_);else if(l.addListener&&l.removeListener)l.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function A(){function l(p){return h.call(l.src,l.listener,p)}const h=te;return l}function G(l,h,p,_,O){if(Array.isArray(h)){for(var q=0;q<h.length;q++)G(l,h[q],p,_,O);return null}return p=fe(p),l&&l[K]?l.L(h,p,d(_)?!!_.capture:!!_,O):D(l,h,p,!0,_,O)}function W(l,h,p,_,O){if(Array.isArray(h))for(var q=0;q<h.length;q++)W(l,h[q],p,_,O);else _=d(_)?!!_.capture:!!_,p=fe(p),l&&l[K]?(l=l.i,h=String(h).toString(),h in l.g&&(q=l.g[h],p=I(q,p,_,O),-1<p&&(ce(q[p]),Array.prototype.splice.call(q,p,1),q.length==0&&(delete l.g[h],l.h--)))):l&&(l=B(l))&&(h=l.g[h.toString()],l=-1,h&&(l=I(h,p,_,O)),(p=-1<l?h[l]:null)&&J(p))}function J(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[K])Ve(h.i,l);else{var p=l.type,_=l.proxy;h.removeEventListener?h.removeEventListener(p,_,l.capture):h.detachEvent?h.detachEvent(H(p),_):h.addListener&&h.removeListener&&h.removeListener(_),(p=B(h))?(Ve(p,l),p.h==0&&(p.src=null,h[R]=null)):ce(l)}}}function H(l){return l in U?U[l]:U[l]="on"+l}function te(l,h){if(l.da)l=!0;else{h=new _t(h,this);var p=l.listener,_=l.ha||l.src;l.fa&&J(l),l=p.call(_,h)}return l}function B(l){return l=l[R],l instanceof ye?l:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(l){return typeof l=="function"?l:(l[Z]||(l[Z]=function(h){return l.handleEvent(h)}),l[Z])}function me(){Be.call(this),this.i=new ye(this),this.M=this,this.F=null}S(me,Be),me.prototype[K]=!0,me.prototype.removeEventListener=function(l,h,p,_){W(this,l,h,p,_)};function Te(l,h){var p,_=l.F;if(_)for(p=[];_;_=_.F)p.push(_);if(l=l.M,_=h.type||h,typeof h=="string")h=new We(h,l);else if(h instanceof We)h.target=h.target||l;else{var O=h;h=new We(_,l),w(h,O)}if(O=!0,p)for(var q=p.length-1;0<=q;q--){var se=h.g=p[q];O=Re(se,_,!0,h)&&O}if(se=h.g=l,O=Re(se,_,!0,h)&&O,O=Re(se,_,!1,h)&&O,p)for(q=0;q<p.length;q++)se=h.g=p[q],O=Re(se,_,!1,h)&&O}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],_=0;_<p.length;_++)ce(p[_]);delete l.g[h],l.h--}}this.F=null},me.prototype.K=function(l,h,p,_){return this.i.add(String(l),h,!1,p,_)},me.prototype.L=function(l,h,p,_){return this.i.add(String(l),h,!0,p,_)};function Re(l,h,p,_){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,q=0;q<h.length;++q){var se=h[q];if(se&&!se.da&&se.capture==p){var je=se.listener,bt=se.ha||se.src;se.fa&&Ve(l.i,se),O=je.call(bt,_)!==!1&&O}}return O&&!_.defaultPrevented}function yt(l,h,p){if(typeof l=="function")p&&(l=v(l,p));else if(l&&typeof l.handleEvent=="function")l=v(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(l,h||0)}function dt(l){l.g=yt(()=>{l.g=null,l.i&&(l.i=!1,dt(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class Qt extends Be{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:dt(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ht(l){Be.call(this),this.h=l,this.g={}}S(ht,Be);var Bs=[];function mr(l){N(l.g,function(h,p){this.g.hasOwnProperty(p)&&J(h)},l),l.g={}}ht.prototype.N=function(){ht.aa.N.call(this),mr(this)},ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Et=u.JSON.stringify,ss=u.JSON.parse,Ci=class{stringify(l){return u.JSON.stringify(l,void 0)}parse(l){return u.JSON.parse(l,void 0)}};function Dn(){}Dn.prototype.h=null;function Wu(l){return l.h||(l.h=l.i())}function Qu(){}var gr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ga(){We.call(this,"d")}S(ga,We);function va(){We.call(this,"c")}S(va,We);var cn={},Yu=null;function Si(){return Yu=Yu||new me}cn.La="serverreachability";function Ju(l){We.call(this,cn.La,l)}S(Ju,We);function vr(l){const h=Si();Te(h,new Ju(h))}cn.STAT_EVENT="statevent";function Xu(l,h){We.call(this,cn.STAT_EVENT,l),this.stat=h}S(Xu,We);function Ft(l){const h=Si();Te(h,new Xu(h,l))}cn.Ma="timingevent";function Zu(l,h){We.call(this,cn.Ma,l),this.size=h}S(Zu,We);function _r(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){l()},h)}function yr(){this.g=!0}yr.prototype.xa=function(){this.g=!1};function xm(l,h,p,_,O,q){l.info(function(){if(l.g)if(q)for(var se="",je=q.split("&"),bt=0;bt<je.length;bt++){var De=je[bt].split("=");if(1<De.length){var Rt=De[0];De=De[1];var Pt=Rt.split("_");se=2<=Pt.length&&Pt[1]=="type"?se+(Rt+"="+De+"&"):se+(Rt+"=redacted&")}}else se=null;else se=q;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+h+`
`+p+`
`+se})}function Nm(l,h,p,_,O,q,se){l.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+h+`
`+p+`
`+q+" "+se})}function xn(l,h,p,_){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+$m(l,p)+(_?" "+_:"")})}function Mm(l,h){l.info(function(){return"TIMEOUT: "+h})}yr.prototype.info=function(){};function $m(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var _=p[l];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var q=O[0];if(q!="noop"&&q!="stop"&&q!="close")for(var se=1;se<O.length;se++)O[se]=""}}}}return Et(p)}catch{return h}}var Ri={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ec={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},_a;function Pi(){}S(Pi,Dn),Pi.prototype.g=function(){return new XMLHttpRequest},Pi.prototype.i=function(){return{}},_a=new Pi;function js(l,h,p,_){this.j=l,this.i=h,this.l=p,this.R=_||1,this.U=new ht(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new tc}function tc(){this.i=null,this.g="",this.h=!1}var sc={},ya={};function Ea(l,h,p){l.L=1,l.v=xi(As(h)),l.m=p,l.P=!0,nc(l,null)}function nc(l,h){l.F=Date.now(),ki(l),l.A=As(l.v);var p=l.A,_=l.R;Array.isArray(_)||(_=[String(_)]),vc(p.i,"t",_),l.C=0,p=l.j.J,l.h=new tc,l.g=Mc(l.j,p?h:null,!l.m),0<l.O&&(l.M=new Qt(v(l.Y,l,l.g),l.O)),h=l.U,p=l.g,_=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Bs[0]=O.toString()),O=Bs);for(var q=0;q<O.length;q++){var se=Y(p,O[q],_||h.handleEvent,!1,h.h||h);if(!se)break;h.g[se.key]=se}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),vr(),xm(l.i,l.u,l.A,l.l,l.R,l.m)}js.prototype.ca=function(l){l=l.target;const h=this.M;h&&Ts(l)==3?h.j():this.Y(l)},js.prototype.Y=function(l){try{if(l==this.g)e:{const Pt=Ts(this.g);var h=this.g.Ba();const $n=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||Ic(this.g)))){this.J||Pt!=4||h==7||(h==8||0>=$n?vr(3):vr(2)),ba(this);var p=this.g.Z();this.X=p;t:if(rc(this)){var _=Ic(this.g);l="";var O=_.length,q=Ts(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){dn(this),Er(this);var se="";break t}this.h.i=new u.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(_[h],{stream:!(q&&h==O-1)});_.length=0,this.h.g+=l,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=p==200,Nm(this.i,this.u,this.A,this.l,this.R,Pt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var je,bt=this.g;if((je=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(je)){var De=je;break t}}De=null}if(p=De)xn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Aa(this,p);else{this.o=!1,this.s=3,Ft(12),dn(this),Er(this);break e}}if(this.P){p=!0;let os;for(;!this.J&&this.C<se.length;)if(os=Om(this,se),os==ya){Pt==4&&(this.s=4,Ft(14),p=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(os==sc){this.s=4,Ft(15),xn(this.i,this.l,se,"[Invalid Chunk]"),p=!1;break}else xn(this.i,this.l,os,null),Aa(this,os);if(rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||se.length!=0||this.h.h||(this.s=1,Ft(16),p=!1),this.o=this.o&&p,!p)xn(this.i,this.l,se,"[Invalid Chunked Response]"),dn(this),Er(this);else if(0<se.length&&!this.W){this.W=!0;var Rt=this.j;Rt.g==this&&Rt.ba&&!Rt.M&&(Rt.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),Ra(Rt),Rt.M=!0,Ft(11))}}else xn(this.i,this.l,se,null),Aa(this,se);Pt==4&&dn(this),this.o&&!this.J&&(Pt==4?Vc(this.j,this):(this.o=!1,ki(this)))}else eg(this.g),p==400&&0<se.indexOf("Unknown SID")?(this.s=3,Ft(12)):(this.s=0,Ft(13)),dn(this),Er(this)}}}catch{}finally{}};function rc(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Om(l,h){var p=l.C,_=h.indexOf(`
`,p);return _==-1?ya:(p=Number(h.substring(p,_)),isNaN(p)?sc:(_+=1,_+p>h.length?ya:(h=h.slice(_,_+p),l.C=_+p,h)))}js.prototype.cancel=function(){this.J=!0,dn(this)};function ki(l){l.S=Date.now()+l.I,ic(l,l.I)}function ic(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=_r(v(l.ba,l),h)}function ba(l){l.B&&(u.clearTimeout(l.B),l.B=null)}js.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Mm(this.i,this.A),this.L!=2&&(vr(),Ft(17)),dn(this),this.s=2,Er(this)):ic(this,this.S-l)};function Er(l){l.j.G==0||l.J||Vc(l.j,l)}function dn(l){ba(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,mr(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Aa(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Ta(p.h,l))){if(!l.K&&Ta(p.h,l)&&p.G==3){try{var _=p.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Li(p),Oi(p);else break e;Sa(p),Ft(18)}}else p.za=O[1],0<p.za-p.T&&37500>O[2]&&p.F&&p.v==0&&!p.C&&(p.C=_r(v(p.Za,p),6e3));if(1>=lc(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else fn(p,11)}else if((l.K||p.g==l)&&Li(p),!x(h))for(O=p.Da.g.parse(h),h=0;h<O.length;h++){let De=O[h];if(p.T=De[0],De=De[1],p.G==2)if(De[0]=="c"){p.K=De[1],p.ia=De[2];const Rt=De[3];Rt!=null&&(p.la=Rt,p.j.info("VER="+p.la));const Pt=De[4];Pt!=null&&(p.Aa=Pt,p.j.info("SVER="+p.Aa));const $n=De[5];$n!=null&&typeof $n=="number"&&0<$n&&(_=1.5*$n,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;const os=l.g;if(os){const Bi=os.g?os.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Bi){var q=_.h;q.g||Bi.indexOf("spdy")==-1&&Bi.indexOf("quic")==-1&&Bi.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Ia(q,q.h),q.h=null))}if(_.D){const Pa=os.g?os.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(_.ya=Pa,Je(_.I,_.D,Pa))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var se=l;if(_.qa=Nc(_,_.J?_.ia:null,_.W),se.K){uc(_.h,se);var je=se,bt=_.L;bt&&(je.I=bt),je.B&&(ba(je),ki(je)),_.g=se}else Pc(_);0<p.i.length&&Fi(p)}else De[0]!="stop"&&De[0]!="close"||fn(p,7);else p.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?fn(p,7):Ca(p):De[0]!="noop"&&p.l&&p.l.ta(De),p.v=0)}}vr(4)}catch{}}var Fm=class{constructor(l,h){this.g=l,this.map=h}};function oc(l){this.l=l||10,u.PerformanceNavigationTiming?(l=u.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ac(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function lc(l){return l.h?1:l.g?l.g.size:0}function Ta(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Ia(l,h){l.g?l.g.add(h):l.h=h}function uc(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}oc.prototype.cancel=function(){if(this.i=cc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function cc(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return k(l.i)}function Lm(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,_=0;_<p;_++)h.push(l[_]);return h}h=[],p=0;for(_ in l)h[p++]=l[_];return h}function Um(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const _ in l)h[p++]=_;return h}}}function dc(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=Um(l),_=Lm(l),O=_.length,q=0;q<O;q++)h.call(void 0,_[q],p&&p[q],l)}var hc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bm(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var _=l[p].indexOf("="),O=null;if(0<=_){var q=l[p].substring(0,_);O=l[p].substring(_+1)}else q=l[p];h(q,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function hn(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof hn){this.h=l.h,Vi(this,l.j),this.o=l.o,this.g=l.g,Di(this,l.s),this.l=l.l;var h=l.i,p=new Tr;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),fc(this,p),this.m=l.m}else l&&(h=String(l).match(hc))?(this.h=!1,Vi(this,h[1]||"",!0),this.o=br(h[2]||""),this.g=br(h[3]||"",!0),Di(this,h[4]),this.l=br(h[5]||"",!0),fc(this,h[6]||"",!0),this.m=br(h[7]||"")):(this.h=!1,this.i=new Tr(null,this.h))}hn.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Ar(h,pc,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Ar(h,pc,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Ar(p,p.charAt(0)=="/"?Gm:qm,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Ar(p,zm)),l.join("")};function As(l){return new hn(l)}function Vi(l,h,p){l.j=p?br(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Di(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function fc(l,h,p){h instanceof Tr?(l.i=h,Km(l.i,l.h)):(p||(h=Ar(h,Hm)),l.i=new Tr(h,l.h))}function Je(l,h,p){l.i.set(h,p)}function xi(l){return Je(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function br(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ar(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,jm),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function jm(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var pc=/[#\/\?@]/g,qm=/[#\?:]/g,Gm=/[#\?]/g,Hm=/[#\?@]/g,zm=/#/g;function Tr(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function qs(l){l.g||(l.g=new Map,l.h=0,l.i&&Bm(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Tr.prototype,t.add=function(l,h){qs(this),this.i=null,l=Nn(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function mc(l,h){qs(l),h=Nn(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function gc(l,h){return qs(l),h=Nn(l,h),l.g.has(h)}t.forEach=function(l,h){qs(this),this.g.forEach(function(p,_){p.forEach(function(O){l.call(h,O,_,this)},this)},this)},t.na=function(){qs(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let _=0;_<h.length;_++){const O=l[_];for(let q=0;q<O.length;q++)p.push(h[_])}return p},t.V=function(l){qs(this);let h=[];if(typeof l=="string")gc(this,l)&&(h=h.concat(this.g.get(Nn(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return qs(this),this.i=null,l=Nn(this,l),gc(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function vc(l,h,p){mc(l,h),0<p.length&&(l.i=null,l.g.set(Nn(l,h),k(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var _=h[p];const q=encodeURIComponent(String(_)),se=this.V(_);for(_=0;_<se.length;_++){var O=q;se[_]!==""&&(O+="="+encodeURIComponent(String(se[_]))),l.push(O)}}return this.i=l.join("&")};function Nn(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function Km(l,h){h&&!l.j&&(qs(l),l.i=null,l.g.forEach(function(p,_){var O=_.toLowerCase();_!=O&&(mc(this,_),vc(this,O,p))},l)),l.j=h}function Wm(l,h){const p=new yr;if(u.Image){const _=new Image;_.onload=E(Gs,p,"TestLoadImage: loaded",!0,h,_),_.onerror=E(Gs,p,"TestLoadImage: error",!1,h,_),_.onabort=E(Gs,p,"TestLoadImage: abort",!1,h,_),_.ontimeout=E(Gs,p,"TestLoadImage: timeout",!1,h,_),u.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=l}else h(!1)}function Qm(l,h){const p=new yr,_=new AbortController,O=setTimeout(()=>{_.abort(),Gs(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:_.signal}).then(q=>{clearTimeout(O),q.ok?Gs(p,"TestPingServer: ok",!0,h):Gs(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),Gs(p,"TestPingServer: error",!1,h)})}function Gs(l,h,p,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(p)}catch{}}function Ym(){this.g=new Ci}function Jm(l,h,p){const _=p||"";try{dc(l,function(O,q){let se=O;d(O)&&(se=Et(O)),h.push(_+q+"="+encodeURIComponent(se))})}catch(O){throw h.push(_+"type="+encodeURIComponent("_badmap")),O}}function Ni(l){this.l=l.Ub||null,this.j=l.eb||!1}S(Ni,Dn),Ni.prototype.g=function(){return new Mi(this.l,this.j)},Ni.prototype.i=function(l){return function(){return l}}({});function Mi(l,h){me.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Mi,me),t=Mi.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,wr(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ir(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,wr(this)),this.g&&(this.readyState=3,wr(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;_c(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function _c(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Ir(this):wr(this),this.readyState==3&&_c(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Ir(this))},t.Qa=function(l){this.g&&(this.response=l,Ir(this))},t.ga=function(){this.g&&Ir(this)};function Ir(l){l.readyState=4,l.l=null,l.j=null,l.v=null,wr(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function wr(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Mi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function yc(l){let h="";return N(l,function(p,_){h+=_,h+=":",h+=p,h+=`\r
`}),h}function wa(l,h,p){e:{for(_ in p){var _=!1;break e}_=!0}_||(p=yc(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Je(l,h,p))}function nt(l){me.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(nt,me);var Xm=/^https?$/i,Zm=["POST","PUT"];t=nt.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():_a.g(),this.v=this.o?Wu(this.o):Wu(_a),this.g.onreadystatechange=v(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(q){Ec(this,q);return}if(l=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)p.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const q of _.keys())p.set(q,_.get(q));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(q=>q.toLowerCase()=="content-type"),O=u.FormData&&l instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Zm,h,void 0))||_||O||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,se]of p)this.g.setRequestHeader(q,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tc(this),this.u=!0,this.g.send(l),this.u=!1}catch(q){Ec(this,q)}};function Ec(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,bc(l),$i(l)}function bc(l){l.A||(l.A=!0,Te(l,"complete"),Te(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Te(this,"complete"),Te(this,"abort"),$i(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$i(this,!0)),nt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ac(this):this.bb())},t.bb=function(){Ac(this)};function Ac(l){if(l.h&&typeof a<"u"&&(!l.v[1]||Ts(l)!=4||l.Z()!=2)){if(l.u&&Ts(l)==4)yt(l.Ea,0,l);else if(Te(l,"readystatechange"),Ts(l)==4){l.h=!1;try{const se=l.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var _;if(_=se===0){var O=String(l.D).match(hc)[1]||null;!O&&u.self&&u.self.location&&(O=u.self.location.protocol.slice(0,-1)),_=!Xm.test(O?O.toLowerCase():"")}p=_}if(p)Te(l,"complete"),Te(l,"success");else{l.m=6;try{var q=2<Ts(l)?l.g.statusText:""}catch{q=""}l.l=q+" ["+l.Z()+"]",bc(l)}}finally{$i(l)}}}}function $i(l,h){if(l.g){Tc(l);const p=l.g,_=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Te(l,"ready");try{p.onreadystatechange=_}catch{}}}function Tc(l){l.I&&(u.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Ts(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Ts(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),ss(h)}};function Ic(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function eg(l){const h={};l=(l.g&&2<=Ts(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<l.length;_++){if(x(l[_]))continue;var p=b(l[_]);const O=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const q=h[O]||[];h[O]=q,q.push(p)}g(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cr(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function wc(l){this.Aa=0,this.i=[],this.j=new yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cr("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cr("baseRetryDelayMs",5e3,l),this.cb=Cr("retryDelaySeedMs",1e4,l),this.Wa=Cr("forwardChannelMaxRetries",2,l),this.wa=Cr("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new oc(l&&l.concurrentRequestLimit),this.Da=new Ym,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=wc.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,_){Ft(0),this.W=l,this.H=h||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=Nc(this,null,this.W),Fi(this)};function Ca(l){if(Cc(l),l.G==3){var h=l.U++,p=As(l.I);if(Je(p,"SID",l.K),Je(p,"RID",h),Je(p,"TYPE","terminate"),Sr(l,p),h=new js(l,l.j,h),h.L=2,h.v=xi(As(p)),p=!1,u.navigator&&u.navigator.sendBeacon)try{p=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&u.Image&&(new Image().src=h.v,p=!0),p||(h.g=Mc(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ki(h)}xc(l)}function Oi(l){l.g&&(Ra(l),l.g.cancel(),l.g=null)}function Cc(l){Oi(l),l.u&&(u.clearTimeout(l.u),l.u=null),Li(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&u.clearTimeout(l.s),l.s=null)}function Fi(l){if(!ac(l.h)&&!l.s){l.s=!0;var h=l.Ga;ae||Gt(),ge||(ae(),ge=!0),mt.add(h,l),l.B=0}}function tg(l,h){return lc(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=_r(v(l.Ga,l,h),Dc(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new js(this,this.j,l);let q=this.o;if(this.S&&(q?(q=y(q),w(q,this.S)):q=this.S),this.m!==null||this.O||(O.H=q,q=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Rc(this,O,h),p=As(this.I),Je(p,"RID",l),Je(p,"CVER",22),this.D&&Je(p,"X-HTTP-Session-Id",this.D),Sr(this,p),q&&(this.O?h="headers="+encodeURIComponent(String(yc(q)))+"&"+h:this.m&&wa(p,this.m,q)),Ia(this.h,O),this.Ua&&Je(p,"TYPE","init"),this.P?(Je(p,"$req",h),Je(p,"SID","null"),O.T=!0,Ea(O,p,null)):Ea(O,p,h),this.G=2}}else this.G==3&&(l?Sc(this,l):this.i.length==0||ac(this.h)||Sc(this))};function Sc(l,h){var p;h?p=h.l:p=l.U++;const _=As(l.I);Je(_,"SID",l.K),Je(_,"RID",p),Je(_,"AID",l.T),Sr(l,_),l.m&&l.o&&wa(_,l.m,l.o),p=new js(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Rc(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ia(l.h,p),Ea(p,_,h)}function Sr(l,h){l.H&&N(l.H,function(p,_){Je(h,_,p)}),l.l&&dc({},function(p,_){Je(h,_,p)})}function Rc(l,h,p){p=Math.min(l.i.length,p);var _=l.l?v(l.l.Na,l.l,l):null;e:{var O=l.i;let q=-1;for(;;){const se=["count="+p];q==-1?0<p?(q=O[0].g,se.push("ofs="+q)):q=0:se.push("ofs="+q);let je=!0;for(let bt=0;bt<p;bt++){let De=O[bt].g;const Rt=O[bt].map;if(De-=q,0>De)q=Math.max(0,O[bt].g-100),je=!1;else try{Jm(Rt,se,"req"+De+"_")}catch{_&&_(Rt)}}if(je){_=se.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,_}function Pc(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;ae||Gt(),ge||(ae(),ge=!0),mt.add(h,l),l.v=0}}function Sa(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=_r(v(l.Fa,l),Dc(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,kc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=_r(v(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ft(10),Oi(this),kc(this))};function Ra(l){l.A!=null&&(u.clearTimeout(l.A),l.A=null)}function kc(l){l.g=new js(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=As(l.qa);Je(h,"RID","rpc"),Je(h,"SID",l.K),Je(h,"AID",l.T),Je(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Je(h,"TO",l.ja),Je(h,"TYPE","xmlhttp"),Sr(l,h),l.m&&l.o&&wa(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=xi(As(h)),p.m=null,p.P=!0,nc(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Oi(this),Sa(this),Ft(19))};function Li(l){l.C!=null&&(u.clearTimeout(l.C),l.C=null)}function Vc(l,h){var p=null;if(l.g==h){Li(l),Ra(l),l.g=null;var _=2}else if(Ta(l.h,h))p=h.D,uc(l.h,h),_=1;else return;if(l.G!=0){if(h.o)if(_==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;_=Si(),Te(_,new Zu(_,p)),Fi(l)}else Pc(l);else if(O=h.s,O==3||O==0&&0<h.X||!(_==1&&tg(l,h)||_==2&&Sa(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),O){case 1:fn(l,5);break;case 4:fn(l,10);break;case 3:fn(l,6);break;default:fn(l,2)}}}function Dc(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function fn(l,h){if(l.j.info("Error code "+h),h==2){var p=v(l.fb,l),_=l.Xa;const O=!_;_=new hn(_||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Vi(_,"https"),xi(_),O?Wm(_.toString(),p):Qm(_.toString(),p)}else Ft(2);l.G=0,l.l&&l.l.sa(h),xc(l),Cc(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Ft(2)):(this.j.info("Failed to ping google.com"),Ft(1))};function xc(l){if(l.G=0,l.ka=[],l.l){const h=cc(l.h);(h.length!=0||l.i.length!=0)&&(M(l.ka,h),M(l.ka,l.i),l.h.i.length=0,k(l.i),l.i.length=0),l.l.ra()}}function Nc(l,h,p){var _=p instanceof hn?As(p):new hn(p);if(_.g!="")h&&(_.g=h+"."+_.g),Di(_,_.s);else{var O=u.location;_=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var q=new hn(null);_&&Vi(q,_),h&&(q.g=h),O&&Di(q,O),p&&(q.l=p),_=q}return p=l.D,h=l.ya,p&&h&&Je(_,p,h),Je(_,"VER",l.la),Sr(l,_),_}function Mc(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new nt(new Ni({eb:p})):new nt(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}t=$c.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ui(){}Ui.prototype.g=function(l,h){return new Yt(l,h)};function Yt(l,h){me.call(this),this.g=new wc(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!x(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Mn(this)}S(Yt,me),Yt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){Ca(this.g)},Yt.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Et(l),l=p);h.i.push(new Fm(h.Ya++,l)),h.G==3&&Fi(h)},Yt.prototype.N=function(){this.g.l=null,delete this.j,Ca(this.g),delete this.g,Yt.aa.N.call(this)};function Oc(l){ga.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}S(Oc,ga);function Fc(){va.call(this),this.status=1}S(Fc,va);function Mn(l){this.g=l}S(Mn,$c),Mn.prototype.ua=function(){Te(this.g,"a")},Mn.prototype.ta=function(l){Te(this.g,new Oc(l))},Mn.prototype.sa=function(l){Te(this.g,new Fc)},Mn.prototype.ra=function(){Te(this.g,"b")},Ui.prototype.createWebChannel=Ui.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,gp=function(){return new Ui},mp=function(){return Si()},pp=cn,Al={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ri.NO_ERROR=0,Ri.TIMEOUT=8,Ri.HTTP_ERROR=6,oo=Ri,ec.COMPLETE="complete",fp=ec,Qu.EventType=gr,gr.OPEN="a",gr.CLOSE="b",gr.ERROR="c",gr.MESSAGE="d",me.prototype.listen=me.prototype.K,Nr=Qu,nt.prototype.listenOnce=nt.prototype.L,nt.prototype.getLastError=nt.prototype.Ka,nt.prototype.getLastErrorCode=nt.prototype.Ba,nt.prototype.getStatus=nt.prototype.Z,nt.prototype.getResponseJson=nt.prototype.Oa,nt.prototype.getResponseText=nt.prototype.oa,nt.prototype.send=nt.prototype.ea,nt.prototype.setWithCredentials=nt.prototype.Ha,hp=nt}).apply(typeof zi<"u"?zi:typeof self<"u"?self:typeof window<"u"?window:{});const Kd="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dr="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const In=new ip("@firebase/firestore");function Vr(){return In.logLevel}function de(t,...e){if(In.logLevel<=ke.DEBUG){const s=e.map(uu);In.debug(`Firestore (${dr}): ${t}`,...s)}}function $s(t,...e){if(In.logLevel<=ke.ERROR){const s=e.map(uu);In.error(`Firestore (${dr}): ${t}`,...s)}}function sr(t,...e){if(In.logLevel<=ke.WARN){const s=e.map(uu);In.warn(`Firestore (${dr}): ${t}`,...s)}}function uu(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${dr}) INTERNAL ASSERTION FAILED: `+t;throw $s(e),new Error(e)}function Fe(t,e){t||_e()}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends cr{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Vt.UNAUTHENTICATED))}shutdown(){}}class f0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class p0{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){Fe(this.o===void 0);let n=this.i;const r=c=>this.i!==n?(n=this.i,s(c)):Promise.resolve();let i=new Vs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vs,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await r(this.currentUser)})},u=c=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vs)}},0),a()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(n=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Fe(typeof n.accessToken=="string"),new vp(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new Vt(e)}}class m0{constructor(e,s,n){this.l=e,this.h=s,this.P=n,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class g0{constructor(e,s,n){this.l=e,this.h=s,this.P=n}getToken(){return Promise.resolve(new m0(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable(()=>s(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class v0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){Fe(this.o===void 0);const n=i=>{i.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,de("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?s(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const r=i=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?r(i):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(Fe(typeof s.token=="string"),this.R=s.token,new v0(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let n=0;n<t;n++)s[n]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=y0(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<s&&(n+=e.charAt(r[i]%e.length))}return n}}function Ne(t,e){return t<e?-1:t>e?1:0}function nr(t,e,s){return t.length===e.length&&t.every((n,r)=>s(n,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new le(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return tt.fromMillis(Date.now())}static fromDate(e){return tt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*s));return new tt(s,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new tt(0,0))}static max(){return new Ee(new tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,s,n){s===void 0?s=0:s>e.length&&_e(),n===void 0?n=e.length-s:n>e.length-s&&_e(),this.segments=e,this.offset=s,this.len=n}get length(){return this.len}isEqual(e){return oi.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof oi?e.forEach(n=>{s.push(n)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,n=this.limit();s<n;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const n=Math.min(e.length,s.length);for(let r=0;r<n;r++){const i=e.get(r),a=s.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class Ze extends oi{construct(e,s,n){return new Ze(e,s,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const n of e){if(n.indexOf("//")>=0)throw new le(Q.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);s.push(...n.split("/").filter(r=>r.length>0))}return new Ze(s)}static emptyPath(){return new Ze([])}}const E0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Tt extends oi{construct(e,s,n){return new Tt(e,s,n)}static isValidIdentifier(e){return E0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Tt(["__name__"])}static fromServerFormat(e){const s=[];let n="",r=0;const i=()=>{if(n.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(n),n=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new le(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(n+=u,r++):(i(),r++)}if(i(),a)throw new le(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Tt(s)}static emptyPath(){return new Tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(Ze.fromString(e))}static fromName(e){return new pe(Ze.fromString(e).popFirst(5))}static empty(){return new pe(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return Ze.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new Ze(e.slice()))}}function b0(t,e){const s=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,r=Ee.fromTimestamp(n===1e9?new tt(s+1,0):new tt(s,n));return new nn(r,pe.empty(),e)}function A0(t){return new nn(t.readTime,t.key,-1)}class nn{constructor(e,s,n){this.readTime=e,this.documentKey=s,this.largestBatchId=n}static min(){return new nn(Ee.min(),pe.empty(),-1)}static max(){return new nn(Ee.max(),pe.empty(),-1)}}function T0(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=pe.comparator(t.documentKey,e.documentKey),s!==0?s:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _i(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==I0)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new X((n,r)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,r)},this.catchCallback=i=>{this.wrapFailure(s,i).next(n,r)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof X?s:X.resolve(s)}catch(s){return X.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):X.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):X.reject(s)}static resolve(e){return new X((s,n)=>{s(e)})}static reject(e){return new X((s,n)=>{n(e)})}static waitFor(e){return new X((s,n)=>{let r=0,i=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++i,a&&i===r&&s()},c=>n(c))}),a=!0,i===r&&s()})}static or(e){let s=X.resolve(!1);for(const n of e)s=s.next(r=>r?X.resolve(r):n());return s}static forEach(e,s){const n=[];return e.forEach((r,i)=>{n.push(s.call(this,r,i))}),this.waitFor(n)}static mapArray(e,s){return new X((n,r)=>{const i=e.length,a=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;s(e[d]).next(f=>{a[d]=f,++u,u===i&&n(a)},f=>r(f))}})}static doWhile(e,s){return new X((n,r)=>{const i=()=>{e()===!0?s().next(()=>{i()},r):n()};i()})}}function C0(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function yi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=n=>this.ie(n),this.se=n=>s.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}cu.oe=-1;function Jo(t){return t==null}function To(t){return t===0&&1/t==-1/0}function S0(t){return typeof t=="number"&&Number.isInteger(t)&&!To(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Rn(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function yp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e,s){this.comparator=e,this.root=s||At.EMPTY}insert(e,s){return new st(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}indexOf(e){let s=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return s+n.left.size;r<0?n=n.left:(s+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,n)=>(e(s,n),!1))}toString(){const e=[];return this.inorderTraversal((s,n)=>(e.push(`${s}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ki(this.root,e,this.comparator,!0)}}class Ki{constructor(e,s,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=s?n(e.key,s):1,s&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,s,n,r,i){this.key=e,this.value=s,this.color=n??At.RED,this.left=r??At.EMPTY,this.right=i??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,n,r,i){return new At(e??this.key,s??this.value,n??this.color,r??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,s,n),null):i===0?r.copy(null,s,null,null,null):r.copy(null,null,null,null,r.right.insert(e,s,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let n,r=this;if(s(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,s),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),s(e,r.key)===0){if(r.right.isEmpty())return At.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,s))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,s,n,r,i){return this}insert(e,s,n){return new At(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,n)=>(e(s),!1))}forEachInRange(e,s){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;s(r.key)}}forEachWhile(e,s){let n;for(n=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new Qd(this.data.getIterator())}getIteratorFrom(e){return new Qd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(n=>{s=s.add(n)}),s}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const s=this.data.getIterator(),n=e.data.getIterator();for(;s.hasNext();){const r=s.getNext().key,i=n.getNext().key;if(this.comparator(r,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new It(this.comparator);return s.data=e,s}}class Qd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.fields=e,e.sort(Tt.comparator)}static empty(){return new Zt([])}unionWith(e){let s=new It(Tt.comparator);for(const n of this.fields)s=s.add(n);for(const n of e)s=s.add(n);return new Zt(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return nr(this.fields,e.fields,(s,n)=>s.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ep("Invalid base64 string: "+i):i}}(e);return new wt(s)}static fromUint8Array(e){const s=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new wt(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const n=new Uint8Array(s.length);for(let r=0;r<s.length;r++)n[r]=s.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const R0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rn(t){if(Fe(!!t),typeof t=="string"){let e=0;const s=R0.exec(t);if(Fe(!!s),s[1]){let r=s[1];r=(r+"000000000").substr(0,9),e=Number(r)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function wn(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function hu(t){const e=t.mapValue.fields.__previous_value__;return du(e)?hu(e):e}function ai(t){const e=rn(t.mapValue.fields.__local_write_time__.timestampValue);return new tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,s,n,r,i,a,u,c,d){this.databaseId=e,this.appId=s,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class li{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new li("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof li&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Cn(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?du(t)?4:V0(t)?9007199254740991:k0(t)?10:11:_e()}function bs(t,e){if(t===e)return!0;const s=Cn(t);if(s!==Cn(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ai(t).isEqual(ai(e));case 3:return function(r,i){if(typeof r.timestampValue=="string"&&typeof i.timestampValue=="string"&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=rn(r.timestampValue),u=rn(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,i){return wn(r.bytesValue).isEqual(wn(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,i){return at(r.geoPointValue.latitude)===at(i.geoPointValue.latitude)&&at(r.geoPointValue.longitude)===at(i.geoPointValue.longitude)}(t,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return at(r.integerValue)===at(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=at(r.doubleValue),u=at(i.doubleValue);return a===u?To(a)===To(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return nr(t.arrayValue.values||[],e.arrayValue.values||[],bs);case 10:case 11:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(Wd(a)!==Wd(u))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(u[c]===void 0||!bs(a[c],u[c])))return!1;return!0}(t,e);default:return _e()}}function ui(t,e){return(t.values||[]).find(s=>bs(s,e))!==void 0}function rr(t,e){if(t===e)return 0;const s=Cn(t),n=Cn(e);if(s!==n)return Ne(s,n);switch(s){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(i,a){const u=at(i.integerValue||i.doubleValue),c=at(a.integerValue||a.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Yd(t.timestampValue,e.timestampValue);case 4:return Yd(ai(t),ai(e));case 5:return Ne(t.stringValue,e.stringValue);case 6:return function(i,a){const u=wn(i),c=wn(a);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),c=a.split("/");for(let d=0;d<u.length&&d<c.length;d++){const f=Ne(u[d],c[d]);if(f!==0)return f}return Ne(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Ne(at(i.latitude),at(a.latitude));return u!==0?u:Ne(at(i.longitude),at(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jd(t.arrayValue,e.arrayValue);case 10:return function(i,a){var u,c,d,f;const m=i.fields||{},v=a.fields||{},E=(u=m.value)===null||u===void 0?void 0:u.arrayValue,S=(c=v.value)===null||c===void 0?void 0:c.arrayValue,k=Ne(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((f=S==null?void 0:S.values)===null||f===void 0?void 0:f.length)||0);return k!==0?k:Jd(E,S)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Wi.mapValue&&a===Wi.mapValue)return 0;if(i===Wi.mapValue)return 1;if(a===Wi.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=a.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let m=0;m<c.length&&m<f.length;++m){const v=Ne(c[m],f[m]);if(v!==0)return v;const E=rr(u[c[m]],d[f[m]]);if(E!==0)return E}return Ne(c.length,f.length)}(t.mapValue,e.mapValue);default:throw _e()}}function Yd(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const s=rn(t),n=rn(e),r=Ne(s.seconds,n.seconds);return r!==0?r:Ne(s.nanos,n.nanos)}function Jd(t,e){const s=t.values||[],n=e.values||[];for(let r=0;r<s.length&&r<n.length;++r){const i=rr(s[r],n[r]);if(i)return i}return Ne(s.length,n.length)}function ir(t){return Tl(t)}function Tl(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const n=rn(s);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return wn(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return pe.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let n="[",r=!0;for(const i of s.values||[])r?r=!1:n+=",",n+=Tl(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(s){const n=Object.keys(s.fields||{}).sort();let r="{",i=!0;for(const a of n)i?i=!1:r+=",",r+=`${a}:${Tl(s.fields[a])}`;return r+"}"}(t.mapValue):_e()}function Xd(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Il(t){return!!t&&"integerValue"in t}function fu(t){return!!t&&"arrayValue"in t}function Zd(t){return!!t&&"nullValue"in t}function eh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ao(t){return!!t&&"mapValue"in t}function k0(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="__vector__"}function Kr(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Rn(t.mapValue.fields,(s,n)=>e.mapValue.fields[s]=Kr(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=Kr(t.arrayValue.values[s]);return e}return Object.assign({},t)}function V0(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let n=0;n<e.length-1;++n)if(s=(s.mapValue.fields||{})[e.get(n)],!ao(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kr(s)}setAll(e){let s=Tt.emptyPath(),n={},r=[];e.forEach((a,u)=>{if(!s.isImmediateParentOf(u)){const c=this.getFieldsMap(s);this.applyChanges(c,n,r),n={},r=[],s=u.popLast()}a?n[u.lastSegment()]=Kr(a):r.push(u.lastSegment())});const i=this.getFieldsMap(s);this.applyChanges(i,n,r)}delete(e){const s=this.field(e.popLast());ao(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return bs(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=s.mapValue.fields[e.get(n)];ao(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},s.mapValue.fields[e.get(n)]=r),s=r}return s.mapValue.fields}applyChanges(e,s,n){Rn(s,(r,i)=>e[r]=i);for(const r of n)delete e[r]}clone(){return new Kt(Kr(this.value))}}function bp(t){const e=[];return Rn(t.fields,(s,n)=>{const r=new Tt([s]);if(ao(n)){const i=bp(n.mapValue).fields;if(i.length===0)e.push(r);else for(const a of i)e.push(r.child(a))}else e.push(r)}),new Zt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,s,n,r,i,a,u){this.key=e,this.documentType=s,this.version=n,this.readTime=r,this.createTime=i,this.data=a,this.documentState=u}static newInvalidDocument(e){return new xt(e,0,Ee.min(),Ee.min(),Ee.min(),Kt.empty(),0)}static newFoundDocument(e,s,n,r){return new xt(e,1,s,Ee.min(),n,r,0)}static newNoDocument(e,s){return new xt(e,2,s,Ee.min(),Ee.min(),Kt.empty(),0)}static newUnknownDocument(e,s){return new xt(e,3,s,Ee.min(),Ee.min(),Kt.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,s){this.position=e,this.inclusive=s}}function th(t,e,s){let n=0;for(let r=0;r<t.position.length;r++){const i=e[r],a=t.position[r];if(i.field.isKeyField()?n=pe.comparator(pe.fromName(a.referenceValue),s.key):n=rr(a,s.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function sh(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!bs(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e,s="asc"){this.field=e,this.dir=s}}function D0(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap{}class ct extends Ap{constructor(e,s,n){super(),this.field=e,this.op=s,this.value=n}static create(e,s,n){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,n):new N0(e,s,n):s==="array-contains"?new O0(e,n):s==="in"?new F0(e,n):s==="not-in"?new L0(e,n):s==="array-contains-any"?new U0(e,n):new ct(e,s,n)}static createKeyFieldInFilter(e,s,n){return s==="in"?new M0(e,n):new $0(e,n)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(rr(s,this.value)):s!==null&&Cn(this.value)===Cn(s)&&this.matchesComparison(rr(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ds extends Ap{constructor(e,s){super(),this.filters=e,this.op=s,this.ae=null}static create(e,s){return new ds(e,s)}matches(e){return Tp(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Tp(t){return t.op==="and"}function Ip(t){return x0(t)&&Tp(t)}function x0(t){for(const e of t.filters)if(e instanceof ds)return!1;return!0}function wl(t){if(t instanceof ct)return t.field.canonicalString()+t.op.toString()+ir(t.value);if(Ip(t))return t.filters.map(e=>wl(e)).join(",");{const e=t.filters.map(s=>wl(s)).join(",");return`${t.op}(${e})`}}function wp(t,e){return t instanceof ct?function(n,r){return r instanceof ct&&n.op===r.op&&n.field.isEqual(r.field)&&bs(n.value,r.value)}(t,e):t instanceof ds?function(n,r){return r instanceof ds&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((i,a,u)=>i&&wp(a,r.filters[u]),!0):!1}(t,e):void _e()}function Cp(t){return t instanceof ct?function(s){return`${s.field.canonicalString()} ${s.op} ${ir(s.value)}`}(t):t instanceof ds?function(s){return s.op.toString()+" {"+s.getFilters().map(Cp).join(" ,")+"}"}(t):"Filter"}class N0 extends ct{constructor(e,s,n){super(e,s,n),this.key=pe.fromName(n.referenceValue)}matches(e){const s=pe.comparator(e.key,this.key);return this.matchesComparison(s)}}class M0 extends ct{constructor(e,s){super(e,"in",s),this.keys=Sp("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class $0 extends ct{constructor(e,s){super(e,"not-in",s),this.keys=Sp("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function Sp(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(n=>pe.fromName(n.referenceValue))}class O0 extends ct{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return fu(s)&&ui(s.arrayValue,this.value)}}class F0 extends ct{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&ui(this.value.arrayValue,s)}}class L0 extends ct{constructor(e,s){super(e,"not-in",s)}matches(e){if(ui(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!ui(this.value.arrayValue,s)}}class U0 extends ct{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!fu(s)||!s.arrayValue.values)&&s.arrayValue.values.some(n=>ui(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e,s=null,n=[],r=[],i=null,a=null,u=null){this.path=e,this.collectionGroup=s,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=a,this.endAt=u,this.ue=null}}function nh(t,e=null,s=[],n=[],r=null,i=null,a=null){return new B0(t,e,s,n,r,i,a)}function pu(t){const e=be(t);if(e.ue===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(n=>wl(n)).join(","),s+="|ob:",s+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),Jo(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(n=>ir(n)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(n=>ir(n)).join(",")),e.ue=s}return e.ue}function mu(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!D0(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!wp(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sh(t.startAt,e.startAt)&&sh(t.endAt,e.endAt)}function Cl(t){return pe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,s=null,n=[],r=[],i=null,a="F",u=null,c=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=a,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function j0(t,e,s,n,r,i,a,u){return new hr(t,e,s,n,r,i,a,u)}function Xo(t){return new hr(t)}function rh(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Rp(t){return t.collectionGroup!==null}function Wr(t){const e=be(t);if(e.ce===null){e.ce=[];const s=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),s.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new It(Tt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{s.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ci(i,n))}),s.has(Tt.keyField().canonicalString())||e.ce.push(new ci(Tt.keyField(),n))}return e.ce}function gs(t){const e=be(t);return e.le||(e.le=q0(e,Wr(t))),e.le}function q0(t,e){if(t.limitType==="F")return nh(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const i=r.dir==="desc"?"asc":"desc";return new ci(r.field,i)});const s=t.endAt?new Io(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new Io(t.startAt.position,t.startAt.inclusive):null;return nh(t.path,t.collectionGroup,e,t.filters,t.limit,s,n)}}function Sl(t,e){const s=t.filters.concat([e]);return new hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Rl(t,e,s){return new hr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Zo(t,e){return mu(gs(t),gs(e))&&t.limitType===e.limitType}function Pp(t){return`${pu(gs(t))}|lt:${t.limitType}`}function Bn(t){return`Query(target=${function(s){let n=s.path.canonicalString();return s.collectionGroup!==null&&(n+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(n+=`, filters: [${s.filters.map(r=>Cp(r)).join(", ")}]`),Jo(s.limit)||(n+=", limit: "+s.limit),s.orderBy.length>0&&(n+=`, orderBy: [${s.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),s.startAt&&(n+=", startAt: ",n+=s.startAt.inclusive?"b:":"a:",n+=s.startAt.position.map(r=>ir(r)).join(",")),s.endAt&&(n+=", endAt: ",n+=s.endAt.inclusive?"a:":"b:",n+=s.endAt.position.map(r=>ir(r)).join(",")),`Target(${n})`}(gs(t))}; limitType=${t.limitType})`}function ea(t,e){return e.isFoundDocument()&&function(n,r){const i=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):pe.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,r){for(const i of Wr(n))if(!i.field.isKeyField()&&r.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const i of n.filters)if(!i.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(a,u,c){const d=th(a,u,c);return a.inclusive?d<=0:d<0}(n.startAt,Wr(n),r)||n.endAt&&!function(a,u,c){const d=th(a,u,c);return a.inclusive?d>=0:d>0}(n.endAt,Wr(n),r))}(t,e)}function G0(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function kp(t){return(e,s)=>{let n=!1;for(const r of Wr(t)){const i=H0(r,e,s);if(i!==0)return i;n=n||r.field.isKeyField()}return 0}}function H0(t,e,s){const n=t.field.isKeyField()?pe.comparator(e.key,s.key):function(i,a,u){const c=a.data.field(i),d=u.data.field(i);return c!==null&&d!==null?rr(c,d):_e()}(t.field,e,s);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n!==void 0){for(const[r,i]of n)if(this.equalsFn(r,e))return i}}has(e){return this.get(e)!==void 0}set(e,s){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return this.inner[n]=[[e,s]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,s]);r.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),n=this.inner[s];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return n.length===1?delete this.inner[s]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rn(this.inner,(s,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return yp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0=new st(pe.comparator);function Os(){return z0}const Vp=new st(pe.comparator);function Mr(...t){let e=Vp;for(const s of t)e=e.insert(s.key,s);return e}function Dp(t){let e=Vp;return t.forEach((s,n)=>e=e.insert(s,n.overlayedDocument)),e}function En(){return Qr()}function xp(){return Qr()}function Qr(){return new fr(t=>t.toString(),(t,e)=>t.isEqual(e))}const K0=new st(pe.comparator),W0=new It(pe.comparator);function Se(...t){let e=W0;for(const s of t)e=e.add(s);return e}const Q0=new It(Ne);function Y0(){return Q0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:To(e)?"-0":e}}function Np(t){return{integerValue:""+t}}function J0(t,e){return S0(e)?Np(e):gu(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this._=void 0}}function X0(t,e,s){return t instanceof di?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&du(i)&&(i=hu(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(s,e):t instanceof hi?$p(t,e):t instanceof fi?Op(t,e):function(r,i){const a=Mp(r,i),u=ih(a)+ih(r.Pe);return Il(a)&&Il(r.Pe)?Np(u):gu(r.serializer,u)}(t,e)}function Z0(t,e,s){return t instanceof hi?$p(t,e):t instanceof fi?Op(t,e):s}function Mp(t,e){return t instanceof wo?function(n){return Il(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class di extends ta{}class hi extends ta{constructor(e){super(),this.elements=e}}function $p(t,e){const s=Fp(e);for(const n of t.elements)s.some(r=>bs(r,n))||s.push(n);return{arrayValue:{values:s}}}class fi extends ta{constructor(e){super(),this.elements=e}}function Op(t,e){let s=Fp(e);for(const n of t.elements)s=s.filter(r=>!bs(r,n));return{arrayValue:{values:s}}}class wo extends ta{constructor(e,s){super(),this.serializer=e,this.Pe=s}}function ih(t){return at(t.integerValue||t.doubleValue)}function Fp(t){return fu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,s){this.field=e,this.transform=s}}function tE(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof hi&&r instanceof hi||n instanceof fi&&r instanceof fi?nr(n.elements,r.elements,bs):n instanceof wo&&r instanceof wo?bs(n.Pe,r.Pe):n instanceof di&&r instanceof di}(t.transform,e.transform)}class sE{constructor(e,s){this.version=e,this.transformResults=s}}class rs{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new rs}static exists(e){return new rs(void 0,e)}static updateTime(e){return new rs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lo(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class sa{}function Lp(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new vu(t.key,rs.none()):new Ei(t.key,t.data,rs.none());{const s=t.data,n=Kt.empty();let r=new It(Tt.comparator);for(let i of e.fields)if(!r.has(i)){let a=s.field(i);a===null&&i.length>1&&(i=i.popLast(),a=s.field(i)),a===null?n.delete(i):n.set(i,a),r=r.add(i)}return new ln(t.key,n,new Zt(r.toArray()),rs.none())}}function nE(t,e,s){t instanceof Ei?function(r,i,a){const u=r.value.clone(),c=ah(r.fieldTransforms,i,a.transformResults);u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,s):t instanceof ln?function(r,i,a){if(!lo(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=ah(r.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Up(r)),c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,s):function(r,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,s)}function Yr(t,e,s,n){return t instanceof Ei?function(i,a,u,c){if(!lo(i.precondition,a))return u;const d=i.value.clone(),f=lh(i.fieldTransforms,c,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,s,n):t instanceof ln?function(i,a,u,c){if(!lo(i.precondition,a))return u;const d=lh(i.fieldTransforms,c,a),f=a.data;return f.setAll(Up(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,s,n):function(i,a,u){return lo(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,s)}function rE(t,e){let s=null;for(const n of t.fieldTransforms){const r=e.data.field(n.field),i=Mp(n.transform,r||null);i!=null&&(s===null&&(s=Kt.empty()),s.set(n.field,i))}return s||null}function oh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&nr(n,r,(i,a)=>tE(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ei extends sa{constructor(e,s,n,r=[]){super(),this.key=e,this.value=s,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ln extends sa{constructor(e,s,n,r,i=[]){super(),this.key=e,this.data=s,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Up(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const n=t.data.field(s);e.set(s,n)}}),e}function ah(t,e,s){const n=new Map;Fe(t.length===s.length);for(let r=0;r<s.length;r++){const i=t[r],a=i.transform,u=e.data.field(i.field);n.set(i.field,Z0(a,u,s[r]))}return n}function lh(t,e,s){const n=new Map;for(const r of t){const i=r.transform,a=s.data.field(r.field);n.set(r.field,X0(i,a,e))}return n}class vu extends sa{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iE extends sa{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,s,n,r){this.batchId=e,this.localWriteTime=s,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,s){const n=s.mutationResults;for(let r=0;r<this.mutations.length;r++){const i=this.mutations[r];i.key.isEqual(e.key)&&nE(i,e,n[r])}}applyToLocalView(e,s){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(s=Yr(n,e,s,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(s=Yr(n,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const n=xp();return this.mutations.forEach(r=>{const i=e.get(r.key),a=i.overlayedDocument;let u=this.applyToLocalView(a,i.mutatedFields);u=s.has(r.key)?null:u;const c=Lp(a,u);c!==null&&n.set(r.key,c),a.isValidDocument()||a.convertToNoDocument(Ee.min())}),n}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),Se())}isEqual(e){return this.batchId===e.batchId&&nr(this.mutations,e.mutations,(s,n)=>oh(s,n))&&nr(this.baseMutations,e.baseMutations,(s,n)=>oh(s,n))}}class _u{constructor(e,s,n,r){this.batch=e,this.commitVersion=s,this.mutationResults=n,this.docVersions=r}static from(e,s,n){Fe(e.mutations.length===n.length);let r=function(){return K0}();const i=e.mutations;for(let a=0;a<i.length;a++)r=r.insert(i[a].key,n[a].version);return new _u(e,s,n,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Pe;function uE(t){switch(t){default:return _e();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function Bp(t){if(t===void 0)return $s("GRPC error has no .code"),Q.UNKNOWN;switch(t){case ut.OK:return Q.OK;case ut.CANCELLED:return Q.CANCELLED;case ut.UNKNOWN:return Q.UNKNOWN;case ut.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case ut.INTERNAL:return Q.INTERNAL;case ut.UNAVAILABLE:return Q.UNAVAILABLE;case ut.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case ut.NOT_FOUND:return Q.NOT_FOUND;case ut.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case ut.ABORTED:return Q.ABORTED;case ut.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case ut.DATA_LOSS:return Q.DATA_LOSS;default:return _e()}}(Pe=ut||(ut={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=new Tn([4294967295,4294967295],0);function uh(t){const e=cE().encode(t),s=new dp;return s.update(e),new Uint8Array(s.digest())}function ch(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),n=e.getUint32(4,!0),r=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Tn([s,n],0),new Tn([r,i],0)]}class yu{constructor(e,s,n){if(this.bitmap=e,this.padding=s,this.hashCount=n,s<0||s>=8)throw new $r(`Invalid padding: ${s}`);if(n<0)throw new $r(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new $r(`Invalid hash count: ${n}`);if(e.length===0&&s!==0)throw new $r(`Invalid padding when bitmap length is 0: ${s}`);this.Ie=8*e.length-s,this.Te=Tn.fromNumber(this.Ie)}Ee(e,s,n){let r=e.add(s.multiply(Tn.fromNumber(n)));return r.compare(dE)===1&&(r=new Tn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const s=uh(e),[n,r]=ch(s);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,r,i);if(!this.de(a))return!1}return!0}static create(e,s,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new yu(i,r,s);return n.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const s=uh(e),[n,r]=ch(s);for(let i=0;i<this.hashCount;i++){const a=this.Ee(n,r,i);this.Ae(a)}}Ae(e){const s=Math.floor(e/8),n=e%8;this.bitmap[s]|=1<<n}}class $r extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,s,n,r,i){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,s,n){const r=new Map;return r.set(e,bi.createSynthesizedTargetChangeForCurrentChange(e,s,n)),new na(Ee.min(),r,new st(Ne),Os(),Se())}}class bi{constructor(e,s,n,r,i){this.resumeToken=e,this.current=s,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,s,n){return new bi(n,s,Se(),Se(),Se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,s,n,r){this.Re=e,this.removedTargetIds=s,this.key=n,this.Ve=r}}class jp{constructor(e,s){this.targetId=e,this.me=s}}class qp{constructor(e,s,n=wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=s,this.resumeToken=n,this.cause=r}}class dh{constructor(){this.fe=0,this.ge=fh(),this.pe=wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Se(),s=Se(),n=Se();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:s=s.add(r);break;case 1:n=n.add(r);break;default:_e()}}),new bi(this.pe,this.ye,e,s,n)}Ce(){this.we=!1,this.ge=fh()}Fe(e,s){this.we=!0,this.ge=this.ge.insert(e,s)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hE{constructor(e){this.Le=e,this.Be=new Map,this.ke=Os(),this.qe=hh(),this.Qe=new st(Ne)}Ke(e){for(const s of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(s,e.Ve):this.Ue(s,e.key,e.Ve);for(const s of e.removedTargetIds)this.Ue(s,e.key,e.Ve)}We(e){this.forEachTarget(e,s=>{const n=this.Ge(s);switch(e.state){case 0:this.ze(s)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(s);break;case 3:this.ze(s)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(s)&&(this.je(s),n.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Be.forEach((n,r)=>{this.ze(r)&&s(r)})}He(e){const s=e.targetId,n=e.me.count,r=this.Je(s);if(r){const i=r.target;if(Cl(i))if(n===0){const a=new pe(i.path);this.Ue(s,a,xt.newNoDocument(a,Ee.min()))}else Fe(n===1);else{const a=this.Ye(s);if(a!==n){const u=this.Ze(e),c=u?this.Xe(u,e,a):1;if(c!==0){this.je(s);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(s,d)}}}}}Ze(e){const s=e.me.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=s;let a,u;try{a=wn(n).toUint8Array()}catch(c){if(c instanceof Ep)return sr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new yu(a,r,i)}catch(c){return sr(c instanceof $r?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,s,n){return s.me.count===n-this.nt(e,s.targetId)?0:2}nt(e,s){const n=this.Le.getRemoteKeysForTarget(s);let r=0;return n.forEach(i=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(s,i,null),r++)}),r}rt(e){const s=new Map;this.Be.forEach((i,a)=>{const u=this.Je(a);if(u){if(i.current&&Cl(u.target)){const c=new pe(u.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,xt.newNoDocument(c,e))}i.be&&(s.set(a,i.ve()),i.Ce())}});let n=Se();this.qe.forEach((i,a)=>{let u=!0;a.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(n=n.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const r=new na(e,s,this.Qe,this.ke,n);return this.ke=Os(),this.qe=hh(),this.Qe=new st(Ne),r}$e(e,s){if(!this.ze(e))return;const n=this.it(e,s.key)?2:0;this.Ge(e).Fe(s.key,n),this.ke=this.ke.insert(s.key,s),this.qe=this.qe.insert(s.key,this.st(s.key).add(e))}Ue(e,s,n){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,s)?r.Fe(s,1):r.Me(s),this.qe=this.qe.insert(s,this.st(s).delete(e)),n&&(this.ke=this.ke.insert(s,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const s=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let s=this.Be.get(e);return s||(s=new dh,this.Be.set(e,s)),s}st(e){let s=this.qe.get(e);return s||(s=new It(Ne),this.qe=this.qe.insert(e,s)),s}ze(e){const s=this.Je(e)!==null;return s||de("WatchChangeAggregator","Detected inactive target",e),s}Je(e){const s=this.Be.get(e);return s&&s.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new dh),this.Le.getRemoteKeysForTarget(e).forEach(s=>{this.Ue(e,s,null)})}it(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function hh(){return new st(pe.comparator)}function fh(){return new st(pe.comparator)}const fE=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),pE=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),mE=(()=>({and:"AND",or:"OR"}))();class gE{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Pl(t,e){return t.useProto3Json||Jo(e)?e:{value:e}}function Co(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gp(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vE(t,e){return Co(t,e.toTimestamp())}function vs(t){return Fe(!!t),Ee.fromTimestamp(function(s){const n=rn(s);return new tt(n.seconds,n.nanos)}(t))}function Eu(t,e){return kl(t,e).canonicalString()}function kl(t,e){const s=function(r){return new Ze(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?s:s.child(e)}function Hp(t){const e=Ze.fromString(t);return Fe(Yp(e)),e}function Vl(t,e){return Eu(t.databaseId,e.path)}function Wa(t,e){const s=Hp(e);if(s.get(1)!==t.databaseId.projectId)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new le(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new pe(Kp(s))}function zp(t,e){return Eu(t.databaseId,e)}function _E(t){const e=Hp(t);return e.length===4?Ze.emptyPath():Kp(e)}function Dl(t){return new Ze(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Kp(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function ph(t,e,s){return{name:Vl(t,e),fields:s.value.mapValue.fields}}function yE(t,e){let s;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(Fe(f===void 0||typeof f=="string"),wt.fromBase64String(f||"")):(Fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),wt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(d){const f=d.code===void 0?Q.UNKNOWN:Bp(d.code);return new le(f,d.message||"")}(a);s=new qp(n,r,i,u||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const r=Wa(t,n.document.name),i=vs(n.document.updateTime),a=n.document.createTime?vs(n.document.createTime):Ee.min(),u=new Kt({mapValue:{fields:n.document.fields}}),c=xt.newFoundDocument(r,i,a,u),d=n.targetIds||[],f=n.removedTargetIds||[];s=new uo(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const r=Wa(t,n.document),i=n.readTime?vs(n.readTime):Ee.min(),a=xt.newNoDocument(r,i),u=n.removedTargetIds||[];s=new uo([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const r=Wa(t,n.document),i=n.removedTargetIds||[];s=new uo([],i,r,null)}else{if(!("filter"in e))return _e();{e.filter;const n=e.filter;n.targetId;const{count:r=0,unchangedNames:i}=n,a=new lE(r,i),u=n.targetId;s=new jp(u,a)}}return s}function EE(t,e){let s;if(e instanceof Ei)s={update:ph(t,e.key,e.value)};else if(e instanceof vu)s={delete:Vl(t,e.key)};else if(e instanceof ln)s={update:ph(t,e.key,e.data),updateMask:PE(e.fieldMask)};else{if(!(e instanceof iE))return _e();s={verify:Vl(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const u=a.transform;if(u instanceof di)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof hi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof fi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof wo)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw _e()}(0,n))),e.precondition.isNone||(s.currentDocument=function(r,i){return i.updateTime!==void 0?{updateTime:vE(r,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:_e()}(t,e.precondition)),s}function bE(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(s=>function(r,i){let a=r.updateTime?vs(r.updateTime):vs(i);return a.isEqual(Ee.min())&&(a=vs(i)),new sE(a,r.transformResults||[])}(s,e))):[]}function AE(t,e){return{documents:[zp(t,e.path)]}}function TE(t,e){const s={structuredQuery:{}},n=e.path;let r;e.collectionGroup!==null?(r=n,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=n.popLast(),s.structuredQuery.from=[{collectionId:n.lastSegment()}]),s.parent=zp(t,r);const i=function(d){if(d.length!==0)return Qp(ds.create(d,"and"))}(e.filters);i&&(s.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(v){return{field:jn(v.field),direction:CE(v.dir)}}(f))}(e.orderBy);a&&(s.structuredQuery.orderBy=a);const u=Pl(t,e.limit);return u!==null&&(s.structuredQuery.limit=u),e.startAt&&(s.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:s,parent:r}}function IE(t){let e=_E(t.parent);const s=t.structuredQuery,n=s.from?s.from.length:0;let r=null;if(n>0){Fe(n===1);const f=s.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let i=[];s.where&&(i=function(m){const v=Wp(m);return v instanceof ds&&Ip(v)?v.getFilters():[v]}(s.where));let a=[];s.orderBy&&(a=function(m){return m.map(v=>function(S){return new ci(qn(S.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(v))}(s.orderBy));let u=null;s.limit&&(u=function(m){let v;return v=typeof m=="object"?m.value:m,Jo(v)?null:v}(s.limit));let c=null;s.startAt&&(c=function(m){const v=!!m.before,E=m.values||[];return new Io(E,v)}(s.startAt));let d=null;return s.endAt&&(d=function(m){const v=!m.before,E=m.values||[];return new Io(E,v)}(s.endAt)),j0(e,r,a,i,u,"F",c,d)}function wE(t,e){const s=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function Wp(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const n=qn(s.unaryFilter.field);return ct.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=qn(s.unaryFilter.field);return ct.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qn(s.unaryFilter.field);return ct.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=qn(s.unaryFilter.field);return ct.create(a,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(s){return ct.create(qn(s.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return ds.create(s.compositeFilter.filters.map(n=>Wp(n)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return _e()}}(s.compositeFilter.op))}(t):_e()}function CE(t){return fE[t]}function SE(t){return pE[t]}function RE(t){return mE[t]}function jn(t){return{fieldPath:t.canonicalString()}}function qn(t){return Tt.fromServerFormat(t.fieldPath)}function Qp(t){return t instanceof ct?function(s){if(s.op==="=="){if(eh(s.value))return{unaryFilter:{field:jn(s.field),op:"IS_NAN"}};if(Zd(s.value))return{unaryFilter:{field:jn(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(eh(s.value))return{unaryFilter:{field:jn(s.field),op:"IS_NOT_NAN"}};if(Zd(s.value))return{unaryFilter:{field:jn(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:jn(s.field),op:SE(s.op),value:s.value}}}(t):t instanceof ds?function(s){const n=s.getFilters().map(r=>Qp(r));return n.length===1?n[0]:{compositeFilter:{op:RE(s.op),filters:n}}}(t):_e()}function PE(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function Yp(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,s,n,r,i=Ee.min(),a=Ee.min(),u=wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=s,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.ct=e}}function VE(t){const e=IE({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rl(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.un=new xE}addToCollectionParentIndex(e,s){return this.un.add(s),X.resolve()}getCollectionParents(e,s){return X.resolve(this.un.getEntries(s))}addFieldIndex(e,s){return X.resolve()}deleteFieldIndex(e,s){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,s){return X.resolve()}getDocumentsMatchingTarget(e,s){return X.resolve(null)}getIndexType(e,s){return X.resolve(0)}getFieldIndexes(e,s){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,s){return X.resolve(nn.min())}getMinOffsetFromCollectionGroup(e,s){return X.resolve(nn.min())}updateCollectionGroup(e,s,n){return X.resolve()}updateIndexEntries(e,s){return X.resolve()}}class xE{constructor(){this.index={}}add(e){const s=e.lastSegment(),n=e.popLast(),r=this.index[s]||new It(Ze.comparator),i=!r.has(n);return this.index[s]=r.add(n),i}has(e){const s=e.lastSegment(),n=e.popLast(),r=this.index[s];return r&&r.has(n)}getEntries(e){return(this.index[e]||new It(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new or(0)}static kn(){return new or(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.changes=new fr(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const n=this.changes.get(s);return n!==void 0?X.resolve(n):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,s,n,r){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,s){let n=null;return this.documentOverlayCache.getOverlay(e,s).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,s))).next(r=>(n!==null&&Yr(n.mutation,r,Zt.empty(),tt.now()),r))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.getLocalViewOfDocuments(e,n,Se()).next(()=>n))}getLocalViewOfDocuments(e,s,n=Se()){const r=En();return this.populateOverlays(e,r,s).next(()=>this.computeViews(e,s,r,n).next(i=>{let a=Mr();return i.forEach((u,c)=>{a=a.insert(u,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,s){const n=En();return this.populateOverlays(e,n,s).next(()=>this.computeViews(e,s,n,Se()))}populateOverlays(e,s,n){const r=[];return n.forEach(i=>{s.has(i)||r.push(i)}),this.documentOverlayCache.getOverlays(e,r).next(i=>{i.forEach((a,u)=>{s.set(a,u)})})}computeViews(e,s,n,r){let i=Os();const a=Qr(),u=function(){return Qr()}();return s.forEach((c,d)=>{const f=n.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof ln)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),Yr(f.mutation,d,f.mutation.getFieldMask(),tt.now())):a.set(d.key,Zt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>a.set(d,f)),s.forEach((d,f)=>{var m;return u.set(d,new ME(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),u))}recalculateAndSaveOverlays(e,s){const n=Qr();let r=new st((a,u)=>a-u),i=Se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(a=>{for(const u of a)u.keys().forEach(c=>{const d=s.get(c);if(d===null)return;let f=n.get(c)||Zt.empty();f=u.applyToLocalView(d,f),n.set(c,f);const m=(r.get(u.batchId)||Se()).add(c);r=r.insert(u.batchId,m)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,f=c.value,m=xp();f.forEach(v=>{if(!i.has(v)){const E=Lp(s.get(v),n.get(v));E!==null&&m.set(v,E),i=i.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return X.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,s,n,r){return function(a){return pe.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):Rp(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,n,r):this.getDocumentsMatchingCollectionQuery(e,s,n,r)}getNextDocuments(e,s,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,n,r).next(i=>{const a=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,n.largestBatchId,r-i.size):X.resolve(En());let u=-1,c=i;return a.next(d=>X.forEach(d,(f,m)=>(u<m.largestBatchId&&(u=m.largestBatchId),i.get(f)?X.resolve():this.remoteDocumentCache.getEntry(e,f).next(v=>{c=c.insert(f,v)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Se())).next(f=>({batchId:u,changes:Dp(f)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new pe(s)).next(n=>{let r=Mr();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(e,s,n,r){const i=s.collectionGroup;let a=Mr();return this.indexManager.getCollectionParents(e,i).next(u=>X.forEach(u,c=>{const d=function(m,v){return new hr(v,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(s,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,n,r).next(f=>{f.forEach((m,v)=>{a=a.insert(m,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,s,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,n,i,r))).next(a=>{i.forEach((c,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,xt.newInvalidDocument(f)))});let u=Mr();return a.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Yr(f.mutation,d,Zt.empty(),tt.now()),ea(s,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,s){return X.resolve(this.hr.get(s))}saveBundleMetadata(e,s){return this.hr.set(s.id,function(r){return{id:r.id,version:r.version,createTime:vs(r.createTime)}}(s)),X.resolve()}getNamedQuery(e,s){return X.resolve(this.Pr.get(s))}saveNamedQuery(e,s){return this.Pr.set(s.name,function(r){return{name:r.name,query:VE(r.bundledQuery),readTime:vs(r.readTime)}}(s)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.overlays=new st(pe.comparator),this.Ir=new Map}getOverlay(e,s){return X.resolve(this.overlays.get(s))}getOverlays(e,s){const n=En();return X.forEach(s,r=>this.getOverlay(e,r).next(i=>{i!==null&&n.set(r,i)})).next(()=>n)}saveOverlays(e,s,n){return n.forEach((r,i)=>{this.ht(e,s,i)}),X.resolve()}removeOverlaysForBatchId(e,s,n){const r=this.Ir.get(n);return r!==void 0&&(r.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),X.resolve()}getOverlaysForCollection(e,s,n){const r=En(),i=s.length+1,a=new pe(s.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!s.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>n&&r.set(c.getKey(),c)}return X.resolve(r)}getOverlaysForCollectionGroup(e,s,n,r){let i=new st((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===s&&d.largestBatchId>n){let f=i.get(d.largestBatchId);f===null&&(f=En(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const u=En(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=r)););return X.resolve(u)}ht(e,s,n){const r=this.overlays.get(n.key);if(r!==null){const a=this.Ir.get(r.largestBatchId).delete(n.key);this.Ir.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new aE(s,n));let i=this.Ir.get(s);i===void 0&&(i=Se(),this.Ir.set(s,i)),this.Ir.set(s,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(){this.Tr=new It(gt.Er),this.dr=new It(gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,s){const n=new gt(e,s);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,s){e.forEach(n=>this.addReference(n,s))}removeReference(e,s){this.Vr(new gt(e,s))}mr(e,s){e.forEach(n=>this.removeReference(n,s))}gr(e){const s=new pe(new Ze([])),n=new gt(s,e),r=new gt(s,e+1),i=[];return this.dr.forEachInRange([n,r],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const s=new pe(new Ze([])),n=new gt(s,e),r=new gt(s,e+1);let i=Se();return this.dr.forEachInRange([n,r],a=>{i=i.add(a.key)}),i}containsKey(e){const s=new gt(e,0),n=this.Tr.firstAfterOrEqual(s);return n!==null&&e.isEqual(n.key)}}class gt{constructor(e,s){this.key=e,this.wr=s}static Er(e,s){return pe.comparator(e.key,s.key)||Ne(e.wr,s.wr)}static Ar(e,s){return Ne(e.wr,s.wr)||pe.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.Sr=1,this.br=new It(gt.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,n,r){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new oE(i,s,n,r);this.mutationQueue.push(a);for(const u of r)this.br=this.br.add(new gt(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return X.resolve(a)}lookupMutationBatch(e,s){return X.resolve(this.Dr(s))}getNextMutationBatchAfterBatchId(e,s){const n=s+1,r=this.vr(n),i=r<0?0:r;return X.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const n=new gt(s,0),r=new gt(s,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,r],a=>{const u=this.Dr(a.wr);i.push(u)}),X.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,s){let n=new It(Ne);return s.forEach(r=>{const i=new gt(r,0),a=new gt(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],u=>{n=n.add(u.wr)})}),X.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,s){const n=s.path,r=n.length+1;let i=n;pe.isDocumentKey(i)||(i=i.child(""));const a=new gt(new pe(i),0);let u=new It(Ne);return this.br.forEachWhile(c=>{const d=c.key.path;return!!n.isPrefixOf(d)&&(d.length===r&&(u=u.add(c.wr)),!0)},a),X.resolve(this.Cr(u))}Cr(e){const s=[];return e.forEach(n=>{const r=this.Dr(n);r!==null&&s.push(r)}),s}removeMutationBatch(e,s){Fe(this.Fr(s.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return X.forEach(s.mutations,r=>{const i=new gt(r.key,s.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,s){const n=new gt(s,0),r=this.br.firstAfterOrEqual(n);return X.resolve(s.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,s){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const s=this.vr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(e){this.Mr=e,this.docs=function(){return new st(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const n=s.key,r=this.docs.get(n),i=r?r.size:0,a=this.Mr(s);return this.docs=this.docs.insert(n,{document:s.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const n=this.docs.get(s);return X.resolve(n?n.document.mutableCopy():xt.newInvalidDocument(s))}getEntries(e,s){let n=Os();return s.forEach(r=>{const i=this.docs.get(r);n=n.insert(r,i?i.document.mutableCopy():xt.newInvalidDocument(r))}),X.resolve(n)}getDocumentsMatchingQuery(e,s,n,r){let i=Os();const a=s.path,u=new pe(a.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||T0(A0(f),n)<=0||(r.has(f.key)||ea(s,f))&&(i=i.insert(f.key,f.mutableCopy()))}return X.resolve(i)}getAllFromCollectionGroup(e,s,n,r){_e()}Or(e,s){return X.forEach(this.docs,n=>s(n))}newChangeBuffer(e){return new jE(this)}getSize(e){return X.resolve(this.size)}}class jE extends NE{constructor(e){super(),this.cr=e}applyChanges(e){const s=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?s.push(this.cr.addEntry(e,r)):this.cr.removeEntry(n)}),X.waitFor(s)}getFromCache(e,s){return this.cr.getEntry(e,s)}getAllFromCache(e,s){return this.cr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.persistence=e,this.Nr=new fr(s=>pu(s),mu),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new bu,this.targetCount=0,this.kr=or.Bn()}forEachTarget(e,s){return this.Nr.forEach((n,r)=>s(r)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,s,n){return n&&(this.lastRemoteSnapshotVersion=n),s>this.Lr&&(this.Lr=s),X.resolve()}Kn(e){this.Nr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.kr=new or(s),this.highestTargetId=s),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,s){return this.Kn(s),this.targetCount+=1,X.resolve()}updateTargetData(e,s){return this.Kn(s),X.resolve()}removeTargetData(e,s){return this.Nr.delete(s.target),this.Br.gr(s.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,s,n){let r=0;const i=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=s&&n.get(u.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),X.waitFor(i).next(()=>r)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,s){const n=this.Nr.get(s)||null;return X.resolve(n)}addMatchingKeys(e,s,n){return this.Br.Rr(s,n),X.resolve()}removeMatchingKeys(e,s,n){this.Br.mr(s,n);const r=this.persistence.referenceDelegate,i=[];return r&&s.forEach(a=>{i.push(r.markPotentiallyOrphaned(e,a))}),X.waitFor(i)}removeMatchingKeysForTargetId(e,s){return this.Br.gr(s),X.resolve()}getMatchingKeysForTargetId(e,s){const n=this.Br.yr(s);return X.resolve(n)}containsKey(e,s){return X.resolve(this.Br.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,s){this.qr={},this.overlays={},this.Qr=new cu(0),this.Kr=!1,this.Kr=!0,this.$r=new LE,this.referenceDelegate=e(this),this.Ur=new qE(this),this.indexManager=new DE,this.remoteDocumentCache=function(r){return new BE(r)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new kE(s),this.Gr=new OE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new FE,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let n=this.qr[e.toKey()];return n||(n=new UE(s,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,s,n){de("MemoryPersistence","Starting transaction:",e);const r=new HE(this.Qr.next());return this.referenceDelegate.zr(),n(r).next(i=>this.referenceDelegate.jr(r).next(()=>i)).toPromise().then(i=>(r.raiseOnCommittedEvent(),i))}Hr(e,s){return X.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,s)))}}class HE extends w0{constructor(e){super(),this.currentSequenceNumber=e}}class Au{constructor(e){this.persistence=e,this.Jr=new bu,this.Yr=null}static Zr(e){return new Au(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,s,n){return this.Jr.addReference(n,s),this.Xr.delete(n.toString()),X.resolve()}removeReference(e,s,n){return this.Jr.removeReference(n,s),this.Xr.add(n.toString()),X.resolve()}markPotentiallyOrphaned(e,s){return this.Xr.add(s.toString()),X.resolve()}removeTarget(e,s){this.Jr.gr(s.targetId).forEach(r=>this.Xr.add(r.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,s.targetId).next(r=>{r.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,s))}zr(){this.Yr=new Set}jr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,n=>{const r=pe.fromPath(n);return this.ei(e,r).next(i=>{i||s.removeEntry(r,Ee.min())})}).next(()=>(this.Yr=null,s.apply(e)))}updateLimboDocument(e,s){return this.ei(e,s).next(n=>{n?this.Xr.delete(s.toString()):this.Xr.add(s.toString())})}Wr(e){return 0}ei(e,s){return X.or([()=>X.resolve(this.Jr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Hr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e,s,n,r){this.targetId=e,this.fromCache=s,this.$i=n,this.Ui=r}static Wi(e,s){let n=Se(),r=Se();for(const i of s.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Tu(e,s.fromCache,n,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Wy()?8:C0(zy())>0?6:4}()}initialize(e,s){this.Ji=e,this.indexManager=s,this.Gi=!0}getDocumentsMatchingQuery(e,s,n,r){const i={result:null};return this.Yi(e,s).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,s,r,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new zE;return this.Xi(e,s,a).next(u=>{if(i.result=u,this.zi)return this.es(e,s,a,u.size)})}).next(()=>i.result)}es(e,s,n,r){return n.documentReadCount<this.ji?(Vr()<=ke.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",Bn(s),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Vr()<=ke.DEBUG&&de("QueryEngine","Query:",Bn(s),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Hi*r?(Vr()<=ke.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",Bn(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gs(s))):X.resolve())}Yi(e,s){if(rh(s))return X.resolve(null);let n=gs(s);return this.indexManager.getIndexType(e,n).next(r=>r===0?null:(s.limit!==null&&r===1&&(s=Rl(s,null,"F"),n=gs(s)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=Se(...i);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,n).next(c=>{const d=this.ts(s,u);return this.ns(s,d,a,c.readTime)?this.Yi(e,Rl(s,null,"F")):this.rs(e,d,s,c)}))})))}Zi(e,s,n,r){return rh(s)||r.isEqual(Ee.min())?X.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const a=this.ts(s,i);return this.ns(s,a,n,r)?X.resolve(null):(Vr()<=ke.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bn(s)),this.rs(e,a,s,b0(r,-1)).next(u=>u))})}ts(e,s){let n=new It(kp(e));return s.forEach((r,i)=>{ea(e,i)&&(n=n.add(i))}),n}ns(e,s,n,r){if(e.limit===null)return!1;if(n.size!==s.size)return!0;const i=e.limitType==="F"?s.last():s.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Xi(e,s,n){return Vr()<=ke.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",Bn(s)),this.Ji.getDocumentsMatchingQuery(e,s,nn.min(),n)}rs(e,s,n,r){return this.Ji.getDocumentsMatchingQuery(e,n,r).next(i=>(s.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,s,n,r){this.persistence=e,this.ss=s,this.serializer=r,this.os=new st(Ne),this._s=new fr(i=>pu(i),mu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $E(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.os))}}function QE(t,e,s,n){return new WE(t,e,s,n)}async function Jp(t,e){const s=be(t);return await s.persistence.runTransaction("Handle user change","readonly",n=>{let r;return s.mutationQueue.getAllMutationBatches(n).next(i=>(r=i,s.ls(e),s.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],u=[];let c=Se();for(const d of r){a.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){u.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return s.localDocuments.getDocuments(n,c).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:u}))})})}function YE(t,e){const s=be(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const r=e.batch.keys(),i=s.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,f){const m=d.batch,v=m.keys();let E=X.resolve();return v.forEach(S=>{E=E.next(()=>f.getEntry(c,S)).next(k=>{const M=d.docVersions.get(S);Fe(M!==null),k.version.compareTo(M)<0&&(m.applyToRemoteDocument(k,d),k.isValidDocument()&&(k.setReadTime(d.commitVersion),f.addEntry(k)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,m))}(s,n,e,i).next(()=>i.apply(n)).next(()=>s.mutationQueue.performConsistencyCheck(n)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(n,r,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(u){let c=Se();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>s.localDocuments.getDocuments(n,r))})}function Xp(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Ur.getLastRemoteSnapshotVersion(s))}function JE(t,e){const s=be(t),n=e.snapshotVersion;let r=s.os;return s.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=s.cs.newChangeBuffer({trackRemovals:!0});r=s.os;const u=[];e.targetChanges.forEach((f,m)=>{const v=r.get(m);if(!v)return;u.push(s.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>s.Ur.addMatchingKeys(i,f.addedDocuments,m)));let E=v.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?E=E.withResumeToken(wt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,n)),r=r.insert(m,E),function(k,M,L){return k.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(v,E,f)&&u.push(s.Ur.updateTargetData(i,E))});let c=Os(),d=Se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(s.persistence.referenceDelegate.updateLimboDocument(i,f))}),u.push(XE(i,a,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!n.isEqual(Ee.min())){const f=s.Ur.getLastRemoteSnapshotVersion(i).next(m=>s.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));u.push(f)}return X.waitFor(u).next(()=>a.apply(i)).next(()=>s.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(s.os=r,i))}function XE(t,e,s){let n=Se(),r=Se();return s.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=Os();return s.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(u)),c.isNoDocument()&&c.version.isEqual(Ee.min())?(e.removeEntry(u,c.readTime),a=a.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(u,c)):de("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:a,Is:r}})}function ZE(t,e){const s=be(t);return s.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function eb(t,e){const s=be(t);return s.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return s.Ur.getTargetData(n,e).next(i=>i?(r=i,X.resolve(r)):s.Ur.allocateTargetId(n).next(a=>(r=new Js(e,a,"TargetPurposeListen",n.currentSequenceNumber),s.Ur.addTargetData(n,r).next(()=>r))))}).then(n=>{const r=s.os.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(s.os=s.os.insert(n.targetId,n),s._s.set(e,n.targetId)),n})}async function xl(t,e,s){const n=be(t),r=n.os.get(e),i=s?"readwrite":"readwrite-primary";try{s||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!yi(a))throw a;de("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(r.target)}function mh(t,e,s){const n=be(t);let r=Ee.min(),i=Se();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,f){const m=be(c),v=m._s.get(f);return v!==void 0?X.resolve(m.os.get(v)):m.Ur.getTargetData(d,f)}(n,a,gs(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,u.targetId).next(c=>{i=c})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,s?r:Ee.min(),s?i:Se())).next(u=>(tb(n,G0(e),u),{documents:u,Ts:i})))}function tb(t,e,s){let n=t.us.get(e)||Ee.min();s.forEach((r,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class gh{constructor(){this.activeTargetIds=Y0()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sb{constructor(){this.so=new gh,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,n){}addLocalQueryTarget(e,s=!0){return s&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,s,n){this.oo[e]=s}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gh,Promise.resolve()}handleUserChange(e,s,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){de("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){de("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qi=null;function Qa(){return Qi===null?Qi=function(){return 268435456+Math.round(2147483648*Math.random())}():Qi++,"0x"+Qi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection";class ob extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const n=s.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+s.host,this.vo=`projects/${r}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${i}`}get Fo(){return!1}Mo(s,n,r,i,a){const u=Qa(),c=this.xo(s,n.toUriEncodedString());de("RestConnection",`Sending RPC '${s}' ${u}:`,c,r);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(s,c,d,r).then(f=>(de("RestConnection",`Received RPC '${s}' ${u}: `,f),f),f=>{throw sr("RestConnection",`RPC '${s}' ${u} failed with error: `,f,"url: ",c,"request:",r),f})}Lo(s,n,r,i,a,u){return this.Mo(s,n,r,i,a)}Oo(s,n,r){s["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+dr}(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>s[a]=i),r&&r.headers.forEach((i,a)=>s[a]=i)}xo(s,n){const r=rb[s];return`${this.Do}/v1/${n}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,s,n,r){const i=Qa();return new Promise((a,u)=>{const c=new hp;c.setWithCredentials(!0),c.listenOnce(fp.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case oo.NO_ERROR:const f=c.getResponseJson();de(kt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case oo.TIMEOUT:de(kt,`RPC '${e}' ${i} timed out`),u(new le(Q.DEADLINE_EXCEEDED,"Request time out"));break;case oo.HTTP_ERROR:const m=c.getStatus();if(de(kt,`RPC '${e}' ${i} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);const E=v==null?void 0:v.error;if(E&&E.status&&E.message){const S=function(M){const L=M.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(L)>=0?L:Q.UNKNOWN}(E.status);u(new le(S,E.message))}else u(new le(Q.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new le(Q.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{de(kt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(r);de(kt,`RPC '${e}' ${i} sending request:`,r),c.send(s,"POST",d,n,15)})}Bo(e,s,n){const r=Qa(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=gp(),u=mp(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,s,n),c.encodeInitMessageHeaders=!0;const f=i.join("");de(kt,`Creating RPC '${e}' stream ${r}: ${f}`,c);const m=a.createWebChannel(f,c);let v=!1,E=!1;const S=new ib({Io:M=>{E?de(kt,`Not sending because RPC '${e}' stream ${r} is closed:`,M):(v||(de(kt,`Opening RPC '${e}' stream ${r} transport.`),m.open(),v=!0),de(kt,`RPC '${e}' stream ${r} sending:`,M),m.send(M))},To:()=>m.close()}),k=(M,L,x)=>{M.listen(L,$=>{try{x($)}catch(z){setTimeout(()=>{throw z},0)}})};return k(m,Nr.EventType.OPEN,()=>{E||(de(kt,`RPC '${e}' stream ${r} transport opened.`),S.yo())}),k(m,Nr.EventType.CLOSE,()=>{E||(E=!0,de(kt,`RPC '${e}' stream ${r} transport closed`),S.So())}),k(m,Nr.EventType.ERROR,M=>{E||(E=!0,sr(kt,`RPC '${e}' stream ${r} transport errored:`,M),S.So(new le(Q.UNAVAILABLE,"The operation could not be completed")))}),k(m,Nr.EventType.MESSAGE,M=>{var L;if(!E){const x=M.data[0];Fe(!!x);const $=x,z=$.error||((L=$[0])===null||L===void 0?void 0:L.error);if(z){de(kt,`RPC '${e}' stream ${r} received error:`,z);const ee=z.status;let N=function(T){const w=ut[T];if(w!==void 0)return Bp(w)}(ee),g=z.message;N===void 0&&(N=Q.INTERNAL,g="Unknown error status: "+ee+" with message "+z.message),E=!0,S.So(new le(N,g)),m.close()}else de(kt,`RPC '${e}' stream ${r} received:`,x),S.bo(x)}}),k(u,pp.STAT_EVENT,M=>{M.stat===Al.PROXY?de(kt,`RPC '${e}' stream ${r} detected buffering proxy`):M.stat===Al.NOPROXY&&de(kt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function Ya(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(t){return new gE(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,s,n=1e3,r=1.5,i=6e4){this.ui=e,this.timerId=s,this.ko=n,this.qo=r,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const s=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),r=Math.max(0,s-n);r>0&&de("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${s} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,s,n,r,i,a,u,c){this.ui=e,this.Ho=n,this.Jo=r,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Zp(e,s)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,s){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():s&&s.code===Q.RESOURCE_EXHAUSTED?($s(s.toString()),$s("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):s&&s.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(s)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),s=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.Yo===s&&this.P_(n,r)},n=>{e(()=>{const r=new le(Q.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(r)})})}P_(e,s){const n=this.h_(this.Yo);this.stream=this.T_(e,s),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{n(()=>this.I_(r))}),this.stream.onMessage(r=>{n(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return de("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return s=>{this.ui.enqueueAndForget(()=>this.Yo===e?s():(de("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ab extends em{constructor(e,s,n,r,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,n,r,a),this.serializer=i}T_(e,s){return this.connection.Bo("Listen",e,s)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const s=yE(this.serializer,e),n=function(i){if(!("targetChange"in i))return Ee.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Ee.min():a.readTime?vs(a.readTime):Ee.min()}(e);return this.listener.d_(s,n)}A_(e){const s={};s.database=Dl(this.serializer),s.addTarget=function(i,a){let u;const c=a.target;if(u=Cl(c)?{documents:AE(i,c)}:{query:TE(i,c)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Gp(i,a.resumeToken);const d=Pl(i,a.expectedCount);d!==null&&(u.expectedCount=d)}else if(a.snapshotVersion.compareTo(Ee.min())>0){u.readTime=Co(i,a.snapshotVersion.toTimestamp());const d=Pl(i,a.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const n=wE(this.serializer,e);n&&(s.labels=n),this.a_(s)}R_(e){const s={};s.database=Dl(this.serializer),s.removeTarget=e,this.a_(s)}}class lb extends em{constructor(e,s,n,r,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,n,r,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,s){return this.connection.Bo("Write",e,s)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const s=bE(e.writeResults,e.commitTime),n=vs(e.commitTime);return this.listener.g_(n,s)}p_(){const e={};e.database=Dl(this.serializer),this.a_(e)}m_(e){const s={streamToken:this.lastStreamToken,writes:e.map(n=>EE(this.serializer,n))};this.a_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub extends class{}{constructor(e,s,n,r){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=n,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,s,n,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,kl(s,n),r,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new le(Q.UNKNOWN,i.toString())})}Lo(e,s,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,kl(s,n),r,a,u,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new le(Q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class cb{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?($s(s),this.D_=!1):de("OnlineStateTracker",s)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,s,n,r,i){this.localStore=e,this.datastore=s,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{n.enqueueAndForget(async()=>{Pn(this)&&(de("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=be(c);d.L_.add(4),await Ai(d),d.q_.set("Unknown"),d.L_.delete(4),await ia(d)}(this))})}),this.q_=new cb(n,r)}}async function ia(t){if(Pn(t))for(const e of t.B_)await e(!0)}async function Ai(t){for(const e of t.B_)await e(!1)}function tm(t,e){const s=be(t);s.N_.has(e.targetId)||(s.N_.set(e.targetId,e),Su(s)?Cu(s):pr(s).r_()&&wu(s,e))}function Iu(t,e){const s=be(t),n=pr(s);s.N_.delete(e),n.r_()&&sm(s,e),s.N_.size===0&&(n.r_()?n.o_():Pn(s)&&s.q_.set("Unknown"))}function wu(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}pr(t).A_(e)}function sm(t,e){t.Q_.xe(e),pr(t).R_(e)}function Cu(t){t.Q_=new hE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),pr(t).start(),t.q_.v_()}function Su(t){return Pn(t)&&!pr(t).n_()&&t.N_.size>0}function Pn(t){return be(t).L_.size===0}function nm(t){t.Q_=void 0}async function hb(t){t.q_.set("Online")}async function fb(t){t.N_.forEach((e,s)=>{wu(t,e)})}async function pb(t,e){nm(t),Su(t)?(t.q_.M_(e),Cu(t)):t.q_.set("Unknown")}async function mb(t,e,s){if(t.q_.set("Online"),e instanceof qp&&e.state===2&&e.cause)try{await async function(r,i){const a=i.cause;for(const u of i.targetIds)r.N_.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.N_.delete(u),r.Q_.removeTarget(u))}(t,e)}catch(n){de("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await So(t,n)}else if(e instanceof uo?t.Q_.Ke(e):e instanceof jp?t.Q_.He(e):t.Q_.We(e),!s.isEqual(Ee.min()))try{const n=await Xp(t.localStore);s.compareTo(n)>=0&&await function(i,a){const u=i.Q_.rt(a);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,a))}}),u.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(wt.EMPTY_BYTE_STRING,f.snapshotVersion)),sm(i,c);const m=new Js(f.target,c,d,f.sequenceNumber);wu(i,m)}),i.remoteSyncer.applyRemoteEvent(u)}(t,s)}catch(n){de("RemoteStore","Failed to raise snapshot:",n),await So(t,n)}}async function So(t,e,s){if(!yi(e))throw e;t.L_.add(1),await Ai(t),t.q_.set("Offline"),s||(s=()=>Xp(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de("RemoteStore","Retrying IndexedDB access"),await s(),t.L_.delete(1),await ia(t)})}function rm(t,e){return e().catch(s=>So(t,s,e))}async function oa(t){const e=be(t),s=on(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;gb(e);)try{const r=await ZE(e.localStore,n);if(r===null){e.O_.length===0&&s.o_();break}n=r.batchId,vb(e,r)}catch(r){await So(e,r)}im(e)&&om(e)}function gb(t){return Pn(t)&&t.O_.length<10}function vb(t,e){t.O_.push(e);const s=on(t);s.r_()&&s.V_&&s.m_(e.mutations)}function im(t){return Pn(t)&&!on(t).n_()&&t.O_.length>0}function om(t){on(t).start()}async function _b(t){on(t).p_()}async function yb(t){const e=on(t);for(const s of t.O_)e.m_(s.mutations)}async function Eb(t,e,s){const n=t.O_.shift(),r=_u.from(n,e,s);await rm(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await oa(t)}async function bb(t,e){e&&on(t).V_&&await async function(n,r){if(function(a){return uE(a)&&a!==Q.ABORTED}(r.code)){const i=n.O_.shift();on(n).s_(),await rm(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await oa(n)}}(t,e),im(t)&&om(t)}async function _h(t,e){const s=be(t);s.asyncQueue.verifyOperationInProgress(),de("RemoteStore","RemoteStore received new credentials");const n=Pn(s);s.L_.add(3),await Ai(s),n&&s.q_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.L_.delete(3),await ia(s)}async function Ab(t,e){const s=be(t);e?(s.L_.delete(2),await ia(s)):e||(s.L_.add(2),await Ai(s),s.q_.set("Unknown"))}function pr(t){return t.K_||(t.K_=function(s,n,r){const i=be(s);return i.w_(),new ab(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Eo:hb.bind(null,t),Ro:fb.bind(null,t),mo:pb.bind(null,t),d_:mb.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Su(t)?Cu(t):t.q_.set("Unknown")):(await t.K_.stop(),nm(t))})),t.K_}function on(t){return t.U_||(t.U_=function(s,n,r){const i=be(s);return i.w_(),new lb(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:_b.bind(null,t),mo:bb.bind(null,t),f_:yb.bind(null,t),g_:Eb.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await oa(t)):(await t.U_.stop(),t.O_.length>0&&(de("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,s,n,r,i){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,n,r,i){const a=Date.now()+n,u=new Ru(e,s,a,r,i);return u.start(n),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Pu(t,e){if($s("AsyncQueue",`${e}: ${t}`),yi(t))return new le(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.comparator=e?(s,n)=>e(s,n)||pe.comparator(s.key,n.key):(s,n)=>pe.comparator(s.key,n.key),this.keyedMap=Mr(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new Qn(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,n)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof Qn)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;s.hasNext();){const r=s.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const n=new Qn;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=s,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this.W_=new st(pe.comparator)}track(e){const s=e.doc.key,n=this.W_.get(s);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(s,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(s,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(s,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(s):e.type===1&&n.type===2?this.W_=this.W_.insert(s,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(s,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(s,e)}G_(){const e=[];return this.W_.inorderTraversal((s,n)=>{e.push(n)}),e}}class ar{constructor(e,s,n,r,i,a,u,c,d){this.query=e,this.docs=s,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,s,n,r,i){const a=[];return s.forEach(u=>{a.push({type:0,doc:u})}),new ar(e,s,Qn.emptySet(s),a,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,n=e.docChanges;if(s.length!==n.length)return!1;for(let r=0;r<s.length;r++)if(s[r].type!==n[r].type||!s[r].doc.isEqual(n[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tb{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Ib{constructor(){this.queries=Eh(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(s,n){const r=be(s),i=r.queries;r.queries=Eh(),i.forEach((a,u)=>{for(const c of u.j_)c.onError(n)})})(this,new le(Q.ABORTED,"Firestore shutting down"))}}function Eh(){return new fr(t=>Pp(t),Zo)}async function ku(t,e){const s=be(t);let n=3;const r=e.query;let i=s.queries.get(r);i?!i.H_()&&e.J_()&&(n=2):(i=new Tb,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await s.onListen(r,!0);break;case 1:i.z_=await s.onListen(r,!1);break;case 2:await s.onFirstRemoteStoreListen(r)}}catch(a){const u=Pu(a,`Initialization of query '${Bn(e.query)}' failed`);return void e.onError(u)}s.queries.set(r,i),i.j_.push(e),e.Z_(s.onlineState),i.z_&&e.X_(i.z_)&&Du(s)}async function Vu(t,e){const s=be(t),n=e.query;let r=3;const i=s.queries.get(n);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?r=e.J_()?0:1:!i.H_()&&e.J_()&&(r=2))}switch(r){case 0:return s.queries.delete(n),s.onUnlisten(n,!0);case 1:return s.queries.delete(n),s.onUnlisten(n,!1);case 2:return s.onLastRemoteStoreUnlisten(n);default:return}}function wb(t,e){const s=be(t);let n=!1;for(const r of e){const i=r.query,a=s.queries.get(i);if(a){for(const u of a.j_)u.X_(r)&&(n=!0);a.z_=r}}n&&Du(s)}function Cb(t,e,s){const n=be(t),r=n.queries.get(e);if(r)for(const i of r.j_)i.onError(s);n.queries.delete(e)}function Du(t){t.Y_.forEach(e=>{e.next()})}var Nl,bh;(bh=Nl||(Nl={})).ea="default",bh.Cache="cache";class xu{constructor(e,s,n){this.query=e,this.ta=s,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const r of e.docChanges)r.type!==3&&n.push(r);e=new ar(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.na?this.ia(e)&&(this.ta.next(e),s=!0):this.sa(e,this.onlineState)&&(this.oa(e),s=!0),this.ra=e,s}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let s=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),s=!0),s}sa(e,s){if(!e.fromCache||!this.J_())return!0;const n=s!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const s=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}oa(e){e=ar.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Nl.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.key=e}}class lm{constructor(e){this.key=e}}class Sb{constructor(e,s){this.query=e,this.Ta=s,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Se(),this.mutatedKeys=Se(),this.Aa=kp(e),this.Ra=new Qn(this.Aa)}get Va(){return this.Ta}ma(e,s){const n=s?s.fa:new yh,r=s?s.Ra:this.Ra;let i=s?s.mutatedKeys:this.mutatedKeys,a=r,u=!1;const c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,m)=>{const v=r.get(f),E=ea(this.query,m)?m:null,S=!!v&&this.mutatedKeys.has(v.key),k=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let M=!1;v&&E?v.data.isEqual(E.data)?S!==k&&(n.track({type:3,doc:E}),M=!0):this.ga(v,E)||(n.track({type:2,doc:E}),M=!0,(c&&this.Aa(E,c)>0||d&&this.Aa(E,d)<0)&&(u=!0)):!v&&E?(n.track({type:0,doc:E}),M=!0):v&&!E&&(n.track({type:1,doc:v}),M=!0,(c||d)&&(u=!0)),M&&(E?(a=a.add(E),i=k?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{Ra:a,fa:n,ns:u,mutatedKeys:i}}ga(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,n,r){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,m)=>function(E,S){const k=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return k(E)-k(S)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(n),r=r!=null&&r;const u=s&&!r?this.ya():[],c=this.da.size===0&&this.current&&!r?1:0,d=c!==this.Ea;return this.Ea=c,a.length!==0||d?{snapshot:new ar(this.query,e.Ra,i,a,e.mutatedKeys,c===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new yh,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(s=>this.Ta=this.Ta.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ta=this.Ta.delete(s)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Se(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const s=[];return e.forEach(n=>{this.da.has(n)||s.push(new lm(n))}),this.da.forEach(n=>{e.has(n)||s.push(new am(n))}),s}ba(e){this.Ta=e.Ts,this.da=Se();const s=this.ma(e.documents);return this.applyChanges(s,!0)}Da(){return ar.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Rb{constructor(e,s,n){this.query=e,this.targetId=s,this.view=n}}class Pb{constructor(e){this.key=e,this.va=!1}}class kb{constructor(e,s,n,r,i,a){this.localStore=e,this.remoteStore=s,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new fr(u=>Pp(u),Zo),this.Ma=new Map,this.xa=new Set,this.Oa=new st(pe.comparator),this.Na=new Map,this.La=new bu,this.Ba={},this.ka=new Map,this.qa=or.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Vb(t,e,s=!0){const n=pm(t);let r;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Da()):r=await um(n,e,s,!0),r}async function Db(t,e){const s=pm(t);await um(s,e,!0,!1)}async function um(t,e,s,n){const r=await eb(t.localStore,gs(e)),i=r.targetId,a=t.sharedClientState.addLocalQueryTarget(i,s);let u;return n&&(u=await xb(t,e,i,a==="current",r.resumeToken)),t.isPrimaryClient&&s&&tm(t.remoteStore,r),u}async function xb(t,e,s,n,r){t.Ka=(m,v,E)=>async function(k,M,L,x){let $=M.view.ma(L);$.ns&&($=await mh(k.localStore,M.query,!1).then(({documents:g})=>M.view.ma(g,$)));const z=x&&x.targetChanges.get(M.targetId),ee=x&&x.targetMismatches.get(M.targetId)!=null,N=M.view.applyChanges($,k.isPrimaryClient,z,ee);return Th(k,M.targetId,N.wa),N.snapshot}(t,m,v,E);const i=await mh(t.localStore,e,!0),a=new Sb(e,i.Ts),u=a.ma(i.documents),c=bi.createSynthesizedTargetChangeForCurrentChange(s,n&&t.onlineState!=="Offline",r),d=a.applyChanges(u,t.isPrimaryClient,c);Th(t,s,d.wa);const f=new Rb(e,s,a);return t.Fa.set(e,f),t.Ma.has(s)?t.Ma.get(s).push(e):t.Ma.set(s,[e]),d.snapshot}async function Nb(t,e,s){const n=be(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);if(i.length>1)return n.Ma.set(r.targetId,i.filter(a=>!Zo(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await xl(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),s&&Iu(n.remoteStore,r.targetId),Ml(n,r.targetId)}).catch(_i)):(Ml(n,r.targetId),await xl(n.localStore,r.targetId,!0))}async function Mb(t,e){const s=be(t),n=s.Fa.get(e),r=s.Ma.get(n.targetId);s.isPrimaryClient&&r.length===1&&(s.sharedClientState.removeLocalQueryTarget(n.targetId),Iu(s.remoteStore,n.targetId))}async function $b(t,e,s){const n=qb(t);try{const r=await function(a,u){const c=be(a),d=tt.now(),f=u.reduce((E,S)=>E.add(S.key),Se());let m,v;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let S=Os(),k=Se();return c.cs.getEntries(E,f).next(M=>{S=M,S.forEach((L,x)=>{x.isValidDocument()||(k=k.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,S)).next(M=>{m=M;const L=[];for(const x of u){const $=rE(x,m.get(x.key).overlayedDocument);$!=null&&L.push(new ln(x.key,$,bp($.value.mapValue),rs.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,L,u)}).next(M=>{v=M;const L=M.applyToLocalDocumentSet(m,k);return c.documentOverlayCache.saveOverlays(E,M.batchId,L)})}).then(()=>({batchId:v.batchId,changes:Dp(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(r.batchId),function(a,u,c){let d=a.Ba[a.currentUser.toKey()];d||(d=new st(Ne)),d=d.insert(u,c),a.Ba[a.currentUser.toKey()]=d}(n,r.batchId,s),await Ti(n,r.changes),await oa(n.remoteStore)}catch(r){const i=Pu(r,"Failed to persist write");s.reject(i)}}async function cm(t,e){const s=be(t);try{const n=await JE(s.localStore,e);e.targetChanges.forEach((r,i)=>{const a=s.Na.get(i);a&&(Fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?a.va=!0:r.modifiedDocuments.size>0?Fe(a.va):r.removedDocuments.size>0&&(Fe(a.va),a.va=!1))}),await Ti(s,n,e)}catch(n){await _i(n)}}function Ah(t,e,s){const n=be(t);if(n.isPrimaryClient&&s===0||!n.isPrimaryClient&&s===1){const r=[];n.Fa.forEach((i,a)=>{const u=a.view.Z_(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const c=be(a);c.onlineState=u;let d=!1;c.queries.forEach((f,m)=>{for(const v of m.j_)v.Z_(u)&&(d=!0)}),d&&Du(c)}(n.eventManager,e),r.length&&n.Ca.d_(r),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function Ob(t,e,s){const n=be(t);n.sharedClientState.updateQueryState(e,"rejected",s);const r=n.Na.get(e),i=r&&r.key;if(i){let a=new st(pe.comparator);a=a.insert(i,xt.newNoDocument(i,Ee.min()));const u=Se().add(i),c=new na(Ee.min(),new Map,new st(Ne),a,u);await cm(n,c),n.Oa=n.Oa.remove(i),n.Na.delete(e),Nu(n)}else await xl(n.localStore,e,!1).then(()=>Ml(n,e,s)).catch(_i)}async function Fb(t,e){const s=be(t),n=e.batch.batchId;try{const r=await YE(s.localStore,e);hm(s,n,null),dm(s,n),s.sharedClientState.updateMutationState(n,"acknowledged"),await Ti(s,r)}catch(r){await _i(r)}}async function Lb(t,e,s){const n=be(t);try{const r=await function(a,u){const c=be(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,u).next(m=>(Fe(m!==null),f=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(n.localStore,e);hm(n,e,s),dm(n,e),n.sharedClientState.updateMutationState(e,"rejected",s),await Ti(n,r)}catch(r){await _i(r)}}function dm(t,e){(t.ka.get(e)||[]).forEach(s=>{s.resolve()}),t.ka.delete(e)}function hm(t,e,s){const n=be(t);let r=n.Ba[n.currentUser.toKey()];if(r){const i=r.get(e);i&&(s?i.reject(s):i.resolve(),r=r.remove(e)),n.Ba[n.currentUser.toKey()]=r}}function Ml(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),s&&t.Ca.$a(n,s);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||fm(t,n)})}function fm(t,e){t.xa.delete(e.path.canonicalString());const s=t.Oa.get(e);s!==null&&(Iu(t.remoteStore,s),t.Oa=t.Oa.remove(e),t.Na.delete(s),Nu(t))}function Th(t,e,s){for(const n of s)n instanceof am?(t.La.addReference(n.key,e),Ub(t,n)):n instanceof lm?(de("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||fm(t,n.key)):_e()}function Ub(t,e){const s=e.key,n=s.path.canonicalString();t.Oa.get(s)||t.xa.has(n)||(de("SyncEngine","New document in limbo: "+s),t.xa.add(n),Nu(t))}function Nu(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const s=new pe(Ze.fromString(e)),n=t.qa.next();t.Na.set(n,new Pb(s)),t.Oa=t.Oa.insert(s,n),tm(t.remoteStore,new Js(gs(Xo(s.path)),n,"TargetPurposeLimboResolution",cu.oe))}}async function Ti(t,e,s){const n=be(t),r=[],i=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((u,c)=>{a.push(n.Ka(c,e,s).then(d=>{var f;if((d||s)&&n.isPrimaryClient){const m=d?!d.fromCache:(f=s==null?void 0:s.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){r.push(d);const m=Tu.Wi(c.targetId,d);i.push(m)}}))}),await Promise.all(a),n.Ca.d_(r),await async function(c,d){const f=be(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>X.forEach(d,v=>X.forEach(v.$i,E=>f.persistence.referenceDelegate.addReference(m,v.targetId,E)).next(()=>X.forEach(v.Ui,E=>f.persistence.referenceDelegate.removeReference(m,v.targetId,E)))))}catch(m){if(!yi(m))throw m;de("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const v=m.targetId;if(!m.fromCache){const E=f.os.get(v),S=E.snapshotVersion,k=E.withLastLimboFreeSnapshotVersion(S);f.os=f.os.insert(v,k)}}}(n.localStore,i))}async function Bb(t,e){const s=be(t);if(!s.currentUser.isEqual(e)){de("SyncEngine","User change. New user:",e.toKey());const n=await Jp(s.localStore,e);s.currentUser=e,function(i,a){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new le(Q.CANCELLED,a))})}),i.ka.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await Ti(s,n.hs)}}function jb(t,e){const s=be(t),n=s.Na.get(e);if(n&&n.va)return Se().add(n.key);{let r=Se();const i=s.Ma.get(e);if(!i)return r;for(const a of i){const u=s.Fa.get(a);r=r.unionWith(u.view.Va)}return r}}function pm(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=cm.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ob.bind(null,e),e.Ca.d_=wb.bind(null,e.eventManager),e.Ca.$a=Cb.bind(null,e.eventManager),e}function qb(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lb.bind(null,e),e}class Ro{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ra(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,s){return null}Ha(e,s){return null}za(e){return QE(this.persistence,new KE,e.initialUser,this.serializer)}Ga(e){return new GE(Au.Zr,this.serializer)}Wa(e){return new sb}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ro.provider={build:()=>new Ro};class $l{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Ah(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bb.bind(null,this.syncEngine),await Ab(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ib}()}createDatastore(e){const s=ra(e.databaseInfo.databaseId),n=function(i){return new ob(i)}(e.databaseInfo);return function(i,a,u,c){return new ub(i,a,u,c)}(e.authCredentials,e.appCheckCredentials,n,s)}createRemoteStore(e){return function(n,r,i,a,u){return new db(n,r,i,a,u)}(this.localStore,this.datastore,e.asyncQueue,s=>Ah(this.syncEngine,s,0),function(){return vh.D()?new vh:new nb}())}createSyncEngine(e,s){return function(r,i,a,u,c,d,f){const m=new kb(r,i,a,u,c,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(r){const i=be(r);de("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ai(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}$l.provider={build:()=>new $l};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):$s("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,s,n,r,i){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=n,this.databaseInfo=r,this.user=Vt.UNAUTHENTICATED,this.clientId=_p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{de("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(de("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const n=Pu(s,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ja(t,e){t.asyncQueue.verifyOperationInProgress(),de("FirestoreClient","Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let n=s.initialUser;t.setCredentialChangeListener(async r=>{n.isEqual(r)||(await Jp(e.localStore,r),n=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Ih(t,e){t.asyncQueue.verifyOperationInProgress();const s=await Hb(t);de("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(n=>_h(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,r)=>_h(e.remoteStore,r)),t._onlineComponents=e}async function Hb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ja(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(r){return r.name==="FirebaseError"?r.code===Q.FAILED_PRECONDITION||r.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(s))throw s;sr("Error using user provided cache. Falling back to memory cache: "+s),await Ja(t,new Ro)}}else de("FirestoreClient","Using default OfflineComponentProvider"),await Ja(t,new Ro);return t._offlineComponents}async function mm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de("FirestoreClient","Using user provided OnlineComponentProvider"),await Ih(t,t._uninitializedComponentsProvider._online)):(de("FirestoreClient","Using default OnlineComponentProvider"),await Ih(t,new $l))),t._onlineComponents}function zb(t){return mm(t).then(e=>e.syncEngine)}async function Po(t){const e=await mm(t),s=e.eventManager;return s.onListen=Vb.bind(null,e.syncEngine),s.onUnlisten=Nb.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=Db.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=Mb.bind(null,e.syncEngine),s}function Kb(t,e,s={}){const n=new Vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,u,c,d){const f=new Mu({next:v=>{f.Za(),a.enqueueAndForget(()=>Vu(i,m));const E=v.docs.has(u);!E&&v.fromCache?d.reject(new le(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&v.fromCache&&c&&c.source==="server"?d.reject(new le(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new xu(Xo(u.path),f,{includeMetadataChanges:!0,_a:!0});return ku(i,m)}(await Po(t),t.asyncQueue,e,s,n)),n.promise}function Wb(t,e,s={}){const n=new Vs;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,u,c,d){const f=new Mu({next:v=>{f.Za(),a.enqueueAndForget(()=>Vu(i,m)),v.fromCache&&c.source==="server"?d.reject(new le(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(v)},error:v=>d.reject(v)}),m=new xu(u,f,{includeMetadataChanges:!0,_a:!0});return ku(i,m)}(await Po(t),t.asyncQueue,e,s,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e,s){if(!s)throw new le(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Qb(t,e,s,n){if(e===!0&&n===!0)throw new le(Q.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function Ch(t){if(!pe.isDocumentKey(t))throw new le(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sh(t){if(pe.isDocumentKey(t))throw new le(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function aa(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function Wt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=aa(t);throw new le(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){var s,n;if(e.host===void 0){if(e.ssl!==void 0)throw new le(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new le(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Qb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gm((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,r){return n.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class la{constructor(e,s,n,r){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rh({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rh(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new h0;switch(n.type){case"firstParty":return new g0(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new le(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const n=wh.get(s);n&&(de("ComponentProvider","Removing Datastore"),wh.delete(s),n.terminate())}(this),Promise.resolve()}}function Yb(t,e,s,n={}){var r;const i=(t=Wt(t,la))._getSettings(),a=`${e}:${s}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),n.mockUserToken){let u,c;if(typeof n.mockUserToken=="string")u=n.mockUserToken,c=Vt.MOCK_USER;else{u=Hy(n.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const d=n.mockUserToken.sub||n.mockUserToken.user_id;if(!d)throw new le(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Vt(d)}t._authCredentials=new f0(new vp(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,s,n){this.converter=s,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new un(this.firestore,e,this._query)}}class Ot{constructor(e,s,n){this.converter=s,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new tn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}}class tn extends un{constructor(e,s,n){super(e,s,Xo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new pe(e))}withConverter(e){return new tn(this.firestore,e,this._path)}}function Ge(t,e,...s){if(t=Es(t),vm("collection","path",e),t instanceof la){const n=Ze.fromString(e,...s);return Sh(n),new tn(t,null,n)}{if(!(t instanceof Ot||t instanceof tn))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ze.fromString(e,...s));return Sh(n),new tn(t.firestore,null,n)}}function qt(t,e,...s){if(t=Es(t),arguments.length===1&&(e=_p.newId()),vm("doc","path",e),t instanceof la){const n=Ze.fromString(e,...s);return Ch(n),new Ot(t,null,new pe(n))}{if(!(t instanceof Ot||t instanceof tn))throw new le(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Ze.fromString(e,...s));return Ch(n),new Ot(t.firestore,t instanceof tn?t.converter:null,new pe(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Zp(this,"async_queue_retry"),this.Vu=()=>{const n=Ya();n&&de("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const s=Ya();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const s=Ya();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const s=new Vs;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yi(e))throw e;de("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const s=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const r=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(n);throw $s("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.du=!1,n))));return this.mu=s,s}enqueueAfterDelay(e,s,n){this.fu(),this.Ru.indexOf(e)>-1&&(s=0);const r=Ru.createAndSchedule(this,e,s,n,i=>this.yu(i));return this.Tu.push(r),r}fu(){this.Eu&&_e()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const s of this.Tu)if(s.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((s,n)=>s.targetTimeMs-n.targetTimeMs);for(const s of this.Tu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const s=this.Tu.indexOf(e);this.Tu.splice(s,1)}}function kh(t){return function(s,n){if(typeof s!="object"||s===null)return!1;const r=s;for(const i of n)if(i in r&&typeof r[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Fs extends la{constructor(e,s,n,r){super(e,s,n,r),this.type="firestore",this._queue=new Ph,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ph(e),this._firestoreClient=void 0,await e}}}function Jb(t,e){const s=typeof t=="object"?t:e0(),n=typeof t=="string"?t:e||"(default)",r=Y1(s,"firestore").getImmediate({identifier:n});if(!r._initialized){const i=qy("firestore");i&&Yb(r,...i)}return r}function ua(t){if(t._terminated)throw new le(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Xb(t),t._firestoreClient}function Xb(t){var e,s,n;const r=t._freezeSettings(),i=function(u,c,d,f){return new P0(u,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,gm(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((s=r.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new Gb(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new lr(wt.fromBase64String(e))}catch(s){throw new le(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new lr(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new le(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new le(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new le(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,r){if(n.length!==r.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==r[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=/^__.*__$/;class eA{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return this.fieldMask!==null?new ln(e,this.data,this.fieldMask,s,this.fieldTransforms):new Ei(e,this.data,s,this.fieldTransforms)}}class _m{constructor(e,s,n){this.data=e,this.fieldMask=s,this.fieldTransforms=n}toMutation(e,s){return new ln(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function ym(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class Fu{constructor(e,s,n,r,i,a){this.settings=e,this.databaseId=s,this.serializer=n,this.ignoreUndefinedProperties=r,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Fu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),r=this.Fu({path:n,xu:!1});return r.Ou(e),r}Nu(e){var s;const n=(s=this.path)===null||s===void 0?void 0:s.child(e),r=this.Fu({path:n,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ko(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ym(this.Cu)&&Zb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class tA{constructor(e,s,n){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=n||ra(e)}Qu(e,s,n,r=!1){return new Fu({Cu:e,methodName:s,qu:n,path:Tt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ha(t){const e=t._freezeSettings(),s=ra(t._databaseId);return new tA(t._databaseId,!!e.ignoreUndefinedProperties,s)}function Em(t,e,s,n,r,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,s,r);Uu("Data must be an object, but it was:",a,n);const u=bm(n,a);let c,d;if(i.merge)c=new Zt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const v=Ol(e,m,s);if(!a.contains(v))throw new le(Q.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);Tm(f,v)||f.push(v)}c=new Zt(f),d=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=a.fieldTransforms;return new eA(new Kt(u),c,d)}class fa extends da{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof fa}}class Lu extends da{_toFieldTransform(e){return new eE(e.path,new di)}isEqual(e){return e instanceof Lu}}function sA(t,e,s,n){const r=t.Qu(1,e,s);Uu("Data must be an object, but it was:",r,n);const i=[],a=Kt.empty();Rn(n,(c,d)=>{const f=Bu(e,c,s);d=Es(d);const m=r.Nu(f);if(d instanceof fa)i.push(f);else{const v=Ii(d,m);v!=null&&(i.push(f),a.set(f,v))}});const u=new Zt(i);return new _m(a,u,r.fieldTransforms)}function nA(t,e,s,n,r,i){const a=t.Qu(1,e,s),u=[Ol(e,n,s)],c=[r];if(i.length%2!=0)throw new le(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let v=0;v<i.length;v+=2)u.push(Ol(e,i[v])),c.push(i[v+1]);const d=[],f=Kt.empty();for(let v=u.length-1;v>=0;--v)if(!Tm(d,u[v])){const E=u[v];let S=c[v];S=Es(S);const k=a.Nu(E);if(S instanceof fa)d.push(E);else{const M=Ii(S,k);M!=null&&(d.push(E),f.set(E,M))}}const m=new Zt(d);return new _m(f,m,a.fieldTransforms)}function rA(t,e,s,n=!1){return Ii(s,t.Qu(n?4:3,e))}function Ii(t,e){if(Am(t=Es(t)))return Uu("Unsupported field value:",e,t),bm(t,e);if(t instanceof da)return function(n,r){if(!ym(r.Cu))throw r.Bu(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,r){const i=[];let a=0;for(const u of n){let c=Ii(u,r.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,r){if((n=Es(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return J0(r.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=tt.fromDate(n);return{timestampValue:Co(r.serializer,i)}}if(n instanceof tt){const i=new tt(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Co(r.serializer,i)}}if(n instanceof $u)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof lr)return{bytesValue:Gp(r.serializer,n._byteString)};if(n instanceof Ot){const i=r.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw r.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Eu(n.firestore._databaseId||r.databaseId,n._key.path)}}if(n instanceof Ou)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return gu(u.serializer,c)})}}}}}}(n,r);throw r.Bu(`Unsupported field value: ${aa(n)}`)}(t,e)}function bm(t,e){const s={};return yp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rn(t,(n,r)=>{const i=Ii(r,e.Mu(n));i!=null&&(s[n]=i)}),{mapValue:{fields:s}}}function Am(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof tt||t instanceof $u||t instanceof lr||t instanceof Ot||t instanceof da||t instanceof Ou)}function Uu(t,e,s){if(!Am(s)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(s)){const n=aa(s);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function Ol(t,e,s){if((e=Es(e))instanceof ca)return e._internalPath;if(typeof e=="string")return Bu(t,e);throw ko("Field path arguments must be of type string or ",t,!1,void 0,s)}const iA=new RegExp("[~\\*/\\[\\]]");function Bu(t,e,s){if(e.search(iA)>=0)throw ko(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new ca(...e.split("."))._internalPath}catch{throw ko(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function ko(t,e,s,n,r){const i=n&&!n.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;s&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${n}`),a&&(c+=` in document ${r}`),c+=")"),new le(Q.INVALID_ARGUMENT,u+t+c)}function Tm(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,s,n,r,i){this._firestore=e,this._userDataWriter=s,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new oA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(ju("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class oA extends Im{data(){return super.data()}}function ju(t,e){return typeof e=="string"?Bu(t,e):e instanceof ca?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qu{}class Cm extends qu{}function Vo(t,e,...s){let n=[];e instanceof qu&&n.push(e),n=n.concat(s),function(i){const a=i.filter(c=>c instanceof Hu).length,u=i.filter(c=>c instanceof Gu).length;if(a>1||a>0&&u>0)throw new le(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const r of n)t=r._apply(t);return t}class Gu extends Cm{constructor(e,s,n){super(),this._field=e,this._op=s,this._value=n,this.type="where"}static _create(e,s,n){return new Gu(e,s,n)}_apply(e){const s=this._parse(e);return Sm(e._query,s),new un(e.firestore,e.converter,Sl(e._query,s))}_parse(e){const s=ha(e.firestore);return function(i,a,u,c,d,f,m){let v;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new le(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Dh(m,f);const E=[];for(const S of m)E.push(Vh(c,i,S));v={arrayValue:{values:E}}}else v=Vh(c,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Dh(m,f),v=rA(u,a,m,f==="in"||f==="not-in");return ct.create(d,f,v)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}class Hu extends qu{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new Hu(e,s)}_parse(e){const s=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return s.length===1?s[0]:ds.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(r,i){let a=r;const u=i.getFlattenedFilters();for(const c of u)Sm(a,c),a=Sl(a,c)}(e._query,s),new un(e.firestore,e.converter,Sl(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zu extends Cm{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new zu(e,s)}_apply(e){const s=function(r,i,a){if(r.startAt!==null)throw new le(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new le(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ci(i,a)}(e._query,this._field,this._direction);return new un(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new hr(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,s))}}function Do(t,e="asc"){const s=e,n=ju("orderBy",t);return zu._create(n,s)}function Vh(t,e,s){if(typeof(s=Es(s))=="string"){if(s==="")throw new le(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rp(e)&&s.indexOf("/")!==-1)throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const n=e.path.child(Ze.fromString(s));if(!pe.isDocumentKey(n))throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Xd(t,new pe(n))}if(s instanceof Ot)return Xd(t,s._key);throw new le(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${aa(s)}.`)}function Dh(t,e){if(!Array.isArray(t)||t.length===0)throw new le(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sm(t,e){const s=function(r,i){for(const a of r)for(const u of a.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new le(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class aA{convertValue(e,s="none"){switch(Cn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(wn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const n={};return Rn(e,(r,i)=>{n[r]=this.convertValue(i,s)}),n}convertVectorValue(e){var s,n,r;const i=(r=(n=(s=e.fields)===null||s===void 0?void 0:s.value.arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(a=>at(a.doubleValue));return new Ou(i)}convertGeoPoint(e){return new $u(at(e.latitude),at(e.longitude))}convertArray(e,s){return(e.values||[]).map(n=>this.convertValue(n,s))}convertServerTimestamp(e,s){switch(s){case"previous":const n=hu(e);return n==null?null:this.convertValue(n,s);case"estimate":return this.convertTimestamp(ai(e));default:return null}}convertTimestamp(e){const s=rn(e);return new tt(s.seconds,s.nanos)}convertDocumentKey(e,s){const n=Ze.fromString(e);Fe(Yp(n));const r=new li(n.get(1),n.get(3)),i=new pe(n.popFirst(5));return r.isEqual(s)||$s(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e,s){let n;return n=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pm extends Im{constructor(e,s,n,r,i,a){super(e,s,n,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new co(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const n=this._document.data.field(ju("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,s.serverTimestamps)}}}class co extends Pm{data(e={}){return super.data(e)}}class km{constructor(e,s,n,r){this._firestore=e,this._userDataWriter=s,this._snapshot=r,this.metadata=new Or(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(n=>{e.call(s,new co(this._firestore,this._userDataWriter,n.key,n,new Or(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new le(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const c=new co(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Or(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new co(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Or(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let d=-1,f=-1;return u.type!==0&&(d=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),f=a.indexOf(u.doc.key)),{type:lA(u.type),doc:c,oldIndex:d,newIndex:f}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function lA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pa(t){t=Wt(t,Ot);const e=Wt(t.firestore,Fs);return Kb(ua(e),t._key).then(s=>Vm(e,t,s))}class Ku extends aA{constructor(e){super(),this.firestore=e}convertBytes(e){return new lr(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,s)}}function an(t){t=Wt(t,un);const e=Wt(t.firestore,Fs),s=ua(e),n=new Ku(e);return wm(t._query),Wb(s,t._query).then(r=>new km(e,n,t,r))}function uA(t,e,s){t=Wt(t,Ot);const n=Wt(t.firestore,Fs),r=Rm(t.converter,e,s);return ma(n,[Em(ha(n),"setDoc",t._key,r,t.converter!==null,s).toMutation(t._key,rs.none())])}function xo(t,e,s,...n){t=Wt(t,Ot);const r=Wt(t.firestore,Fs),i=ha(r);let a;return a=typeof(e=Es(e))=="string"||e instanceof ca?nA(i,"updateDoc",t._key,e,s,n):sA(i,"updateDoc",t._key,e),ma(r,[a.toMutation(t._key,rs.exists(!0))])}function No(t){return ma(Wt(t.firestore,Fs),[new vu(t._key,rs.none())])}function Mo(t,e){const s=Wt(t.firestore,Fs),n=qt(t),r=Rm(t.converter,e);return ma(s,[Em(ha(t.firestore),"addDoc",n._key,r,t.converter!==null,{}).toMutation(n._key,rs.exists(!1))]).then(()=>n)}function Mt(t,...e){var s,n,r;t=Es(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||kh(e[a])||(i=e[a],a++);const u={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(kh(e[a])){const m=e[a];e[a]=(s=m.next)===null||s===void 0?void 0:s.bind(m),e[a+1]=(n=m.error)===null||n===void 0?void 0:n.bind(m),e[a+2]=(r=m.complete)===null||r===void 0?void 0:r.bind(m)}let c,d,f;if(t instanceof Ot)d=Wt(t.firestore,Fs),f=Xo(t._key.path),c={next:m=>{e[a]&&e[a](Vm(d,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Wt(t,un);d=Wt(m.firestore,Fs),f=m._query;const v=new Ku(d);c={next:E=>{e[a]&&e[a](new km(d,v,m,E))},error:e[a+1],complete:e[a+2]},wm(t._query)}return function(v,E,S,k){const M=new Mu(k),L=new xu(E,M,S);return v.asyncQueue.enqueueAndForget(async()=>ku(await Po(v),L)),()=>{M.Za(),v.asyncQueue.enqueueAndForget(async()=>Vu(await Po(v),L))}}(ua(d),f,u,c)}function ma(t,e){return function(n,r){const i=new Vs;return n.asyncQueue.enqueueAndForget(async()=>$b(await zb(n),r,i)),i.promise}(ua(t),e)}function Vm(t,e,s){const n=s.docs.get(e._key),r=new Ku(t);return new Pm(t,r,e._key,n,new Or(s.hasPendingWrites,s.fromCache),e.converter)}function Yi(){return new Lu("serverTimestamp")}(function(e,s=!0){(function(r){dr=r})(Z1),Ao(new ri("firestore",(n,{instanceIdentifier:r,options:i})=>{const a=n.getProvider("app").getImmediate(),u=new Fs(new p0(n.getProvider("auth-internal")),new _0(n.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new le(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new li(d.options.projectId,f)}(a,r),a);return i=Object.assign({useFetchStreams:s},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Wn(Kd,"4.7.3",e),Wn(Kd,"4.7.3","esm2017")})();const cA={apiKey:"AIzaSyA__e798LgpiDfoBZXE7mynRxAajhQZT8o",authDomain:"oishi-nigiri.firebaseapp.com",projectId:"oishi-nigiri",storageBucket:"oishi-nigiri.firebasestorage.app",messagingSenderId:"235045203402",appId:"1:235045203402:web:442b84e7b4720f33d1f333"};let Ji=null,$o=null;function Dm(){return Ji||(Ji=lp(cA),$o=Jb(Ji)),{app:Ji,db:$o}}function it(){return $o||Dm(),$o}const dA=["317665879443767306"],Xi=ne(null),Zi=ne(!1),Dr=ne(!1),Fn=ne({});function wi(){const t=()=>{if(typeof DISCORD_CONFIG>"u"){console.error("DISCORD_CONFIG n'est pas dfini");return}const d=new URLSearchParams({client_id:DISCORD_CONFIG.clientId,redirect_uri:DISCORD_CONFIG.redirectUri,response_type:"token",scope:DISCORD_CONFIG.scope});window.location.href=`https://discord.com/api/oauth2/authorize?${d.toString()}`},e=()=>{localStorage.removeItem("discordUser"),localStorage.removeItem("discordToken"),localStorage.removeItem("discord_user"),localStorage.removeItem("discord_token"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminPermissions"),localStorage.removeItem("isSuperAdmin"),Xi.value=null,Zi.value=!1,Dr.value=!1,Fn.value={},window.location.reload()},s=async()=>{const d=window.location.hash;if(d&&d.includes("access_token")){const E=new URLSearchParams(d.substring(1)).get("access_token");if(E){const S=await n(E);if(S&&(localStorage.setItem("discord_user",JSON.stringify(S)),localStorage.setItem("discord_token",E),await i(S.id)))return localStorage.setItem("discordUser",JSON.stringify(S)),localStorage.setItem("discordToken",E),localStorage.setItem("isAdmin","true"),Xi.value=S,window.history.replaceState({},document.title,window.location.pathname),!0}}const f=localStorage.getItem("discord_user"),m=localStorage.getItem("discord_token");if(f&&m){const v=JSON.parse(f);if(await i(v.id))return localStorage.setItem("discordUser",JSON.stringify(v)),localStorage.setItem("discordToken",m),localStorage.setItem("isAdmin","true"),Xi.value=v,!0}return!1},n=async d=>{try{const f=await fetch("https://discord.com/api/users/@me",{headers:{Authorization:`Bearer ${d}`}});if(f.ok)return await f.json()}catch(f){console.error("Erreur lors de la rcupration des infos Discord:",f)}return null},r=d=>{const f=String(d);return!!(typeof DISCORD_CONFIG<"u"&&DISCORD_CONFIG.adminManagerIds&&DISCORD_CONFIG.adminManagerIds.includes(f)||dA.includes(f))},i=async d=>{if(!d)return!1;try{const f=String(d);if(r(f))return Fn.value={menu:!0,team:!0,sales:!0,employees:!0,ranks:!0,admins:!0},localStorage.setItem("adminPermissions",JSON.stringify(Fn.value)),localStorage.setItem("isSuperAdmin","true"),Dr.value=!0,Zi.value=!0,!0;const m=it(),v=await pa(qt(m,"admins",f));if(v.exists()){const E=v.data();if(E.isAdmin===!0)return Fn.value=E.permissions||{},localStorage.setItem("adminPermissions",JSON.stringify(Fn.value)),localStorage.setItem("isSuperAdmin","false"),Dr.value=!1,Zi.value=!0,!0}return!1}catch(f){return console.error("Erreur lors de la vrification du statut admin:",f),!1}},a=d=>{if(Dr.value)return!0;const f=localStorage.getItem("adminPermissions");if(!f)return!1;try{return JSON.parse(f)[d]===!0}catch{return!1}},u=d=>{if(!d||!d.id)return"https://cdn.discordapp.com/embed/avatars/0.png";const f=String(d.id);return/^\d{17,19}$/.test(f)?d.avatar&&typeof d.avatar=="string"?/^[a-zA-Z0-9_-]+$/.test(d.avatar)?`https://cdn.discordapp.com/avatars/${f}/${d.avatar}.png`:`https://cdn.discordapp.com/embed/avatars/${(parseInt(f)>>22)%6}.png`:`https://cdn.discordapp.com/embed/avatars/${(parseInt(f)>>22)%6}.png`:"https://cdn.discordapp.com/embed/avatars/0.png"},c=d=>d.discriminator&&d.discriminator!=="0"?`${d.username}#${d.discriminator}`:d.global_name||d.username;return{user:ue(()=>Xi.value),isAdmin:ue(()=>Zi.value),isSuperAdmin:ue(()=>Dr.value),permissions:ue(()=>Fn.value),loginWithDiscord:t,logout:e,checkAuth:s,hasPermission:a,getAvatarUrl:u,getUsername:c}}const Le=(t,e)=>{const s=t.__vccOpts||t;for(const[n,r]of e)s[n]=r;return s},hA={class:"auth-container"},fA={key:0,class:"user-profile"},pA=["src","alt"],mA={class:"user-name"},gA={key:0,href:"#/admin.html",class:"admin-btn"},vA={__name:"AuthContainer",setup(t){const{user:e,isAdmin:s,loginWithDiscord:n,logout:r,getAvatarUrl:i,getUsername:a,checkAuth:u}=wi(),c=ue(()=>!!e.value),d=ue(()=>s.value),f=ue(()=>e.value?a(e.value):""),m=ue(()=>e.value?i(e.value):""),v=()=>{n()},E=()=>{r()};return Ct(async()=>{await u()}),(S,k)=>(V(),F("div",hA,[c.value?(V(),F("div",fA,[o("img",{src:m.value,alt:f.value,class:"user-avatar-small"},null,8,pA),o("span",mA,j(f.value),1),d.value?(V(),F("a",gA,"Admin")):he("",!0),o("button",{onClick:E,class:"logout-btn-small"},"Dconnexion")])):(V(),F("button",{key:1,onClick:v,class:"discord-login-btn-small"},[...k[0]||(k[0]=[o("svg",{width:"16",height:"16",viewBox:"0 0 71 55",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 49.9718 48.5383C51.038 50.6034 52.2584 52.5699 53.5959 54.435C53.6519 54.5139 53.7526 54.5477 53.845 54.5195C59.6464 52.7249 65.529 50.0174 71.6019 45.5576C71.6551 45.5182 71.6887 45.459 71.6943 45.3942C73.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z",fill:"currentColor"})],-1),re(" Se connecter ",-1)])]))]))}},_A=Le(vA,[["__scopeId","data-v-e70f3a8e"]]);const yA={class:"container"},EA={class:"logo-section"},bA={href:"#/",class:"logo"},AA=["src"],TA={class:"nav-right"},IA={__name:"Navbar",setup(t){const e=ne(!1),s=ne(!1),n=ne("accueil"),r=ue(()=>"./logo.png"),i=()=>{e.value=!e.value},a=()=>{e.value=!1},u=c=>{a(),n.value=c,setTimeout(()=>{const d=document.getElementById(c);if(d){const f=d.offsetTop-80;window.scrollTo({top:f,behavior:"smooth"})}},100)};return Ct(()=>{const c=()=>{s.value=window.scrollY>10};window.addEventListener("scroll",c,{passive:!0}),c();const f=["accueil","carte-semaine","apropos","equipe"].map(v=>document.getElementById(v)).filter(Boolean);let m;f.length&&(m=new IntersectionObserver(v=>{var S;const E=v.filter(k=>k.isIntersecting).sort((k,M)=>(M.intersectionRatio||0)-(k.intersectionRatio||0))[0];(S=E==null?void 0:E.target)!=null&&S.id&&(n.value=E.target.id)},{root:null,threshold:[.2,.35,.5,.65]}),f.forEach(v=>m.observe(v))),zo(()=>{window.removeEventListener("scroll",c),m&&m.disconnect()})}),(c,d)=>(V(),F("nav",{class:xe(["navbar",{"is-scrolled":s.value}])},[o("div",yA,[o("div",EA,[o("div",{class:xe(["hamburger",{active:e.value}]),onClick:i,"aria-label":"Menu",role:"button",tabindex:"0"},[...d[4]||(d[4]=[o("span",null,null,-1),o("span",null,null,-1),o("span",null,null,-1)])],2),o("a",bA,[o("img",{src:r.value,alt:"Oishi Nigiri",class:"logo-img"},null,8,AA),d[5]||(d[5]=o("div",{class:"logo-text-container"},[o("span",{class:"logo-kanji"},""),o("span",{class:"logo-text"},"Oishi Nigiri")],-1))])]),o("ul",{class:xe(["nav-menu",{active:e.value}])},[o("li",null,[o("a",{href:"#/",class:xe({active:n.value==="accueil"}),onClick:d[0]||(d[0]=He(f=>u("accueil"),["prevent"]))},"Accueil",2)]),o("li",null,[o("a",{href:"#/",class:xe({active:n.value==="carte-semaine"}),onClick:d[1]||(d[1]=He(f=>u("carte-semaine"),["prevent"]))},"Menu",2)]),o("li",null,[o("a",{href:"#/",class:xe({active:n.value==="apropos"}),onClick:d[2]||(d[2]=He(f=>u("apropos"),["prevent"]))}," Propos",2)]),o("li",null,[o("a",{href:"#/",class:xe({active:n.value==="equipe"}),onClick:d[3]||(d[3]=He(f=>u("equipe"),["prevent"]))},"quipe",2)]),o("li",null,[o("a",{href:"./recrutement.html",onClick:a},"Recrutement")])],2),o("div",TA,[Xe(_A)])]),e.value?(V(),F("div",{key:0,class:"menu-overlay",onClick:a})):he("",!0)],2))}},wA=Le(IA,[["__scopeId","data-v-a04efc2c"]]);const CA={id:"accueil",class:"hero"},SA={class:"hero-content"},RA={class:"hero-cta-group"},PA={__name:"HeroSection",setup(t){const e=()=>{const s=document.getElementById("carte-semaine");if(s){const n=s.offsetTop-80;window.scrollTo({top:n,behavior:"smooth"})}};return Ct(()=>{window.addEventListener("scroll",()=>{const s=window.pageYOffset,n=document.querySelector(".hero-content");n&&s<window.innerHeight&&(n.style.transform=`translateY(${s*.5}px)`,n.style.opacity=1-s/window.innerHeight)})}),(s,n)=>(V(),F("section",CA,[n[3]||(n[3]=o("div",{class:"hero-background"},[o("div",{class:"hero-overlay"}),o("div",{class:"hero-pattern"})],-1)),o("div",SA,[n[1]||(n[1]=ul('<div class="hero-badge" data-v-d9673c98><i class="fas fa-star" data-v-d9673c98></i><span data-v-d9673c98>Restaurant Authentique</span></div><h1 class="hero-title" data-v-d9673c98><span class="hero-kanji" data-v-d9673c98></span><span class="hero-name" data-v-d9673c98>Oishi Nigiri</span></h1><p class="hero-subtitle" data-v-d9673c98>Une exprience culinaire authentique du Japon, o chaque bouche raconte une histoire</p><div class="hero-features" data-v-d9673c98><div class="feature-item" data-v-d9673c98><i class="fas fa-utensils" data-v-d9673c98></i><span data-v-d9673c98>Cuisine japonaise traditionnelle</span></div><div class="feature-item" data-v-d9673c98><i class="fas fa-leaf" data-v-d9673c98></i><span data-v-d9673c98>Ingrdients frais</span></div><div class="feature-item" data-v-d9673c98><i class="fas fa-user-graduate" data-v-d9673c98></i><span data-v-d9673c98>Chef expriment</span></div></div>',4)),o("div",RA,[o("a",{href:"#/",onClick:He(e,["prevent"]),class:"cta-button primary"},[...n[0]||(n[0]=[o("i",{class:"fas fa-eye"},null,-1),re(" Dcouvrir le Menu ",-1)])])]),n[2]||(n[2]=ul('<div class="hero-stats" data-v-d9673c98><div class="stat-item" data-v-d9673c98><div class="stat-number" data-v-d9673c98>4.8</div><div class="stat-label" data-v-d9673c98>Note clients</div></div><div class="stat-item" data-v-d9673c98><div class="stat-number" data-v-d9673c98>500+</div><div class="stat-label" data-v-d9673c98>Clients satisfaits</div></div><div class="stat-item" data-v-d9673c98><div class="stat-number" data-v-d9673c98>15+</div><div class="stat-label" data-v-d9673c98>Annes d&#39;exprience</div></div></div>',1))])]))}},kA=Le(PA,[["__scopeId","data-v-d9673c98"]]);const VA={id:"carte-semaine",class:"weekly-menu-section"},DA={class:"container"},xA={key:0,class:"loading-menu"},NA={key:1,class:"weekly-menu-image-container"},MA=["src"],$A={key:2,class:"loading-menu"},OA={key:3,class:"weekly-menu-grid"},FA={class:"weekly-menu-category-title"},LA={class:"weekly-menu-grid"},UA={class:"weekly-menu-item-header"},BA={class:"weekly-menu-item-title"},jA={class:"weekly-menu-item-price"},qA={class:"weekly-menu-item-description"},GA={__name:"WeeklyMenuSection",setup(t){const e=ne([]),s=ne([]),n=ne(!0),r=ne(!1),i=ne(""),a=ue(()=>{const d={};return s.value.forEach(m=>{d[m.name]=m.order||999}),[...new Set(e.value.map(m=>m.category||"Sans catgorie"))].sort((m,v)=>{const E=d[m]!==void 0?d[m]:999,S=d[v]!==void 0?d[v]:999;return E!==S?E-S:m.localeCompare(v)})}),u=d=>e.value.filter(f=>(f.category||"Sans catgorie")===d).sort((f,m)=>(f.name||"").localeCompare(m.name||"")),c=async()=>{try{n.value=!0;const d=it(),f=await pa(qt(d,"menuConfig","display"));if(f.exists()){const E=f.data();r.value=E.useImageMode||!1,i.value=E.imageUrl||""}if(r.value&&i.value){n.value=!1;return}const m=await an(Vo(Ge(d,"menuCategories"),Do("order","asc")));s.value=m.docs.map(E=>({id:E.id,...E.data()}));const v=await an(Ge(d,"menuSemaine"));e.value=v.docs.map(E=>({id:E.id,...E.data()})),n.value=!1}catch(d){console.error("Erreur lors du chargement du menu:",d),n.value=!1}};return Ct(()=>{c();const d=it();Mt(Ge(d,"menuSemaine"),()=>{c()}),Mt(qt(d,"menuConfig","display"),()=>{c()})}),(d,f)=>(V(),F("section",VA,[o("div",DA,[f[2]||(f[2]=o("h2",{class:"section-title"},[o("span",{class:"title-decor"},""),re(" Carte de la Semaine "),o("span",{class:"title-decor"},"")],-1)),n.value?(V(),F("div",xA,[...f[0]||(f[0]=[o("p",null,"Chargement de la carte de la semaine...",-1)])])):r.value&&i.value?(V(),F("div",NA,[o("img",{src:i.value,alt:"Carte de la semaine",class:"weekly-menu-image"},null,8,MA)])):e.value.length===0?(V(),F("div",$A,[...f[1]||(f[1]=[o("p",null,"Aucune carte de la semaine disponible pour le moment.",-1)])])):(V(),F("div",OA,[(V(!0),F(we,null,Ye(a.value,m=>(V(),F("div",{key:m,class:"weekly-menu-category-section"},[o("h3",FA,j(m),1),o("div",LA,[(V(!0),F(we,null,Ye(u(m),v=>(V(),F("div",{key:v.id,class:"weekly-menu-item"},[o("div",UA,[o("div",BA,j(v.name),1),o("div",jA,j(v.price)+"",1)]),o("div",qA,j(v.description),1)]))),128))])]))),128))]))])]))}},HA=Le(GA,[["__scopeId","data-v-d167b753"]]);const zA={},KA={id:"apropos",class:"about-section"};function WA(t,e){return V(),F("section",KA,[...e[0]||(e[0]=[ul('<div class="container" data-v-f1514011><div class="section-header" data-v-f1514011><h2 class="section-title" data-v-f1514011><span class="title-decor" data-v-f1514011></span> Notre Histoire <span class="title-decor" data-v-f1514011></span></h2><p class="section-description" data-v-f1514011>Dcouvrez l&#39;me et la passion derrire Oishi Nigiri</p></div><div class="about-content" data-v-f1514011><div class="about-text" data-v-f1514011><div class="about-intro" data-v-f1514011><div class="intro-badge" data-v-f1514011><i class="fas fa-award" data-v-f1514011></i><span data-v-f1514011>Restaurant traditionnel depuis 2008</span></div><p class="lead-text" data-v-f1514011> Bienvenue chez Oishi Nigiri, o la tradition japonaise rencontre l&#39;excellence culinaire moderne. </p></div><div class="about-details" data-v-f1514011><div class="detail-item" data-v-f1514011><div class="detail-icon" data-v-f1514011><i class="fas fa-utensils" data-v-f1514011></i></div><div class="detail-content" data-v-f1514011><h4 data-v-f1514011>Cuisine authentique</h4><p data-v-f1514011>Recettes traditionnelles transmises de gnration en gnration, prpares avec passion par notre chef matre sushi.</p></div></div><div class="detail-item" data-v-f1514011><div class="detail-icon" data-v-f1514011><i class="fas fa-fish" data-v-f1514011></i></div><div class="detail-content" data-v-f1514011><h4 data-v-f1514011>Ingrdients d&#39;exception</h4><p data-v-f1514011>Poissons et fruits de mer frais imports quotidiennement du march de Tsukiji, slectionns avec le plus grand soin.</p></div></div><div class="detail-item" data-v-f1514011><div class="detail-icon" data-v-f1514011><i class="fas fa-heart" data-v-f1514011></i></div><div class="detail-content" data-v-f1514011><h4 data-v-f1514011>Amour de l&#39;art</h4><p data-v-f1514011>Chaque plat est une uvre d&#39;art, prpare avec prcision et prsente avec lgance pour ravir vos sens.</p></div></div></div><div class="about-stats" data-v-f1514011><div class="stat-card" data-v-f1514011><div class="stat-number" data-v-f1514011>15+</div><div class="stat-label" data-v-f1514011>Annes d&#39;exprience</div></div><div class="stat-card" data-v-f1514011><div class="stat-number" data-v-f1514011>50+</div><div class="stat-label" data-v-f1514011>Spcialits uniques</div></div><div class="stat-card" data-v-f1514011><div class="stat-number" data-v-f1514011>100%</div><div class="stat-label" data-v-f1514011>Ingrdients frais</div></div></div></div><div class="about-image" data-v-f1514011><div class="image-showcase" data-v-f1514011><div class="image-placeholder" data-v-f1514011><span data-v-f1514011></span></div><div class="image-overlay" data-v-f1514011><div class="overlay-content" data-v-f1514011><h4 data-v-f1514011>Art culinaire</h4><p data-v-f1514011>Tradition  Passion  Excellence</p></div></div></div><div class="quality-badges" data-v-f1514011><div class="badge" data-v-f1514011><i class="fas fa-certificate" data-v-f1514011></i><span data-v-f1514011>Label Bio</span></div><div class="badge" data-v-f1514011><i class="fas fa-star" data-v-f1514011></i><span data-v-f1514011>3 toiles Michelin</span></div><div class="badge" data-v-f1514011><i class="fas fa-trophy" data-v-f1514011></i><span data-v-f1514011>Prix d&#39;excellence</span></div></div></div></div></div>',1)])])}const QA=Le(zA,[["render",WA],["__scopeId","data-v-f1514011"]]);const YA={id:"equipe",class:"team-section"},JA={class:"container"},XA={key:0,class:"loading-menu"},ZA={key:1,class:"loading-menu"},eT={key:2,class:"organigramme-grid"},tT={class:"team-member-photo"},sT=["src","alt"],nT={key:1,class:"team-member-placeholder"},rT={class:"team-member-info"},iT={class:"team-member-name"},oT={class:"team-member-role"},aT={key:0,class:"team-member-description"},lT={__name:"TeamSection",setup(t){const e=ne([]),s=ne(!0),n=ue(()=>[...e.value].sort((i,a)=>(i.order||0)-(a.order||0))),r=async()=>{try{s.value=!0;const i=it(),a=await an(Ge(i,"organigramme"));e.value=a.docs.map(u=>({id:u.id,...u.data()})),s.value=!1}catch(i){console.error("Erreur lors du chargement de l'quipe:",i),s.value=!1}};return Ct(()=>{r();const i=it();Mt(Ge(i,"organigramme"),()=>{r()})}),(i,a)=>(V(),F("section",YA,[o("div",JA,[a[2]||(a[2]=o("h2",{class:"section-title"},[o("span",{class:"title-decor"},""),re(" Notre quipe "),o("span",{class:"title-decor"},"")],-1)),s.value?(V(),F("div",XA,[...a[0]||(a[0]=[o("p",null,"Chargement de l'quipe...",-1)])])):e.value.length===0?(V(),F("div",ZA,[...a[1]||(a[1]=[o("p",null,"Aucun membre de l'quipe pour le moment.",-1)])])):(V(),F("div",eT,[(V(!0),F(we,null,Ye(n.value,u=>(V(),F("div",{key:u.id,class:"team-member-card"},[o("div",tT,[u.photo?(V(),F("img",{key:0,src:u.photo,alt:u.name},null,8,sT)):(V(),F("div",nT,""))]),o("div",rT,[o("h3",iT,j(u.name),1),o("p",oT,j(u.role),1),u.description?(V(),F("p",aT,j(u.description),1)):he("",!0)])]))),128))]))])]))}},uT=Le(lT,[["__scopeId","data-v-a2edb862"]]);const cT={class:"footer"},dT={class:"container"},hT={class:"footer-content"},fT={class:"footer-section"},pT={__name:"Footer",setup(t){const e=s=>{const n=document.getElementById(s);if(n){const r=n.offsetTop-80;window.scrollTo({top:r,behavior:"smooth"})}};return(s,n)=>(V(),F("footer",cT,[o("div",dT,[o("div",hT,[n[4]||(n[4]=o("div",{class:"footer-section"},[o("h3",null,"Oishi Nigiri"),o("p",null,"L'authenticit du Japon dans chaque bouche.")],-1)),o("div",fT,[n[3]||(n[3]=o("h4",null,"Navigation",-1)),o("ul",null,[o("li",null,[o("a",{href:"#/",onClick:n[0]||(n[0]=He(r=>e("accueil"),["prevent"]))},"Accueil")]),o("li",null,[o("a",{href:"#/",onClick:n[1]||(n[1]=He(r=>e("carte-semaine"),["prevent"]))},"Menu")]),o("li",null,[o("a",{href:"#/",onClick:n[2]||(n[2]=He(r=>e("apropos"),["prevent"]))}," Propos")])])])]),n[5]||(n[5]=o("div",{class:"footer-bottom"},[o("p",null," 2025 Oishi Nigiri GPRP. Tous droits rservs.")],-1))])]))}},mT=Le(pT,[["__scopeId","data-v-a9041f0d"]]);const gT={class:"home-page"},vT={__name:"Home",setup(t){return(e,s)=>(V(),F("div",gT,[Xe(wA),Xe(kA),Xe(HA),Xe(QA),Xe(uT),Xe(mT)]))}},xh=Le(vT,[["__scopeId","data-v-a41f303e"]]);const _T={class:"login-screen"},yT={class:"login-container"},ET={class:"login-card"},bT={class:"login-title"},AT=["src"],TT={key:0,class:"error-message show"},IT={__name:"LoginScreen",props:{error:String},emits:["login"],setup(t){const e=ue(()=>"./logo.png");return(s,n)=>(V(),F("div",_T,[o("div",yT,[o("div",ET,[o("h1",bT,[o("img",{src:e.value,alt:"Oishi Nigiri",class:"logo-img-login"},null,8,AT),n[1]||(n[1]=o("span",{class:"logo-kanji"},"",-1)),n[2]||(n[2]=o("span",{class:"logo-text"},"Oishi Nigiri",-1))]),n[4]||(n[4]=o("h2",null,"Panel Administrateur",-1)),n[5]||(n[5]=o("p",{class:"login-subtitle"},"Connectez-vous avec Discord pour accder au panel",-1)),o("button",{onClick:n[0]||(n[0]=r=>s.$emit("login")),class:"discord-login-btn"},[...n[3]||(n[3]=[o("svg",{width:"20",height:"20",viewBox:"0 0 71 55",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 49.9718 48.5383C51.038 50.6034 52.2584 52.5699 53.5959 54.435C53.6519 54.5139 53.7526 54.5477 53.845 54.5195C59.6464 52.7249 65.529 50.0174 71.6019 45.5576C71.6551 45.5182 71.6887 45.459 71.6943 45.3942C73.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z",fill:"currentColor"})],-1),re(" Se connecter avec Discord ",-1)])]),t.error?(V(),F("div",TT,j(t.error),1)):he("",!0)])])]))}},wT=Le(IT,[["__scopeId","data-v-a6e589a2"]]),CT="/assets/logo-76d65970.png";const ST={class:"sidebar-header"},RT={class:"logo-section"},PT={class:"header-actions"},kT=["title"],VT={class:"sidebar-nav"},DT={key:0,class:"nav-section"},xT=["onClick"],NT={key:0,class:"nav-badge"},MT={key:1,class:"nav-section"},$T=["onClick"],OT={class:"user-section"},FT={class:"user-info-sidebar"},LT=["src","alt"],UT={class:"user-details-sidebar"},BT={class:"username-sidebar"},jT={class:"user-role-sidebar"},qT={__name:"AdminSidebar",props:{activeTab:String,permissions:Object,user:Object},emits:["tab-change","logout"],setup(t,{emit:e}){const{getAvatarUrl:s,getUsername:n}=wi(),r=t,i=e,a=ne(!1),u=ne(!1),c=ne(!1),d=[{id:"menu",label:"Carte",icon:"fas fa-utensils",permission:"menu",category:"management"},{id:"team",label:"quipe",icon:"fas fa-users",permission:"team",category:"management"},{id:"sales",label:"Ventes",icon:"fas fa-chart-line",permission:"sales",category:"management"},{id:"history",label:"Historique",icon:"fas fa-history",permission:"history",category:"management"},{id:"employees",label:"Employs",icon:"fas fa-user-tie",permission:"employees",category:"config"},{id:"ranks",label:"Grades",icon:"fas fa-star",permission:"ranks",category:"config"},{id:"admins",label:"Administrateurs",icon:"fas fa-shield-alt",permission:"admins",category:"config"}],f=ue(()=>localStorage.getItem("isSuperAdmin")==="true"),m=ue(()=>d.filter(z=>f.value?!0:r.permissions[z.permission]===!0)),v=ue(()=>m.value.filter(z=>z.category==="management")),E=ue(()=>m.value.filter(z=>z.category==="config")),S=z=>{i("tab-change",z),a.value=!1},k=()=>{c.value&&(u.value=!u.value)},M=()=>{c.value=window.innerWidth<=768,window.innerWidth<=1024&&(a.value=!1),window.innerWidth>768&&u.value&&(u.value=!1)};Ct(()=>{M(),window.addEventListener("resize",M)}),zo(()=>{window.removeEventListener("resize",M)});const L=ue(()=>r.user?n(r.user):"Admin"),x=ue(()=>r.user?s(r.user):"https://cdn.discordapp.com/embed/avatars/0.png"),$=ue(()=>localStorage.getItem("isSuperAdmin")==="true"?"Super Admin":"Administrateur");return(z,ee)=>(V(),F(we,null,[o("aside",{class:xe(["admin-sidebar",{"mobile-open":a.value,collapsed:u.value&&c.value}])},[o("div",ST,[o("div",RT,[o("img",{src:CT,alt:"Oishi Nigiri",class:xe(["sidebar-logo",{hidden:u.value&&c.value}])},null,2),o("div",{class:xe(["logo-text",{hidden:u.value&&c.value}])},[...ee[3]||(ee[3]=[o("span",{class:"logo-kanji"},"",-1),o("span",{class:"logo-title"},"Admin",-1)])],2)]),o("div",PT,[a.value?(V(),F("button",{key:0,class:"mobile-close",onClick:ee[0]||(ee[0]=N=>a.value=!1)},[...ee[4]||(ee[4]=[o("i",{class:"fas fa-times"},null,-1)])])):he("",!0),c.value?(V(),F("button",{key:1,class:"collapse-btn",onClick:k,title:u.value?"Afficher la sidebar":"Masquer la sidebar"},[o("i",{class:xe(u.value?"fas fa-chevron-right":"fas fa-chevron-left")},null,2)],8,kT)):he("",!0)])]),o("nav",VT,[v.value.length>0?(V(),F("div",DT,[o("div",{class:xe(["nav-section-title",{hidden:u.value&&c.value}])},"Gestion",2),(V(!0),F(we,null,Ye(v.value,N=>(V(),F("button",{key:N.id,class:xe(["nav-item",{active:t.activeTab===N.id,collapsed:u.value&&c.value}]),onClick:g=>S(N.id)},[o("i",{class:xe(N.icon)},null,2),o("span",{class:xe({hidden:u.value&&c.value})},j(N.label),3),N.badge&&!(u.value&&c.value)?(V(),F("span",NT,j(N.badge),1)):he("",!0)],10,xT))),128))])):he("",!0),E.value.length>0?(V(),F("div",MT,[o("div",{class:xe(["nav-section-title",{hidden:u.value&&c.value}])},"Configuration",2),(V(!0),F(we,null,Ye(E.value,N=>(V(),F("button",{key:N.id,class:xe(["nav-item",{active:t.activeTab===N.id,collapsed:u.value&&c.value}]),onClick:g=>S(N.id)},[o("i",{class:xe(N.icon)},null,2),o("span",{class:xe({hidden:u.value&&c.value})},j(N.label),3)],10,$T))),128))])):he("",!0)]),o("div",{class:xe(["sidebar-footer",{hidden:u.value&&c.value}])},[o("div",OT,[o("div",FT,[o("img",{src:x.value,alt:L.value,class:"user-avatar-sidebar"},null,8,LT),o("div",UT,[o("span",BT,j(L.value),1),o("span",jT,j($.value),1)])]),o("button",{onClick:ee[1]||(ee[1]=N=>z.$emit("logout")),class:"logout-btn-sidebar"},[...ee[5]||(ee[5]=[o("i",{class:"fas fa-sign-out-alt"},null,-1),re(" Dconnexion ",-1)])])]),ee[6]||(ee[6]=o("a",{href:"#/",class:"home-link"},[o("i",{class:"fas fa-home"}),o("span",null,"Retour au site")],-1))],2)],2),a.value?(V(),F("div",{key:0,class:"mobile-overlay",onClick:ee[2]||(ee[2]=N=>a.value=!1)})):he("",!0)],64))}},GT=Le(qT,[["__scopeId","data-v-a57ec0cc"]]);const HT={class:"admin-header"},zT={class:"header-left"},KT={class:"breadcrumb"},WT={class:"breadcrumb-item"},QT={__name:"AdminHeader",props:{activeTab:String},setup(t){const e=t,s={menu:"Gestion de la Carte",team:"Gestion de l'quipe",sales:"Gestion des Ventes",history:"Historique des Ventes",employees:"Gestion des Employs",ranks:"Gestion des Grades",admins:"Gestion des Administrateurs"},n=ue(()=>s[e.activeTab]||"Panel Admin"),r=()=>{const i=document.querySelector(".admin-sidebar");i&&i.classList.toggle("mobile-open")};return(i,a)=>(V(),F("header",HT,[o("div",zT,[o("button",{class:"mobile-menu-btn",onClick:r},[...a[0]||(a[0]=[o("i",{class:"fas fa-bars"},null,-1)])]),o("div",KT,[o("span",WT,j(n.value),1)])])]))}},YT=Le(QT,[["__scopeId","data-v-1989eccd"]]),gn=ne(!1),Xa=ne({title:"Confirmation",message:"",confirmText:"Confirmer",cancelText:"Annuler",type:"warning",onConfirm:null,onCancel:null});function kn(){return{showConfirm:gn,confirmConfig:Xa,confirm:(s,n={})=>new Promise((r,i)=>{Xa.value={title:n.title||"Confirmation",message:s,confirmText:n.confirmText||"Confirmer",cancelText:n.cancelText||"Annuler",type:n.type||"warning",onConfirm:()=>{gn.value=!1,r(!0)},onCancel:()=>{gn.value=!1,r(!1)}},gn.value=!0}),alert:(s,n={})=>new Promise(r=>{Xa.value={title:n.title||"Information",message:s,confirmText:n.confirmText||"OK",cancelText:"",type:n.type||"info",onConfirm:()=>{gn.value=!1,r()},onCancel:()=>{gn.value=!1,r()}},gn.value=!0})}}const JT={class:"modal-container"},XT={class:"modal-header"},ZT={class:"modal-header-content"},eI={class:"modal-subtitle"},tI={class:"form-grid"},sI={class:"form-group"},nI={class:"form-group"},rI=["value"],iI={class:"form-group full-width"},oI={class:"form-group"},aI={class:"modal-footer"},lI={type:"submit",class:"btn btn-primary"},uI={__name:"ItemModal",props:{item:Object,categories:Array},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=ne({name:"",category:"",description:"",price:0});es(()=>s.item,a=>{a?r.value={name:a.name||"",category:a.category||"",description:a.description||"",price:a.price||0}:r.value={name:"",category:"",description:"",price:0}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[6]||(u[6]=He(c=>a.$emit("close"),["self"]))},[o("div",JT,[o("div",XT,[o("div",ZT,[u[7]||(u[7]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-utensils"})],-1)),o("div",null,[o("h2",null,j(t.item?"Modifier un Plat":"Ajouter un Plat"),1),o("p",eI,j(t.item?"Modifiez les informations du plat":"Remplissez les informations pour ajouter un nouveau plat"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[8]||(u[8]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",tI,[o("div",sI,[u[9]||(u[9]=o("label",{for:"item-name"},[o("i",{class:"fas fa-tag"}),re(" Nom du plat ")],-1)),Ie(o("input",{type:"text",id:"item-name","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.name=c),required:"",placeholder:"Ex: Sushi Saumon",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",nI,[u[11]||(u[11]=o("label",{for:"item-category"},[o("i",{class:"fas fa-folder"}),re(" Catgorie ")],-1)),Ie(o("select",{id:"item-category","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.category=c),required:""},[u[10]||(u[10]=o("option",{value:""},"Slectionner une catgorie",-1)),(V(!0),F(we,null,Ye(t.categories,c=>(V(),F("option",{key:c.id,value:c.name},j(c.name),9,rI))),128))],512),[[Zn,r.value.category]])]),o("div",iI,[u[12]||(u[12]=o("label",{for:"item-description"},[o("i",{class:"fas fa-align-left"}),re(" Description ")],-1)),Ie(o("textarea",{id:"item-description","onUpdate:modelValue":u[3]||(u[3]=c=>r.value.description=c),rows:"4",required:"",placeholder:"Dcrivez le plat..."},null,512),[[et,r.value.description]])]),o("div",oI,[u[13]||(u[13]=o("label",{for:"item-price"},[o("i",{class:"fas fa-euro-sign"}),re(" Prix () ")],-1)),Ie(o("input",{type:"number",id:"item-price","onUpdate:modelValue":u[4]||(u[4]=c=>r.value.price=c),step:"0.01",min:"0",required:"",placeholder:"0.00"},null,512),[[et,r.value.price,void 0,{number:!0}]])])]),o("div",aI,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[5]||(u[5]=c=>a.$emit("close"))},[...u[14]||(u[14]=[o("i",{class:"fas fa-times"},null,-1),re(" Annuler ",-1)])]),o("button",lI,[u[15]||(u[15]=o("i",{class:"fas fa-check"},null,-1)),re(" "+j(t.item?"Modifier":"Ajouter"),1)])])],32)])])]))}},cI=Le(uI,[["__scopeId","data-v-c34fc61d"]]);const dI={class:"modal-container"},hI={class:"modal-header"},fI={class:"modal-header-content"},pI={class:"modal-subtitle"},mI={class:"form-group"},gI={class:"form-group"},vI={class:"modal-footer"},_I={type:"submit",class:"btn btn-primary"},yI={__name:"CategoryModal",props:{category:Object},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=ne({name:"",order:0});es(()=>s.category,a=>{a?r.value={name:a.name||"",order:a.order||0}:r.value={name:"",order:0}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[4]||(u[4]=He(c=>a.$emit("close"),["self"]))},[o("div",dI,[o("div",hI,[o("div",fI,[u[5]||(u[5]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-folder"})],-1)),o("div",null,[o("h2",null,j(t.category?"Modifier une Catgorie":"Ajouter une Catgorie"),1),o("p",pI,j(t.category?"Modifiez les informations de la catgorie":"Crez une nouvelle catgorie pour organiser vos plats"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[6]||(u[6]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",mI,[u[7]||(u[7]=o("label",{for:"category-name"},[o("i",{class:"fas fa-tag"}),re(" Nom de la catgorie ")],-1)),Ie(o("input",{type:"text",id:"category-name","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.name=c),required:"",placeholder:"Ex: Nigiri, Sashimi, Maki...",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",gI,[u[8]||(u[8]=o("label",{for:"category-order"},[o("i",{class:"fas fa-sort-numeric-down"}),re(" Ordre d'affichage ")],-1)),Ie(o("input",{type:"number",id:"category-order","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.order=c),min:"0",placeholder:"0"},null,512),[[et,r.value.order,void 0,{number:!0}]]),u[9]||(u[9]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),re(" Plus le nombre est petit, plus la catgorie apparatra en premier ")],-1))]),o("div",vI,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[3]||(u[3]=c=>a.$emit("close"))},[...u[10]||(u[10]=[o("i",{class:"fas fa-times"},null,-1),re(" Annuler ",-1)])]),o("button",_I,[u[11]||(u[11]=o("i",{class:"fas fa-check"},null,-1)),re(" "+j(t.category?"Modifier":"Ajouter"),1)])])],32)])])]))}},EI=Le(yI,[["__scopeId","data-v-1faba6b6"]]);const bI={class:"menu-dashboard"},AI={class:"dashboard-header"},TI={class:"header-content"},II={class:"header-actions"},wI={class:"stats-grid"},CI={class:"stat-card-large primary"},SI={class:"stat-card-content"},RI={class:"stat-info"},PI={class:"stat-value-large"},kI={class:"stat-trend"},VI={class:"stat-card-large success"},DI={class:"stat-card-content"},xI={class:"stat-info"},NI={class:"stat-value-large"},MI={class:"stat-card-large warning"},$I={class:"stat-card-content"},OI={class:"stat-info"},FI={class:"stat-value-large"},LI={class:"stat-trend"},UI={class:"stat-card-large info"},BI={class:"stat-card-content"},jI={class:"stat-info"},qI={class:"stat-value-large"},GI={class:"content-section"},HI={class:"config-card"},zI={class:"config-item"},KI={class:"checkbox-label-modern"},WI={key:0,class:"config-item"},QI={class:"content-section"},YI={class:"section-header-modern"},JI={class:"section-actions"},XI={key:0,class:"loading-container"},ZI={key:1,class:"empty-container"},ew={key:2,class:"categories-grid"},tw={class:"card-header-modern"},sw={class:"card-info"},nw={class:"card-title"},rw={class:"card-subtitle"},iw={class:"card-actions-modern"},ow=["onClick"],aw=["onClick"],lw={class:"content-section"},uw={class:"section-header-modern"},cw={class:"section-actions"},dw={key:0,class:"loading-container"},hw={key:1,class:"empty-container"},fw={key:2},pw={class:"category-title-modern"},mw={class:"items-grid-modern"},gw={class:"card-header-modern"},vw={class:"card-info"},_w={class:"card-title"},yw={class:"card-price-modern"},Ew={class:"card-badge"},bw={key:0,class:"card-description"},Aw={class:"card-actions-modern"},Tw=["onClick"],Iw=["onClick"],ww={__name:"MenuTab",setup(t){const e=ne([]),s=ne([]),n=ne(!0),r=ne(!1),i=ne(""),a=ne(!1),u=ne(!1),c=ne(null),d=ne(null),{confirm:f,alert:m}=kn(),v=ue(()=>{const w={};return s.value.forEach(P=>{w[P.name]=P.order||999}),[...new Set(e.value.map(P=>P.category||"Sans catgorie"))].sort((P,C)=>{const Ce=w[P]!==void 0?w[P]:999,ot=w[C]!==void 0?w[C]:999;return Ce!==ot?Ce-ot:P.localeCompare(C)})}),E=ue(()=>e.value.length===0?0:e.value.reduce((b,P)=>{const C=parseFloat(P.price)||0;return b+C},0)/e.value.length),S=w=>e.value.filter(b=>(b.category||"Sans catgorie")===w).sort((b,P)=>(b.name||"").localeCompare(P.name||"")),k=async()=>{try{n.value=!0;const w=it(),b=await pa(qt(w,"menuConfig","display"));if(b.exists()){const Ce=b.data();r.value=Ce.useImageMode||!1,i.value=Ce.imageUrl||""}const P=await an(Vo(Ge(w,"menuCategories"),Do("order","asc")));s.value=P.docs.map(Ce=>({id:Ce.id,...Ce.data()}));const C=await an(Ge(w,"menuSemaine"));e.value=C.docs.map(Ce=>({id:Ce.id,...Ce.data()})),n.value=!1}catch(w){console.error("Erreur lors du chargement:",w),n.value=!1}},M=async()=>{try{const w=it();await uA(qt(w,"menuConfig","display"),{useImageMode:r.value,imageUrl:i.value})}catch(w){console.error("Erreur lors de la sauvegarde de la config:",w),m("Erreur lors de la sauvegarde")}},L=()=>{M()},x=(w=null)=>{c.value=w,a.value=!0},$=()=>{a.value=!1,c.value=null},z=async w=>{try{const b=it();c.value?await xo(qt(b,"menuSemaine",c.value.id),{...w,updatedAt:new Date}):await Mo(Ge(b,"menuSemaine"),{...w,createdAt:new Date,updatedAt:new Date}),$(),k()}catch(b){console.error("Erreur lors de la sauvegarde:",b),await m("Erreur lors de la sauvegarde",{type:"danger"})}},ee=async w=>{if(await f("tes-vous sr de vouloir supprimer ce plat ?",{type:"danger",title:"Supprimer un plat",confirmText:"Supprimer"}))try{const P=it();await No(qt(P,"menuSemaine",w)),k()}catch(P){console.error("Erreur lors de la suppression:",P),await m("Erreur lors de la suppression",{type:"danger"})}},N=(w=null)=>{d.value=w,u.value=!0},g=()=>{u.value=!1,d.value=null},y=async w=>{try{const b=it();d.value?await xo(qt(b,"menuCategories",d.value.id),w):await Mo(Ge(b,"menuCategories"),w),g(),k()}catch(b){console.error("Erreur lors de la sauvegarde:",b),await m("Erreur lors de la sauvegarde",{type:"danger"})}},T=async w=>{if(await f("tes-vous sr de vouloir supprimer cette catgorie ?",{type:"danger",title:"Supprimer une catgorie",confirmText:"Supprimer"}))try{const P=it();await No(qt(P,"menuCategories",w)),k()}catch(P){console.error("Erreur lors de la suppression:",P),await m("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{k();const w=it();Mt(Ge(w,"menuSemaine"),()=>k()),Mt(Ge(w,"menuCategories"),()=>k())}),(w,b)=>(V(),F("div",bI,[o("div",AI,[o("div",TI,[b[8]||(b[8]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion de la Carte"),o("p",{class:"dashboard-subtitle"},"Grez vos catgories et plats de la semaine")],-1)),o("div",II,[o("button",{onClick:b[0]||(b[0]=P=>x()),class:"btn-action btn-primary-action"},[...b[6]||(b[6]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouveau Plat",-1)])]),o("button",{onClick:b[1]||(b[1]=P=>N()),class:"btn-action btn-secondary-action"},[...b[7]||(b[7]=[o("i",{class:"fas fa-folder-plus"},null,-1),o("span",null,"Nouvelle Catgorie",-1)])])])])]),o("div",wI,[o("div",CI,[o("div",SI,[b[10]||(b[10]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-utensils"})],-1)),o("div",RI,[b[9]||(b[9]=o("div",{class:"stat-label"},"Total Plats",-1)),o("div",PI,[o("span",null,j(e.value.length),1)])])]),o("div",kI,[b[11]||(b[11]=o("i",{class:"fas fa-list"},null,-1)),o("span",null,j(v.value.length)+" catgories",1)])]),o("div",VI,[o("div",DI,[b[13]||(b[13]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-folder"})],-1)),o("div",xI,[b[12]||(b[12]=o("div",{class:"stat-label"},"Catgories",-1)),o("div",NI,[o("span",null,j(s.value.length),1)])])]),b[14]||(b[14]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-check-circle"}),o("span",null,"Organises")],-1))]),o("div",MI,[o("div",$I,[b[16]||(b[16]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-image"})],-1)),o("div",OI,[b[15]||(b[15]=o("div",{class:"stat-label"},"Mode Affichage",-1)),o("div",FI,[o("span",null,j(r.value?"Image":"Manuel"),1)])])]),o("div",LI,[b[17]||(b[17]=o("i",{class:"fas fa-toggle-on"},null,-1)),o("span",null,j(r.value?"Activ":"Dsactiv"),1)])]),o("div",UI,[o("div",BI,[b[20]||(b[20]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-euro-sign"})],-1)),o("div",jI,[b[19]||(b[19]=o("div",{class:"stat-label"},"Prix Moyen",-1)),o("div",qI,[o("span",null,j(E.value.toFixed(2)),1),b[18]||(b[18]=o("span",{class:"currency"},"",-1))])])]),b[21]||(b[21]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-chart-bar"}),o("span",null,"Prix moyen")],-1))])]),o("div",GI,[b[26]||(b[26]=o("div",{class:"section-header-modern"},[o("div",null,[o("h2",{class:"section-title"},"Configuration d'Affichage"),o("p",{class:"section-description"},"Choisissez comment afficher le menu sur le site")])],-1)),o("div",HI,[o("div",zI,[o("label",KI,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":b[2]||(b[2]=P=>r.value=P),onChange:L},null,544),[[fs,r.value]]),b[22]||(b[22]=o("span",{class:"checkbox-custom"},null,-1)),b[23]||(b[23]=o("div",{class:"checkbox-content"},[o("span",{class:"checkbox-title"},"Utiliser une image au lieu du menu manuel"),o("span",{class:"checkbox-description"},"Si coch, seule l'image sera affiche sur le site")],-1))])]),r.value?(V(),F("div",WI,[b[24]||(b[24]=o("label",{for:"menu-image-url",class:"form-label-modern"},[o("i",{class:"fas fa-link"}),re(" URL de l'image du menu ")],-1)),Ie(o("input",{type:"url",id:"menu-image-url","onUpdate:modelValue":b[3]||(b[3]=P=>i.value=P),placeholder:"https://...",onBlur:M,class:"form-input-modern"},null,544),[[et,i.value]]),b[25]||(b[25]=o("small",{class:"form-hint-modern"},[o("i",{class:"fas fa-info-circle"}),re(" Collez ici le lien de l'image (ex: depuis Discord ou un hbergeur d'images) ")],-1))])):he("",!0)])]),o("div",QI,[o("div",YI,[b[28]||(b[28]=o("div",null,[o("h2",{class:"section-title"},"Catgories"),o("p",{class:"section-description"},"Organisez vos plats par catgories")],-1)),o("div",JI,[o("button",{onClick:b[4]||(b[4]=P=>N()),class:"btn-icon-text"},[...b[27]||(b[27]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),n.value?(V(),F("div",XI,[...b[29]||(b[29]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):s.value.length===0?(V(),F("div",ZI,[...b[30]||(b[30]=[o("i",{class:"fas fa-folder-open"},null,-1),o("p",null,"Aucune catgorie. Ajoutez-en une pour commencer !",-1)])])):(V(),F("div",ew,[(V(!0),F(we,null,Ye(v.value,P=>(V(),F("div",{key:P.id,class:"category-card-modern"},[o("div",tw,[b[31]||(b[31]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-folder"})],-1)),o("div",sw,[o("h3",nw,j(P.name),1),o("p",rw,"Ordre: "+j(P.order||0),1)])]),o("div",iw,[o("button",{onClick:C=>N(P),class:"btn-card-action"},[...b[32]||(b[32]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,ow),o("button",{onClick:C=>T(P.id),class:"btn-card-action danger"},[...b[33]||(b[33]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,aw)])]))),128))]))]),o("div",lw,[o("div",uw,[b[35]||(b[35]=o("div",null,[o("h2",{class:"section-title"},"Plats de la Semaine"),o("p",{class:"section-description"},"Grez les plats disponibles cette semaine")],-1)),o("div",cw,[o("button",{onClick:b[5]||(b[5]=P=>x()),class:"btn-icon-text"},[...b[34]||(b[34]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),n.value?(V(),F("div",dw,[...b[36]||(b[36]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):e.value.length===0?(V(),F("div",hw,[...b[37]||(b[37]=[o("i",{class:"fas fa-utensils"},null,-1),o("p",null,"Aucun plat dans la carte. Ajoutez-en un pour commencer !",-1)])])):(V(),F("div",fw,[(V(!0),F(we,null,Ye(v.value,P=>(V(),F("div",{key:P,class:"category-section-modern"},[o("h3",pw,[b[38]||(b[38]=o("i",{class:"fas fa-folder-open"},null,-1)),re(" "+j(P),1)]),o("div",mw,[(V(!0),F(we,null,Ye(S(P),C=>(V(),F("div",{key:C.id,class:"menu-item-card-modern"},[o("div",gw,[o("div",vw,[o("h3",_w,j(C.name),1),o("div",yw,j(C.price)+"",1)]),o("div",Ew,[b[39]||(b[39]=o("i",{class:"fas fa-tag"},null,-1)),re(" "+j(C.category),1)])]),C.description?(V(),F("div",bw,j(C.description),1)):he("",!0),o("div",Aw,[o("button",{onClick:Ce=>x(C),class:"btn-card-action"},[...b[40]||(b[40]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,Tw),o("button",{onClick:Ce=>ee(C.id),class:"btn-card-action danger"},[...b[41]||(b[41]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,Iw)])]))),128))])]))),128))]))]),a.value?(V(),Ue(cI,{key:0,item:c.value,categories:s.value,onClose:$,onSave:z},null,8,["item","categories"])):he("",!0),u.value?(V(),Ue(EI,{key:1,category:d.value,onClose:g,onSave:y},null,8,["category"])):he("",!0)]))}},Cw=Le(ww,[["__scopeId","data-v-5639010b"]]);const Sw={class:"modal-container"},Rw={class:"modal-header"},Pw={class:"modal-header-content"},kw={class:"modal-subtitle"},Vw={class:"form-grid"},Dw={class:"form-group"},xw={class:"form-group"},Nw=["value"],Mw={class:"form-group full-width"},$w={class:"form-group full-width"},Ow={class:"form-group"},Fw={class:"modal-footer"},Lw={type:"submit",class:"btn btn-primary"},Uw={__name:"MemberModal",props:{member:Object,ranks:Array},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=ne({name:"",role:"",description:"",photo:"",order:0});es(()=>s.member,a=>{a?r.value={name:a.name||"",role:a.role||"",description:a.description||"",photo:a.photo||"",order:a.order||0}:r.value={name:"",role:"",description:"",photo:"",order:0}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[7]||(u[7]=He(c=>a.$emit("close"),["self"]))},[o("div",Sw,[o("div",Rw,[o("div",Pw,[u[8]||(u[8]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-user"})],-1)),o("div",null,[o("h2",null,j(t.member?"Modifier un Membre":"Ajouter un Membre"),1),o("p",kw,j(t.member?"Modifiez les informations du membre":"Ajoutez un nouveau membre  l'quipe"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[9]||(u[9]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",Vw,[o("div",Dw,[u[10]||(u[10]=o("label",{for:"member-name"},[o("i",{class:"fas fa-user"}),re(" Nom ")],-1)),Ie(o("input",{type:"text",id:"member-name","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.name=c),required:"",placeholder:"Ex: Jean Dupont",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",xw,[u[12]||(u[12]=o("label",{for:"member-role"},[o("i",{class:"fas fa-briefcase"}),re(" Grade ")],-1)),Ie(o("select",{id:"member-role","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.role=c),required:""},[u[11]||(u[11]=o("option",{value:""},"Slectionner un grade",-1)),(V(!0),F(we,null,Ye(t.ranks,c=>(V(),F("option",{key:c.id,value:c.name},j(c.name),9,Nw))),128))],512),[[Zn,r.value.role]])]),o("div",Mw,[u[13]||(u[13]=o("label",{for:"member-description"},[o("i",{class:"fas fa-align-left"}),re(" Description (optionnel) ")],-1)),Ie(o("textarea",{id:"member-description","onUpdate:modelValue":u[3]||(u[3]=c=>r.value.description=c),rows:"3",placeholder:"Description du membre..."},null,512),[[et,r.value.description]])]),o("div",$w,[u[14]||(u[14]=o("label",{for:"member-photo"},[o("i",{class:"fas fa-image"}),re(" URL de la photo (optionnel) ")],-1)),Ie(o("input",{type:"url",id:"member-photo","onUpdate:modelValue":u[4]||(u[4]=c=>r.value.photo=c),placeholder:"https://..."},null,512),[[et,r.value.photo]])]),o("div",Ow,[u[15]||(u[15]=o("label",{for:"member-order"},[o("i",{class:"fas fa-sort-numeric-down"}),re(" Ordre d'affichage ")],-1)),Ie(o("input",{type:"number",id:"member-order","onUpdate:modelValue":u[5]||(u[5]=c=>r.value.order=c),min:"0",placeholder:"0"},null,512),[[et,r.value.order,void 0,{number:!0}]]),u[16]||(u[16]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),re(" Plus le nombre est petit, plus le membre apparatra en premier ")],-1))])]),o("div",Fw,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[6]||(u[6]=c=>a.$emit("close"))},[...u[17]||(u[17]=[o("i",{class:"fas fa-times"},null,-1),re(" Annuler ",-1)])]),o("button",Lw,[u[18]||(u[18]=o("i",{class:"fas fa-check"},null,-1)),re(" "+j(t.member?"Modifier":"Ajouter"),1)])])],32)])])]))}},Bw=Le(Uw,[["__scopeId","data-v-a5e52a9d"]]);const jw={class:"team-dashboard"},qw={class:"dashboard-header"},Gw={class:"header-content"},Hw={class:"header-actions"},zw={class:"stats-grid"},Kw={class:"stat-card-large primary"},Ww={class:"stat-card-content"},Qw={class:"stat-info"},Yw={class:"stat-value-large"},Jw={class:"stat-card-large success"},Xw={class:"stat-card-content"},Zw={class:"stat-info"},e2={class:"stat-value-large"},t2={class:"stat-trend"},s2={class:"stat-card-large info"},n2={class:"stat-card-content"},r2={class:"stat-info"},i2={class:"stat-value-large"},o2={class:"content-section"},a2={class:"section-header-modern"},l2={class:"section-actions"},u2={key:0,class:"loading-container"},c2={key:1,class:"empty-container"},d2={key:2,class:"members-grid"},h2={class:"card-header-modern"},f2={class:"member-avatar-wrapper"},p2=["src","alt"],m2={key:1,class:"member-avatar-placeholder"},g2={class:"card-info"},v2={class:"card-title"},_2={class:"card-badge"},y2={key:0,class:"card-description"},E2={class:"card-actions-modern"},b2=["onClick"],A2=["onClick"],T2={__name:"TeamTab",setup(t){const e=ne([]),s=ne([]),n=ne(!0),r=ne(!1),i=ne(null),{confirm:a,alert:u}=kn(),c=ue(()=>[...e.value].sort((L,x)=>(L.order||0)-(x.order||0))),d=ue(()=>e.value.filter(L=>L.photo).length),f=ue(()=>e.value.length===0?0:Math.round(d.value/e.value.length*100)),m=ue(()=>new Set(e.value.map(x=>x.role).filter(Boolean)).size),v=async()=>{try{n.value=!0;const L=it(),x=await an(Ge(L,"organigramme"));e.value=x.docs.map(z=>({id:z.id,...z.data()}));const $=await an(Ge(L,"ranks"));s.value=$.docs.map(z=>({id:z.id,...z.data()})),n.value=!1}catch(L){console.error("Erreur lors du chargement:",L),n.value=!1}},E=(L=null)=>{i.value=L,r.value=!0},S=()=>{r.value=!1,i.value=null},k=async L=>{try{const x=it();i.value?await xo(qt(x,"organigramme",i.value.id),{...L,updatedAt:new Date}):await Mo(Ge(x,"organigramme"),{...L,createdAt:new Date,updatedAt:new Date}),S(),v()}catch(x){console.error("Erreur lors de la sauvegarde:",x),await u("Erreur lors de la sauvegarde",{type:"danger"})}},M=async L=>{if(await a("tes-vous sr de vouloir supprimer ce membre ?",{type:"danger",title:"Supprimer un membre",confirmText:"Supprimer"}))try{const $=it();await No(qt($,"organigramme",L)),v()}catch($){console.error("Erreur lors de la suppression:",$),await u("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{v();const L=it();Mt(Ge(L,"organigramme"),()=>v())}),(L,x)=>(V(),F("div",jw,[o("div",qw,[o("div",Gw,[x[3]||(x[3]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion de l'quipe"),o("p",{class:"dashboard-subtitle"},"Grez les membres de votre organigramme")],-1)),o("div",Hw,[o("button",{onClick:x[0]||(x[0]=$=>E()),class:"btn-action btn-primary-action"},[...x[2]||(x[2]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouveau Membre",-1)])])])])]),o("div",zw,[o("div",Kw,[o("div",Ww,[x[5]||(x[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-users"})],-1)),o("div",Qw,[x[4]||(x[4]=o("div",{class:"stat-label"},"Total Membres",-1)),o("div",Yw,[o("span",null,j(e.value.length),1)])])]),x[6]||(x[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-check-circle"}),o("span",null,"Dans l'organigramme")],-1))]),o("div",Jw,[o("div",Xw,[x[8]||(x[8]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-user-tie"})],-1)),o("div",Zw,[x[7]||(x[7]=o("div",{class:"stat-label"},"Avec Photo",-1)),o("div",e2,[o("span",null,j(d.value),1)])])]),o("div",t2,[x[9]||(x[9]=o("i",{class:"fas fa-image"},null,-1)),o("span",null,j(f.value)+"% avec photo",1)])]),o("div",s2,[o("div",n2,[x[11]||(x[11]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-briefcase"})],-1)),o("div",r2,[x[10]||(x[10]=o("div",{class:"stat-label"},"Rles Uniques",-1)),o("div",i2,[o("span",null,j(m.value),1)])])]),x[12]||(x[12]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-tags"}),o("span",null,"Diffrents rles")],-1))])]),o("div",o2,[o("div",a2,[x[14]||(x[14]=o("div",null,[o("h2",{class:"section-title"},"Membres de l'quipe"),o("p",{class:"section-description"},"Grez les membres affichs dans l'organigramme")],-1)),o("div",l2,[o("button",{onClick:x[1]||(x[1]=$=>E()),class:"btn-icon-text"},[...x[13]||(x[13]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),n.value?(V(),F("div",u2,[...x[15]||(x[15]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):e.value.length===0?(V(),F("div",c2,[...x[16]||(x[16]=[o("i",{class:"fas fa-users"},null,-1),o("p",null,"Aucun membre dans l'organigramme. Ajoutez-en un pour commencer !",-1)])])):(V(),F("div",d2,[(V(!0),F(we,null,Ye(c.value,$=>(V(),F("div",{key:$.id,class:"member-card-modern"},[o("div",h2,[o("div",f2,[$.photo?(V(),F("img",{key:0,src:$.photo,alt:$.name,class:"member-avatar-large"},null,8,p2)):(V(),F("div",m2,[...x[17]||(x[17]=[o("i",{class:"fas fa-user"},null,-1)])]))]),o("div",g2,[o("h3",v2,j($.name),1),o("div",_2,[x[18]||(x[18]=o("i",{class:"fas fa-briefcase"},null,-1)),re(" "+j($.role||"Rle non dfini"),1)])])]),$.description?(V(),F("div",y2,j($.description),1)):he("",!0),o("div",E2,[o("button",{onClick:z=>E($),class:"btn-card-action"},[...x[19]||(x[19]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,b2),o("button",{onClick:z=>M($.id),class:"btn-card-action danger"},[...x[20]||(x[20]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,A2)])]))),128))]))]),r.value?(V(),Ue(Bw,{key:0,member:i.value,ranks:s.value,onClose:S,onSave:k},null,8,["member","ranks"])):he("",!0)]))}},I2=Le(T2,[["__scopeId","data-v-39e6deb2"]]);function Vn(){const t=it(),e=S=>{if(!S)return"-";const k=S.toDate?S.toDate():new Date(S);return new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)},s=S=>{if(!S)return"";const k=S.toDate?S.toDate():new Date(S),M=k.getFullYear(),L=String(k.getMonth()+1).padStart(2,"0"),x=String(k.getDate()).padStart(2,"0");return`${M}-${L}-${x}`},n=S=>{if(!S)return"";const k=S.toDate?S.toDate():new Date(S),M=k.getFullYear(),L=String(k.getMonth()+1).padStart(2,"0"),x=String(k.getDate()).padStart(2,"0"),$=String(k.getHours()).padStart(2,"0"),z=String(k.getMinutes()).padStart(2,"0");return`${M}-${L}-${x}T${$}:${z}`},r=S=>S instanceof Date?tt.fromDate(S):typeof S=="string"?tt.fromDate(new Date(S)):tt.now(),i=async(S,k=null)=>{try{let M=Ge(t,S);return k&&(M=Vo(M,Do(k))),(await an(M)).docs.map(x=>({id:x.id,...x.data()}))}catch(M){return console.error(`Erreur lors du chargement de ${S}:`,M),[]}},a=async(S,k)=>{try{const M=qt(t,S,k),L=await pa(M);return L.exists()?{id:L.id,...L.data()}:null}catch(M){return console.error(`Erreur lors de la rcupration de ${S}/${k}:`,M),null}};return{db:t,formatDate:e,formatDateInput:s,formatDateTimeLocal:n,toTimestamp:r,getAll:i,getById:a,create:async(S,k)=>{try{const M={...k,createdAt:Yi(),updatedAt:Yi()};return(await Mo(Ge(t,S),M)).id}catch(M){throw console.error(`Erreur lors de la cration dans ${S}:`,M),M}},update:async(S,k,M)=>{try{const L={...M,updatedAt:Yi()};await xo(qt(t,S,k),L)}catch(L){throw console.error(`Erreur lors de la mise  jour de ${S}/${k}:`,L),L}},remove:async(S,k)=>{try{await No(qt(t,S,k))}catch(M){throw console.error(`Erreur lors de la suppression de ${S}/${k}:`,M),M}},getAllEmployees:async()=>i("employees","name"),getEmployeeById:async S=>S?a("employees",S):null,getAllRanks:async()=>i("ranks","name"),getRankById:async S=>S?a("ranks",S):null,onSnapshot:Mt,collection:S=>Ge(t,S),query:Vo,orderBy:Do,Timestamp:tt,serverTimestamp:Yi}}const w2={class:"modal-container"},C2={class:"modal-header"},S2={class:"modal-header-content"},R2={class:"modal-subtitle"},P2={class:"form-grid"},k2={class:"form-group"},V2={class:"form-group"},D2=["value"],x2={class:"form-group"},N2={class:"form-group full-width"},M2={class:"modal-footer"},$2={type:"submit",class:"btn btn-primary"},O2={__name:"SaleModal",props:{sale:Object,employees:Array},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,{formatDateTimeLocal:r}=Vn(),i=ne({date:"",employeeId:"",amount:0,description:""});es(()=>s.sale,u=>{u?i.value={date:r(u.date),employeeId:u.employeeId||"",amount:u.amount||0,description:u.description||""}:i.value={date:r(new Date),employeeId:"",amount:0,description:""}},{immediate:!0});const a=()=>{n("save",i.value)};return(u,c)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:c[6]||(c[6]=He(d=>u.$emit("close"),["self"]))},[o("div",w2,[o("div",C2,[o("div",S2,[c[7]||(c[7]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-money-bill-wave"})],-1)),o("div",null,[o("h2",null,j(t.sale?"Modifier une Vente":"Ajouter une Vente"),1),o("p",R2,j(t.sale?"Modifiez les informations de la vente":"Enregistrez une nouvelle vente"),1)])]),o("button",{class:"modal-close",onClick:c[0]||(c[0]=d=>u.$emit("close")),"aria-label":"Fermer"},[...c[8]||(c[8]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(a,["prevent"]),class:"modal-body"},[o("div",P2,[o("div",k2,[c[9]||(c[9]=o("label",{for:"sale-date"},[o("i",{class:"fas fa-calendar-alt"}),re(" Date ")],-1)),Ie(o("input",{type:"datetime-local",id:"sale-date","onUpdate:modelValue":c[1]||(c[1]=d=>i.value.date=d),required:""},null,512),[[et,i.value.date]])]),o("div",V2,[c[11]||(c[11]=o("label",{for:"sale-employee"},[o("i",{class:"fas fa-user-tie"}),re(" Employ ")],-1)),Ie(o("select",{id:"sale-employee","onUpdate:modelValue":c[2]||(c[2]=d=>i.value.employeeId=d),required:""},[c[10]||(c[10]=o("option",{value:""},"Slectionner un employ",-1)),(V(!0),F(we,null,Ye(t.employees,d=>(V(),F("option",{key:d.id,value:d.id},j(d.name),9,D2))),128))],512),[[Zn,i.value.employeeId]])]),o("div",x2,[c[12]||(c[12]=o("label",{for:"sale-amount"},[o("i",{class:"fas fa-euro-sign"}),re(" Montant () ")],-1)),Ie(o("input",{type:"number",id:"sale-amount","onUpdate:modelValue":c[3]||(c[3]=d=>i.value.amount=d),step:"0.01",min:"0",required:"",placeholder:"0.00"},null,512),[[et,i.value.amount,void 0,{number:!0}]])]),o("div",N2,[c[13]||(c[13]=o("label",{for:"sale-description"},[o("i",{class:"fas fa-align-left"}),re(" Description (optionnel) ")],-1)),Ie(o("textarea",{id:"sale-description","onUpdate:modelValue":c[4]||(c[4]=d=>i.value.description=d),rows:"3",placeholder:"Dtails de la vente..."},null,512),[[et,i.value.description]])])]),o("div",M2,[o("button",{type:"button",class:"btn btn-secondary",onClick:c[5]||(c[5]=d=>u.$emit("close"))},[...c[14]||(c[14]=[o("i",{class:"fas fa-times"},null,-1),re(" Annuler ",-1)])]),o("button",$2,[c[15]||(c[15]=o("i",{class:"fas fa-check"},null,-1)),re(" "+j(t.sale?"Modifier":"Ajouter"),1)])])],32)])])]))}},F2=Le(O2,[["__scopeId","data-v-29e02259"]]);const L2={class:"modal-container"},U2={class:"modal-header"},B2={class:"modal-header-content"},j2={class:"modal-subtitle"},q2={class:"form-grid"},G2={class:"form-group"},H2=["value"],z2={class:"form-group"},K2={class:"form-group"},W2={class:"form-group full-width"},Q2={class:"modal-footer"},Y2={type:"submit",class:"btn btn-primary"},J2={__name:"BonusModal",props:{bonus:Object,employees:Array},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,{formatDateInput:r}=Vn(),i=ne({employeeId:"",amount:0,date:"",description:""});es(()=>s.bonus,u=>{u?i.value={employeeId:u.employeeId||"",amount:u.amount||0,date:r(u.date),description:u.description||""}:i.value={employeeId:"",amount:0,date:r(new Date),description:""}},{immediate:!0});const a=()=>{n("save",i.value)};return(u,c)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:c[6]||(c[6]=He(d=>u.$emit("close"),["self"]))},[o("div",L2,[o("div",U2,[o("div",B2,[c[7]||(c[7]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-gift"})],-1)),o("div",null,[o("h2",null,j(t.bonus?"Modifier une Prime":"Ajouter une Prime"),1),o("p",j2,j(t.bonus?"Modifiez les informations de la prime":"Attribuez une prime  un employ"),1)])]),o("button",{class:"modal-close",onClick:c[0]||(c[0]=d=>u.$emit("close")),"aria-label":"Fermer"},[...c[8]||(c[8]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(a,["prevent"]),class:"modal-body"},[o("div",q2,[o("div",G2,[c[10]||(c[10]=o("label",{for:"bonus-employee"},[o("i",{class:"fas fa-user-tie"}),re(" Employ ")],-1)),Ie(o("select",{id:"bonus-employee","onUpdate:modelValue":c[1]||(c[1]=d=>i.value.employeeId=d),required:""},[c[9]||(c[9]=o("option",{value:""},"Slectionner un employ",-1)),(V(!0),F(we,null,Ye(t.employees,d=>(V(),F("option",{key:d.id,value:d.id},j(d.name),9,H2))),128))],512),[[Zn,i.value.employeeId]])]),o("div",z2,[c[11]||(c[11]=o("label",{for:"bonus-amount"},[o("i",{class:"fas fa-euro-sign"}),re(" Montant de la prime () ")],-1)),Ie(o("input",{type:"number",id:"bonus-amount","onUpdate:modelValue":c[2]||(c[2]=d=>i.value.amount=d),step:"0.01",min:"0",required:"",placeholder:"0.00"},null,512),[[et,i.value.amount,void 0,{number:!0}]])]),o("div",K2,[c[12]||(c[12]=o("label",{for:"bonus-date"},[o("i",{class:"fas fa-calendar-alt"}),re(" Date ")],-1)),Ie(o("input",{type:"date",id:"bonus-date","onUpdate:modelValue":c[3]||(c[3]=d=>i.value.date=d),required:""},null,512),[[et,i.value.date]])]),o("div",W2,[c[13]||(c[13]=o("label",{for:"bonus-description"},[o("i",{class:"fas fa-align-left"}),re(" Raison de la prime (optionnel) ")],-1)),Ie(o("textarea",{id:"bonus-description","onUpdate:modelValue":c[4]||(c[4]=d=>i.value.description=d),rows:"3",placeholder:"Ex: Prime de performance, Prime exceptionnelle..."},null,512),[[et,i.value.description]])])]),o("div",Q2,[o("button",{type:"button",class:"btn btn-secondary",onClick:c[5]||(c[5]=d=>u.$emit("close"))},[...c[14]||(c[14]=[o("i",{class:"fas fa-times"},null,-1),re(" Annuler ",-1)])]),o("button",Y2,[c[15]||(c[15]=o("i",{class:"fas fa-check"},null,-1)),re(" "+j(t.bonus?"Modifier":"Ajouter"),1)])])],32)])])]))}},X2=Le(J2,[["__scopeId","data-v-00171223"]]);const Z2={class:"sales-dashboard"},eC={class:"dashboard-header"},tC={class:"header-content"},sC={class:"header-actions"},nC={class:"stats-grid"},rC={class:"stat-card-large primary"},iC={class:"stat-card-content"},oC={class:"stat-info"},aC={class:"stat-value-large"},lC={class:"stat-trend"},uC={class:"stat-card-large success"},cC={class:"stat-card-content"},dC={class:"stat-info"},hC={class:"stat-value-large"},fC={class:"stat-trend"},pC={class:"stat-card-large warning"},mC={class:"stat-card-content"},gC={class:"stat-info"},vC={class:"stat-value-large"},_C={class:"stat-trend"},yC={class:"stat-card-content"},EC={class:"stat-info"},bC={class:"stat-value-large"},AC={class:"stat-trend"},TC={class:"content-section"},IC={class:"section-header-modern"},wC={class:"section-actions"},CC={key:0,class:"loading-container"},SC={key:1,class:"empty-state-modern"},RC={key:2,class:"sales-grid"},PC={class:"sale-card-header"},kC={class:"sale-employee"},VC={class:"employee-info"},DC={class:"employee-name"},xC={class:"sale-date"},NC={class:"sale-amount-large"},MC={class:"sale-card-body"},$C={class:"sale-details"},OC={class:"detail-item"},FC={class:"sale-card-footer"},LC=["onClick"],UC=["onClick","title"],BC={class:"content-section"},jC={key:0,class:"loading-container"},qC={key:1,class:"empty-state-modern"},GC={key:2,class:"employees-grid"},HC={class:"employee-card-header"},zC={class:"employee-header-info"},KC={class:"employee-card-name"},WC={class:"employee-stats-mini"},QC={class:"stat-badge"},YC={key:0,class:"stat-badge bonus"},JC={class:"employee-card-body"},XC={class:"employee-metrics"},ZC={class:"metric-item"},eS={class:"metric-value primary"},tS={class:"metric-item"},sS={class:"metric-value success"},nS={key:0,class:"metric-item"},rS={class:"metric-value warning"},iS={key:1,class:"metric-item total"},oS={class:"metric-value total-value"},aS={key:0,class:"employee-sales-mini"},lS={class:"mini-sales-list"},uS={class:"mini-sale-date"},cS={class:"mini-sale-amount"},dS=["onClick"],hS={key:0,class:"content-section"},fS={key:0,class:"loading-container"},pS={key:1,class:"empty-state-modern"},mS={key:2,class:"bonuses-grid"},gS={class:"bonus-card-header"},vS={class:"bonus-amount-large"},_S={class:"bonus-card-body"},yS={class:"bonus-employee"},ES={class:"bonus-date"},bS={key:0,class:"bonus-description"},AS={class:"bonus-card-footer"},TS=["onClick"],IS=["onClick"],wS={class:"employee-sales-modal"},CS={class:"modal-header"},SS={class:"modal-subtitle"},RS={class:"modal-body"},PS={class:"employee-sales-summary"},kS={class:"summary-item"},VS={class:"summary-value"},DS={class:"summary-item"},xS={class:"summary-value success"},NS={key:0,class:"summary-item"},MS={class:"summary-value warning"},$S={key:0,class:"empty-sales-message"},OS={key:1,class:"sales-list-modal"},FS={class:"sale-item-info"},LS={class:"sale-item-date"},US={class:"sale-item-amount"},BS={class:"sale-item-commission"},jS={class:"sale-item-actions"},qS=["onClick"],GS=["onClick","title"],HS={__name:"SalesTab",setup(t){const{getAll:e,create:s,update:n,remove:r,formatDate:i,getAllEmployees:a,getAllRanks:u,toTimestamp:c}=Vn(),{hasPermission:d,user:f}=wi(),{confirm:m,alert:v}=kn(),E=ne([]),S=ne([]),k=ne([]),M=ne([]),L=ne(!0),x=ne(!1),$=ne(!1),z=ne(!1),ee=ne(null),N=ne(null),g=ne(null),y=D=>{if(localStorage.getItem("isSuperAdmin")==="true")return!0;try{return JSON.parse(localStorage.getItem("adminPermissions")||"{}")[D]===!0}catch{return!1}},T=ue(()=>E.value.reduce((D,A)=>D+parseFloat(A.amount||0),0)),w=ue(()=>E.value.length>0?T.value/E.value.length:0),b=ue(()=>{let D=0;return E.value.forEach(A=>{const G=Ke(A);D+=G}),D}),P=ue(()=>S.value.reduce((D,A)=>D+parseFloat(A.amount||0),0)),C=ue(()=>T.value-b.value-P.value),Ce=ue(()=>{const D={};return k.value.forEach(A=>{const G=E.value.filter(Z=>Z.employeeId===A.id),W=S.value.filter(Z=>Z.employeeId===A.id),J=M.value.find(Z=>Z.id===A.rankId);let H=0,te=0;G.forEach(Z=>{H+=parseFloat(Z.amount||0),J&&(te+=parseFloat(Z.amount||0)*parseFloat(J.percentage||0)/100)});const B=W.reduce((Z,fe)=>Z+parseFloat(fe.amount||0),0);(G.length>0||W.length>0)&&(D[A.id]={employeeId:A.id,employeeName:A.name,salesCount:G.length,bonusesCount:W.length,totalAmount:H,totalCommission:te,totalBonus:B,sales:G.sort((Z,fe)=>fe.date-Z.date)})}),Object.values(D)}),ot=D=>{const A=k.value.find(G=>G.id===D);return A?A.name:"Employ supprim"},Ke=D=>{const A=k.value.find(W=>W.id===D.employeeId);if(!A)return 0;const G=M.value.find(W=>W.id===A.rankId);return G?parseFloat(D.amount||0)*parseFloat(G.percentage||0)/100:0},ae=async()=>{try{L.value=!0,k.value=await a(),M.value=await u();const D=await e("sales");E.value=D.map(G=>{var W;return{...G,date:(W=G.date)!=null&&W.toDate?G.date.toDate():G.date instanceof Date?G.date:new Date(G.date)}}).sort((G,W)=>W.date-G.date);const A=await e("bonuses");S.value=A.map(G=>{var W;return{...G,date:(W=G.date)!=null&&W.toDate?G.date.toDate():G.date instanceof Date?G.date:new Date(G.date)}}).sort((G,W)=>W.date-G.date),L.value=!1}catch(D){console.error("Erreur lors du chargement:",D),L.value=!1}},ge=(D=null)=>{ee.value=D,x.value=!0},mt=()=>{x.value=!1,ee.value=null},Gt=async D=>{try{const A={...D,date:c(new Date(D.date)),amount:parseFloat(D.amount)};ee.value?await n("sales",ee.value.id,A):await s("sales",A),mt(),ae()}catch(A){console.error("Erreur lors de la sauvegarde:",A),await v("Erreur lors de la sauvegarde",{type:"danger"})}},Ht=D=>{if(!D)return!1;if(localStorage.getItem("isSuperAdmin")==="true")return!0;let G=!1,W=!1;try{const B=JSON.parse(localStorage.getItem("adminPermissions")||"{}");G=B.admins===!0,W=B.sales===!0}catch{G=!1,W=!1}if(G)return!0;const J=f.value;if(!J||!J.id)return!1;const H=String(J.id),te=k.value.find(B=>B.discordId&&B.discordId.trim()?String(B.discordId).trim()===H:!1);return!!((W||te)&&D.employeeId===(te==null?void 0:te.id))},Be=D=>Ht(D),We=D=>{if(!D)return!1;if(localStorage.getItem("isSuperAdmin")==="true")return!0;let G=!1;try{G=JSON.parse(localStorage.getItem("adminPermissions")||"{}").admins===!0}catch{G=!1}if(G)return!0;const W=f.value;if(!W||!W.id)return!1;const J=String(W.id),H=k.value.find(te=>te.discordId&&te.discordId.trim()?String(te.discordId).trim()===J:!1);return!!(H&&D.employeeId===H.id)},ts=()=>{const D=f.value;if(!D||!D.id)return!1;const A=String(D.id);return k.value.some(G=>G.discordId&&G.discordId.trim()?String(G.discordId).trim()===A:!1)},_t=()=>{const D=f.value;if(!D||!D.id)return null;const A=String(D.id);return k.value.find(G=>G.discordId&&G.discordId.trim()?String(G.discordId).trim()===A:!1)},St=D=>{if(!D||!D.sales)return[];if(localStorage.getItem("isSuperAdmin")==="true")return D.sales;try{if(JSON.parse(localStorage.getItem("adminPermissions")||"{}").sales===!0)return D.sales}catch{}const G=f.value;if(!G||!G.id)return[];const W=String(G.id),J=k.value.find(H=>H.discordId?String(H.discordId)===W:!1);return J&&D.employeeId===J.id?D.sales:[]},K=async D=>{const A=E.value.find(W=>W.id===D);if(!A){await v("Vente introuvable",{type:"danger"});return}if(!Be(A)){const W=localStorage.getItem("isSuperAdmin")==="true",J=f.value,H=J?String(J.id):null,te=k.value.find(Z=>Z.discordId&&Z.discordId.trim()?String(Z.discordId).trim()===H:!1);let B="Vous n'avez pas la permission de supprimer cette vente.";if(!W)try{JSON.parse(localStorage.getItem("adminPermissions")||"{}").sales||(te?B+=" Vous ne pouvez supprimer que vos propres ventes.":B+=" Votre compte employ n'est pas correctement configur avec Discord.")}catch{B+=" Erreur de configuration des permissions."}await v(B,{type:"danger",title:"Permission refuse"});return}if(await m("tes-vous sr de vouloir supprimer cette vente ?",{type:"danger",title:"Supprimer une vente",confirmText:"Supprimer"}))try{await r("sales",D),ae()}catch(W){console.error("Erreur lors de la suppression:",W),await v("Erreur lors de la suppression",{type:"danger"})}},oe=(D=null)=>{N.value=D,$.value=!0},ie=()=>{$.value=!1,N.value=null},ce=ue(()=>g.value?St(g.value):[]),ye=D=>{g.value=D,z.value=!0},Ve=()=>{z.value=!1,g.value=null},I=async D=>{await K(D),ae()},R=async D=>{try{const A={...D,date:c(new Date(D.date)),amount:parseFloat(D.amount)};N.value?await n("bonuses",N.value.id,A):await s("bonuses",A),ie(),ae()}catch(A){console.error("Erreur lors de la sauvegarde:",A),await v("Erreur lors de la sauvegarde",{type:"danger"})}},U=async D=>{if(await m("tes-vous sr de vouloir supprimer cette prime ?",{type:"danger",title:"Supprimer une prime",confirmText:"Supprimer"}))try{await r("bonuses",D),ae()}catch(G){console.error("Erreur lors de la suppression:",G),await v("Erreur lors de la suppression",{type:"danger"})}},Y=async()=>{if(!(!await m(" ATTENTION: Cette action va supprimer TOUTES les ventes et primes. Cette action est irrversible. Continuer ?",{type:"danger",title:"Rinitialiser les ventes",confirmText:"Continuer"})||!await m("tes-vous VRAIMENT sr ? Toutes les donnes de ventes seront perdues.",{type:"danger",title:"Confirmation finale",confirmText:"Oui, supprimer tout"})))try{L.value=!0;for(const H of E.value)await r("sales",H.id);for(const H of S.value)await r("bonuses",H.id);const G=E.value.map(H=>{var B;let te=H.date;return te&&!te.toDate&&!(te instanceof Date)&&(te=(B=H.date)!=null&&B.toDate?H.date.toDate():new Date(H.date)),{date:te,employeeId:H.employeeId,amount:H.amount,description:H.description||""}}),W=S.value.map(H=>{var B;let te=H.date;return te&&!te.toDate&&!(te instanceof Date)&&(te=(B=H.date)!=null&&B.toDate?H.date.toDate():new Date(H.date)),{date:te,employeeId:H.employeeId,amount:H.amount,description:H.description||""}}),J={period:new Date().toISOString(),totalSales:T.value,totalCommissions:b.value,totalBonuses:P.value,salesCount:E.value.length,bonusesCount:S.value.length,sales:G,bonuses:W,archivedAt:new Date};await s("salesHistory",J),ae(),await v("Ventes rinitialises avec succs. Les donnes ont t archives dans l'historique.",{type:"success",title:"Succs"})}catch(G){console.error("Erreur lors de la rinitialisation:",G),await v("Erreur lors de la rinitialisation",{type:"danger"}),L.value=!1}};return Ct(()=>{ae();const D=it();Mt(Ge(D,"sales"),()=>ae()),Mt(Ge(D,"bonuses"),()=>ae()),Mt(Ge(D,"employees"),()=>ae()),Mt(Ge(D,"ranks"),()=>ae())}),(D,A)=>{var G,W,J,H,te;return V(),F("div",Z2,[o("div",eC,[o("div",tC,[A[5]||(A[5]=o("div",null,[o("h1",{class:"dashboard-title"},"Tableau de Bord des Ventes"),o("p",{class:"dashboard-subtitle"},"Grez vos ventes et suivez vos performances")],-1)),o("div",sC,[o("button",{onClick:A[0]||(A[0]=B=>ge()),class:"btn-action btn-primary-action"},[...A[3]||(A[3]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouvelle Vente",-1)])]),y("bonuses")?(V(),F("button",{key:0,onClick:A[1]||(A[1]=B=>oe()),class:"btn-action btn-secondary-action"},[...A[4]||(A[4]=[o("i",{class:"fas fa-gift"},null,-1),o("span",null,"Ajouter Prime",-1)])])):he("",!0)])])]),o("div",nC,[o("div",rC,[o("div",iC,[A[8]||(A[8]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-euro-sign"})],-1)),o("div",oC,[A[7]||(A[7]=o("div",{class:"stat-label"},"Chiffre d'Affaires",-1)),o("div",aC,[o("span",null,j(T.value.toFixed(2)),1),A[6]||(A[6]=o("span",{class:"currency"},"",-1))])])]),o("div",lC,[A[9]||(A[9]=o("i",{class:"fas fa-arrow-up"},null,-1)),o("span",null,j(E.value.length)+" ventes",1)])]),o("div",uC,[o("div",cC,[A[12]||(A[12]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-wallet"})],-1)),o("div",dC,[A[11]||(A[11]=o("div",{class:"stat-label"},"Salaires & Commissions",-1)),o("div",hC,[o("span",null,j(b.value.toFixed(2)),1),A[10]||(A[10]=o("span",{class:"currency"},"",-1))])])]),o("div",fC,[A[13]||(A[13]=o("i",{class:"fas fa-users"},null,-1)),o("span",null,j(Ce.value.length)+" employs",1)])]),o("div",pC,[o("div",mC,[A[16]||(A[16]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-gift"})],-1)),o("div",gC,[A[15]||(A[15]=o("div",{class:"stat-label"},"Primes Total",-1)),o("div",vC,[o("span",null,j(P.value.toFixed(2)),1),A[14]||(A[14]=o("span",{class:"currency"},"",-1))])])]),o("div",_C,[A[17]||(A[17]=o("i",{class:"fas fa-star"},null,-1)),o("span",null,j(S.value.length)+" primes",1)])]),o("div",{class:xe(["stat-card-large",C.value>=0?"info":"danger"])},[o("div",yC,[A[20]||(A[20]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-chart-line"})],-1)),o("div",EC,[A[19]||(A[19]=o("div",{class:"stat-label"},"Bnfices",-1)),o("div",bC,[o("span",null,j(C.value.toFixed(2)),1),A[18]||(A[18]=o("span",{class:"currency"},"",-1))])])]),o("div",AC,[A[21]||(A[21]=o("i",{class:"fas fa-percentage"},null,-1)),o("span",null,"Moy: "+j(w.value.toFixed(2))+"",1)])],2)]),o("div",TC,[o("div",IC,[A[23]||(A[23]=o("div",null,[o("h2",{class:"section-title"},"Ventes Rcentes"),o("p",{class:"section-description"},"Dernires transactions enregistres")],-1)),o("div",wC,[y("resetSales")?(V(),F("button",{key:0,onClick:Y,class:"btn-icon-text danger"},[...A[22]||(A[22]=[o("i",{class:"fas fa-redo"},null,-1),o("span",null,"Rinitialiser",-1)])])):he("",!0)])]),L.value?(V(),F("div",CC,[...A[24]||(A[24]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):E.value.length===0?(V(),F("div",SC,[A[26]||(A[26]=o("div",{class:"empty-icon"},[o("i",{class:"fas fa-shopping-cart"})],-1)),A[27]||(A[27]=o("h3",null,"Aucune vente enregistre",-1)),A[28]||(A[28]=o("p",null,"Commencez par ajouter votre premire vente",-1)),o("button",{onClick:A[2]||(A[2]=B=>ge()),class:"btn-action btn-primary-action"},[...A[25]||(A[25]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter une Vente",-1)])])])):(V(),F("div",RC,[(V(!0),F(we,null,Ye(E.value,B=>{var Z,fe;return V(),F("div",{key:B.id,class:"sale-card"},[o("div",PC,[o("div",kC,[A[29]||(A[29]=o("div",{class:"employee-avatar"},[o("i",{class:"fas fa-user"})],-1)),o("div",VC,[o("div",DC,j(ot(B.employeeId)),1),o("div",xC,j(pt(i)(B.date)),1)])]),o("div",NC,[o("span",null,j(parseFloat(B.amount).toFixed(2)),1),A[30]||(A[30]=o("span",{class:"currency-small"},"",-1))])]),o("div",MC,[o("div",$C,[o("div",OC,[A[32]||(A[32]=o("i",{class:"fas fa-percent"},null,-1)),o("span",null,[A[31]||(A[31]=re("Commission: ",-1)),o("strong",null,j(Ke(B).toFixed(2))+"",1)])])])]),o("div",FC,[We(B)?(V(),F("button",{key:0,onClick:me=>ge(B),class:"btn-card-action"},[...A[33]||(A[33]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,LC)):he("",!0),Be(B)?(V(),F("button",{key:1,onClick:me=>K(B.id),class:"btn-card-action danger",title:ts()&&((Z=_t())==null?void 0:Z.id)===B.employeeId?"Supprimer votre vente":"Supprimer cette vente"},[A[34]||(A[34]=o("i",{class:"fas fa-trash"},null,-1)),o("span",null,j(ts()&&((fe=_t())==null?void 0:fe.id)===B.employeeId?"Supprimer (vtre)":"Supprimer"),1)],8,UC)):he("",!0)])])}),128))]))]),o("div",BC,[A[50]||(A[50]=o("div",{class:"section-header-modern"},[o("div",null,[o("h2",{class:"section-title"},"Performance par Employ"),o("p",{class:"section-description"},"Dtails des ventes et commissions par employ")])],-1)),L.value?(V(),F("div",jC,[...A[35]||(A[35]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement...",-1)])])):Ce.value.length===0?(V(),F("div",qC,[...A[36]||(A[36]=[o("div",{class:"empty-icon"},[o("i",{class:"fas fa-users"})],-1),o("h3",null,"Aucun employ avec des ventes",-1)])])):(V(),F("div",GC,[(V(!0),F(we,null,Ye(Ce.value,B=>(V(),F("div",{key:B.employeeId,class:"employee-card"},[o("div",HC,[A[39]||(A[39]=o("div",{class:"employee-avatar-large"},[o("i",{class:"fas fa-user-circle"})],-1)),o("div",zC,[o("h3",KC,j(B.employeeName),1),o("div",WC,[o("span",QC,[A[37]||(A[37]=o("i",{class:"fas fa-shopping-cart"},null,-1)),re(" "+j(B.salesCount)+" ventes ",1)]),B.bonusesCount>0?(V(),F("span",YC,[A[38]||(A[38]=o("i",{class:"fas fa-gift"},null,-1)),re(" "+j(B.bonusesCount)+" primes ",1)])):he("",!0)])])]),o("div",JC,[o("div",XC,[o("div",ZC,[A[41]||(A[41]=o("div",{class:"metric-label"},"Chiffre d'Affaires",-1)),o("div",eS,[o("span",null,j(B.totalAmount.toFixed(2)),1),A[40]||(A[40]=o("span",{class:"currency-small"},"",-1))])]),o("div",tS,[A[43]||(A[43]=o("div",{class:"metric-label"},"Salaire",-1)),o("div",sS,[o("span",null,j(B.totalCommission.toFixed(2)),1),A[42]||(A[42]=o("span",{class:"currency-small"},"",-1))])]),B.totalBonus>0?(V(),F("div",nS,[A[45]||(A[45]=o("div",{class:"metric-label"},"Primes",-1)),o("div",rS,[o("span",null,j(B.totalBonus.toFixed(2)),1),A[44]||(A[44]=o("span",{class:"currency-small"},"",-1))])])):he("",!0),B.totalBonus>0?(V(),F("div",iS,[A[47]||(A[47]=o("div",{class:"metric-label"},"Total",-1)),o("div",oS,[o("span",null,j((B.totalCommission+B.totalBonus).toFixed(2)),1),A[46]||(A[46]=o("span",{class:"currency-small"},"",-1))])])):he("",!0)]),B.sales.length>0?(V(),F("div",aS,[A[49]||(A[49]=o("div",{class:"mini-sales-header"},[o("span",null,"Dernires ventes")],-1)),o("div",lS,[(V(!0),F(we,null,Ye(B.sales.slice(0,3),Z=>(V(),F("div",{key:Z.id,class:"mini-sale-item"},[o("span",uS,j(pt(i)(Z.date)),1),o("span",cS,j(parseFloat(Z.amount).toFixed(2))+"",1)]))),128)),o("button",{onClick:Z=>ye(B),class:"mini-sale-more"},[...A[48]||(A[48]=[o("i",{class:"fas fa-eye"},null,-1),re(" Voir toutes les ventes ",-1)])],8,dS)])])):he("",!0)])]))),128))]))]),y("bonuses")||y("sales")?(V(),F("div",hS,[A[60]||(A[60]=o("div",{class:"section-header-modern"},[o("div",null,[o("h2",{class:"section-title"},"Primes Attribues"),o("p",{class:"section-description"},"Historique des primes distribues")])],-1)),L.value?(V(),F("div",fS,[...A[51]||(A[51]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement...",-1)])])):S.value.length===0?(V(),F("div",pS,[...A[52]||(A[52]=[o("div",{class:"empty-icon"},[o("i",{class:"fas fa-gift"})],-1),o("h3",null,"Aucune prime enregistre",-1)])])):(V(),F("div",mS,[(V(!0),F(we,null,Ye(S.value,B=>(V(),F("div",{key:B.id,class:"bonus-card"},[o("div",gS,[A[54]||(A[54]=o("div",{class:"bonus-icon"},[o("i",{class:"fas fa-gift"})],-1)),o("div",vS,[o("span",null,j(parseFloat(B.amount).toFixed(2)),1),A[53]||(A[53]=o("span",{class:"currency-small"},"",-1))])]),o("div",_S,[o("div",yS,[A[55]||(A[55]=o("i",{class:"fas fa-user"},null,-1)),o("span",null,j(ot(B.employeeId)),1)]),o("div",ES,[A[56]||(A[56]=o("i",{class:"fas fa-calendar"},null,-1)),o("span",null,j(pt(i)(B.date)),1)]),B.description?(V(),F("div",bS,[A[57]||(A[57]=o("i",{class:"fas fa-info-circle"},null,-1)),o("span",null,j(B.description),1)])):he("",!0)]),o("div",AS,[o("button",{onClick:Z=>oe(B),class:"btn-card-action"},[...A[58]||(A[58]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,TS),o("button",{onClick:Z=>U(B.id),class:"btn-card-action danger"},[...A[59]||(A[59]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,IS)])]))),128))]))])):he("",!0),x.value?(V(),Ue(F2,{key:1,sale:ee.value,employees:k.value,onClose:mt,onSave:Gt},null,8,["sale","employees"])):he("",!0),$.value?(V(),Ue(X2,{key:2,bonus:N.value,employees:k.value,onClose:ie,onSave:R},null,8,["bonus","employees"])):he("",!0),z.value?(V(),F("div",{key:3,class:"modal-overlay",onClick:He(Ve,["self"])},[o("div",wS,[o("div",CS,[o("div",null,[A[61]||(A[61]=o("h2",{class:"modal-title"},"Toutes les ventes",-1)),o("p",SS,j((G=g.value)==null?void 0:G.employeeName),1)]),o("button",{onClick:Ve,class:"modal-close"},[...A[62]||(A[62]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("div",RS,[o("div",PS,[o("div",kS,[A[63]||(A[63]=o("span",{class:"summary-label"},"Total CA:",-1)),o("span",VS,j((W=g.value)==null?void 0:W.totalAmount.toFixed(2))+"",1)]),o("div",DS,[A[64]||(A[64]=o("span",{class:"summary-label"},"Total Salaire:",-1)),o("span",xS,j((J=g.value)==null?void 0:J.totalCommission.toFixed(2))+"",1)]),((H=g.value)==null?void 0:H.totalBonus)>0?(V(),F("div",NS,[A[65]||(A[65]=o("span",{class:"summary-label"},"Total Primes:",-1)),o("span",MS,j((te=g.value)==null?void 0:te.totalBonus.toFixed(2))+"",1)])):he("",!0)]),ce.value.length===0?(V(),F("div",$S,[...A[66]||(A[66]=[o("i",{class:"fas fa-lock"},null,-1),o("p",null,"Vous n'avez pas la permission de voir ces ventes.",-1)])])):(V(),F("div",OS,[(V(!0),F(we,null,Ye(ce.value,B=>{var Z;return V(),F("div",{key:B.id,class:"sale-item-modal"},[o("div",FS,[o("div",LS,j(pt(i)(B.date)),1),o("div",US,j(parseFloat(B.amount).toFixed(2))+"",1)]),o("div",BS,[A[67]||(A[67]=re(" Commission: ",-1)),o("strong",null,j(Ke(B).toFixed(2))+"",1)]),o("div",jS,[We(B)?(V(),F("button",{key:0,onClick:fe=>{ge(B),Ve()},class:"btn-small",title:"Modifier"},[...A[68]||(A[68]=[o("i",{class:"fas fa-edit"},null,-1)])],8,qS)):he("",!0),Be(B)?(V(),F("button",{key:1,onClick:fe=>I(B.id),class:"btn-small danger",title:ts()&&((Z=_t())==null?void 0:Z.id)===B.employeeId?"Supprimer votre vente":"Supprimer cette vente"},[...A[69]||(A[69]=[o("i",{class:"fas fa-trash"},null,-1)])],8,GS)):he("",!0)])])}),128))]))])])])):he("",!0)])}}},zS=Le(HS,[["__scopeId","data-v-6cd5e005"]]);const KS={class:"history-dashboard"},WS={key:0,class:"stats-grid"},QS={class:"stat-card-large primary"},YS={class:"stat-card-content"},JS={class:"stat-info"},XS={class:"stat-value-large"},ZS={class:"stat-card-large success"},eR={class:"stat-card-content"},tR={class:"stat-info"},sR={class:"stat-value-large"},nR={class:"stat-card-large info"},rR={class:"stat-card-content"},iR={class:"stat-info"},oR={class:"stat-value-large"},aR={class:"stat-card-content"},lR={class:"stat-info"},uR={class:"stat-value-large"},cR={class:"content-section"},dR={key:0,class:"loading-container"},hR={key:1,class:"empty-container"},fR={key:2,class:"history-grid-modern"},pR=["onClick"],mR={class:"card-header-modern"},gR={class:"card-info"},vR={class:"card-date"},_R={class:"history-stats-modern"},yR={class:"history-stat-item"},ER={class:"stat-content"},bR={class:"stat-value-small"},AR={class:"history-stat-item primary"},TR={class:"stat-content"},IR={class:"stat-value-small primary"},wR={class:"history-stat-item success"},CR={class:"stat-content"},SR={class:"stat-value-small success"},RR={class:"history-stat-item warning"},PR={class:"stat-content"},kR={class:"stat-value-small warning"},VR={class:"stat-content"},DR={class:"history-details-modal"},xR={class:"modal-header"},NR={class:"modal-subtitle"},MR={class:"modal-body"},$R={key:0,class:"empty-sales-message"},OR={key:1,class:"history-employees-grid"},FR={class:"employee-card-header"},LR={class:"employee-card-info"},UR={class:"employee-card-name"},BR={class:"employee-card-meta"},jR={class:"employee-card-metrics"},qR={class:"metric-item"},GR={class:"metric-value"},HR={class:"metric-item"},zR={class:"metric-value success"},KR={key:0,class:"metric-item"},WR={class:"metric-value warning"},QR={key:0,class:"employee-sales-list"},YR={class:"sales-list-content"},JR={class:"mini-sale-date"},XR={class:"mini-sale-amount"},ZR={__name:"HistoryTab",setup(t){const{getAll:e,formatDate:s,getAllEmployees:n,getAllRanks:r}=Vn(),i=ne([]),a=ne(!0),u=ne(!1),c=ne(null),d=ne([]),f=ne([]),m=ue(()=>i.value.reduce((N,g)=>N+parseFloat(g.totalSales||g.totalAmount||0),0)),v=ue(()=>i.value.reduce((N,g)=>N+parseFloat(g.totalCommissions||0),0)),E=ue(()=>i.value.reduce((N,g)=>N+parseFloat(g.totalBonuses||0),0)),S=ue(()=>m.value-v.value-E.value),k=N=>{const g=parseFloat(N.totalSales||N.totalAmount||0),y=parseFloat(N.totalCommissions||0),T=parseFloat(N.totalBonuses||0);return g-y-T},M=N=>{const g=k(N);return g<0?"danger":g>0?"success":""},L=ue(()=>{if(!c.value)return[];const N=c.value,g=N.sales||[],y=N.bonuses||[],T={};return d.value.forEach(w=>{const b=g.filter(ae=>ae.employeeId===w.id),P=y.filter(ae=>ae.employeeId===w.id),C=f.value.find(ae=>ae.id===w.rankId);let Ce=0,ot=0;b.forEach(ae=>{Ce+=parseFloat(ae.amount||0),C&&(ot+=parseFloat(ae.amount||0)*parseFloat(C.percentage||0)/100)});const Ke=P.reduce((ae,ge)=>ae+parseFloat(ge.amount||0),0);(b.length>0||P.length>0)&&(T[w.id]={employeeId:w.id,employeeName:w.name,salesCount:b.length,bonusesCount:P.length,totalAmount:Ce,totalCommission:ot,totalBonus:Ke,sales:b.map(ae=>{var ge;return{...ae,date:(ge=ae.date)!=null&&ge.toDate?ae.date.toDate():ae.date instanceof Date?ae.date:new Date(ae.date)}}).sort((ae,ge)=>{const mt=ae.date instanceof Date?ae.date:new Date(ae.date);return(ge.date instanceof Date?ge.date:new Date(ge.date))-mt})})}),Object.values(T)}),x=N=>{if(!N)return"Date inconnue";try{const g=N!=null&&N.toDate?N.toDate():N instanceof Date?N:new Date(N);return s(g)}catch{return"Date invalide"}},$=async N=>{c.value=N,d.value.length===0&&(d.value=await n(),f.value=await r()),u.value=!0},z=()=>{u.value=!1,c.value=null},ee=async()=>{try{a.value=!0;const N=await e("salesHistory");i.value=N.map(g=>{var y;return{...g,archivedAt:(y=g.archivedAt)!=null&&y.toDate?g.archivedAt.toDate():g.archivedAt instanceof Date?g.archivedAt:new Date(g.archivedAt)}}).sort((g,y)=>y.archivedAt-g.archivedAt),a.value=!1}catch(N){console.error("Erreur lors du chargement:",N),a.value=!1}};return Ct(()=>{ee();const N=it();Mt(Ge(N,"salesHistory"),()=>ee())}),(N,g)=>{var y;return V(),F("div",KS,[g[46]||(g[46]=o("div",{class:"dashboard-header"},[o("div",{class:"header-content"},[o("div",null,[o("h1",{class:"dashboard-title"},"Historique des Ventes"),o("p",{class:"dashboard-subtitle"},"Consultez les priodes archives")])])],-1)),!a.value&&i.value.length>0?(V(),F("div",WS,[o("div",QS,[o("div",YS,[g[1]||(g[1]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-archive"})],-1)),o("div",JS,[g[0]||(g[0]=o("div",{class:"stat-label"},"Priodes Archives",-1)),o("div",XS,[o("span",null,j(i.value.length),1)])])]),g[2]||(g[2]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-calendar"}),o("span",null,"Total archiv")],-1))]),o("div",ZS,[o("div",eR,[g[5]||(g[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-euro-sign"})],-1)),o("div",tR,[g[4]||(g[4]=o("div",{class:"stat-label"},"CA Total Archiv",-1)),o("div",sR,[o("span",null,j(m.value.toFixed(2)),1),g[3]||(g[3]=o("span",{class:"currency"},"",-1))])])]),g[6]||(g[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-chart-bar"}),o("span",null,"Toutes priodes")],-1))]),o("div",nR,[o("div",rR,[g[9]||(g[9]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-wallet"})],-1)),o("div",iR,[g[8]||(g[8]=o("div",{class:"stat-label"},"Salaires Total",-1)),o("div",oR,[o("span",null,j(v.value.toFixed(2)),1),g[7]||(g[7]=o("span",{class:"currency"},"",-1))])])]),g[10]||(g[10]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-users"}),o("span",null,"Total vers")],-1))]),o("div",{class:xe(["stat-card-large",S.value>=0?"warning":"danger"])},[o("div",aR,[g[13]||(g[13]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-chart-line"})],-1)),o("div",lR,[g[12]||(g[12]=o("div",{class:"stat-label"},"Bnfices Total",-1)),o("div",uR,[o("span",null,j(S.value.toFixed(2)),1),g[11]||(g[11]=o("span",{class:"currency"},"",-1))])])]),g[14]||(g[14]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-percentage"}),o("span",null,"Toutes priodes")],-1))],2)])):he("",!0),o("div",cR,[g[34]||(g[34]=o("div",{class:"section-header-modern"},[o("div",null,[o("h2",{class:"section-title"},"Archives des Priodes"),o("p",{class:"section-description"},"Consultez les statistiques des priodes archives")])],-1)),a.value?(V(),F("div",dR,[...g[15]||(g[15]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):i.value.length===0?(V(),F("div",hR,[...g[16]||(g[16]=[o("i",{class:"fas fa-archive"},null,-1),o("p",null,"Aucun historique disponible. Les priodes archives apparatront ici aprs une rinitialisation des ventes.",-1)])])):(V(),F("div",fR,[(V(!0),F(we,null,Ye(i.value,T=>{var w,b;return V(),F("div",{key:T.id,class:"history-card-modern clickable",onClick:P=>$(T)},[o("div",mR,[g[18]||(g[18]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-calendar-alt"})],-1)),o("div",gR,[g[17]||(g[17]=o("h3",{class:"card-title"},"Priode Archive",-1)),o("div",vR,j(pt(s)(T.archivedAt)),1)]),g[19]||(g[19]=o("div",{class:"card-action-icon"},[o("i",{class:"fas fa-eye"})],-1))]),o("div",_R,[o("div",yR,[g[21]||(g[21]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-shopping-cart"})],-1)),o("div",ER,[g[20]||(g[20]=o("div",{class:"stat-label-small"},"Nombre de ventes",-1)),o("div",bR,j(T.salesCount||0),1)])]),o("div",AR,[g[24]||(g[24]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-euro-sign"})],-1)),o("div",TR,[g[23]||(g[23]=o("div",{class:"stat-label-small"},"Chiffre d'Affaires",-1)),o("div",IR,[o("span",null,j((T.totalSales||T.totalAmount||0).toFixed(2)),1),g[22]||(g[22]=o("span",{class:"currency-small"},"",-1))])])]),o("div",wR,[g[27]||(g[27]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-wallet"})],-1)),o("div",CR,[g[26]||(g[26]=o("div",{class:"stat-label-small"},"Total Salaires",-1)),o("div",SR,[o("span",null,j(((w=T.totalCommissions)==null?void 0:w.toFixed(2))||"0.00"),1),g[25]||(g[25]=o("span",{class:"currency-small"},"",-1))])])]),o("div",RR,[g[30]||(g[30]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-gift"})],-1)),o("div",PR,[g[29]||(g[29]=o("div",{class:"stat-label-small"},"Total Primes",-1)),o("div",kR,[o("span",null,j(((b=T.totalBonuses)==null?void 0:b.toFixed(2))||"0.00"),1),g[28]||(g[28]=o("span",{class:"currency-small"},"",-1))])])]),o("div",{class:xe(["history-stat-item total",M(T)])},[g[33]||(g[33]=o("div",{class:"stat-icon-small"},[o("i",{class:"fas fa-chart-line"})],-1)),o("div",VR,[g[32]||(g[32]=o("div",{class:"stat-label-small"},"Bnfices",-1)),o("div",{class:xe(["stat-value-small total-value",M(T)])},[o("span",null,j(k(T).toFixed(2)),1),g[31]||(g[31]=o("span",{class:"currency-small"},"",-1))],2)])],2)])],8,pR)}),128))]))]),u.value?(V(),F("div",{key:1,class:"modal-overlay",onClick:He(z,["self"])},[o("div",DR,[o("div",xR,[o("div",null,[g[35]||(g[35]=o("h2",{class:"modal-title"},"Dtails de la Priode Archive",-1)),o("p",NR,j(pt(s)((y=c.value)==null?void 0:y.archivedAt)),1)]),o("button",{onClick:z,class:"modal-close"},[...g[36]||(g[36]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("div",MR,[L.value.length===0?(V(),F("div",$R,[...g[37]||(g[37]=[o("i",{class:"fas fa-info-circle"},null,-1),o("p",null,"Aucune donne dtaille disponible pour cette priode.",-1)])])):(V(),F("div",OR,[(V(!0),F(we,null,Ye(L.value,T=>(V(),F("div",{key:T.employeeId,class:"history-employee-card"},[o("div",FR,[g[38]||(g[38]=o("div",{class:"employee-card-icon"},[o("i",{class:"fas fa-user"})],-1)),o("div",LR,[o("h3",UR,j(T.employeeName),1),o("div",BR,j(T.salesCount)+" vente"+j(T.salesCount>1?"s":""),1)])]),o("div",jR,[o("div",qR,[g[40]||(g[40]=o("div",{class:"metric-label"},"Chiffre d'Affaires",-1)),o("div",GR,[o("span",null,j(T.totalAmount.toFixed(2)),1),g[39]||(g[39]=o("span",{class:"currency"},"",-1))])]),o("div",HR,[g[42]||(g[42]=o("div",{class:"metric-label"},"Salaire",-1)),o("div",zR,[o("span",null,j(T.totalCommission.toFixed(2)),1),g[41]||(g[41]=o("span",{class:"currency"},"",-1))])]),T.totalBonus>0?(V(),F("div",KR,[g[44]||(g[44]=o("div",{class:"metric-label"},"Primes",-1)),o("div",WR,[o("span",null,j(T.totalBonus.toFixed(2)),1),g[43]||(g[43]=o("span",{class:"currency"},"",-1))])])):he("",!0)]),T.sales&&T.sales.length>0?(V(),F("div",QR,[g[45]||(g[45]=o("div",{class:"sales-list-header"},[o("h4",null,"Ventes dtailles")],-1)),o("div",YR,[(V(!0),F(we,null,Ye(T.sales,w=>(V(),F("div",{key:w.id||w.date,class:"mini-sale-item"},[o("div",JR,j(x(w.date)),1),o("div",XR,j(parseFloat(w.amount||0).toFixed(2))+"",1)]))),128))])])):he("",!0)]))),128))]))])])])):he("",!0)])}}},e4=Le(ZR,[["__scopeId","data-v-2f844a30"]]);const t4={class:"modal-container"},s4={class:"modal-header"},n4={class:"modal-header-content"},r4={class:"modal-subtitle"},i4={class:"form-group"},o4={class:"form-group"},a4=["value"],l4={class:"form-group"},u4={class:"discord-id-selector"},c4=["value"],d4={class:"modal-footer"},h4={type:"submit",class:"btn btn-primary"},f4={__name:"EmployeeModal",props:{employee:Object,ranks:Array,admins:{type:Array,default:()=>[]}},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=ne({name:"",rankId:"",discordId:""}),i=ne(""),a=ne(!1);es(()=>s.employee,d=>{if(d)if(r.value={name:d.name||"",rankId:d.rankId||"",discordId:d.discordId||""},d.discordId){const f=s.admins.find(m=>m.discordId===d.discordId);f?(i.value=f.discordId,a.value=!1):(i.value="manual",a.value=!0)}else i.value="",a.value=!1;else r.value={name:"",rankId:"",discordId:""},i.value="",a.value=!1},{immediate:!0});const u=()=>{i.value==="manual"?(a.value=!0,r.value.discordId=""):i.value?(r.value.discordId=i.value,a.value=!1):(r.value.discordId="",a.value=!1)},c=()=>{n("save",r.value)};return(d,f)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:f[6]||(f[6]=He(m=>d.$emit("close"),["self"]))},[o("div",t4,[o("div",s4,[o("div",n4,[f[7]||(f[7]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-user-tie"})],-1)),o("div",null,[o("h2",null,j(t.employee?"Modifier un Employ":"Ajouter un Employ"),1),o("p",r4,j(t.employee?"Modifiez les informations de l'employ":"Ajoutez un nouvel employ  votre quipe"),1)])]),o("button",{class:"modal-close",onClick:f[0]||(f[0]=m=>d.$emit("close")),"aria-label":"Fermer"},[...f[8]||(f[8]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(c,["prevent"]),class:"modal-body"},[o("div",i4,[f[9]||(f[9]=o("label",{for:"employee-name"},[o("i",{class:"fas fa-user"}),re(" Nom ")],-1)),Ie(o("input",{type:"text",id:"employee-name","onUpdate:modelValue":f[1]||(f[1]=m=>r.value.name=m),required:"",placeholder:"Ex: Jean Dupont",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",o4,[f[11]||(f[11]=o("label",{for:"employee-rank"},[o("i",{class:"fas fa-star"}),re(" Grade ")],-1)),Ie(o("select",{id:"employee-rank","onUpdate:modelValue":f[2]||(f[2]=m=>r.value.rankId=m),required:""},[f[10]||(f[10]=o("option",{value:""},"Slectionner un grade",-1)),(V(!0),F(we,null,Ye(t.ranks,m=>(V(),F("option",{key:m.id,value:m.id},j(m.name),9,a4))),128))],512),[[Zn,r.value.rankId]])]),o("div",l4,[f[14]||(f[14]=o("label",{for:"employee-discord-id"},[o("i",{class:"fab fa-discord"}),re(" Discord ID (optionnel) ")],-1)),o("div",u4,[Ie(o("select",{id:"employee-discord-id-select","onUpdate:modelValue":f[3]||(f[3]=m=>i.value=m),onChange:u,class:"discord-select"},[f[12]||(f[12]=o("option",{value:""},"Slectionner un administrateur",-1)),(V(!0),F(we,null,Ye(t.admins,m=>(V(),F("option",{key:m.id,value:m.discordId},j(m.username||m.discordId||"Admin")+" ("+j(m.discordId)+") ",9,c4))),128)),f[13]||(f[13]=o("option",{value:"manual"},"Saisir manuellement",-1))],544),[[Zn,i.value]]),a.value?Ie((V(),F("input",{key:0,type:"text",id:"employee-discord-id","onUpdate:modelValue":f[4]||(f[4]=m=>r.value.discordId=m),placeholder:"Ex: 123456789012345678",autocomplete:"off",class:"discord-input"},null,512)),[[et,r.value.discordId]]):he("",!0)]),f[15]||(f[15]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),re(" Choisissez un administrateur ou saisissez l'ID Discord pour que l'employ puisse supprimer ses propres ventes ")],-1))]),o("div",d4,[o("button",{type:"button",class:"btn btn-secondary",onClick:f[5]||(f[5]=m=>d.$emit("close"))},[...f[16]||(f[16]=[o("i",{class:"fas fa-times"},null,-1),re(" Annuler ",-1)])]),o("button",h4,[f[17]||(f[17]=o("i",{class:"fas fa-check"},null,-1)),re(" "+j(t.employee?"Modifier":"Ajouter"),1)])])],32)])])]))}},p4=Le(f4,[["__scopeId","data-v-2a049d18"]]);const m4={class:"employees-dashboard"},g4={class:"dashboard-header"},v4={class:"header-content"},_4={class:"header-actions"},y4={class:"stats-grid"},E4={class:"stat-card-large primary"},b4={class:"stat-card-content"},A4={class:"stat-info"},T4={class:"stat-value-large"},I4={class:"stat-card-large success"},w4={class:"stat-card-content"},C4={class:"stat-info"},S4={class:"stat-value-large"},R4={class:"stat-card-large info"},P4={class:"stat-card-content"},k4={class:"stat-info"},V4={class:"stat-value-large"},D4={class:"stat-trend"},x4={class:"content-section"},N4={class:"section-header-modern"},M4={class:"section-actions"},$4={key:0,class:"loading-container"},O4={key:1,class:"empty-container"},F4={key:2,class:"employees-grid"},L4={class:"card-header-modern"},U4={class:"card-info"},B4={class:"card-title"},j4={class:"card-badge"},q4={key:0,class:"card-meta"},G4={class:"card-actions-modern"},H4=["onClick"],z4=["onClick"],K4={__name:"EmployeesTab",setup(t){const{getAll:e,create:s,update:n,remove:r,getAllRanks:i}=Vn(),a=ne([]),u=ne([]),c=ne([]),d=ne(!0),f=ne(!1),m=ne(null),{confirm:v,alert:E}=kn(),S=g=>{const y=u.value.find(T=>T.id===g);return y?y.name:"Aucun"},k=ue(()=>new Set(a.value.map(y=>y.rankId).filter(Boolean)).size),M=ue(()=>a.value.filter(g=>g.discordId).length),L=ue(()=>a.value.length===0?0:Math.round(M.value/a.value.length*100)),x=async()=>{try{d.value=!0,a.value=await e("employees","name"),u.value=await i(),c.value=await e("admins"),d.value=!1}catch(g){console.error("Erreur lors du chargement:",g),d.value=!1}},$=(g=null)=>{m.value=g,f.value=!0},z=()=>{f.value=!1,m.value=null},ee=async g=>{try{m.value?await n("employees",m.value.id,g):await s("employees",g),z(),x()}catch(y){console.error("Erreur lors de la sauvegarde:",y),await E("Erreur lors de la sauvegarde",{type:"danger"})}},N=async g=>{if(await v("tes-vous sr de vouloir supprimer cet employ ?",{type:"danger",title:"Supprimer un employ",confirmText:"Supprimer"}))try{await r("employees",g),x()}catch(T){console.error("Erreur lors de la suppression:",T),await E("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{x();const g=it();Mt(Ge(g,"employees"),()=>x()),Mt(Ge(g,"ranks"),()=>x())}),(g,y)=>(V(),F("div",m4,[o("div",g4,[o("div",v4,[y[3]||(y[3]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion des Employs"),o("p",{class:"dashboard-subtitle"},"Grez les employs et leurs grades")],-1)),o("div",_4,[o("button",{onClick:y[0]||(y[0]=T=>$()),class:"btn-action btn-primary-action"},[...y[2]||(y[2]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouvel Employ",-1)])])])])]),o("div",y4,[o("div",E4,[o("div",b4,[y[5]||(y[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-user-tie"})],-1)),o("div",A4,[y[4]||(y[4]=o("div",{class:"stat-label"},"Total Employs",-1)),o("div",T4,[o("span",null,j(a.value.length),1)])])]),y[6]||(y[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-users"}),o("span",null,"Enregistrs")],-1))]),o("div",I4,[o("div",w4,[y[8]||(y[8]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-star"})],-1)),o("div",C4,[y[7]||(y[7]=o("div",{class:"stat-label"},"Grades Uniques",-1)),o("div",S4,[o("span",null,j(k.value),1)])])]),y[9]||(y[9]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-tags"}),o("span",null,"Diffrents grades")],-1))]),o("div",R4,[o("div",P4,[y[11]||(y[11]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-id-card"})],-1)),o("div",k4,[y[10]||(y[10]=o("div",{class:"stat-label"},"Avec Discord ID",-1)),o("div",V4,[o("span",null,j(M.value),1)])])]),o("div",D4,[y[12]||(y[12]=o("i",{class:"fas fa-percentage"},null,-1)),o("span",null,j(L.value)+"% lis",1)])])]),o("div",x4,[o("div",N4,[y[14]||(y[14]=o("div",null,[o("h2",{class:"section-title"},"Liste des Employs"),o("p",{class:"section-description"},"Grez les employs et leurs informations")],-1)),o("div",M4,[o("button",{onClick:y[1]||(y[1]=T=>$()),class:"btn-icon-text"},[...y[13]||(y[13]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),d.value?(V(),F("div",$4,[...y[15]||(y[15]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):a.value.length===0?(V(),F("div",O4,[...y[16]||(y[16]=[o("i",{class:"fas fa-user-tie"},null,-1),o("p",null,"Aucun employ enregistr. Ajoutez-en un pour commencer !",-1)])])):(V(),F("div",F4,[(V(!0),F(we,null,Ye(a.value,T=>(V(),F("div",{key:T.id,class:"employee-card-modern"},[o("div",L4,[y[18]||(y[18]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-user-tie"})],-1)),o("div",U4,[o("h3",B4,j(T.name),1),o("div",j4,[y[17]||(y[17]=o("i",{class:"fas fa-star"},null,-1)),re(" "+j(S(T.rankId)),1)])])]),T.discordId?(V(),F("div",q4,[y[19]||(y[19]=o("i",{class:"fab fa-discord"},null,-1)),o("span",null,"Discord ID: "+j(T.discordId),1)])):he("",!0),o("div",G4,[o("button",{onClick:w=>$(T),class:"btn-card-action"},[...y[20]||(y[20]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,H4),o("button",{onClick:w=>N(T.id),class:"btn-card-action danger"},[...y[21]||(y[21]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,z4)])]))),128))]))]),f.value?(V(),Ue(p4,{key:0,employee:m.value,ranks:u.value,admins:c.value,onClose:z,onSave:ee},null,8,["employee","ranks","admins"])):he("",!0)]))}},W4=Le(K4,[["__scopeId","data-v-8a056627"]]);const Q4={class:"modal-container"},Y4={class:"modal-header"},J4={class:"modal-header-content"},X4={class:"modal-subtitle"},Z4={class:"form-group"},eP={class:"form-group"},tP={class:"form-group"},sP={class:"modal-footer"},nP={type:"submit",class:"btn btn-primary"},rP={__name:"RankModal",props:{rank:Object},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=ne({name:"",percentage:0,description:""});es(()=>s.rank,a=>{a?r.value={name:a.name||"",percentage:a.percentage||0,description:a.description||""}:r.value={name:"",percentage:0,description:""}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[5]||(u[5]=He(c=>a.$emit("close"),["self"]))},[o("div",Q4,[o("div",Y4,[o("div",J4,[u[6]||(u[6]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-star"})],-1)),o("div",null,[o("h2",null,j(t.rank?"Modifier un Grade":"Crer un Grade"),1),o("p",X4,j(t.rank?"Modifiez les informations du grade":"Crez un nouveau grade avec un pourcentage de commission"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[7]||(u[7]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",Z4,[u[8]||(u[8]=o("label",{for:"rank-name"},[o("i",{class:"fas fa-tag"}),re(" Nom du Grade ")],-1)),Ie(o("input",{type:"text",id:"rank-name","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.name=c),required:"",placeholder:"Ex: Serveur, Chef, Manager...",autocomplete:"off"},null,512),[[et,r.value.name]])]),o("div",eP,[u[9]||(u[9]=o("label",{for:"rank-percentage"},[o("i",{class:"fas fa-percent"}),re(" Pourcentage de Commission (%) ")],-1)),Ie(o("input",{type:"number",id:"rank-percentage","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.percentage=c),step:"0.01",min:"0",max:"100",required:"",placeholder:"Ex: 5.5"},null,512),[[et,r.value.percentage,void 0,{number:!0}]]),u[10]||(u[10]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),re(" Le pourcentage que les employs de ce grade gagneront sur chaque vente ")],-1))]),o("div",tP,[u[11]||(u[11]=o("label",{for:"rank-description"},[o("i",{class:"fas fa-align-left"}),re(" Description (optionnel) ")],-1)),Ie(o("textarea",{id:"rank-description","onUpdate:modelValue":u[3]||(u[3]=c=>r.value.description=c),rows:"3",placeholder:"Description du grade..."},null,512),[[et,r.value.description]])]),o("div",sP,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[4]||(u[4]=c=>a.$emit("close"))},[...u[12]||(u[12]=[o("i",{class:"fas fa-times"},null,-1),re(" Annuler ",-1)])]),o("button",nP,[u[13]||(u[13]=o("i",{class:"fas fa-check"},null,-1)),re(" "+j(t.rank?"Modifier":"Crer"),1)])])],32)])])]))}},iP=Le(rP,[["__scopeId","data-v-1ef96811"]]);const oP={class:"ranks-dashboard"},aP={class:"dashboard-header"},lP={class:"header-content"},uP={class:"header-actions"},cP={class:"stats-grid"},dP={class:"stat-card-large primary"},hP={class:"stat-card-content"},fP={class:"stat-info"},pP={class:"stat-value-large"},mP={class:"stat-card-large success"},gP={class:"stat-card-content"},vP={class:"stat-info"},_P={class:"stat-value-large"},yP={class:"stat-card-large info"},EP={class:"stat-card-content"},bP={class:"stat-info"},AP={class:"stat-value-large"},TP={class:"content-section"},IP={class:"section-header-modern"},wP={class:"section-actions"},CP={key:0,class:"loading-container"},SP={key:1,class:"empty-container"},RP={key:2,class:"ranks-grid"},PP={class:"card-header-modern"},kP={class:"card-info"},VP={class:"card-title"},DP={class:"card-commission"},xP={class:"commission-value"},NP={key:0,class:"card-description"},MP={class:"card-actions-modern"},$P=["onClick"],OP=["onClick"],FP={__name:"RanksTab",setup(t){const{getAll:e,create:s,update:n,remove:r}=Vn(),i=ne([]),a=ne(!0),u=ne(!1),c=ne(null),{confirm:d,alert:f}=kn(),m=ue(()=>i.value.length===0?0:i.value.reduce(($,z)=>$+parseFloat(z.percentage||0),0)/i.value.length),v=ue(()=>i.value.length===0?0:Math.max(...i.value.map(x=>parseFloat(x.percentage||0)))),E=async()=>{try{a.value=!0,i.value=await e("ranks","name"),a.value=!1}catch(x){console.error("Erreur lors du chargement:",x),a.value=!1}},S=(x=null)=>{c.value=x,u.value=!0},k=()=>{u.value=!1,c.value=null},M=async x=>{try{const $={...x,percentage:parseFloat(x.percentage)};c.value?await n("ranks",c.value.id,$):await s("ranks",$),k(),E()}catch($){console.error("Erreur lors de la sauvegarde:",$),await f("Erreur lors de la sauvegarde",{type:"danger"})}},L=async x=>{if(await d("tes-vous sr de vouloir supprimer ce grade ? Les employs avec ce grade devront tre rassigns.",{type:"warning",title:"Supprimer un grade",confirmText:"Supprimer"}))try{await r("ranks",x),E()}catch(z){console.error("Erreur lors de la suppression:",z),await f("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{E();const x=it();Mt(Ge(x,"ranks"),()=>E())}),(x,$)=>(V(),F("div",oP,[o("div",aP,[o("div",lP,[$[3]||($[3]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion des Grades"),o("p",{class:"dashboard-subtitle"},"Grez les grades et leurs commissions")],-1)),o("div",uP,[o("button",{onClick:$[0]||($[0]=z=>S()),class:"btn-action btn-primary-action"},[...$[2]||($[2]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouveau Grade",-1)])])])])]),o("div",cP,[o("div",dP,[o("div",hP,[$[5]||($[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-star"})],-1)),o("div",fP,[$[4]||($[4]=o("div",{class:"stat-label"},"Total Grades",-1)),o("div",pP,[o("span",null,j(i.value.length),1)])])]),$[6]||($[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-list"}),o("span",null,"Enregistrs")],-1))]),o("div",mP,[o("div",gP,[$[9]||($[9]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-percent"})],-1)),o("div",vP,[$[8]||($[8]=o("div",{class:"stat-label"},"Commission Moyenne",-1)),o("div",_P,[o("span",null,j(m.value.toFixed(2)),1),$[7]||($[7]=o("span",{class:"currency"},"%",-1))])])]),$[10]||($[10]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-chart-line"}),o("span",null,"Moyenne")],-1))]),o("div",yP,[o("div",EP,[$[13]||($[13]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-arrow-up"})],-1)),o("div",bP,[$[12]||($[12]=o("div",{class:"stat-label"},"Commission Max",-1)),o("div",AP,[o("span",null,j(v.value.toFixed(2)),1),$[11]||($[11]=o("span",{class:"currency"},"%",-1))])])]),$[14]||($[14]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-trophy"}),o("span",null,"Maximum")],-1))])]),o("div",TP,[o("div",IP,[$[16]||($[16]=o("div",null,[o("h2",{class:"section-title"},"Grades et Commissions"),o("p",{class:"section-description"},"Grez les grades disponibles pour les employs")],-1)),o("div",wP,[o("button",{onClick:$[1]||($[1]=z=>S()),class:"btn-icon-text"},[...$[15]||($[15]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])])]),a.value?(V(),F("div",CP,[...$[17]||($[17]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):i.value.length===0?(V(),F("div",SP,[...$[18]||($[18]=[o("i",{class:"fas fa-star"},null,-1),o("p",null,"Aucun grade enregistr. Crez-en un pour commencer !",-1)])])):(V(),F("div",RP,[(V(!0),F(we,null,Ye(i.value,z=>(V(),F("div",{key:z.id,class:"rank-card-modern"},[o("div",PP,[$[20]||($[20]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-star"})],-1)),o("div",kP,[o("h3",VP,j(z.name),1),o("div",DP,[o("span",xP,j(parseFloat(z.percentage).toFixed(2))+"%",1),$[19]||($[19]=o("span",{class:"commission-label"},"Commission",-1))])])]),z.description?(V(),F("div",NP,j(z.description),1)):he("",!0),o("div",MP,[o("button",{onClick:ee=>S(z),class:"btn-card-action"},[...$[21]||($[21]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,$P),o("button",{onClick:ee=>L(z.id),class:"btn-card-action danger"},[...$[22]||($[22]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,OP)])]))),128))]))]),u.value?(V(),Ue(iP,{key:0,rank:c.value,onClose:k,onSave:M},null,8,["rank"])):he("",!0)]))}},LP=Le(FP,[["__scopeId","data-v-2907b62b"]]);const UP={class:"modal-container"},BP={class:"modal-header"},jP={class:"modal-header-content"},qP={class:"modal-subtitle"},GP={class:"form-group"},HP={class:"form-group"},zP={class:"form-group"},KP={class:"permissions-grid"},WP={class:"permission-item"},QP={class:"permission-item"},YP={class:"permission-item"},JP={class:"permission-item"},XP={class:"permission-item"},ZP={class:"permission-item"},ek={class:"permission-item"},tk={class:"permission-item"},sk={class:"permission-item"},nk={class:"modal-footer"},rk={type:"submit",class:"btn btn-primary"},ik={__name:"AdminModal",props:{admin:Object},emits:["close","save"],setup(t,{emit:e}){const s=t,n=e,r=ne({discordId:"",username:"",permissions:{menu:!0,team:!0,sales:!0,history:!1,resetSales:!1,bonuses:!1,employees:!0,ranks:!0,admins:!1}});es(()=>s.admin,a=>{a?r.value={discordId:a.discordId||"",username:a.username||"",permissions:{...r.value.permissions,...a.permissions||{}}}:r.value={discordId:"",username:"",permissions:{menu:!0,team:!0,sales:!0,history:!1,resetSales:!1,bonuses:!1,employees:!0,ranks:!0,admins:!1}}},{immediate:!0});const i=()=>{n("save",r.value)};return(a,u)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"modal-overlay",onClick:u[13]||(u[13]=He(c=>a.$emit("close"),["self"]))},[o("div",UP,[o("div",BP,[o("div",jP,[u[14]||(u[14]=o("div",{class:"modal-icon"},[o("i",{class:"fas fa-shield-alt"})],-1)),o("div",null,[o("h2",null,j(t.admin?"Modifier un Administrateur":"Ajouter un Administrateur"),1),o("p",qP,j(t.admin?"Modifiez les permissions de l'administrateur":"Ajoutez un nouvel administrateur avec des permissions personnalises"),1)])]),o("button",{class:"modal-close",onClick:u[0]||(u[0]=c=>a.$emit("close")),"aria-label":"Fermer"},[...u[15]||(u[15]=[o("i",{class:"fas fa-times"},null,-1)])])]),o("form",{onSubmit:He(i,["prevent"]),class:"modal-body"},[o("div",GP,[u[16]||(u[16]=o("label",{for:"admin-discord-id"},[o("i",{class:"fab fa-discord"}),re(" Discord ID * ")],-1)),Ie(o("input",{type:"text",id:"admin-discord-id","onUpdate:modelValue":u[1]||(u[1]=c=>r.value.discordId=c),required:"",placeholder:"Ex: 123456789012345678",autocomplete:"off"},null,512),[[et,r.value.discordId]]),u[17]||(u[17]=o("small",{class:"form-hint"},[o("i",{class:"fas fa-info-circle"}),re(" L'ID Discord de l'utilisateur (visible dans le mode dveloppeur Discord) ")],-1))]),o("div",HP,[u[18]||(u[18]=o("label",{for:"admin-username"},[o("i",{class:"fas fa-user"}),re(" Nom d'utilisateur (optionnel) ")],-1)),Ie(o("input",{type:"text",id:"admin-username","onUpdate:modelValue":u[2]||(u[2]=c=>r.value.username=c),placeholder:"Ex: JohnDoe#1234",autocomplete:"off"},null,512),[[et,r.value.username]])]),o("div",zP,[u[28]||(u[28]=o("label",{class:"permissions-label"},[o("i",{class:"fas fa-key"}),re(" Permissions ")],-1)),o("div",KP,[o("label",WP,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[3]||(u[3]=c=>r.value.permissions.menu=c)},null,512),[[fs,r.value.permissions.menu]]),u[19]||(u[19]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-utensils"}),o("span",null,"Carte")],-1))]),o("label",QP,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[4]||(u[4]=c=>r.value.permissions.team=c)},null,512),[[fs,r.value.permissions.team]]),u[20]||(u[20]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-users"}),o("span",null,"quipe")],-1))]),o("label",YP,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[5]||(u[5]=c=>r.value.permissions.sales=c)},null,512),[[fs,r.value.permissions.sales]]),u[21]||(u[21]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-chart-line"}),o("span",null,"Ventes")],-1))]),o("label",JP,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[6]||(u[6]=c=>r.value.permissions.history=c)},null,512),[[fs,r.value.permissions.history]]),u[22]||(u[22]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-history"}),o("span",null,"Historique")],-1))]),o("label",XP,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[7]||(u[7]=c=>r.value.permissions.resetSales=c)},null,512),[[fs,r.value.permissions.resetSales]]),u[23]||(u[23]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-redo"}),o("span",null,"Rinit. Ventes")],-1))]),o("label",ZP,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[8]||(u[8]=c=>r.value.permissions.bonuses=c)},null,512),[[fs,r.value.permissions.bonuses]]),u[24]||(u[24]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-gift"}),o("span",null,"Primes")],-1))]),o("label",ek,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[9]||(u[9]=c=>r.value.permissions.employees=c)},null,512),[[fs,r.value.permissions.employees]]),u[25]||(u[25]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-user-tie"}),o("span",null,"Employs")],-1))]),o("label",tk,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[10]||(u[10]=c=>r.value.permissions.ranks=c)},null,512),[[fs,r.value.permissions.ranks]]),u[26]||(u[26]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-star"}),o("span",null,"Grades")],-1))]),o("label",sk,[Ie(o("input",{type:"checkbox","onUpdate:modelValue":u[11]||(u[11]=c=>r.value.permissions.admins=c)},null,512),[[fs,r.value.permissions.admins]]),u[27]||(u[27]=o("div",{class:"permission-content"},[o("i",{class:"fas fa-shield-alt"}),o("span",null,"Administrateurs")],-1))])])]),o("div",nk,[o("button",{type:"button",class:"btn btn-secondary",onClick:u[12]||(u[12]=c=>a.$emit("close"))},[...u[29]||(u[29]=[o("i",{class:"fas fa-times"},null,-1),re(" Annuler ",-1)])]),o("button",rk,[u[30]||(u[30]=o("i",{class:"fas fa-check"},null,-1)),re(" "+j(t.admin?"Modifier":"Ajouter"),1)])])],32)])])]))}},ok=Le(ik,[["__scopeId","data-v-c449a0e4"]]);const ak={class:"admins-dashboard"},lk={class:"dashboard-header"},uk={class:"header-content"},ck={class:"header-actions"},dk={class:"stats-grid"},hk={class:"stat-card-large primary"},fk={class:"stat-card-content"},pk={class:"stat-info"},mk={class:"stat-value-large"},gk={class:"stat-card-large success"},vk={class:"stat-card-content"},_k={class:"stat-info"},yk={class:"stat-value-large"},Ek={class:"stat-card-large info"},bk={class:"stat-card-content"},Ak={class:"stat-info"},Tk={class:"stat-value-large"},Ik={class:"content-section"},wk={class:"section-header-modern"},Ck={class:"section-actions"},Sk={key:0,class:"empty-container"},Rk={key:1,class:"loading-container"},Pk={key:2,class:"empty-container"},kk={key:3,class:"admins-grid"},Vk={class:"card-header-modern"},Dk={class:"card-info"},xk={class:"card-title"},Nk={class:"card-meta"},Mk={class:"permissions-section-modern"},$k={class:"permissions-grid-modern"},Ok={key:0,class:"permission-badge"},Fk={key:1,class:"permission-badge"},Lk={key:2,class:"permission-badge"},Uk={key:3,class:"permission-badge"},Bk={key:4,class:"permission-badge"},jk={key:5,class:"permission-badge"},qk={key:6,class:"permission-badge"},Gk={key:7,class:"permission-badge"},Hk={key:8,class:"permission-badge success"},zk={class:"card-actions-modern"},Kk=["onClick"],Wk=["onClick"],Qk={__name:"AdminsTab",setup(t){const{getAll:e,create:s,update:n,remove:r}=Vn(),i=ne([]),a=ne(!0),u=ne(!1),c=ne(null),{confirm:d,alert:f}=kn(),m=ue(()=>localStorage.getItem("isSuperAdmin")==="true"),v=ue(()=>JSON.parse(localStorage.getItem("adminPermissions")||"{}")),E=ue(()=>m.value||v.value.admins===!0),S=ue(()=>i.value.reduce((ee,N)=>{const g=N.permissions||{};return ee+Object.values(g).filter(Boolean).length},0)),k=ue(()=>i.value.filter(ee=>{const N=ee.permissions||{};return Object.values(N).every(y=>y===!0)}).length),M=async()=>{try{a.value=!0,i.value=await e("admins"),a.value=!1}catch(ee){console.error("Erreur lors du chargement:",ee),a.value=!1}},L=async(ee=null)=>{if(!E.value){await f("Vous n'avez pas la permission de grer les administrateurs.",{type:"warning"});return}c.value=ee,u.value=!0},x=()=>{u.value=!1,c.value=null},$=async ee=>{try{const N={discordId:String(ee.discordId),username:ee.username||null,isAdmin:!0,permissions:ee.permissions};c.value?await n("admins",String(c.value.id),N):await s("admins",N),x(),M()}catch(N){console.error("Erreur lors de la sauvegarde:",N),await f("Erreur lors de la sauvegarde",{type:"danger"})}},z=async ee=>{if(!E.value){await f("Vous n'avez pas la permission de supprimer des administrateurs.",{type:"warning"});return}if(await d("tes-vous sr de vouloir supprimer cet administrateur ?",{type:"danger",title:"Supprimer un administrateur",confirmText:"Supprimer"}))try{await r("admins",ee),M()}catch(g){console.error("Erreur lors de la suppression:",g),await f("Erreur lors de la suppression",{type:"danger"})}};return Ct(()=>{M();const ee=it();Mt(Ge(ee,"admins"),()=>M())}),(ee,N)=>(V(),F("div",ak,[o("div",lk,[o("div",uk,[N[3]||(N[3]=o("div",null,[o("h1",{class:"dashboard-title"},"Gestion des Administrateurs"),o("p",{class:"dashboard-subtitle"},"Grez les administrateurs et leurs permissions")],-1)),o("div",ck,[E.value?(V(),F("button",{key:0,onClick:N[0]||(N[0]=g=>L()),class:"btn-action btn-primary-action"},[...N[2]||(N[2]=[o("i",{class:"fas fa-plus-circle"},null,-1),o("span",null,"Nouvel Admin",-1)])])):he("",!0)])])]),o("div",dk,[o("div",hk,[o("div",fk,[N[5]||(N[5]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-user-shield"})],-1)),o("div",pk,[N[4]||(N[4]=o("div",{class:"stat-label"},"Total Admins",-1)),o("div",mk,[o("span",null,j(i.value.length),1)])])]),N[6]||(N[6]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-users"}),o("span",null,"Enregistrs")],-1))]),o("div",gk,[o("div",vk,[N[8]||(N[8]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-key"})],-1)),o("div",_k,[N[7]||(N[7]=o("div",{class:"stat-label"},"Permissions Actives",-1)),o("div",yk,[o("span",null,j(S.value),1)])])]),N[9]||(N[9]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-check-circle"}),o("span",null,"Au total")],-1))]),o("div",Ek,[o("div",bk,[N[11]||(N[11]=o("div",{class:"stat-icon-wrapper"},[o("i",{class:"fas fa-crown"})],-1)),o("div",Ak,[N[10]||(N[10]=o("div",{class:"stat-label"},"Super Admins",-1)),o("div",Tk,[o("span",null,j(k.value),1)])])]),N[12]||(N[12]=o("div",{class:"stat-trend"},[o("i",{class:"fas fa-star"}),o("span",null,"Accs complet")],-1))])]),o("div",Ik,[o("div",wk,[N[14]||(N[14]=o("div",null,[o("h2",{class:"section-title"},"Administrateurs"),o("p",{class:"section-description"},"Grez les administrateurs et leurs permissions")],-1)),o("div",Ck,[E.value?(V(),F("button",{key:0,onClick:N[1]||(N[1]=g=>L()),class:"btn-icon-text"},[...N[13]||(N[13]=[o("i",{class:"fas fa-plus"},null,-1),o("span",null,"Ajouter",-1)])])):he("",!0)])]),E.value?a.value?(V(),F("div",Rk,[...N[16]||(N[16]=[o("div",{class:"spinner"},null,-1),o("p",null,"Chargement des donnes...",-1)])])):i.value.length===0?(V(),F("div",Pk,[...N[17]||(N[17]=[o("i",{class:"fas fa-user-shield"},null,-1),o("p",null,"Aucun administrateur enregistr",-1)])])):(V(),F("div",kk,[(V(!0),F(we,null,Ye(i.value,g=>(V(),F("div",{key:g.id,class:"admin-card-modern"},[o("div",Vk,[N[19]||(N[19]=o("div",{class:"card-icon"},[o("i",{class:"fas fa-user-shield"})],-1)),o("div",Dk,[o("h3",xk,j(g.username||g.discordId||"Admin"),1),o("div",Nk,[N[18]||(N[18]=o("i",{class:"fab fa-discord"},null,-1)),o("span",null,j(g.discordId),1)])])]),o("div",Mk,[N[29]||(N[29]=o("div",{class:"permissions-label"},[o("i",{class:"fas fa-key"}),re(" Permissions ")],-1)),o("div",$k,[(g.permissions||{}).menu?(V(),F("span",Ok,[...N[20]||(N[20]=[o("i",{class:"fas fa-utensils"},null,-1),re(" Carte ",-1)])])):he("",!0),(g.permissions||{}).team?(V(),F("span",Fk,[...N[21]||(N[21]=[o("i",{class:"fas fa-users"},null,-1),re(" quipe ",-1)])])):he("",!0),(g.permissions||{}).sales?(V(),F("span",Lk,[...N[22]||(N[22]=[o("i",{class:"fas fa-chart-line"},null,-1),re(" Ventes ",-1)])])):he("",!0),(g.permissions||{}).history?(V(),F("span",Uk,[...N[23]||(N[23]=[o("i",{class:"fas fa-clock"},null,-1),re(" Historique ",-1)])])):he("",!0),(g.permissions||{}).resetSales?(V(),F("span",Bk,[...N[24]||(N[24]=[o("i",{class:"fas fa-redo"},null,-1),re(" Rinit. Ventes ",-1)])])):he("",!0),(g.permissions||{}).bonuses?(V(),F("span",jk,[...N[25]||(N[25]=[o("i",{class:"fas fa-gift"},null,-1),re(" Primes ",-1)])])):he("",!0),(g.permissions||{}).employees?(V(),F("span",qk,[...N[26]||(N[26]=[o("i",{class:"fas fa-user-tie"},null,-1),re(" Employs ",-1)])])):he("",!0),(g.permissions||{}).ranks?(V(),F("span",Gk,[...N[27]||(N[27]=[o("i",{class:"fas fa-star"},null,-1),re(" Grades ",-1)])])):he("",!0),(g.permissions||{}).admins?(V(),F("span",Hk,[...N[28]||(N[28]=[o("i",{class:"fas fa-crown"},null,-1),re(" Admins ",-1)])])):he("",!0)])]),o("div",zk,[o("button",{onClick:y=>L(g),class:"btn-card-action"},[...N[30]||(N[30]=[o("i",{class:"fas fa-edit"},null,-1),o("span",null,"Modifier",-1)])],8,Kk),o("button",{onClick:y=>z(g.id),class:"btn-card-action danger"},[...N[31]||(N[31]=[o("i",{class:"fas fa-trash"},null,-1),o("span",null,"Supprimer",-1)])],8,Wk)])]))),128))])):(V(),F("div",Sk,[...N[15]||(N[15]=[o("i",{class:"fas fa-lock"},null,-1),o("p",null,"Vous n'avez pas les permissions pour grer les administrateurs.",-1)])]))]),u.value&&E.value?(V(),Ue(ok,{key:0,admin:c.value,onClose:x,onSave:$},null,8,["admin"])):he("",!0)]))}},Yk=Le(Qk,[["__scopeId","data-v-defd981a"]]);const Jk={class:"confirm-container"},Xk={class:"confirm-title"},Zk={class:"confirm-message"},eV={class:"confirm-actions"},tV={__name:"ConfirmModal",props:{title:{type:String,default:"Confirmation"},message:{type:String,required:!0},confirmText:{type:String,default:"Confirmer"},cancelText:{type:String,default:"Annuler"},type:{type:String,default:"warning",validator:t=>["warning","danger","info","success"].includes(t)}},emits:["confirm","cancel"],setup(t,{emit:e}){const s=t,n=e,r={warning:"fas fa-exclamation-triangle",danger:"fas fa-exclamation-circle",info:"fas fa-info-circle",success:"fas fa-check-circle"},i=ue(()=>r[s.type]||r.warning),a=ue(()=>`icon-${s.type}`),u=ue(()=>s.type==="danger"?"fas fa-trash":(s.type==="success","fas fa-check")),c=ue(()=>s.type==="danger"?"btn-danger":s.type==="success"?"btn-success":"btn-primary"),d=()=>{n("confirm")},f=()=>{n("cancel")};return(m,v)=>(V(),Ue(Ls,{to:"body"},[o("div",{class:"confirm-overlay",onClick:He(f,["self"])},[o("div",Jk,[o("div",{class:xe(["confirm-icon",a.value])},[o("i",{class:xe(i.value)},null,2)],2),o("h3",Xk,j(t.title),1),o("p",Zk,j(t.message),1),o("div",eV,[t.cancelText?(V(),F("button",{key:0,onClick:f,class:"btn btn-cancel"},[v[0]||(v[0]=o("i",{class:"fas fa-times"},null,-1)),re(" "+j(t.cancelText),1)])):he("",!0),o("button",{onClick:d,class:xe(["btn btn-confirm",c.value])},[o("i",{class:xe(u.value)},null,2),re(" "+j(t.confirmText),1)],2)])])])]))}},sV=Le(tV,[["__scopeId","data-v-74b83c62"]]),nV={__name:"ConfirmDialog",setup(t){const{showConfirm:e,confirmConfig:s}=kn(),n=()=>{s.value.onConfirm&&s.value.onConfirm()},r=()=>{s.value.onCancel?s.value.onCancel():s.value.cancelText||s.value.onConfirm&&s.value.onConfirm()};return(i,a)=>pt(e)?(V(),Ue(sV,{key:0,title:pt(s).title,message:pt(s).message,confirmText:pt(s).confirmText,cancelText:pt(s).cancelText,type:pt(s).type,onConfirm:n,onCancel:r},null,8,["title","message","confirmText","cancelText","type"])):he("",!0)}};const rV={class:"admin-panel"},iV={class:"admin-main"},oV={class:"content-wrapper"},aV={__name:"AdminPanel",props:{user:Object},emits:["logout"],setup(t,{emit:e}){wi();const s=ne("menu"),n=ne(null),r=ne(!1),i=ue(()=>{const u={},c=localStorage.getItem("adminPermissions");if(c)try{return JSON.parse(c)}catch{return{}}return u}),a=u=>localStorage.getItem("isSuperAdmin")==="true"?!0:i.value[u]===!0;return es(()=>{var u;return(u=n.value)==null?void 0:u.collapsed},u=>{r.value=u||!1},{immediate:!0}),Ct(()=>{const u=["menu","team","sales","history","employees","ranks","admins"];for(const c of u)if(a(c)){s.value=c;break}}),(u,c)=>(V(),F("div",rV,[Xe(GT,{activeTab:s.value,permissions:i.value,user:t.user,onTabChange:c[0]||(c[0]=d=>s.value=d),onLogout:c[1]||(c[1]=d=>u.$emit("logout")),ref_key:"sidebarRef",ref:n},null,8,["activeTab","permissions","user"]),o("div",{class:xe(["admin-content",{"sidebar-collapsed":r.value}])},[Xe(YT,{activeTab:s.value},null,8,["activeTab"]),o("main",iV,[o("div",oV,[s.value==="menu"&&a("menu")?(V(),Ue(Cw,{key:0})):he("",!0),s.value==="team"&&a("team")?(V(),Ue(I2,{key:1})):he("",!0),s.value==="sales"&&a("sales")?(V(),Ue(zS,{key:2})):he("",!0),s.value==="history"&&a("history")?(V(),Ue(e4,{key:3})):he("",!0),s.value==="employees"&&a("employees")?(V(),Ue(W4,{key:4})):he("",!0),s.value==="ranks"&&a("ranks")?(V(),Ue(LP,{key:5})):he("",!0),s.value==="admins"&&a("admins")?(V(),Ue(Yk,{key:6})):he("",!0)])])],2),Xe(nV)]))}},lV=Le(aV,[["__scopeId","data-v-c281c530"]]);const uV={class:"admin-page"},cV={__name:"Admin",setup(t){const{user:e,isAdmin:s,checkAuth:n,loginWithDiscord:r,logout:i}=wi(),a=ne(!1);Ct(async()=>{const d=await n();a.value=d&&s.value});const u=()=>{r()},c=()=>{i(),a.value=!1};return(d,f)=>(V(),F("div",uV,[a.value?(V(),Ue(lV,{key:1,user:pt(e),onLogout:c},null,8,["user"])):(V(),Ue(wT,{key:0,onLogin:u}))]))}},dV=Le(cV,[["__scopeId","data-v-1999b6a0"]]),hV=[{path:"/",component:xh},{path:"/index.html",component:xh},{path:"/admin.html",component:dV}],fV=xy({history:dy(),routes:hV});Dm();A_(C_).use(fV).mount("#app");
